{"meta":{"version":1,"warehouse":"4.0.1"},"models":{"Asset":[{"_id":"themes/butterfly/source/css/index.styl","path":"css/index.styl","modified":1,"renderable":1},{"_id":"themes/butterfly/source/css/var.styl","path":"css/var.styl","modified":1,"renderable":1},{"_id":"themes/butterfly/source/js/main.js","path":"js/main.js","modified":1,"renderable":1},{"_id":"themes/butterfly/source/js/tw_cn.js","path":"js/tw_cn.js","modified":1,"renderable":1},{"_id":"themes/butterfly/source/js/utils.js","path":"js/utils.js","modified":1,"renderable":1},{"_id":"themes/butterfly/source/img/404.jpg","path":"img/404.jpg","modified":1,"renderable":1},{"_id":"themes/butterfly/source/img/avatar.png","path":"img/avatar.png","modified":1,"renderable":1},{"_id":"themes/butterfly/source/img/favicon.png","path":"img/favicon.png","modified":1,"renderable":1},{"_id":"themes/butterfly/source/img/friend_404.gif","path":"img/friend_404.gif","modified":1,"renderable":1},{"_id":"themes/butterfly/source/img/网站背景.jpeg","path":"img/网站背景.jpeg","modified":1,"renderable":1},{"_id":"themes/butterfly/source/js/search/local-search.js","path":"js/search/local-search.js","modified":1,"renderable":1},{"_id":"themes/butterfly/source/js/search/algolia.js","path":"js/search/algolia.js","modified":1,"renderable":1},{"_id":"source/img/AddRequestHeader.png","path":"img/AddRequestHeader.png","modified":1,"renderable":0},{"_id":"source/img/Eureka4项目启动.png","path":"img/Eureka4项目启动.png","modified":1,"renderable":0},{"_id":"source/img/Eureka启动成功界面.png","path":"img/Eureka启动成功界面.png","modified":1,"renderable":0},{"_id":"source/img/Eureka启动成功界面2.png","path":"img/Eureka启动成功界面2.png","modified":1,"renderable":0},{"_id":"source/img/Eureka注册中心.png","path":"img/Eureka注册中心.png","modified":1,"renderable":0},{"_id":"source/img/Eureka注册步骤.png","path":"img/Eureka注册步骤.png","modified":1,"renderable":0},{"_id":"source/img/Gateway网关.png","path":"img/Gateway网关.png","modified":1,"renderable":0},{"_id":"source/img/Github搜索项目技巧.png","path":"img/Github搜索项目技巧.png","modified":1,"renderable":0},{"_id":"source/img/Git工作流程.png","path":"img/Git工作流程.png","modified":1,"renderable":0},{"_id":"source/img/HttpClient.png","path":"img/HttpClient.png","modified":1,"renderable":0},{"_id":"source/img/IDEA多实例调试.png","path":"img/IDEA多实例调试.png","modified":1,"renderable":0},{"_id":"source/img/Interceptor源码跟踪.png","path":"img/Interceptor源码跟踪.png","modified":1,"renderable":0},{"_id":"source/img/Nacos启动.png","path":"img/Nacos启动.png","modified":1,"renderable":0},{"_id":"source/img/Nacos注册.png","path":"img/Nacos注册.png","modified":1,"renderable":0},{"_id":"source/img/Nacos注册中心.png","path":"img/Nacos注册中心.png","modified":1,"renderable":0},{"_id":"source/img/Nacos配置中心.png","path":"img/Nacos配置中心.png","modified":1,"renderable":0},{"_id":"source/img/Nacos集群.png","path":"img/Nacos集群.png","modified":1,"renderable":0},{"_id":"source/img/Ribbon负载均衡.png","path":"img/Ribbon负载均衡.png","modified":1,"renderable":0},{"_id":"source/img/Service3.png","path":"img/Service3.png","modified":1,"renderable":0},{"_id":"source/img/Services.png","path":"img/Services.png","modified":1,"renderable":0},{"_id":"source/img/Services2.png","path":"img/Services2.png","modified":1,"renderable":0},{"_id":"source/img/SpringCloud和SpringBoot的版本兼容关系.png","path":"img/SpringCloud和SpringBoot的版本兼容关系.png","modified":1,"renderable":0},{"_id":"source/img/SpringCloud常用组件.png","path":"img/SpringCloud常用组件.png","modified":1,"renderable":0},{"_id":"source/img/bootstrapyml.png","path":"img/bootstrapyml.png","modified":1,"renderable":0},{"_id":"source/img/dev.png","path":"img/dev.png","modified":1,"renderable":0},{"_id":"source/img/feign-api.png","path":"img/feign-api.png","modified":1,"renderable":0},{"_id":"source/img/feign-api修改.png","path":"img/feign-api修改.png","modified":1,"renderable":0},{"_id":"source/img/feign作用.png","path":"img/feign作用.png","modified":1,"renderable":0},{"_id":"source/img/gateway流程图.png","path":"img/gateway流程图.png","modified":1,"renderable":0},{"_id":"source/img/getServer负载均衡.png","path":"img/getServer负载均衡.png","modified":1,"renderable":0},{"_id":"source/img/httpuserserviceuser1.png","path":"img/httpuserserviceuser1.png","modified":1,"renderable":0},{"_id":"source/img/loadBalance.png","path":"img/loadBalance.png","modified":1,"renderable":0},{"_id":"source/img/nacos修改权重.png","path":"img/nacos修改权重.png","modified":1,"renderable":0},{"_id":"source/img/nacos权限配置.png","path":"img/nacos权限配置.png","modified":1,"renderable":0},{"_id":"source/img/nacos配置映射关系.png","path":"img/nacos配置映射关系.png","modified":1,"renderable":0},{"_id":"source/img/nacos集群警告.png","path":"img/nacos集群警告.png","modified":1,"renderable":0},{"_id":"source/img/public.png","path":"img/public.png","modified":1,"renderable":0},{"_id":"source/img/robbon流程总结.png","path":"img/robbon流程总结.png","modified":1,"renderable":0},{"_id":"source/img/rule.png","path":"img/rule.png","modified":1,"renderable":0},{"_id":"source/img/rule默认值.png","path":"img/rule默认值.png","modified":1,"renderable":0},{"_id":"source/img/优先级有高低之分.png","path":"img/优先级有高低之分.png","modified":1,"renderable":0},{"_id":"source/img/代码验证.png","path":"img/代码验证.png","modified":1,"renderable":0},{"_id":"source/img/使用不同的profile2.png","path":"img/使用不同的profile2.png","modified":1,"renderable":0},{"_id":"source/img/使用不同的profile.png","path":"img/使用不同的profile.png","modified":1,"renderable":0},{"_id":"source/img/使用不同的配置结果1.png","path":"img/使用不同的配置结果1.png","modified":1,"renderable":0},{"_id":"source/img/使用不同的配置结果2.png","path":"img/使用不同的配置结果2.png","modified":1,"renderable":0},{"_id":"source/img/修改Eureka的url路径.png","path":"img/修改Eureka的url路径.png","modified":1,"renderable":0},{"_id":"source/img/再次启动集群实例.png","path":"img/再次启动集群实例.png","modified":1,"renderable":0},{"_id":"source/img/分布式架构.png","path":"img/分布式架构.png","modified":1,"renderable":0},{"_id":"source/img/修改配置文件.png","path":"img/修改配置文件.png","modified":1,"renderable":0},{"_id":"source/img/创建namespace.png","path":"img/创建namespace.png","modified":1,"renderable":0},{"_id":"source/img/利用RestTemplate发起远程调用.png","path":"img/利用RestTemplate发起远程调用.png","modified":1,"renderable":0},{"_id":"source/img/加入Nacos配置后.png","path":"img/加入Nacos配置后.png","modified":1,"renderable":0},{"_id":"source/img/单体架构.png","path":"img/单体架构.png","modified":1,"renderable":0},{"_id":"source/img/启动示意图.png","path":"img/启动示意图.png","modified":1,"renderable":0},{"_id":"source/img/填写表单.png","path":"img/填写表单.png","modified":1,"renderable":0},{"_id":"source/img/填写配置信息.png","path":"img/填写配置信息.png","modified":1,"renderable":0},{"_id":"source/img/将nacos文件夹复制三份.png","path":"img/将nacos文件夹复制三份.png","modified":1,"renderable":0},{"_id":"source/img/微服务.png","path":"img/微服务.png","modified":1,"renderable":0},{"_id":"source/img/微服务集群访问.png","path":"img/微服务集群访问.png","modified":1,"renderable":0},{"_id":"source/img/技术栈.png","path":"img/技术栈.png","modified":1,"renderable":0},{"_id":"source/img/技术栈对比.png","path":"img/技术栈对比.png","modified":1,"renderable":0},{"_id":"source/img/抽取方式.png","path":"img/抽取方式.png","modified":1,"renderable":0},{"_id":"source/img/控制台打印请求头.png","path":"img/控制台打印请求头.png","modified":1,"renderable":0},{"_id":"source/img/控制台报错.png","path":"img/控制台报错.png","modified":1,"renderable":0},{"_id":"source/img/新的namespace.png","path":"img/新的namespace.png","modified":1,"renderable":0},{"_id":"source/img/更细致的配置.png","path":"img/更细致的配置.png","modified":1,"renderable":0},{"_id":"source/img/最佳实践.png","path":"img/最佳实践.png","modified":1,"renderable":0},{"_id":"source/img/服务拆分注意事项.png","path":"img/服务拆分注意事项.png","modified":1,"renderable":0},{"_id":"source/img/架构介绍.png","path":"img/架构介绍.png","modified":1,"renderable":0},{"_id":"source/img/查看nacos控制台.png","path":"img/查看nacos控制台.png","modified":1,"renderable":0},{"_id":"source/img/添加namespace.png","path":"img/添加namespace.png","modified":1,"renderable":0},{"_id":"source/img/注解开启Feign.png","path":"img/注解开启Feign.png","modified":1,"renderable":0},{"_id":"source/img/添加一个环境共享配置.png","path":"img/添加一个环境共享配置.png","modified":1,"renderable":0},{"_id":"source/img/添加一个方法.png","path":"img/添加一个方法.png","modified":1,"renderable":0},{"_id":"source/img/添加配置文件.png","path":"img/添加配置文件.png","modified":1,"renderable":0},{"_id":"source/img/环境隔离.png","path":"img/环境隔离.png","modified":1,"renderable":0},{"_id":"source/img/第一次访问.png","path":"img/第一次访问.png","modified":1,"renderable":0},{"_id":"source/img/继续跟入.png","path":"img/继续跟入.png","modified":1,"renderable":0},{"_id":"source/img/自动化部署.png","path":"img/自动化部署.png","modified":1,"renderable":0},{"_id":"source/img/自定义策略.png","path":"img/自定义策略.png","modified":1,"renderable":0},{"_id":"source/img/获取配置.png","path":"img/获取配置.png","modified":1,"renderable":0},{"_id":"source/img/计划的Nacos集群.png","path":"img/计划的Nacos集群.png","modified":1,"renderable":0},{"_id":"source/img/读取新添加的属性.png","path":"img/读取新添加的属性.png","modified":1,"renderable":0},{"_id":"source/img/负载均衡策略.png","path":"img/负载均衡策略.png","modified":1,"renderable":0},{"_id":"source/img/跟踪源码 chooseServer()方法.png","path":"img/跟踪源码 chooseServer()方法.png","modified":1,"renderable":0},{"_id":"source/img/过滤器工厂.png","path":"img/过滤器工厂.png","modified":1,"renderable":0},{"_id":"source/img/跟进execute()方法.png","path":"img/跟进execute()方法.png","modified":1,"renderable":0},{"_id":"source/img/过滤器顺序.png","path":"img/过滤器顺序.png","modified":1,"renderable":0},{"_id":"source/img/需要学习的微服务知识内容.png","path":"img/需要学习的微服务知识内容.png","modified":1,"renderable":0}],"Cache":[{"_id":"themes/butterfly/README.md","hash":"f0e25045d220f3457fc00577928a1a17b9cae2d3","modified":1658555403776},{"_id":"themes/butterfly/_config.yml","hash":"2729d475843406104b32d0e16cd011276bdef4a6","modified":1658555403777},{"_id":"themes/butterfly/LICENSE","hash":"c8bc7df08db9dd3b39c2c2259a163a36cf2f6808","modified":1658555403776},{"_id":"themes/butterfly/README_CN.md","hash":"7824e73a3f5c626ff00d23dfeb4d256a784c330f","modified":1658555403777},{"_id":"themes/butterfly/plugins.yml","hash":"a9f927f7005aa22811017242fff42b1510865549","modified":1658555403808},{"_id":"themes/butterfly/package.json","hash":"b128a4d4ad3bb4f78a569a0ddd2010430a10d690","modified":1658555403808},{"_id":"themes/butterfly/languages/default.yml","hash":"335731ef259a3cec2499a2d5b050025ff4bdc608","modified":1658555403778},{"_id":"themes/butterfly/.github/stale.yml","hash":"79b830939587a5c029b20db6615ba73907d60bb4","modified":1658555403775},{"_id":"themes/butterfly/languages/en.yml","hash":"a96ab1bbe74e99ca2e4d67da9d83f442eb9b73af","modified":1658555403778},{"_id":"themes/butterfly/languages/zh-CN.yml","hash":"4adf079fb0170e3a8de6ddbb0392d6d1120030c4","modified":1658555403778},{"_id":"themes/butterfly/languages/zh-TW.yml","hash":"dcb10d62249bb149af8ad78db3ee6e342c6d6be7","modified":1658555403778},{"_id":"themes/butterfly/layout/archive.pug","hash":"115fa5ee8864e5c97549eff91a17c66101d724ab","modified":1658555403779},{"_id":"themes/butterfly/layout/category.pug","hash":"bf979aec88d78b644fc5d31518f8679ad7625792","modified":1658555403779},{"_id":"themes/butterfly/layout/post.pug","hash":"fdbb508b5e6dec30fb8753c5a7fdd494410c4fc0","modified":1658555403807},{"_id":"themes/butterfly/layout/tag.pug","hash":"4bb5efc6dabdf1626685bf6771aaa1467155ae86","modified":1658555403808},{"_id":"themes/butterfly/layout/page.pug","hash":"bf2d6c6d2d156777b55292e51be02b0b3acf0af8","modified":1658555403807},{"_id":"themes/butterfly/.github/ISSUE_TEMPLATE/config.yml","hash":"d9ff4bad9c9664e12729c7a531169a05698a3fd1","modified":1658555403774},{"_id":"themes/butterfly/.github/ISSUE_TEMPLATE/bug_report.yml","hash":"e1043b8f149371d5a4ab0f1306eabc2988bed071","modified":1658555403774},{"_id":"themes/butterfly/layout/index.pug","hash":"648dcbdb3d145a710de81c909e000e8664d2ac9c","modified":1658555403807},{"_id":"themes/butterfly/.github/ISSUE_TEMPLATE/feature_request.yml","hash":"6e0f9470b18bd37d4891282ac73d61676b040e8c","modified":1658555403775},{"_id":"themes/butterfly/.github/workflows/publish.yml","hash":"e320b40c051bae1549156cd5ea4a51383cf78598","modified":1658555403775},{"_id":"themes/butterfly/layout/includes/404.pug","hash":"aace9ddff469de4226e47a52ede1c81e66d66d5c","modified":1658555403779},{"_id":"themes/butterfly/layout/includes/additional-js.pug","hash":"ddea99847fd41323f183cd0c9dae3174c586f5b3","modified":1658555403780},{"_id":"themes/butterfly/layout/includes/footer.pug","hash":"8715948b93e7508b84d913be1969b28c6b067b9b","modified":1658555403780},{"_id":"themes/butterfly/layout/includes/head.pug","hash":"1d0f1b84be352862046e780800d696e80ef1cdd1","modified":1658555403780},{"_id":"themes/butterfly/layout/includes/layout.pug","hash":"3d95525a6d809be2f2a1cd6b33d3b7ecc0457d62","modified":1658555403784},{"_id":"themes/butterfly/scripts/events/404.js","hash":"f1d1c378356b776e9b2a8411e6dca88dc8c3245c","modified":1658555403809},{"_id":"themes/butterfly/scripts/events/cdn.js","hash":"8e6f0677c190d44c64222054e2e7c065fc6c4802","modified":1658555403809},{"_id":"themes/butterfly/scripts/events/comment.js","hash":"176332aa4d01728d0bd084e9b02c60167dc307dd","modified":1658555403809},{"_id":"themes/butterfly/scripts/events/init.js","hash":"b3e05e3440b078f57391c113d6b0c8ecff112720","modified":1658555403810},{"_id":"themes/butterfly/scripts/events/stylus.js","hash":"218add7e9b39b6fb6e69921abb9e44891a6cc3ce","modified":1658555403810},{"_id":"themes/butterfly/layout/includes/sidebar.pug","hash":"4f41fc46410e1e3018ff87e1d1a5c28be7258119","modified":1658555403788},{"_id":"themes/butterfly/layout/includes/rightside.pug","hash":"205562ec188bfba5686c51af77486550d0927df5","modified":1658555403788},{"_id":"themes/butterfly/layout/includes/pagination.pug","hash":"bb1847f45e713cc88b1c0a97035ec01f0209c995","modified":1658555403787},{"_id":"themes/butterfly/scripts/events/welcome.js","hash":"b92cc4648cfe5fb28c58943727823d1178b73a4a","modified":1658555403810},{"_id":"themes/butterfly/source/css/index.styl","hash":"c7924868adcb046b46498626a9223c7a7b3f2e30","modified":1658555403831},{"_id":"themes/butterfly/scripts/helpers/aside_archives.js","hash":"4f712b4ea383b59a3122683db1d54c04a79ccc5d","modified":1658555403811},{"_id":"themes/butterfly/source/css/var.styl","hash":"584ef7b18d5e677eb2e62f9b139097d3b714a993","modified":1658555403831},{"_id":"themes/butterfly/scripts/helpers/aside_categories.js","hash":"376e1884ea764404c38b1e73b16de0358ece519e","modified":1658555403812},{"_id":"themes/butterfly/scripts/helpers/inject_head_js.js","hash":"c445140fa16f19bf5fb617fa735504e7799d4d42","modified":1658555403812},{"_id":"themes/butterfly/scripts/helpers/page.js","hash":"c07efb04120914363b8de2c276ac5783b82db776","modified":1658555403812},{"_id":"themes/butterfly/scripts/helpers/findArchiveLength.js","hash":"db4f5971c27f49a4cb47d34729f4ddf9919d392b","modified":1658555403812},{"_id":"themes/butterfly/scripts/helpers/related_post.js","hash":"83bfb16ab8d440be04e1b1f889f6affa7ad65a67","modified":1658555403813},{"_id":"themes/butterfly/source/js/main.js","hash":"0b673b89d24b78b8544cc0e048953e6dcba3e9bf","modified":1658555403834},{"_id":"themes/butterfly/source/js/tw_cn.js","hash":"4db1170be7a9360e2c5399d281b979da730df2a3","modified":1658555403835},{"_id":"themes/butterfly/scripts/tag/button.js","hash":"44cca49ddc76921bb455465ef912cab46c993cef","modified":1658555403813},{"_id":"themes/butterfly/source/js/utils.js","hash":"fdb9e5b38f076953a2431b8f682388b030694b55","modified":1658555403835},{"_id":"themes/butterfly/scripts/tag/flink.js","hash":"3ba7677969ff01fab06fc6713455ddc6861f0024","modified":1658555403813},{"_id":"themes/butterfly/scripts/tag/gallery.js","hash":"6d4cd2393945a9316339351cab588265f5c18d73","modified":1658555403814},{"_id":"themes/butterfly/scripts/tag/hide.js","hash":"e01a3967e5884881bab858b11635457df412de80","modified":1658555403814},{"_id":"themes/butterfly/scripts/tag/inlineImg.js","hash":"7641adb0d520c5ff29dd36fc1fb8617c52ecc9fb","modified":1658555403814},{"_id":"themes/butterfly/scripts/tag/label.js","hash":"551f1b8edc973bd8afc5cce2eae546f002fa84c3","modified":1658555403814},{"_id":"themes/butterfly/scripts/tag/note.js","hash":"56a5d41487d74654b75305c5325167a116495900","modified":1658555403815},{"_id":"themes/butterfly/scripts/tag/mermaid.js","hash":"fd683ccc090db3122d77c7ee73e8d35dc8735ee3","modified":1658555403815},{"_id":"themes/butterfly/scripts/tag/tabs.js","hash":"08ea00791bd4738952234cb5d8360e119df6f875","modified":1658555403815},{"_id":"themes/butterfly/scripts/filters/post_lazyload.js","hash":"5fd6c9659262dc8f61d87866d0417fd534292c88","modified":1658555403811},{"_id":"themes/butterfly/scripts/filters/random_cover.js","hash":"6c3b7d0874fa499800a4fd49894c481b05ec750c","modified":1658555403811},{"_id":"themes/butterfly/scripts/tag/timeline.js","hash":"4c7056d3cd56f10bd209d2ba4d3cc2027aad1440","modified":1658555403816},{"_id":"themes/butterfly/source/img/404.jpg","hash":"fb4489bc1d30c93d28f7332158c1c6c1416148de","modified":1658555403832},{"_id":"themes/butterfly/source/img/avatar.png","hash":"7879d36cfb2de6ad28f6e3b88d9738f4b79ebd67","modified":1665112788972},{"_id":"themes/butterfly/source/img/favicon.png","hash":"3cf89864b4f6c9b532522a4d260a2e887971c92d","modified":1658555403832},{"_id":"themes/butterfly/source/img/friend_404.gif","hash":"8d2d0ebef70a8eb07329f57e645889b0e420fa48","modified":1658555403833},{"_id":"themes/butterfly/layout/includes/head/Open_Graph.pug","hash":"07380718ed3af19a7e64b30e8c13726fe5983947","modified":1658555403781},{"_id":"themes/butterfly/layout/includes/head/analytics.pug","hash":"c1e45d4d0bd905ddcd2282de4fe89be92e67847d","modified":1658555403781},{"_id":"themes/butterfly/layout/includes/head/config.pug","hash":"8a3f9e674b44e6a92d4df22baca65d9d30007dc3","modified":1658555403781},{"_id":"themes/butterfly/layout/includes/head/google_adsense.pug","hash":"f29123e603cbbcc6ce277d4e8f600ba67498077c","modified":1658555403782},{"_id":"themes/butterfly/layout/includes/head/config_site.pug","hash":"bd5dd5452e28a4fe94c3241a758ec6f4fdb7a149","modified":1658555403781},{"_id":"themes/butterfly/layout/includes/head/noscript.pug","hash":"72efaa09ff60843567458bd54152e06f0cb2757e","modified":1658555403782},{"_id":"themes/butterfly/layout/includes/header/index.pug","hash":"6f489b24f06578440f18b629db56c810f00f8c3f","modified":1658555403783},{"_id":"themes/butterfly/layout/includes/header/menu_item.pug","hash":"ca8bcd90ad9467819330bfe7c02b76322754bccf","modified":1658555403783},{"_id":"themes/butterfly/layout/includes/head/preconnect.pug","hash":"fc3e67e5ae4774d9e89964ba96beed28f34ee8f0","modified":1658555403782},{"_id":"themes/butterfly/layout/includes/head/pwa.pug","hash":"6dc2c9b85df9ab4f5b554305339fd80a90a6cf43","modified":1658555403782},{"_id":"themes/butterfly/layout/includes/head/site_verification.pug","hash":"5168caadc4cf541f5d6676a9c5e8ae47a948f9ad","modified":1658555403783},{"_id":"themes/butterfly/layout/includes/loading/loading-js.pug","hash":"2e1ab0c2ca59a1ff5a5ba9b6ef60f3e34af5430c","modified":1658555403785},{"_id":"themes/butterfly/layout/includes/header/nav.pug","hash":"a9e56b1c41bf327859b0a7bcb8e72b458bd851b2","modified":1658555403784},{"_id":"themes/butterfly/layout/includes/header/post-info.pug","hash":"37e407cb98398f64bf2ca3cb5300f671d6a42dad","modified":1658555403784},{"_id":"themes/butterfly/layout/includes/header/social.pug","hash":"631ec7000fd4d6cfa2de118ee02ad8a42ffb34f5","modified":1658555403784},{"_id":"themes/butterfly/layout/includes/loading/loading.pug","hash":"dd8e6813976be64e80eba6562b54e74527ab306d","modified":1658555403785},{"_id":"themes/butterfly/layout/includes/mixins/post-ui.pug","hash":"7a7061f3d5da043ea81f625893e1c5cace2c931f","modified":1658555403786},{"_id":"themes/butterfly/layout/includes/mixins/article-sort.pug","hash":"971038debf539333b1687b4a1d87cf4fc965a846","modified":1658555403785},{"_id":"themes/butterfly/layout/includes/post/reward.pug","hash":"594626a18b7efbf771232855dfbce143fb244bc6","modified":1658555403788},{"_id":"themes/butterfly/layout/includes/post/post-copyright.pug","hash":"cc1f7ae8a7ce5445277215821092e712ec8cc296","modified":1658555403788},{"_id":"themes/butterfly/layout/includes/page/categories.pug","hash":"5276a8d2835e05bd535fedc9f593a0ce8c3e8437","modified":1658555403786},{"_id":"themes/butterfly/layout/includes/third-party/aplayer.pug","hash":"e939344fd389aeb11864ee697d5fd9b036d8325f","modified":1658555403789},{"_id":"themes/butterfly/layout/includes/page/flink.pug","hash":"e2eba0fcb8332cb333b2aff9c76664e40e2e1974","modified":1658555403787},{"_id":"themes/butterfly/layout/includes/page/default-page.pug","hash":"e9459f122af7b733398578f9f0f8ab3c5e12a217","modified":1658555403786},{"_id":"themes/butterfly/layout/includes/page/tags.pug","hash":"8f43fdeaf8cff4a35bab74b48c963786ca015620","modified":1658555403787},{"_id":"themes/butterfly/layout/includes/third-party/effect.pug","hash":"4e37535c63149708ecbedb262336014524ad8723","modified":1658555403797},{"_id":"themes/butterfly/layout/includes/third-party/pangu.pug","hash":"f0898509da70388b5c532f19e762756d74080200","modified":1658555403800},{"_id":"themes/butterfly/layout/includes/third-party/pjax.pug","hash":"4e026840c915327e45331e63e4b7ef287e871204","modified":1658555403801},{"_id":"themes/butterfly/layout/includes/third-party/prismjs.pug","hash":"08979afbfecb4476a5ae8e360947b92624d285b8","modified":1658555403801},{"_id":"themes/butterfly/layout/includes/third-party/subtitle.pug","hash":"7b5fea9e1c113cab4c75f9d31d8efebe70d82e7a","modified":1658555403803},{"_id":"themes/butterfly/layout/includes/widget/card_ad.pug","hash":"a8312b527493dabbadbb1280760168d3bc909a3b","modified":1658555403804},{"_id":"themes/butterfly/layout/includes/widget/card_announcement.pug","hash":"21e019bdc3b1e796bb00976bb29af2d51f873624","modified":1658555403804},{"_id":"themes/butterfly/layout/includes/widget/card_archives.pug","hash":"73d33b6930e7944187a4b3403daf25d27077a2dd","modified":1658555403804},{"_id":"themes/butterfly/layout/includes/widget/card_author.pug","hash":"08641633d38903351a7424baf9893d9038ba057d","modified":1658555403804},{"_id":"themes/butterfly/layout/includes/widget/card_categories.pug","hash":"66e383b4ef374951eb87dd1bf4cdb7a667193fb5","modified":1658555403805},{"_id":"themes/butterfly/layout/includes/widget/card_bottom_self.pug","hash":"1dba77d250eeebfb6e293d504352c7e9ea31980b","modified":1658555403805},{"_id":"themes/butterfly/layout/includes/widget/card_newest_comment.pug","hash":"c02b1779bd0ebca6749f195be096b6ca574bfa29","modified":1658555403805},{"_id":"themes/butterfly/layout/includes/widget/card_post_toc.pug","hash":"59d979702fa21d960443824198614d63aaf69662","modified":1658555403805},{"_id":"themes/butterfly/layout/includes/widget/card_recent_post.pug","hash":"471b20e71a19db1f5115727082e5188200c49383","modified":1658555403806},{"_id":"themes/butterfly/layout/includes/widget/card_tags.pug","hash":"9755cac8424dc578e9ec07dbcaa429fddbedd392","modified":1658555403806},{"_id":"themes/butterfly/layout/includes/widget/card_top_self.pug","hash":"7b5ae404a1205546b7de4be42291315cf918f2b3","modified":1658555403806},{"_id":"themes/butterfly/layout/includes/widget/card_webinfo.pug","hash":"12185713f9ca08984fc74e3b69d8cd6828d23da8","modified":1658555403806},{"_id":"themes/butterfly/layout/includes/widget/index.pug","hash":"5e0e9e9b2cd3c256d52423e2278e790aa387a53a","modified":1658555403807},{"_id":"themes/butterfly/source/css/_global/index.styl","hash":"b9d7d23dc8810542b8c8ffcbfbd3694318debcc6","modified":1658555403817},{"_id":"themes/butterfly/source/css/_global/function.styl","hash":"f562648de515abc873609bfe9b9f799c8cf42b72","modified":1658555403816},{"_id":"themes/butterfly/source/css/_highlight/highlight.styl","hash":"a2aa5caf338ff5323b6ff0601ebcc09e710d8398","modified":1658555403817},{"_id":"themes/butterfly/source/css/_highlight/theme.styl","hash":"3c178608406c31d768af355ef1d7326da37cc75f","modified":1658555403819},{"_id":"themes/butterfly/source/css/_layout/aside.styl","hash":"af6e3357b8f6df18d0775b8352551c0f8ce38e55","modified":1658555403819},{"_id":"themes/butterfly/source/css/_layout/chat.styl","hash":"f27ad7b5d781c98bcac5c12c2d70b69b830e0374","modified":1658555403820},{"_id":"themes/butterfly/source/css/_layout/comments.styl","hash":"0abe05309a186682772a94e5e759b63f8028e61a","modified":1658555403820},{"_id":"themes/butterfly/source/css/_layout/head.styl","hash":"f3aac52defb3497079a313e8c63ac2f7ee24dfbe","modified":1658555403821},{"_id":"themes/butterfly/source/css/_layout/loading.styl","hash":"844858ae87c7278996ce484c6b456db354c48764","modified":1658555403821},{"_id":"themes/butterfly/source/css/_layout/footer.styl","hash":"e931ef81754a7b9d999fa23d134c620e68e75491","modified":1658555403820},{"_id":"themes/butterfly/source/css/_layout/pagination.styl","hash":"bd099f7d3adef4b7edd24c0a25a07415b156e587","modified":1658555403821},{"_id":"themes/butterfly/source/css/_layout/post.styl","hash":"9f880a6fa91784a4d3e9ffb0d4607e8a74d4d929","modified":1658555403821},{"_id":"themes/butterfly/source/css/_layout/relatedposts.styl","hash":"6dcf19c0933c8828a439f801b0f4b256447dec07","modified":1658555403822},{"_id":"themes/butterfly/source/css/_layout/rightside.styl","hash":"1c1c585ba99cb4004956b5e98fc044260b456f99","modified":1658555403822},{"_id":"themes/butterfly/source/css/_layout/sidebar.styl","hash":"7e9b65dcae7ac54e0183bc841fea0f4bd4d78e5c","modified":1658555403822},{"_id":"themes/butterfly/source/css/_layout/reward.styl","hash":"b5ba2c3339ad406ce611d12d3f8cc84f864fbc03","modified":1658555403822},{"_id":"themes/butterfly/source/css/_layout/third-party.styl","hash":"e02b52bdd337c0ed3c9d3a507d1011403c38881d","modified":1658555403823},{"_id":"themes/butterfly/source/css/_mode/darkmode.styl","hash":"5dabc3a5330cc28f0666d1cd8db0d67f553fd854","modified":1658555403823},{"_id":"themes/butterfly/source/css/_mode/readmode.styl","hash":"1fed25162d7204480e9bcf476b3246e1717107ca","modified":1658555403823},{"_id":"themes/butterfly/source/css/_search/algolia.styl","hash":"d1398399eb7f1cc004fbcefa18f56188cc8fec8c","modified":1658555403827},{"_id":"themes/butterfly/source/css/_search/index.styl","hash":"cced94e70b4b90130cfa215582be2adbf883efba","modified":1658555403827},{"_id":"themes/butterfly/source/css/_search/local-search.styl","hash":"45792c13c7c439d412b7dc597d74d24f3b598406","modified":1658555403827},{"_id":"themes/butterfly/source/css/_tags/button.styl","hash":"62da1de0d5b8453fcecbfacddb16985265638ba5","modified":1658555403828},{"_id":"themes/butterfly/source/css/_tags/gallery.styl","hash":"84c42716e833d2d1dd47195ea996803ffa0e58ec","modified":1658555403828},{"_id":"themes/butterfly/source/css/_tags/hexo.styl","hash":"985b183db7b7bfd8f9bdb60494549fb7f850348b","modified":1658555403828},{"_id":"themes/butterfly/source/css/_tags/hide.styl","hash":"b7cf7753479fcf2fe07287ffdb0e568adbba4c18","modified":1658555403829},{"_id":"themes/butterfly/source/css/_tags/inlineImg.styl","hash":"5a873d01fabebcf7ddf7a6b1c2e2e5e2714097f4","modified":1658555403829},{"_id":"themes/butterfly/source/css/_tags/label.styl","hash":"2f83bd145b870d80d4b18b0ac603235229a5694e","modified":1658555403829},{"_id":"themes/butterfly/source/css/_tags/note.styl","hash":"331c89ecfb79fab68466944a43e9e3d0ff49c646","modified":1658555403829},{"_id":"themes/butterfly/source/css/_tags/timeline.styl","hash":"07ea7134db7a66c87658116f089fb1a2a6906563","modified":1658555403830},{"_id":"themes/butterfly/source/css/_tags/tabs.styl","hash":"ec81ea316c82b83d6aee31e52f248d329559d5d3","modified":1658555403830},{"_id":"themes/butterfly/source/css/_third-party/normalize.min.css","hash":"8549829fb7d3c21cd9e119884962e8c463a4a267","modified":1658555403831},{"_id":"themes/butterfly/source/css/_page/404.styl","hash":"a7223a8fcc4fa7b81e552c9a2554be7df9de312e","modified":1658555403824},{"_id":"themes/butterfly/source/css/_page/archives.styl","hash":"d72218cb5a6bfe048ae1c92009bd815a08a53d3a","modified":1658555403824},{"_id":"themes/butterfly/source/css/_page/categories.styl","hash":"68bc8cbea25dbb3cdc170f09f9b43ce130547717","modified":1658555403825},{"_id":"themes/butterfly/source/css/_page/common.styl","hash":"a714776e3d585369f2285b6bb4e1564539c58d8b","modified":1658555403825},{"_id":"themes/butterfly/source/css/_page/flink.styl","hash":"ecc2b2e28c179eb9406fc2c6f00e141078249cdd","modified":1658555403825},{"_id":"themes/butterfly/source/css/_page/homepage.styl","hash":"6d2a841c7656fb28b1e15afe1d7dda56c424b7d7","modified":1658555403826},{"_id":"themes/butterfly/source/css/_page/tags.styl","hash":"9e35f91847773b915c74a78b8aa66c7bdb950ad0","modified":1658555403826},{"_id":"themes/butterfly/source/js/search/local-search.js","hash":"f72e002d56903a49c36174e77e42f88b8af8bd44","modified":1658555403835},{"_id":"themes/butterfly/source/js/search/algolia.js","hash":"d0d60008ef4ff74298ff062878766f194a2e4a70","modified":1658555403835},{"_id":"themes/butterfly/layout/includes/third-party/card-post-count/disqus.pug","hash":"f4d21dcbc3b00eed9b1f604e132c4c6811a0a059","modified":1658555403789},{"_id":"themes/butterfly/layout/includes/third-party/card-post-count/fb.pug","hash":"4eebb2d94ca75809ef0cf32d70f13e9bf1e87091","modified":1658555403789},{"_id":"themes/butterfly/layout/includes/third-party/card-post-count/index.pug","hash":"6a79d114472699e4de1a56a46b9a4f35e8fcd0e4","modified":1658555403790},{"_id":"themes/butterfly/layout/includes/third-party/card-post-count/remark42.pug","hash":"716dc463fe4ef5112e7018ed60804125fdfa5cad","modified":1658555403790},{"_id":"themes/butterfly/layout/includes/third-party/card-post-count/twikoo.pug","hash":"38b85d216d9377ddbaa2e5867e2f03805227237c","modified":1658555403790},{"_id":"themes/butterfly/layout/includes/third-party/card-post-count/valine.pug","hash":"cd4fc9c5a61608a5dedf645c1295430a1623040f","modified":1658555403790},{"_id":"themes/butterfly/layout/includes/third-party/card-post-count/waline.pug","hash":"6e5ccc9ea4346c71ad4cbf1e9f1cb83bb45e6f27","modified":1658555403791},{"_id":"themes/butterfly/layout/includes/third-party/chat/chatra.pug","hash":"f3f6eaecbcf9352342e259f4a5a3ad7160f31fc9","modified":1658555403791},{"_id":"themes/butterfly/layout/includes/third-party/chat/daovoice.pug","hash":"e5af55cdb87d1ffd3d8702bc77097159acf95b54","modified":1658555403792},{"_id":"themes/butterfly/layout/includes/third-party/chat/crisp.pug","hash":"b741b5e942481d779a8a1fe94c45154a62a6b748","modified":1658555403792},{"_id":"themes/butterfly/layout/includes/third-party/chat/index.pug","hash":"bb467bb22f3d0775b33f9eacbfc086ecb7831e78","modified":1658555403792},{"_id":"themes/butterfly/layout/includes/third-party/chat/gitter.pug","hash":"794ce3911f17d354b7196deb8c36d191afac63fb","modified":1658555403792},{"_id":"themes/butterfly/layout/includes/third-party/chat/tidio.pug","hash":"cd7ab4a776be93eea96a6f6fd0a547977fbe1ea3","modified":1658555403793},{"_id":"themes/butterfly/layout/includes/third-party/math/katex.pug","hash":"f0d3eddd2bed68e5517274b3530bfe0fa5057d8e","modified":1658555403797},{"_id":"themes/butterfly/layout/includes/third-party/math/index.pug","hash":"2afa4c21dd19890f47fb568cfb0d90efb676a253","modified":1658555403797},{"_id":"themes/butterfly/layout/includes/third-party/math/mermaid.pug","hash":"297d34d83e7bff8ec3b8bc19bb0f4d901c35fe5a","modified":1658555403798},{"_id":"themes/butterfly/layout/includes/third-party/math/mathjax.pug","hash":"056756e43908519039b8bbd7a90f8c49d561eb52","modified":1658555403798},{"_id":"themes/butterfly/layout/includes/third-party/comments/disqus.pug","hash":"3b551ab7618b36795480015b5cf565288df5b957","modified":1658555403793},{"_id":"themes/butterfly/layout/includes/third-party/comments/giscus.pug","hash":"319463fc8ff993b798f2293b659b522ad7770cf0","modified":1658555403794},{"_id":"themes/butterfly/layout/includes/third-party/comments/facebook_comments.pug","hash":"a222477bddba3c646ee9b8560442c2cb204adb11","modified":1658555403794},{"_id":"themes/butterfly/layout/includes/third-party/comments/gitalk.pug","hash":"3df2f59c9552a1f2e6f0d50c4ae97e72c5392b59","modified":1658555403794},{"_id":"themes/butterfly/layout/includes/third-party/comments/index.pug","hash":"a348b6b2fb65fe11d256acfac0741074e77fe519","modified":1658555403794},{"_id":"themes/butterfly/layout/includes/third-party/comments/disqusjs.pug","hash":"8c16214a610ff8087628f32d005a1b0aab3bb910","modified":1658555403793},{"_id":"themes/butterfly/layout/includes/third-party/comments/js.pug","hash":"0d845515e457fac530c173905302eb30e045580c","modified":1658555403795},{"_id":"themes/butterfly/layout/includes/third-party/comments/livere.pug","hash":"589f8503f264d4fda971c8daf2028f45c4f2867b","modified":1658555403795},{"_id":"themes/butterfly/layout/includes/third-party/comments/remark42.pug","hash":"f04263a3bd7efb7f1b250cfee112e82f49805492","modified":1658555403795},{"_id":"themes/butterfly/layout/includes/third-party/comments/valine.pug","hash":"cba55cbbd0962bf84b8956195e686b0e158ed247","modified":1658555403796},{"_id":"themes/butterfly/layout/includes/third-party/comments/twikoo.pug","hash":"ccb5c3f2a821b87986998595743387d7c997c16e","modified":1658555403796},{"_id":"themes/butterfly/layout/includes/third-party/comments/utterances.pug","hash":"d48d59ebf8c0142fb3c4592a0d35874f85e6fd4c","modified":1658555403796},{"_id":"themes/butterfly/layout/includes/third-party/comments/waline.pug","hash":"e45152e4ebc3fb2462916be93f98d18f0574f2d3","modified":1658555403796},{"_id":"themes/butterfly/layout/includes/third-party/newest-comments/disqus-comment.pug","hash":"cd1ce86441dc508e4c3dbf8b829046455ba8a6b4","modified":1658555403798},{"_id":"themes/butterfly/layout/includes/third-party/newest-comments/github-issues.pug","hash":"b2ede1f6b41026ebd233ac076a405889a6eec76b","modified":1658555403799},{"_id":"themes/butterfly/layout/includes/third-party/newest-comments/remark42.pug","hash":"bc207dcb771fc2c2c329f29d01708ff6b18443da","modified":1658555403799},{"_id":"themes/butterfly/layout/includes/third-party/newest-comments/index.pug","hash":"6b60941942831cc91e395131ad9797b691632fcb","modified":1658555403799},{"_id":"themes/butterfly/layout/includes/third-party/newest-comments/twikoo-comment.pug","hash":"91a72e94743befa21a7b1c557fbb3751efb87ab0","modified":1658555403800},{"_id":"themes/butterfly/layout/includes/third-party/newest-comments/waline.pug","hash":"63ef0b2a75cf26a94c5bcd885f3a1c144451b852","modified":1658555403800},{"_id":"themes/butterfly/layout/includes/third-party/search/index.pug","hash":"ff3727c3ec698ec61a28c55cbc8c8508f0efb0a0","modified":1658555403802},{"_id":"themes/butterfly/layout/includes/third-party/newest-comments/valine.pug","hash":"33368c0b80e4c4e78f3c7ee9bec0fed70ad838ca","modified":1658555403800},{"_id":"themes/butterfly/layout/includes/third-party/search/algolia.pug","hash":"af5d3d87b736598dafcf5871863596592cacdfe1","modified":1658555403801},{"_id":"themes/butterfly/layout/includes/third-party/search/local-search.pug","hash":"3b5ef84744a1a8fec5a63554079008040d96f924","modified":1658555403802},{"_id":"themes/butterfly/layout/includes/third-party/share/add-this.pug","hash":"8b4034e53ca5bf85097f681a6e76a53ce685c205","modified":1658555403802},{"_id":"themes/butterfly/layout/includes/third-party/share/index.pug","hash":"4898a09d8e67fb358ffd74b3a1f0014f555dd856","modified":1658555403803},{"_id":"themes/butterfly/layout/includes/third-party/share/addtoany.pug","hash":"1f02a26730e5f36cc2dfec7ff4d5c93a099ed5ba","modified":1658555403802},{"_id":"themes/butterfly/layout/includes/third-party/share/share-js.pug","hash":"b45fc15c3ae7db3a0fbce0d6da74a72a95ca8a2b","modified":1658555403803},{"_id":"themes/butterfly/source/css/_highlight/highlight/diff.styl","hash":"6e77f1ca0cfb0db6b028f5c0238780e66d344f3d","modified":1658555403818},{"_id":"themes/butterfly/source/css/_highlight/highlight/index.styl","hash":"fc702a4614d0562a381907b083f71ba63d301d86","modified":1658555403818},{"_id":"themes/butterfly/source/css/_highlight/prismjs/diff.styl","hash":"1309292f1c8c53d96cd7333507b106bcc24ca8fc","modified":1658555403818},{"_id":"themes/butterfly/source/css/_highlight/prismjs/index.styl","hash":"01ff9e77eb1bd454bec65a6ff5972c8e219bc708","modified":1658555403818},{"_id":"themes/butterfly/source/css/_highlight/prismjs/line-number.styl","hash":"0b8aea62d1550113e1fcc237fae1b03743190208","modified":1658555403819},{"_id":"source/_posts/Linux.md","hash":"119dfb29d4d937789846e771cd79c0090ca5fb55","modified":1665021222776},{"_id":"source/_posts/Git学习笔记.md","hash":"6b971f190e47f720f4a798c2195047dbc468d4d2","modified":1668947176273},{"_id":"source/_posts/Maven.md","hash":"0abad34adb8f4439040e2f24d78699a5665dd6b0","modified":1668923597893},{"_id":"source/_posts/MybatisAndMybatis-plus.md","hash":"5e3fd38349a1d39aea15a2101f98f524c4aef48c","modified":1668949333210},{"_id":"source/_posts/SSM.md","hash":"411a47ec57afbf5965a51786e29c81eb4465e950","modified":1668949351795},{"_id":"source/_data/link.yml","hash":"ff08619cefb2ca82d82ceba34d16ffeb82793d4d","modified":1663905002612},{"_id":"source/_posts/数据结构.md","hash":"8378da6d5544a79427b4542992af6c16a47a4592","modified":1668840176997},{"_id":"source/_posts/微服务技术栈.md","hash":"66a677ad9dee686ad94e673fa79d2b9423816077","modified":1665495749856},{"_id":"source/categories/index.md","hash":"84daf5e606bfe93b972bab30f8a5c3f9db7c5522","modified":1663905002638},{"_id":"source/tags/index.md","hash":"97ea3c84a8d3b6312f07497039a8a27a469c9b6c","modified":1663905002640},{"_id":"source/link/index.md","hash":"c97a4f7337aac1f203656ebac0b3723ca5d2fc7e","modified":1663905002639},{"_id":"source/img/Git工作流程.png","hash":"910a7a18390346c18ebf01dfd9965725d2ff5a2c","modified":1668931809403},{"_id":"source/img/Ribbon负载均衡.png","hash":"855975ba69d09e2583f837b2cc433640aad50617","modified":1665243402349},{"_id":"source/img/Service3.png","hash":"f1b83ba73c804226ffb6ef2be3ad0654f2c6a982","modified":1665062155180},{"_id":"source/img/Services2.png","hash":"d9ae1981eb1e92c2a3445b3f339ca6fd4ab3ec2f","modified":1665060612986},{"_id":"source/img/dev.png","hash":"f894aab631493e42b2a6e1d2d5ae9606e5fc05ce","modified":1665281615530},{"_id":"source/img/httpuserserviceuser1.png","hash":"54616406d28eb93a4c83d5bb213d6d3611683f93","modified":1665494735548},{"_id":"source/img/public.png","hash":"e936bf03d1482855960acc3fbc52ab9a24944ea4","modified":1665281579280},{"_id":"source/img/将nacos文件夹复制三份.png","hash":"bc5e60af1486036beb25ce23a7fc836c46b69476","modified":1665493043954},{"_id":"source/img/服务拆分注意事项.png","hash":"bff073b6e23f8c09d6972e677d6176d94e019aa8","modified":1665060549543},{"_id":"source/_posts/AcWing/算法基础课/1、基础算法/AcWing-785-快速排序.md","hash":"569acd36067f7ba9dd06f386a7ba907ad0b3d312","modified":1665021007818},{"_id":"source/_posts/AcWing/算法基础课/2、数据结构/AcWing-827-双链表.md","hash":"aed389127886ca0f62446aeb34b28be5dc78affd","modified":1663905002622},{"_id":"source/_posts/AcWing/算法基础课/2、数据结构/AcWing-828-模拟栈.md","hash":"d7af3e85d78891444688c44edf77bdfc56868532","modified":1663905002623},{"_id":"source/_posts/AcWing/算法基础课/2、数据结构/AcWing-836-单链表.md","hash":"abc8743622f238e45f53065167f18003ef61127f","modified":1663905002623},{"_id":"source/_posts/AcWing/算法基础课/2、数据结构/AcWing154滑动窗口.md","hash":"245f24dbafe7f2b8c6eaf1ce14c5c293caa42700","modified":1663905002624},{"_id":"source/_posts/AcWing/算法基础课/2、数据结构/AcWing829模拟队列.md","hash":"9017c1dfb450205f3608c4cb4ae59f224c6dae96","modified":1663905002625},{"_id":"source/_posts/AcWing/算法基础课/2、数据结构/AcWing830单调栈.md","hash":"29a3e2192f9a1cec6c07a2660ad07f2a9344fada","modified":1663905002626},{"_id":"source/_posts/AcWing/算法基础课/2、数据结构/AcWing831KMP字符串.md","hash":"04435e3c700a313590b6dac3ade7945d3f8c248a","modified":1663905002627},{"_id":"source/_posts/AcWing/算法基础课/2、数据结构/AcWing835Trie字符串统计.md","hash":"369ce90a26410c244e5827aec210558b0848f355","modified":1663905002627},{"_id":"source/_posts/AcWing/算法基础课/2、数据结构/AcWing836合并集合.md","hash":"864e59510ad141d326f2c9eb000317e02aefa42e","modified":1663905002628},{"_id":"source/_posts/AcWing/算法基础课/2、数据结构/AcWing837连通块中点的数量.md","hash":"d5d2e117b75b7645105dcbfb109c49a1ecbb122a","modified":1663905002629},{"_id":"source/_posts/AcWing/算法基础课/2、数据结构/AcWing838堆排序.md","hash":"917fea0029880660d9da2f12885a4829584a971d","modified":1663905002630},{"_id":"source/_posts/AcWing/算法基础课/2、数据结构/AcWing839模拟堆.md","hash":"aa271da9accccab4a82c885986700da0f095b662","modified":1663905002631},{"_id":"source/_posts/AcWing/算法基础课/2、数据结构/AcWing840模拟散列表.md","hash":"3541b60102b23d2e1246849cef53af554455db73","modified":1663905002631},{"_id":"source/_posts/AcWing/算法基础课/3、搜索与图论/AcWing842排列数字.md","hash":"87bab4e7c889f58f2bec8727481677e8e7af3794","modified":1663905002633},{"_id":"source/_posts/AcWing/算法基础课/3、搜索与图论/AcWing843n-皇后问题.md","hash":"d6cec7607b60d4bdb6b248441b7cd0c5d26c4356","modified":1663905002634},{"_id":"source/_posts/AcWing/算法基础课/2、数据结构/AcWing841字符串哈希.md","hash":"3b6aa240cb963148b9143a609ae6a6a0dac560b4","modified":1663905002632},{"_id":"source/_posts/AcWing/算法基础课/3、搜索与图论/AcWing844走迷宫.md","hash":"fe66fb33b16e8c7089f24991c44e1c5ed3a21e02","modified":1663905002635},{"_id":"themes/butterfly/source/img/网站背景.jpeg","hash":"ef8d2e9f9748528c9b34f602adf4f40d8d46f68d","modified":1666503688802},{"_id":"source/_posts/Mysql.md","hash":"5a11b35fe1c55b3c951981e841f3de3516e41cae","modified":1669102891486},{"_id":"source/img/AddRequestHeader.png","hash":"0ef9c83668bc487c5addb646b425de9ad913a94e","modified":1665494766913},{"_id":"source/img/Eureka启动成功界面.png","hash":"41e8986ac46ce0f03936db762524089c4ada873b","modified":1665242173833},{"_id":"source/img/Eureka4项目启动.png","hash":"1ef147b0ac33628337433605806ffaa4e0af9605","modified":1665242796620},{"_id":"source/img/Eureka启动成功界面2.png","hash":"9c80c3bbbb0e0caf97bdedf515b81d68cb2844e4","modified":1665242650123},{"_id":"source/img/Eureka注册步骤.png","hash":"45c6ce1c1a7e6434c615aadd382ea797f45818e7","modified":1665241453431},{"_id":"source/img/Nacos配置中心.png","hash":"4186aaaa46be9b9605679b269f19080b8f6bd8d3","modified":1665492520536},{"_id":"source/img/SpringCloud和SpringBoot的版本兼容关系.png","hash":"89c74699ab74494ad5ce7ecf17225f866a5d2c11","modified":1665060323280},{"_id":"source/img/feign-api.png","hash":"52e8be03f769ee3f6f52c75c547af2d697a65d14","modified":1665494708967},{"_id":"source/img/feign-api修改.png","hash":"4e5b3c7e3e9f866a14c415fc20615c47fd29d9ba","modified":1665494715106},{"_id":"source/img/getServer负载均衡.png","hash":"9b876172b90d3bd1282d161c591b34ad2f66fdab","modified":1665278952529},{"_id":"source/img/nacos修改权重.png","hash":"0404d75375663bc797bdde5d9f941107fe13d93f","modified":1665281176516},{"_id":"source/img/robbon流程总结.png","hash":"25b26ea5f8aa089623aac6d63c63a597320003a3","modified":1665279410399},{"_id":"source/img/rule默认值.png","hash":"806eb951f1c4ed5399611408ccd08e6341ec2866","modified":1665279181980},{"_id":"source/img/优先级有高低之分.png","hash":"98e94c55da997301aa705367854f1c3018aea441","modified":1665492871375},{"_id":"source/img/使用不同的配置结果1.png","hash":"0a3b7ba3b189d2f88f551642c7578429a63db3dd","modified":1665492834393},{"_id":"source/img/使用不同的配置结果2.png","hash":"2b147a853269e3502c6a4757b3292c07aef5ccc6","modified":1665492842496},{"_id":"source/img/修改配置文件.png","hash":"627448048f2c77c01f490ab562c6b9e26d391805","modified":1665493033719},{"_id":"source/img/创建namespace.png","hash":"b266c4a22b227b1688bc70e478733a51fae7b9c4","modified":1665281328019},{"_id":"source/img/利用RestTemplate发起远程调用.png","hash":"aa8a40f390dec735d084cccd6c923309a9464e7a","modified":1665493056700},{"_id":"source/img/加入Nacos配置后.png","hash":"8fd645bda67cfc7b6987026ee28a79192f3b0dc5","modified":1665492693038},{"_id":"source/img/单体架构.png","hash":"4e544fc6cec96c48b6731c7d44778d87d425b9b5","modified":1665054373472},{"_id":"source/img/启动示意图.png","hash":"33011b32f8bd05e7c2c3c47d0e6477904d911a0c","modified":1665492752756},{"_id":"source/img/填写表单.png","hash":"7afe1cf0dce268b98e6f436db9313f74b582a50a","modified":1665281427862},{"_id":"source/img/技术栈.png","hash":"e5ad0646a9cf4435049f694bedbc1f1916e39371","modified":1665060473456},{"_id":"source/img/新的namespace.png","hash":"9ba1188efe90196d40bd2356305e7e1d0de013c8","modified":1665281471636},{"_id":"source/img/架构介绍.png","hash":"7afd3da6e4b061925b36796e4896239913ea9ed8","modified":1665492990477},{"_id":"source/img/继续跟入.png","hash":"4b430c328ff55a4d38cf13538b1552afdc14b75c","modified":1665279015800},{"_id":"source/img/自动化部署.png","hash":"b45f5b90d1465ae517f908231373814cbe041aee","modified":1665060496624},{"_id":"source/img/获取配置.png","hash":"f42f6ea44d05aac36339e0f12b008ddff814f165","modified":1665492685270},{"_id":"source/img/负载均衡策略.png","hash":"8a77dfeaa2b971341a58d8f6146cd8893f3a46b7","modified":1665279558837},{"_id":"source/img/Eureka注册中心.png","hash":"555a545aa1ae959d08d3f91c67966cb246ccdc4c","modified":1665240746853},{"_id":"source/img/Nacos启动.png","hash":"febf239e4e3d3fbf6bbd90960192a86f4566bdc4","modified":1665280247338},{"_id":"source/img/Nacos注册.png","hash":"798b9f1b41637d641794963dadeb2b2b68b325cf","modified":1665280427955},{"_id":"source/img/Services.png","hash":"d72902888ecd3bd74ae0ea0015dd0036f8490074","modified":1665060587202},{"_id":"source/img/SpringCloud常用组件.png","hash":"223e4f083f89d67af120ad9fcca86bd7805b4d47","modified":1665060195247},{"_id":"source/img/bootstrapyml.png","hash":"d92dd964971916bf7a9bc03d4aae769a61dc74f2","modified":1665492702104},{"_id":"source/img/gateway流程图.png","hash":"3dedd3df2ac60561460a113477c0a2149c74bca9","modified":1665494744246},{"_id":"source/img/nacos权限配置.png","hash":"0f18dbf0a523a31c81ae169885ae5abf3a2711b1","modified":1665281140022},{"_id":"source/img/nacos配置映射关系.png","hash":"dd3959e6ec5cf778d8b4daae5fe99fc8dc0efc82","modified":1665492727177},{"_id":"source/img/使用不同的profile2.png","hash":"2173030d37e85c9342ac139d9af11034529fdc3c","modified":1665492824561},{"_id":"source/img/修改Eureka的url路径.png","hash":"f42e0a494375ac539eb897af885f3583a4799e33","modified":1665243092433},{"_id":"source/img/再次启动集群实例.png","hash":"83372936f0c4ae94d35a639936e8f94c72cbcbf4","modified":1665280734650},{"_id":"source/img/分布式架构.png","hash":"5e11d6a1100b93df030b727205782a54bda3c40c","modified":1665054763302},{"_id":"source/img/填写配置信息.png","hash":"44960572cb9f7304077261fa183a657ab33af69a","modified":1665492675768},{"_id":"source/img/微服务.png","hash":"d83b6e77f3becbf92001eb4fd0495d95904f51f8","modified":1665055306505},{"_id":"source/img/技术栈对比.png","hash":"ff42f10d0bfe65daa3e0c80cbc9819374f7593cd","modified":1665060520433},{"_id":"source/img/更细致的配置.png","hash":"d26954f125db62522e53f9ce4b155a3b5bfa585f","modified":1665492882626},{"_id":"source/img/添加namespace.png","hash":"f2c54abd0515cd573c1964129b4f04e066adb166","modified":1665281378476},{"_id":"source/img/添加一个环境共享配置.png","hash":"6e456278f14fe6e841c1271b0258c7e51aa74394","modified":1665492784973},{"_id":"source/img/添加配置文件.png","hash":"f8748dab7f7de0615d735f69a15409ee26157a49","modified":1665492656633},{"_id":"source/img/第一次访问.png","hash":"e2672d3a1311fb7d57d543aa538deb276d66de1e","modified":1665279821644},{"_id":"source/img/计划的Nacos集群.png","hash":"135412f6e417e36cdfdbf66302de426173ae15dc","modified":1665493000500},{"_id":"source/img/读取新添加的属性.png","hash":"c83e6c40a063d7eb68ea9843c3babfe29195b0a8","modified":1665492792916},{"_id":"source/img/跟进execute()方法.png","hash":"691ee4bb4e541a7f94e6a0afbdd0ca79ea784e48","modified":1665278685177},{"_id":"source/img/Gateway网关.png","hash":"38f04174a34d362e7c78bd4f7104f01c1179495a","modified":1665494726214},{"_id":"source/img/Github搜索项目技巧.png","hash":"47d41f6ae9388c1d35d1ee628a30ffc9ba2d114c","modified":1668947103328},{"_id":"source/img/IDEA多实例调试.png","hash":"2dbad727c6e81da8d8bf6a085d20833964910eff","modified":1665242730606},{"_id":"source/img/Nacos注册中心.png","hash":"8e2040ce3b0c59d5722ab010a5141190d30af062","modified":1665280110989},{"_id":"source/img/feign作用.png","hash":"92f1dec515a22a66e53b32a0cddcdb5a74cc381d","modified":1665493064707},{"_id":"source/img/rule.png","hash":"b5decc8223f54272ac74a2737be1e996552540b9","modified":1665279036442},{"_id":"source/img/使用不同的profile.png","hash":"08a5307ae1973b5e4a4b5b96f9eb450ab6ce456a","modified":1665492814110},{"_id":"source/img/微服务集群访问.png","hash":"78529073e2859f1b5be8f135717e3acb7b72ea63","modified":1665280594246},{"_id":"source/img/抽取方式.png","hash":"8208d45b598072f2bb71f425317935c800317bbe","modified":1665494700859},{"_id":"source/img/控制台报错.png","hash":"a0c61b82de3d00f29f87504cdfeedb7c2fb83240","modified":1665281669921},{"_id":"source/img/最佳实践.png","hash":"34cf0978a8643f5dfd409b0e013472b0b3c2bb2c","modified":1665494692382},{"_id":"source/img/查看nacos控制台.png","hash":"8eecb8295f73e014bdd4ce715202b0a4531d3812","modified":1665280782741},{"_id":"source/img/注解开启Feign.png","hash":"80a5b729e640b8355dbeaceec6f2e0b750c1089d","modified":1665493073865},{"_id":"source/img/跟踪源码 chooseServer()方法.png","hash":"e001e61098e17c5c5d1f1592ed169401a3edfffa","modified":1665279028909},{"_id":"source/img/过滤器工厂.png","hash":"f76b5b2b047da1c6f089170dd0bc213b18a614c5","modified":1665494753799},{"_id":"source/img/过滤器顺序.png","hash":"3c9b6262d65b3aaf49e1f93e55f3cc2d84cc9927","modified":1665494787331},{"_id":"source/img/需要学习的微服务知识内容.png","hash":"25c611970cb8d9e2213a5ead6ccff78f03d3e90c","modified":1665060403488},{"_id":"source/img/HttpClient.png","hash":"75d8f2710a81f0fd70bdfaa79fb59869bf767c00","modified":1665494683889},{"_id":"source/img/Nacos集群.png","hash":"0d3fac6d0a006a1ba5a09536ddb2bd608e6202b9","modified":1665280547415},{"_id":"source/img/添加一个方法.png","hash":"6621ab19100b258a04d69898ee782ec45779fa2a","modified":1665492802235},{"_id":"source/img/环境隔离.png","hash":"5446679b7849c867eb9035a6fe3fc650acf6a9b3","modified":1665281245200},{"_id":"source/img/loadBalance.png","hash":"90fa7e1c03c49f39d1d474ebd0f861ef8b5397d1","modified":1665494674997},{"_id":"source/img/控制台打印请求头.png","hash":"c68db11391260fa270aed4a7300135d23f85c43d","modified":1665494778182},{"_id":"source/img/代码验证.png","hash":"431ead5ecb6ebcd0d4d60bbed8823fb8835fe91f","modified":1665492744869},{"_id":"source/img/自定义策略.png","hash":"ac5829bc5d01ea42c4d3949a1efad742205b3dfa","modified":1665279692103},{"_id":"source/img/Interceptor源码跟踪.png","hash":"6638ead27c3879f25d1e39d22a04e0bc0fd85929","modified":1665277596443},{"_id":"source/img/nacos集群警告.png","hash":"dbb67deb726c3ea3852ed233732168567895576d","modified":1665281070999},{"_id":"public/search.xml","hash":"08c7f1ffb8deaf2a8f6ed0b28bbb741d29034de1","modified":1669106387655},{"_id":"public/404.html","hash":"772b84e95aaea138a14ff6f57348e7d7c89b2b0f","modified":1669106387655},{"_id":"public/categories/index.html","hash":"39ba634bdab562869c1cda9ee6ff806877f5a3ab","modified":1669106387655},{"_id":"public/link/index.html","hash":"105151d74a02ddf0968fc880aa91b3f34d40b945","modified":1669106387655},{"_id":"public/tags/index.html","hash":"be89e797c3570907fe8551b2bfe71c7a822f1550","modified":1669106387655},{"_id":"public/2022/11/22/Mysql/index.html","hash":"b6dbaf2a37665bacaf00af6c471919e1531e3913","modified":1669106387655},{"_id":"public/2022/11/20/SSM/index.html","hash":"43c66578f01e77248dccbd96f0e82ef2d74b5555","modified":1669106387655},{"_id":"public/2022/11/20/MybatisAndMybatis-plus/index.html","hash":"450be70e78e39afebdc289b40256a991c413e1c7","modified":1669106387655},{"_id":"public/2022/11/20/Git学习笔记/index.html","hash":"3f301ffe7fd15effba1a534aa95c75ed2e823a9f","modified":1669106387655},{"_id":"public/2022/11/19/Maven/index.html","hash":"32c0f6b4655b25f21686f5300a834159d20b6399","modified":1669106387655},{"_id":"public/2022/10/06/微服务技术栈/index.html","hash":"0320254253cb4c92ce45958c7a6186421e80f9ef","modified":1669106387655},{"_id":"public/2022/10/06/Linux/index.html","hash":"709364895edf08c7e606c5182269b2fb5fd8c376","modified":1669106387655},{"_id":"public/2022/10/06/数据结构/index.html","hash":"8ade703f492b771ae1bce0ad26124556fad728c7","modified":1669106387655},{"_id":"public/2022/09/23/AcWing/算法基础课/3、搜索与图论/AcWing844走迷宫/index.html","hash":"ea6c62ee8b11dc2c7f65e57949d194e0aeab965b","modified":1669106387655},{"_id":"public/2022/09/23/AcWing/算法基础课/3、搜索与图论/AcWing843n-皇后问题/index.html","hash":"cffbecd20606b507bb9e3b97767401f80b9355bd","modified":1669106387655},{"_id":"public/2022/09/23/AcWing/算法基础课/3、搜索与图论/AcWing842排列数字/index.html","hash":"773b609c43e67e72725296f2973a349b1cba2243","modified":1669106387655},{"_id":"public/2022/09/23/AcWing/算法基础课/2、数据结构/AcWing841字符串哈希/index.html","hash":"c9273eb57efea0b31ec368e9799fc2df0e91a23d","modified":1669106387655},{"_id":"public/2022/09/23/AcWing/算法基础课/2、数据结构/AcWing840模拟散列表/index.html","hash":"9f8b7dbc90a6b23c4a54a7d3366d501f678fa316","modified":1669106387655},{"_id":"public/2022/09/23/AcWing/算法基础课/2、数据结构/AcWing839模拟堆/index.html","hash":"bf837f88523c9997bdc1640f96554d057fe768fd","modified":1669106387655},{"_id":"public/2022/09/23/AcWing/算法基础课/2、数据结构/AcWing838堆排序/index.html","hash":"89c1dc69f24156c738bba0fcf55da01a4307449a","modified":1669106387655},{"_id":"public/2022/09/23/AcWing/算法基础课/2、数据结构/AcWing837连通块中点的数量/index.html","hash":"013f7c13d7682ad6b67be4392dd06a07402655e3","modified":1669106387655},{"_id":"public/2022/09/23/AcWing/算法基础课/2、数据结构/AcWing836合并集合/index.html","hash":"a2a45bc6232699bb70a1f9db495877d3a94e56cf","modified":1669106387655},{"_id":"public/2022/09/23/AcWing/算法基础课/2、数据结构/AcWing835Trie字符串统计/index.html","hash":"60969ca5fbd84dcb42f435313ffe0249a172c7bb","modified":1669106387655},{"_id":"public/2022/09/23/AcWing/算法基础课/2、数据结构/AcWing830单调栈/index.html","hash":"bbc53ceffc1f28c12d4bf2f228732043f59ca34b","modified":1669106387655},{"_id":"public/2022/09/23/AcWing/算法基础课/2、数据结构/AcWing831KMP字符串/index.html","hash":"efd787a1a6b0fa130a97972d8ccf33b19b5427ab","modified":1669106387655},{"_id":"public/2022/09/23/AcWing/算法基础课/2、数据结构/AcWing829模拟队列/index.html","hash":"ce58be5213d1cd606651c315b72894bf2f4510ad","modified":1669106387655},{"_id":"public/2022/09/23/AcWing/算法基础课/2、数据结构/AcWing154滑动窗口/index.html","hash":"e91f97ffd8b0857f57ad3e47e9650927e8e6550a","modified":1669106387655},{"_id":"public/2022/09/23/AcWing/算法基础课/2、数据结构/AcWing-828-模拟栈/index.html","hash":"9f2923ef1f1dab44cdfa954210d3945bd3ae576b","modified":1669106387655},{"_id":"public/2022/09/23/AcWing/算法基础课/2、数据结构/AcWing-836-单链表/index.html","hash":"26e199e2dca40b22c3932dbdc265809240b75d99","modified":1669106387655},{"_id":"public/2022/09/23/AcWing/算法基础课/2、数据结构/AcWing-827-双链表/index.html","hash":"2bc5bcdf8d07b6b9a56f9f4bb738408f2c4d8c66","modified":1669106387655},{"_id":"public/2022/09/23/AcWing/算法基础课/1、基础算法/AcWing-785-快速排序/index.html","hash":"f08d223b50a60b815c7a3e448e85c1596e89b1fb","modified":1669106387655},{"_id":"public/archives/index.html","hash":"db888e7d279e0d2ec0b3791d1550447204cf4b7c","modified":1669106387655},{"_id":"public/archives/page/2/index.html","hash":"c11942ba67e4d7847fe75d16e709a8d2fad5aece","modified":1669106387655},{"_id":"public/archives/page/3/index.html","hash":"39ad0af2350c1463e5b698fc0fb3fcf6f305bedc","modified":1669106387655},{"_id":"public/archives/2022/index.html","hash":"fcfcd15b0fed6fc5a702c3785c696cca2f829d57","modified":1669106387655},{"_id":"public/archives/2022/page/2/index.html","hash":"a33d34157b28b6fe426eb165f338ac50d4644494","modified":1669106387655},{"_id":"public/archives/2022/page/3/index.html","hash":"06164de0a31faf515f024d0ecf6676c86ba006f7","modified":1669106387655},{"_id":"public/archives/2022/09/index.html","hash":"8f6c9d1d80999f59c1dbeaa4941988f0f0da122e","modified":1669106387655},{"_id":"public/archives/2022/09/page/2/index.html","hash":"5c943a8299282d63fee5cf6e368371318ab115d6","modified":1669106387655},{"_id":"public/archives/2022/10/index.html","hash":"f42c42247d99df04ea9d5ade3ce12b2fc18dc91b","modified":1669106387655},{"_id":"public/archives/2022/11/index.html","hash":"31d5316acf27b946ee0f80bd2737e2f1f4615b44","modified":1669106387655},{"_id":"public/index.html","hash":"d2b69bd8db5ff0926b16775f6592d0e0b34aa638","modified":1669106387655},{"_id":"public/page/2/index.html","hash":"5babdef5f5851b0d2df7316890b760b5baeb8d08","modified":1669106387655},{"_id":"public/page/3/index.html","hash":"5e98c7a4c47bb1f89184b0019fa705d00c8dd1d5","modified":1669106387655},{"_id":"public/categories/Linux/index.html","hash":"18ca463cb3bead0d51668616d7cf884a094c5bff","modified":1669106387655},{"_id":"public/categories/Git/index.html","hash":"f990441c17b2b57e48a0a1670335864847f24292","modified":1669106387655},{"_id":"public/categories/Maven/index.html","hash":"a7354d6d8c3b6d0b89040b42079a5b3b2a98dfa2","modified":1669106387655},{"_id":"public/categories/Mysql/index.html","hash":"5fef55c287269a0ad660d58765968e3cc259de26","modified":1669106387655},{"_id":"public/categories/数据结构/index.html","hash":"88838182daa650443a4eeb012447ee296da40385","modified":1669106387655},{"_id":"public/categories/微服务技术栈/index.html","hash":"df1c526a62a87862014338d51a57762b8bef98cb","modified":1669106387655},{"_id":"public/categories/AcWing/index.html","hash":"3b88ab92bd230eff7b1cf2b9a832018c30866518","modified":1669106387655},{"_id":"public/categories/AcWing/page/2/index.html","hash":"92d479e6854fa6145008d5ca2b4b3ebd56beb39a","modified":1669106387655},{"_id":"public/categories/AcWing/算法基础课/index.html","hash":"db53198d04686483bf7a4ea301a26ef055cda36a","modified":1669106387655},{"_id":"public/categories/AcWing/算法基础课/page/2/index.html","hash":"e58af046afcb38990f43390c67f86f7a6195d997","modified":1669106387655},{"_id":"public/categories/AcWing/算法基础课/2、数据结构/index.html","hash":"2187e73c47157b80bc5f0dd06addb045d37a06fd","modified":1669106387655},{"_id":"public/categories/AcWing/算法基础课/2、数据结构/page/2/index.html","hash":"ec2bdd1a21b0865fb5084c201d0f564ca9af8806","modified":1669106387655},{"_id":"public/categories/AcWing/算法基础课/1、基础算法/index.html","hash":"42b2a3651bbac6fabf3d6fc7a4b95cc789a91873","modified":1669106387655},{"_id":"public/tags/Linux/index.html","hash":"6143df8023663b4dfadd5492623c46d62bf5263d","modified":1669106387655},{"_id":"public/tags/Git/index.html","hash":"31351d8832f92a6be459821f9b51432406f48ced","modified":1669106387655},{"_id":"public/tags/Maven/index.html","hash":"d5a2c67a471b5c10def564bb4e43488911c8cebd","modified":1669106387655},{"_id":"public/tags/Mybatis/index.html","hash":"e5327996c483013bd4d475ec9846888b79f308d0","modified":1669106387655},{"_id":"public/tags/Mybatis-Plus/index.html","hash":"91ad4a2d5d803f7b3fe2a007f797a52ec8bba3d3","modified":1669106387655},{"_id":"public/tags/SSM/index.html","hash":"841596f73c0ea9288960caf61771e6ae980881ef","modified":1669106387655},{"_id":"public/tags/Mysql/index.html","hash":"cd12bd714e0defb8cd9a9e2c831305264b6dba70","modified":1669106387655},{"_id":"public/tags/数据结构/index.html","hash":"11d29aeb64dff66044005f791750a6432dda6868","modified":1669106387655},{"_id":"public/tags/SpringCloud/index.html","hash":"3df8a3a76e4301cb388304ecf1dcd16fae3cfb19","modified":1669106387655},{"_id":"public/tags/Eureka/index.html","hash":"92e55908642ce2b69162a3afecbc81ce648ab734","modified":1669106387655},{"_id":"public/tags/Nacos/index.html","hash":"a721d95ed993b4c98b356af4b3eabb5e6bfe9492","modified":1669106387655},{"_id":"public/tags/Feign/index.html","hash":"94b60da5ccb3bda21af04381c11b4d2271150a5f","modified":1669106387655},{"_id":"public/tags/Gateway/index.html","hash":"7d0a67c65377e305b92092b30f7f1bcaa247d67a","modified":1669106387655},{"_id":"public/tags/Docker/index.html","hash":"d37e11673297207dbedf0d07f6faf17f50ec03f8","modified":1669106387655},{"_id":"public/tags/MQ/index.html","hash":"95475f8b1c883d0ae1025fc9e9b000d392a5832a","modified":1669106387655},{"_id":"public/tags/RabbitMQ/index.html","hash":"c70dae6ea1f4ce4521a27650d17c7af70dc5244c","modified":1669106387655},{"_id":"public/tags/SpringAMQP/index.html","hash":"24755978bd0140b9e5fe55bf53254076db6e73d1","modified":1669106387655},{"_id":"public/tags/ES/index.html","hash":"26c1a2a034e0999daec7687c1d04e516e02c5592","modified":1669106387655},{"_id":"public/tags/RestClient/index.html","hash":"24e750dc28f7404c854c81ea47e039ff4ed40933","modified":1669106387655},{"_id":"public/tags/DSL/index.html","hash":"89a544a4fe13627a55958d153f0ae254a01989b4","modified":1669106387655},{"_id":"public/tags/Seata/index.html","hash":"f6fdeac986b528be5b98d9db346187d782ba135a","modified":1669106387655},{"_id":"public/tags/Redis/index.html","hash":"88e5216e88aa1a0c8bf5a1e29a40d866330b32f9","modified":1669106387655},{"_id":"public/tags/Sentinel/index.html","hash":"edbbad8e1fbc618199ec390ed821d037c5d545fb","modified":1669106387655},{"_id":"public/tags/Acwing/index.html","hash":"06fe9a67beab8098148f77bd69977cccec0c1aa2","modified":1669106387655},{"_id":"public/tags/Acwing/page/2/index.html","hash":"d3d0f5cc77e4e0ce173bb296cbb5bd4ed3251d9f","modified":1669106387655},{"_id":"public/tags/双链表/index.html","hash":"a94e55c9d8272c1a06b0bd46393eb98c7dc5348d","modified":1669106387655},{"_id":"public/tags/栈/index.html","hash":"b0c79c2c8d853470145ee88b202d4a92e0d156cb","modified":1669106387655},{"_id":"public/tags/单链表/index.html","hash":"e0c8ea86c55f47015b397de8c60896e84fa52039","modified":1669106387655},{"_id":"public/tags/单调队列/index.html","hash":"a6e6d27bf0ff6645c4278314d9e73aacd9e54ccd","modified":1669106387655},{"_id":"public/tags/队列/index.html","hash":"89861a8007fd424fb08780a82bd9066b6a96d850","modified":1669106387655},{"_id":"public/tags/单调栈/index.html","hash":"08f7ff8162f81ca734491b5f56cd8248676a16db","modified":1669106387655},{"_id":"public/tags/KMP/index.html","hash":"64c9298febb30044b6465aa05cc3c44103494dd3","modified":1669106387655},{"_id":"public/tags/Trie/index.html","hash":"dfa029d36b32fb86df4efba0a153ae429342100c","modified":1669106387655},{"_id":"public/tags/并查集/index.html","hash":"e7a582c6404e0ea87a07ac48539c10ad533ac383","modified":1669106387655},{"_id":"public/tags/堆/index.html","hash":"7b3d7ae5e0bfa632afed1f22de70383060d75e4a","modified":1669106387655},{"_id":"public/tags/哈希表/index.html","hash":"a81eca194ebee1ef2215f4e5871b820fe37c4573","modified":1669106387655},{"_id":"public/tags/DFS/index.html","hash":"f49b07ce3cb640d0f909d8014881fe6d6cd11843","modified":1669106387655},{"_id":"public/tags/BFS/index.html","hash":"fe2b442620581292f5231be12324856889e85730","modified":1669106387655},{"_id":"public/img/404.jpg","hash":"fb4489bc1d30c93d28f7332158c1c6c1416148de","modified":1669106387655},{"_id":"public/img/avatar.png","hash":"7879d36cfb2de6ad28f6e3b88d9738f4b79ebd67","modified":1669106387655},{"_id":"public/img/favicon.png","hash":"3cf89864b4f6c9b532522a4d260a2e887971c92d","modified":1669106387655},{"_id":"public/img/friend_404.gif","hash":"8d2d0ebef70a8eb07329f57e645889b0e420fa48","modified":1669106387655},{"_id":"public/img/Git工作流程.png","hash":"910a7a18390346c18ebf01dfd9965725d2ff5a2c","modified":1669106387655},{"_id":"public/img/Ribbon负载均衡.png","hash":"855975ba69d09e2583f837b2cc433640aad50617","modified":1669106387655},{"_id":"public/img/Service3.png","hash":"f1b83ba73c804226ffb6ef2be3ad0654f2c6a982","modified":1669106387655},{"_id":"public/img/Services2.png","hash":"d9ae1981eb1e92c2a3445b3f339ca6fd4ab3ec2f","modified":1669106387655},{"_id":"public/img/dev.png","hash":"f894aab631493e42b2a6e1d2d5ae9606e5fc05ce","modified":1669106387655},{"_id":"public/img/httpuserserviceuser1.png","hash":"54616406d28eb93a4c83d5bb213d6d3611683f93","modified":1669106387655},{"_id":"public/img/public.png","hash":"e936bf03d1482855960acc3fbc52ab9a24944ea4","modified":1669106387655},{"_id":"public/img/将nacos文件夹复制三份.png","hash":"bc5e60af1486036beb25ce23a7fc836c46b69476","modified":1669106387655},{"_id":"public/img/服务拆分注意事项.png","hash":"bff073b6e23f8c09d6972e677d6176d94e019aa8","modified":1669106387655},{"_id":"public/img/AddRequestHeader.png","hash":"0ef9c83668bc487c5addb646b425de9ad913a94e","modified":1669106387655},{"_id":"public/img/网站背景.jpeg","hash":"ef8d2e9f9748528c9b34f602adf4f40d8d46f68d","modified":1669106387655},{"_id":"public/img/Eureka4项目启动.png","hash":"1ef147b0ac33628337433605806ffaa4e0af9605","modified":1669106387655},{"_id":"public/img/Eureka启动成功界面.png","hash":"41e8986ac46ce0f03936db762524089c4ada873b","modified":1669106387655},{"_id":"public/img/Eureka启动成功界面2.png","hash":"9c80c3bbbb0e0caf97bdedf515b81d68cb2844e4","modified":1669106387655},{"_id":"public/img/Eureka注册步骤.png","hash":"45c6ce1c1a7e6434c615aadd382ea797f45818e7","modified":1669106387655},{"_id":"public/img/Nacos配置中心.png","hash":"4186aaaa46be9b9605679b269f19080b8f6bd8d3","modified":1669106387655},{"_id":"public/img/SpringCloud和SpringBoot的版本兼容关系.png","hash":"89c74699ab74494ad5ce7ecf17225f866a5d2c11","modified":1669106387655},{"_id":"public/img/feign-api.png","hash":"52e8be03f769ee3f6f52c75c547af2d697a65d14","modified":1669106387655},{"_id":"public/img/feign-api修改.png","hash":"4e5b3c7e3e9f866a14c415fc20615c47fd29d9ba","modified":1669106387655},{"_id":"public/img/getServer负载均衡.png","hash":"9b876172b90d3bd1282d161c591b34ad2f66fdab","modified":1669106387655},{"_id":"public/img/nacos修改权重.png","hash":"0404d75375663bc797bdde5d9f941107fe13d93f","modified":1669106387655},{"_id":"public/img/rule默认值.png","hash":"806eb951f1c4ed5399611408ccd08e6341ec2866","modified":1669106387655},{"_id":"public/img/robbon流程总结.png","hash":"25b26ea5f8aa089623aac6d63c63a597320003a3","modified":1669106387655},{"_id":"public/img/优先级有高低之分.png","hash":"98e94c55da997301aa705367854f1c3018aea441","modified":1669106387655},{"_id":"public/img/使用不同的配置结果2.png","hash":"2b147a853269e3502c6a4757b3292c07aef5ccc6","modified":1669106387655},{"_id":"public/img/使用不同的配置结果1.png","hash":"0a3b7ba3b189d2f88f551642c7578429a63db3dd","modified":1669106387655},{"_id":"public/img/修改配置文件.png","hash":"627448048f2c77c01f490ab562c6b9e26d391805","modified":1669106387655},{"_id":"public/img/创建namespace.png","hash":"b266c4a22b227b1688bc70e478733a51fae7b9c4","modified":1669106387655},{"_id":"public/img/加入Nacos配置后.png","hash":"8fd645bda67cfc7b6987026ee28a79192f3b0dc5","modified":1669106387655},{"_id":"public/img/利用RestTemplate发起远程调用.png","hash":"aa8a40f390dec735d084cccd6c923309a9464e7a","modified":1669106387655},{"_id":"public/img/单体架构.png","hash":"4e544fc6cec96c48b6731c7d44778d87d425b9b5","modified":1669106387655},{"_id":"public/img/启动示意图.png","hash":"33011b32f8bd05e7c2c3c47d0e6477904d911a0c","modified":1669106387655},{"_id":"public/img/填写表单.png","hash":"7afe1cf0dce268b98e6f436db9313f74b582a50a","modified":1669106387655},{"_id":"public/img/技术栈.png","hash":"e5ad0646a9cf4435049f694bedbc1f1916e39371","modified":1669106387655},{"_id":"public/img/新的namespace.png","hash":"9ba1188efe90196d40bd2356305e7e1d0de013c8","modified":1669106387655},{"_id":"public/img/架构介绍.png","hash":"7afd3da6e4b061925b36796e4896239913ea9ed8","modified":1669106387655},{"_id":"public/img/自动化部署.png","hash":"b45f5b90d1465ae517f908231373814cbe041aee","modified":1669106387655},{"_id":"public/img/获取配置.png","hash":"f42f6ea44d05aac36339e0f12b008ddff814f165","modified":1669106387655},{"_id":"public/img/继续跟入.png","hash":"4b430c328ff55a4d38cf13538b1552afdc14b75c","modified":1669106387655},{"_id":"public/img/负载均衡策略.png","hash":"8a77dfeaa2b971341a58d8f6146cd8893f3a46b7","modified":1669106387655},{"_id":"public/js/utils.js","hash":"0b95daada72abb5d64a1e3236049a60120e47cca","modified":1669106387655},{"_id":"public/js/search/local-search.js","hash":"3071a4208fdf89ad7e0031536dd6ffa7bc951e4d","modified":1669106387655},{"_id":"public/css/var.css","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1669106387655},{"_id":"public/js/search/algolia.js","hash":"9feb248552667c53ce1b19bc7a295215f8c77008","modified":1669106387655},{"_id":"public/css/index.css","hash":"ffd1dc0a54ac4fb2233cfbfc3183f624c479449d","modified":1669106387655},{"_id":"public/js/main.js","hash":"73d2624ed465e4cfb1ebb00b2c8a24f5fc29bb21","modified":1669106387655},{"_id":"public/js/tw_cn.js","hash":"00053ce73210274b3679f42607edef1206eebc68","modified":1669106387655},{"_id":"public/img/Eureka注册中心.png","hash":"555a545aa1ae959d08d3f91c67966cb246ccdc4c","modified":1669106387655},{"_id":"public/img/Nacos注册.png","hash":"798b9f1b41637d641794963dadeb2b2b68b325cf","modified":1669106387655},{"_id":"public/img/Nacos启动.png","hash":"febf239e4e3d3fbf6bbd90960192a86f4566bdc4","modified":1669106387655},{"_id":"public/img/Services.png","hash":"d72902888ecd3bd74ae0ea0015dd0036f8490074","modified":1669106387655},{"_id":"public/img/bootstrapyml.png","hash":"d92dd964971916bf7a9bc03d4aae769a61dc74f2","modified":1669106387655},{"_id":"public/img/SpringCloud常用组件.png","hash":"223e4f083f89d67af120ad9fcca86bd7805b4d47","modified":1669106387655},{"_id":"public/img/gateway流程图.png","hash":"3dedd3df2ac60561460a113477c0a2149c74bca9","modified":1669106387655},{"_id":"public/img/nacos配置映射关系.png","hash":"dd3959e6ec5cf778d8b4daae5fe99fc8dc0efc82","modified":1669106387655},{"_id":"public/img/nacos权限配置.png","hash":"0f18dbf0a523a31c81ae169885ae5abf3a2711b1","modified":1669106387655},{"_id":"public/img/使用不同的profile2.png","hash":"2173030d37e85c9342ac139d9af11034529fdc3c","modified":1669106387655},{"_id":"public/img/修改Eureka的url路径.png","hash":"f42e0a494375ac539eb897af885f3583a4799e33","modified":1669106387655},{"_id":"public/img/再次启动集群实例.png","hash":"83372936f0c4ae94d35a639936e8f94c72cbcbf4","modified":1669106387655},{"_id":"public/img/分布式架构.png","hash":"5e11d6a1100b93df030b727205782a54bda3c40c","modified":1669106387655},{"_id":"public/img/填写配置信息.png","hash":"44960572cb9f7304077261fa183a657ab33af69a","modified":1669106387655},{"_id":"public/img/微服务.png","hash":"d83b6e77f3becbf92001eb4fd0495d95904f51f8","modified":1669106387655},{"_id":"public/img/技术栈对比.png","hash":"ff42f10d0bfe65daa3e0c80cbc9819374f7593cd","modified":1669106387655},{"_id":"public/img/更细致的配置.png","hash":"d26954f125db62522e53f9ce4b155a3b5bfa585f","modified":1669106387655},{"_id":"public/img/添加namespace.png","hash":"f2c54abd0515cd573c1964129b4f04e066adb166","modified":1669106387655},{"_id":"public/img/添加一个环境共享配置.png","hash":"6e456278f14fe6e841c1271b0258c7e51aa74394","modified":1669106387655},{"_id":"public/img/添加配置文件.png","hash":"f8748dab7f7de0615d735f69a15409ee26157a49","modified":1669106387655},{"_id":"public/img/第一次访问.png","hash":"e2672d3a1311fb7d57d543aa538deb276d66de1e","modified":1669106387655},{"_id":"public/img/读取新添加的属性.png","hash":"c83e6c40a063d7eb68ea9843c3babfe29195b0a8","modified":1669106387655},{"_id":"public/img/跟进execute()方法.png","hash":"691ee4bb4e541a7f94e6a0afbdd0ca79ea784e48","modified":1669106387655},{"_id":"public/img/计划的Nacos集群.png","hash":"135412f6e417e36cdfdbf66302de426173ae15dc","modified":1669106387655},{"_id":"public/img/Github搜索项目技巧.png","hash":"47d41f6ae9388c1d35d1ee628a30ffc9ba2d114c","modified":1669106387655},{"_id":"public/img/Gateway网关.png","hash":"38f04174a34d362e7c78bd4f7104f01c1179495a","modified":1669106387655},{"_id":"public/img/IDEA多实例调试.png","hash":"2dbad727c6e81da8d8bf6a085d20833964910eff","modified":1669106387655},{"_id":"public/img/Nacos注册中心.png","hash":"8e2040ce3b0c59d5722ab010a5141190d30af062","modified":1669106387655},{"_id":"public/img/feign作用.png","hash":"92f1dec515a22a66e53b32a0cddcdb5a74cc381d","modified":1669106387655},{"_id":"public/img/rule.png","hash":"b5decc8223f54272ac74a2737be1e996552540b9","modified":1669106387655},{"_id":"public/img/使用不同的profile.png","hash":"08a5307ae1973b5e4a4b5b96f9eb450ab6ce456a","modified":1669106387655},{"_id":"public/img/微服务集群访问.png","hash":"78529073e2859f1b5be8f135717e3acb7b72ea63","modified":1669106387655},{"_id":"public/img/抽取方式.png","hash":"8208d45b598072f2bb71f425317935c800317bbe","modified":1669106387655},{"_id":"public/img/控制台报错.png","hash":"a0c61b82de3d00f29f87504cdfeedb7c2fb83240","modified":1669106387655},{"_id":"public/img/最佳实践.png","hash":"34cf0978a8643f5dfd409b0e013472b0b3c2bb2c","modified":1669106387655},{"_id":"public/img/查看nacos控制台.png","hash":"8eecb8295f73e014bdd4ce715202b0a4531d3812","modified":1669106387655},{"_id":"public/img/注解开启Feign.png","hash":"80a5b729e640b8355dbeaceec6f2e0b750c1089d","modified":1669106387655},{"_id":"public/img/跟踪源码 chooseServer()方法.png","hash":"e001e61098e17c5c5d1f1592ed169401a3edfffa","modified":1669106387655},{"_id":"public/img/过滤器工厂.png","hash":"f76b5b2b047da1c6f089170dd0bc213b18a614c5","modified":1669106387655},{"_id":"public/img/需要学习的微服务知识内容.png","hash":"25c611970cb8d9e2213a5ead6ccff78f03d3e90c","modified":1669106387655},{"_id":"public/img/过滤器顺序.png","hash":"3c9b6262d65b3aaf49e1f93e55f3cc2d84cc9927","modified":1669106387655},{"_id":"public/img/HttpClient.png","hash":"75d8f2710a81f0fd70bdfaa79fb59869bf767c00","modified":1669106387655},{"_id":"public/img/Nacos集群.png","hash":"0d3fac6d0a006a1ba5a09536ddb2bd608e6202b9","modified":1669106387655},{"_id":"public/img/添加一个方法.png","hash":"6621ab19100b258a04d69898ee782ec45779fa2a","modified":1669106387655},{"_id":"public/img/环境隔离.png","hash":"5446679b7849c867eb9035a6fe3fc650acf6a9b3","modified":1669106387655},{"_id":"public/img/loadBalance.png","hash":"90fa7e1c03c49f39d1d474ebd0f861ef8b5397d1","modified":1669106387655},{"_id":"public/img/控制台打印请求头.png","hash":"c68db11391260fa270aed4a7300135d23f85c43d","modified":1669106387655},{"_id":"public/img/代码验证.png","hash":"431ead5ecb6ebcd0d4d60bbed8823fb8835fe91f","modified":1669106387655},{"_id":"public/img/自定义策略.png","hash":"ac5829bc5d01ea42c4d3949a1efad742205b3dfa","modified":1669106387655},{"_id":"public/img/Interceptor源码跟踪.png","hash":"6638ead27c3879f25d1e39d22a04e0bc0fd85929","modified":1669106387655},{"_id":"public/img/nacos集群警告.png","hash":"dbb67deb726c3ea3852ed233732168567895576d","modified":1669106387655}],"Category":[{"name":"Linux","_id":"claryulc600075ojrfzv037xc"},{"name":"Git","_id":"claryulc8000b5ojr8ky3f8u8"},{"name":"Maven","_id":"claryulc9000g5ojr1x5q1ke1"},{"name":"Mysql","_id":"claryulcb000m5ojre7w2hzzw"},{"name":"数据结构","_id":"claryulcd000t5ojr05nn7pin"},{"name":"微服务技术栈","_id":"claryulcg000y5ojr9hqhdwgo"},{"name":"AcWing","_id":"claryulch00155ojr45k865sh"},{"name":"算法基础课","parent":"claryulch00155ojr45k865sh","_id":"claryulco001v5ojr1bzjcmck"},{"name":"2、数据结构","parent":"claryulco001v5ojr1bzjcmck","_id":"claryulct002r5ojrc7h42vfp"},{"name":"1、基础算法","parent":"claryulco001v5ojr1bzjcmck","_id":"claryulcu002w5ojr84ukci00"}],"Data":[{"_id":"link","data":[{"class_name":"友情链接","class_desc":"那些人，那些事","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]},{"class_name":"网站","class_desc":"值得推荐的网站","link_list":[{"name":"Youtube","link":"https://www.youtube.com/","avatar":"https://i.loli.net/2020/05/14/9ZkGg8v3azHJfM1.png","descr":"视频网站"},{"name":"Weibo","link":"https://www.weibo.com/","avatar":"https://i.loli.net/2020/05/14/TLJBum386vcnI1P.png","descr":"中国最大社交分享平台"},{"name":"Twitter","link":"https://twitter.com/","avatar":"https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png","descr":"社交分享平台"}]}]}],"Page":[{"title":"分类","date":"2022-07-23T06:07:49.000Z","type":"categories","_content":"","source":"categories/index.md","raw":"---\ntitle: 分类\ndate: 2022-07-23 14:07:49\ntype: \"categories\"\n---","updated":"2022-09-23T03:50:02.638Z","path":"categories/index.html","comments":1,"layout":"page","_id":"claryulbx00005ojr6q6n42wb","content":"","site":{"data":{"link":[{"class_name":"友情链接","class_desc":"那些人，那些事","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]},{"class_name":"网站","class_desc":"值得推荐的网站","link_list":[{"name":"Youtube","link":"https://www.youtube.com/","avatar":"https://i.loli.net/2020/05/14/9ZkGg8v3azHJfM1.png","descr":"视频网站"},{"name":"Weibo","link":"https://www.weibo.com/","avatar":"https://i.loli.net/2020/05/14/TLJBum386vcnI1P.png","descr":"中国最大社交分享平台"},{"name":"Twitter","link":"https://twitter.com/","avatar":"https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png","descr":"社交分享平台"}]}]}},"cover":"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7","excerpt":"","more":""},{"title":"友情链接","date":"2022-07-23T06:07:49.000Z","type":"link","_content":"","source":"link/index.md","raw":"---\ntitle: 友情链接\ndate: 2022-07-23 14:07:49\ntype: \"link\"\n---","updated":"2022-09-23T03:50:02.639Z","path":"link/index.html","comments":1,"layout":"page","_id":"claryulc200025ojrclfs76b0","content":"","site":{"data":{"link":[{"class_name":"友情链接","class_desc":"那些人，那些事","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]},{"class_name":"网站","class_desc":"值得推荐的网站","link_list":[{"name":"Youtube","link":"https://www.youtube.com/","avatar":"https://i.loli.net/2020/05/14/9ZkGg8v3azHJfM1.png","descr":"视频网站"},{"name":"Weibo","link":"https://www.weibo.com/","avatar":"https://i.loli.net/2020/05/14/TLJBum386vcnI1P.png","descr":"中国最大社交分享平台"},{"name":"Twitter","link":"https://twitter.com/","avatar":"https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png","descr":"社交分享平台"}]}]}},"cover":"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7","excerpt":"","more":""},{"_content":"## Welcome to MarkdownPad 2 ##\n\n**MarkdownPad** is a full-featured Markdown editor for Windows.\n\n### Built exclusively for Markdown ###\n\nEnjoy first-class Markdown support with easy access to  Markdown syntax and convenient keyboard shortcuts.\n\nGive them a try:\n\n- **Bold** (`Ctrl+B`) and *Italic* (`Ctrl+I`)\n- Quotes (`Ctrl+Q`)\n- Code blocks (`Ctrl+K`)\n- Headings 1, 2, 3 (`Ctrl+1`, `Ctrl+2`, `Ctrl+3`)\n- Lists (`Ctrl+U` and `Ctrl+Shift+O`)\n\n### See your changes instantly with LivePreview ###\n\nDon't guess if your [hyperlink syntax](http://markdownpad.com) is correct; LivePreview will show you exactly what your document looks like every time you press a key.\n\n### Make it your own ###\n\nFonts, color schemes, layouts and stylesheets are all 100% customizable so you can turn MarkdownPad into your perfect editor.\n\n### A robust editor for advanced Markdown users ###\n\nMarkdownPad supports multiple Markdown processing engines, including standard Markdown, Markdown Extra (with Table support) and GitHub Flavored Markdown.\n\nWith a tabbed document interface, PDF export, a built-in image uploader, session management, spell check, auto-save, syntax highlighting and a built-in CSS management interface, there's no limit to what you can do with MarkdownPad.\ntitle: 标籤\ndate: 2022-07-23 14:07:49\ntype: \"tags\"\n","source":"tags/index.md","raw":"## Welcome to MarkdownPad 2 ##\n\n**MarkdownPad** is a full-featured Markdown editor for Windows.\n\n### Built exclusively for Markdown ###\n\nEnjoy first-class Markdown support with easy access to  Markdown syntax and convenient keyboard shortcuts.\n\nGive them a try:\n\n- **Bold** (`Ctrl+B`) and *Italic* (`Ctrl+I`)\n- Quotes (`Ctrl+Q`)\n- Code blocks (`Ctrl+K`)\n- Headings 1, 2, 3 (`Ctrl+1`, `Ctrl+2`, `Ctrl+3`)\n- Lists (`Ctrl+U` and `Ctrl+Shift+O`)\n\n### See your changes instantly with LivePreview ###\n\nDon't guess if your [hyperlink syntax](http://markdownpad.com) is correct; LivePreview will show you exactly what your document looks like every time you press a key.\n\n### Make it your own ###\n\nFonts, color schemes, layouts and stylesheets are all 100% customizable so you can turn MarkdownPad into your perfect editor.\n\n### A robust editor for advanced Markdown users ###\n\nMarkdownPad supports multiple Markdown processing engines, including standard Markdown, Markdown Extra (with Table support) and GitHub Flavored Markdown.\n\nWith a tabbed document interface, PDF export, a built-in image uploader, session management, spell check, auto-save, syntax highlighting and a built-in CSS management interface, there's no limit to what you can do with MarkdownPad.\ntitle: 标籤\ndate: 2022-07-23 14:07:49\ntype: \"tags\"\n","date":"2022-09-23T03:50:02.640Z","updated":"2022-09-23T03:50:02.640Z","path":"tags/index.html","title":"","comments":1,"layout":"page","_id":"claryulc500055ojr83zwhx89","content":"<h2 id=\"Welcome-to-MarkdownPad-2\"><a href=\"#Welcome-to-MarkdownPad-2\" class=\"headerlink\" title=\"Welcome to MarkdownPad 2\"></a>Welcome to MarkdownPad 2</h2><p><strong>MarkdownPad</strong> is a full-featured Markdown editor for Windows.</p>\n<h3 id=\"Built-exclusively-for-Markdown\"><a href=\"#Built-exclusively-for-Markdown\" class=\"headerlink\" title=\"Built exclusively for Markdown\"></a>Built exclusively for Markdown</h3><p>Enjoy first-class Markdown support with easy access to  Markdown syntax and convenient keyboard shortcuts.</p>\n<p>Give them a try:</p>\n<ul>\n<li><strong>Bold</strong> (<code>Ctrl+B</code>) and <em>Italic</em> (<code>Ctrl+I</code>)</li>\n<li>Quotes (<code>Ctrl+Q</code>)</li>\n<li>Code blocks (<code>Ctrl+K</code>)</li>\n<li>Headings 1, 2, 3 (<code>Ctrl+1</code>, <code>Ctrl+2</code>, <code>Ctrl+3</code>)</li>\n<li>Lists (<code>Ctrl+U</code> and <code>Ctrl+Shift+O</code>)</li>\n</ul>\n<h3 id=\"See-your-changes-instantly-with-LivePreview\"><a href=\"#See-your-changes-instantly-with-LivePreview\" class=\"headerlink\" title=\"See your changes instantly with LivePreview\"></a>See your changes instantly with LivePreview</h3><p>Don’t guess if your <a href=\"http://markdownpad.com/\">hyperlink syntax</a> is correct; LivePreview will show you exactly what your document looks like every time you press a key.</p>\n<h3 id=\"Make-it-your-own\"><a href=\"#Make-it-your-own\" class=\"headerlink\" title=\"Make it your own\"></a>Make it your own</h3><p>Fonts, color schemes, layouts and stylesheets are all 100% customizable so you can turn MarkdownPad into your perfect editor.</p>\n<h3 id=\"A-robust-editor-for-advanced-Markdown-users\"><a href=\"#A-robust-editor-for-advanced-Markdown-users\" class=\"headerlink\" title=\"A robust editor for advanced Markdown users\"></a>A robust editor for advanced Markdown users</h3><p>MarkdownPad supports multiple Markdown processing engines, including standard Markdown, Markdown Extra (with Table support) and GitHub Flavored Markdown.</p>\n<p>With a tabbed document interface, PDF export, a built-in image uploader, session management, spell check, auto-save, syntax highlighting and a built-in CSS management interface, there’s no limit to what you can do with MarkdownPad.<br>title: 标籤<br>date: 2022-07-23 14:07:49<br>type: “tags”</p>\n","site":{"data":{"link":[{"class_name":"友情链接","class_desc":"那些人，那些事","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]},{"class_name":"网站","class_desc":"值得推荐的网站","link_list":[{"name":"Youtube","link":"https://www.youtube.com/","avatar":"https://i.loli.net/2020/05/14/9ZkGg8v3azHJfM1.png","descr":"视频网站"},{"name":"Weibo","link":"https://www.weibo.com/","avatar":"https://i.loli.net/2020/05/14/TLJBum386vcnI1P.png","descr":"中国最大社交分享平台"},{"name":"Twitter","link":"https://twitter.com/","avatar":"https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png","descr":"社交分享平台"}]}]}},"cover":"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7","excerpt":"","more":"<h2 id=\"Welcome-to-MarkdownPad-2\"><a href=\"#Welcome-to-MarkdownPad-2\" class=\"headerlink\" title=\"Welcome to MarkdownPad 2\"></a>Welcome to MarkdownPad 2</h2><p><strong>MarkdownPad</strong> is a full-featured Markdown editor for Windows.</p>\n<h3 id=\"Built-exclusively-for-Markdown\"><a href=\"#Built-exclusively-for-Markdown\" class=\"headerlink\" title=\"Built exclusively for Markdown\"></a>Built exclusively for Markdown</h3><p>Enjoy first-class Markdown support with easy access to  Markdown syntax and convenient keyboard shortcuts.</p>\n<p>Give them a try:</p>\n<ul>\n<li><strong>Bold</strong> (<code>Ctrl+B</code>) and <em>Italic</em> (<code>Ctrl+I</code>)</li>\n<li>Quotes (<code>Ctrl+Q</code>)</li>\n<li>Code blocks (<code>Ctrl+K</code>)</li>\n<li>Headings 1, 2, 3 (<code>Ctrl+1</code>, <code>Ctrl+2</code>, <code>Ctrl+3</code>)</li>\n<li>Lists (<code>Ctrl+U</code> and <code>Ctrl+Shift+O</code>)</li>\n</ul>\n<h3 id=\"See-your-changes-instantly-with-LivePreview\"><a href=\"#See-your-changes-instantly-with-LivePreview\" class=\"headerlink\" title=\"See your changes instantly with LivePreview\"></a>See your changes instantly with LivePreview</h3><p>Don’t guess if your <a href=\"http://markdownpad.com/\">hyperlink syntax</a> is correct; LivePreview will show you exactly what your document looks like every time you press a key.</p>\n<h3 id=\"Make-it-your-own\"><a href=\"#Make-it-your-own\" class=\"headerlink\" title=\"Make it your own\"></a>Make it your own</h3><p>Fonts, color schemes, layouts and stylesheets are all 100% customizable so you can turn MarkdownPad into your perfect editor.</p>\n<h3 id=\"A-robust-editor-for-advanced-Markdown-users\"><a href=\"#A-robust-editor-for-advanced-Markdown-users\" class=\"headerlink\" title=\"A robust editor for advanced Markdown users\"></a>A robust editor for advanced Markdown users</h3><p>MarkdownPad supports multiple Markdown processing engines, including standard Markdown, Markdown Extra (with Table support) and GitHub Flavored Markdown.</p>\n<p>With a tabbed document interface, PDF export, a built-in image uploader, session management, spell check, auto-save, syntax highlighting and a built-in CSS management interface, there’s no limit to what you can do with MarkdownPad.<br>title: 标籤<br>date: 2022-07-23 14:07:49<br>type: “tags”</p>\n"}],"Post":[{"title":"Linux","date":"2022-10-06T01:52:01.313Z","_content":"","source":"_posts/Linux.md","raw":"---\ntitle: Linux\ndate: \ntags:\n\t- Linux\ncategories:\n\t- [Linux]\n---","slug":"Linux","published":1,"updated":"2022-10-06T01:53:42.776Z","comments":1,"layout":"post","photos":[],"link":"","_id":"claryulc000015ojrfff0anmx","content":"","site":{"data":{"link":[{"class_name":"友情链接","class_desc":"那些人，那些事","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]},{"class_name":"网站","class_desc":"值得推荐的网站","link_list":[{"name":"Youtube","link":"https://www.youtube.com/","avatar":"https://i.loli.net/2020/05/14/9ZkGg8v3azHJfM1.png","descr":"视频网站"},{"name":"Weibo","link":"https://www.weibo.com/","avatar":"https://i.loli.net/2020/05/14/TLJBum386vcnI1P.png","descr":"中国最大社交分享平台"},{"name":"Twitter","link":"https://twitter.com/","avatar":"https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png","descr":"社交分享平台"}]}]}},"cover":"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7","excerpt":"","more":""},{"title":"Git学习笔记","date":"2022-11-20T05:57:04.232Z","_content":"\n# Git学习笔记\n\n## Git——世界上最先进的分布式版本控制系统\n\n​\t\t**学习git，可以去Git菜鸟** [Git菜鸟教程](https://www.runoob.com/git/git-tutorial.html)\n\n## 一、Git简介\n\n### 1、Git的诞生\n\nGit是Linus花了两周时间自己用**C语言**写了一个分布式版本控制系统\n\n### 2、分布式VS集中式\n\n- 集中式版本控制系统，版本库是集中存放在中央服务器的，而干活的时候，用的都是自己的电脑，所以要先从中央服务器取得最新的版本，然后开始干活，干完活了，再把自己的活推送给中央服务器。中央服务器就好比是一个图书馆，你要改一本书，必须先从图书馆借出来，然后回到家自己改，改完了，再放回图书馆\n  - 最大缺点：必须联网才能工作\n  - 其次，安全性较低，当中央服务器出了问题，所有人都没法工作\n- 分布式版本控制系统根本没有“中央服务器”，每个人的电脑上都是一个完整的版本库。当你在自己电脑上改了文件A，你的同事也在他的电脑上改了文件A，这时，你们俩之间只需把各自的修改推送给对方，就可以互相看到对方的修改了\n  - 优点：避免了集中式的缺点\n\n## 二、在windows上安装Git\n\n从Git官网直接[下载安装程序](https://git-scm.com/downloads)，然后按默认选项安装即可\n\n安装完成后，在开始菜单里找到“Git”  —>“Git Bash”，会跳出一个命令行窗口，说明Git安装成功\n\n安装成功后，还需要最后一步设置，在命令行输入：\n\n```xml\n$ git config --global user.name \"Your Name\"\n$ git config --global user.email \"email@example.com\"\n```\n\n>因为Git是分布式版本控制系统，所以每个机器都必须自报家门：你的名字和你的Email地址\n\n## 三、版本库的创建\n\n版本库又称仓库，英文名repository，你可以简单理解成一个目录，这个目录里面的所有文件都可以被Git管理起来，每个文件的修改、删除，Git都可以跟踪，以便任何时刻都可以追踪历史，或者在将来某个时刻可以还原\n\n假如你想管理某个目录里面的所有文件\n\n你需要通过命令行cmd进入该目录下，通过`git init`命令把这个目录变成Git可以管理的仓库：\n\n```xml\n$ git init\nInitialized empty Git repository in /Users/michael/learngit/.git/\n```\n\n> 如果你使用Windows系统，为了避免遇到各种莫名其妙的问题，请确保目录名（包括父目录）不包含中文\n\n- 你会发现当前目录下多了一个.git的目录，这个目录是Git来跟踪管理版本库的，没事千万不要手动修改这个目录里面的文件，不然改乱了，就把Git仓库给破坏了\n\n- 如果你没有看到.git目录，那是因为这个目录默认是隐藏的，用`ls -ah`命令就可以看见\n\n## 四、工作去和暂存区\n\n工作区（Working Directory）：就是你在电脑里能看到的目录。\n\n版本库（Repository）：工作区有一个隐藏目录.git，这个不算工作区，而是git的版本库。Git的版本库里村里很多东西，其中最重要的就是称为stage（或者交iudex）的暂存区。还有Git为什么自动创建的第一个分支master，以及指向master的一个指针叫HEAD\n\n![Git工作流程](/img/Git工作流程.png)\n\n## 五、远程仓库\n\n### 1、从远程仓库克隆到本地库\n\n[GitHub](https://github.com/)这个网站就是提供Git仓库托管服务的，只要注册一个GitHub账号，就可以免费获得Git远程仓库\n\n远程库创建好后，可以用命令`git clone`克隆一个本地库\n\n```xml\n$ git clone git@github.com:perfect-code-hzy/supermall.git\n```\n\n> 注意把Git库的地址换成你自己的，然后进入你想要创建到的目录看看，已经有对应的文件了\n\n### 2、项目从本地库推送到github远程库管理\n\n1. github上创建git仓库为supermall\n2. 创建项目：vue create supermall\n3. `git init`初始化仓库\n4. `git status`//查看当前库的状态\n5. `git diff` //查看修改内容\n6. `git add .` //把所有文件提交到暂存区，即本地库\n7. `git commit -m '初始化项目'` //即此次提交的说明\n\n以上是提交到本地仓库，以下是提交到github远程库\n\n9. `git remote add origin https://github.com/JiangH156/JiangH156.github.io.git`//将本地仓库关联到远程仓库\n\n10. `git remote -v` // 列出已关联的库，带有url\n\n11. `git remote show JiangH156.github.io` //查看某一指定库\n\n12. `git pull --rebase origin master` //当出现错误原因是github中的README.md文件不在本地代码目录中,通过该命令进行代码合并\n\n13. `git push -u origin master` // 提交到远程库\n\n14. 撤销修改\n\n    场景1：当你改乱了工作区某个文件的内容，想直接丢弃工作区的修改时，用命令`git checkout -- file`\n    场景2：当你不但改乱了工作区某个文件的内容，还添加到了暂存区时，想丢弃修改，分两步，第一步用命令`git reset HEAD < file >`，就回到了场景1，第二步按场景1操作\n    场景3：已经提交了不合适的修改到版本库时，想要撤销本次提交，参考版本回退一节，**不过前提是没有推送到远程库**\n\n15. 删除文件\n\n​\t\t`git rm file` 用于删除一个文件。如果一个文件已经被提交到版本库，那么你永远不用担心误删，但是要小心，你只能恢复文件到最新版本，你会丢失最近一次提交后你修改的内容。\n\n## 六、分支管理\n\n你创建了一个属于你自己的分支，别人看不到，还继续在原来的分支上正常工作，而你在自己的分支上干活，想提交就提交，直到开发完毕后，再一次性合并到原来的分支上，这样，既安全，又不影响别人工作\n\n#### 1、创建和合并分支（重点）\n\n使用分支完成某个任务，合并后再删掉分支，这和直接在master分支上工作效果是一样的，但过程更安全。\n\n- 创建dev分支并切换到dev分支\n\n```xml\ngit checkout -b dev\n// 或者\ngit switch -c <dev>\n```\n\n- 创建并切换相当于两条命令（略）\n\n```\ngit branch dev\ngit checkout dev 或者 git switch <dev>\n```\n\n- 查看分支\n\n```\ngit branch\n* dev \n  master\n```\n\n> 当前分支前面会标一个*号\n\n- 当dev分支的工作完成，我们就可以合并分支到主分支\n\n```\ngit checkout master    \t\t//切换会master分支\ngit merge dev \t\t   \t\t//把dev分支的工作成果合并到master分支上\ngit push \t\t\t   \t\t//推送到远程仓库\n```\n\n- 远程仓库保存login分支\n\n```\ngit checkout login\t\t\t//切换login分支\ngit push -u origin login \t//推送到云端origin仓库的login分支\n```\n\n- 合并完成后，删除dev分支\n\n```\ngit branch -d dev\n```\n\n#### 2、合并分支冲突（略）\n\n当Git无法自动合并分支时，就必须首先解决冲突。解决冲突后，再提交，合并完成。\n\n解决冲突就是把Git合并失败的文件手动编辑为我们希望的内容，再提交。\n\n用`git log --graph`命令可以看到分支合并图\n\n#### 3、分支策略（略）\n\n在实际开发中，我们应该按照几个基本原则进行分支管理：\n\n- master分支应该是非常稳定的，也就是仅用来发布新版本，平时不能在上面干活\n- 干活都在dev分支上，也就是说，dev分支是不稳定的，到某个时候，比如1.0版本发布时，再把dev分支合并到master上，在master分支发布1.0版本\n- 合并分支时，加上–no-ff参数就可以用普通模式合并，合并后的历史有分支，能看出来曾经做过合并，而fast forward合并就看不出来曾经做过合并\n\n```\n$ git merge --no-ff -m \"merge with no-ff\" dev\n```\n\n- 合并后，我们用`git log`看看分支历史\n\n```\n$ git log --graph --pretty=oneline --abbrev-commit\n*   e1e9c68 (HEAD -> master) merge with no-ff\n|\\  \n| * f52c633 (dev) add merge\n|/  \n*   cf810e4 conflict fixed\n...\n```\n\n#### 4、bug分支\n\n当你接到一个修复一个代号101的bug的任务时，很自然地，你想创建一个分支issue-101来修复它，但是，等等，当前正在dev上进行的工作还没有提交，但由于工作只进行到一半，还没法提交，预计完成还需1天时间。但是，必须在两个小时内修复该bug，怎么办？\n\nGit还提供了一个stash功能，可以把当前工作现场“储藏”起来，等以后恢复现场后继续工作\n```\n$ git stash\n```\n\n然后，用`git status`查看工作区，就是干净的（除非有没有被Git管理的文件），因此可以放心地**创建分支来修复bug**\n\n```xml\n切换到master分支\n$ git checkout master\n创建并切换修复bug的分支\n$ git checkout -b issue-101\n然后修复bug\n$ vi readme.txt\n提交文件\n$ git add readme.txt\n$ git commit -m 'fix bug 101'\n切换到master分支\n$ git checkout master\n$ git merge --no-ff -m \"merged bug fix 101\" issue-101\n删除修复bug的分支\n$ git branch -d issue-101\n$ git checkout dev\n查看刚才存放的工作现场\n$ git stash list\n恢复工作现场\n$ git stash pop\n```\n\n工作现场恢复的两个方法：\n\n- 用`git stash apply`恢复，但是恢复后，stash内容并不删除，你需要用`git stash drop`来删除；\n- 用`git stash pop`，恢复的同时把stash内容也删了\n\n同样的bug，要在dev上修复，我们只需要把4c805e2 fix bug 101这个提交所做的修改“复制”到dev分支。\n\n> 注意：我们只想复制4c805e2 fix bug 101这个提交所做的修改，并不是把整个master分支merge过来\n\n为了方便操作，Git专门提供了一个cherry-pick命令，让我们能复制一个特定的提交到当前分支：\n\n```xml\n$ git branch\n* dev\n  master\n$ git cherry-pick 4c805e2\n```\n\n#### 5、Feature分支\n\n添加一个新功能时，你肯定不希望因为一些实验性质的代码，把主分支搞乱了，所以，每添加一个新功能，最好新建一个feature分支，在上面开发，完成后，合并，最后，删除该feature分支。\n\n一般删除用`-d`，有时会删除不掉。如要丢弃一个没有被合并过的分支，需要使用大写的`-D`参数\n\n```\n$ git branch -D feature-1\n```\n\n#### 6、多人协作\n\n1. 分支推送\n   - master分支是主分支，因此要时刻与远程同步；\n   - dev分支是开发分支，团队所有成员都需要在上面工作，所以也需要与远程同步；\n   - bug分支只用于在本地修复bug，就没必要推到远程了，除非老板要看看你每周到底修复了几个bug；\n   - feature分支是否推到远程，取决于你是否和你的小伙伴合作在上面开发。\n2. 工作模式\n   - 首先，可以试图用`git push origin < branch-name >`推送自己的修改；\n   - 如果推送失败，则因为远程分支比你的本地更新，需要先用`git pull`试图合并；\n   - 如果合并有冲突，则解决冲突，并在本地提交；\n   - 没有冲突或者解决掉冲突后，再用`git push origin < branch-name >`推送就能成功！\n   - 如果`git pull`提示`no tracking information`，则说明本地分支和远程分支的链接关系没有创建，用命令`git branch --set-upstream-to < branch-name > origin/< branch-name >`。\n\n#### 7、Rebase\n\n多人在同一个分支上协作时，很容易出现冲突。即使没有冲突，后push的童鞋不得不先pull，在本地合并，然后才能push成功。这样会造成查看提交历史会出现很多分支。\n\n- rebase操作可以把本地未push的分叉提交历史整理成直线；\n- rebase的目的是使得我们在查看历史提交的变化时更容易，因为分叉的提交需要三方对比\n\n## 七、标签管理\n\nGit的标签虽然是版本库的快照，但其实它就是指向某个commit的指针（跟分支很像对不对？但是分支可以移动，标签不能移动），所以，创建和删除标签都是瞬间完成的\n\n#### 1、创建标签\n\n- 首先，切换到需要打标签的分支上，打标签即可\n\n```xml\n$ git branch\n* dev\n  master\n$ git checkout master\nSwitched to branch 'master'\n$ git tag v1.0\n查看所有标签\n$ git tag\nv1.0\n```\n\n- 可以查看历史提交的commit id，为其打上标签\n\n```xml\n$ git log --pretty=oneline --abbrev-commit\n12a631b (HEAD -> master, tag: v1.0, origin/master) merged bug fix 101\n4c805e2 fix bug 101\ne1e9c68 merge with no-ff\nf52c633 add merge\ncf810e4 conflict fixed\n```\n\n- 比方说要对`add merge`这次提交打标签，它对应的commit id是f52c633，敲入命令：\n\n```xml\n$ git tag v0.9 f52c633\n查看标签信息：\n$ git show <tagname>\n还可以创建带有说明的标签，用-a指定标签名，-m指定说明文字\n$ git tag -a v0.1 -m \"version 0.1 released\" 1094adb\n```\n\n> 注意：标签总是和某个commit挂钩。如果这个commit既出现在master分支，又出现在dev分支，那么在这两个分支上都可以看到这个标签。\n\n#### 2、操作标签\n\n创建的标签都只存储在本地，不会自动推送到远程。打错的标签可以在本地安全删除\n\n```xml\n删除标签\n$ git tag -d v0.1\n推送某个标签到远程\n$ git push origin <tagname>\n一次性推送全部尚未推送到远程的本地标签\n$ git push origin --tags\n如果标签已经推送到远程，要删除远程标签就麻烦一点，先从本地删除：\n$ git tag -d v0.9\n$ git push origin :refs/tags/v0.9\n要看看是否真的从远程库删除了标签，可以登陆GitHub查看\n```\n\n\n\n## 九、Github和Gitee使用（重点）\n\n#### 1、Github上搜索项目技巧\n\n![Github搜索项目技巧](/img/Github搜索项目技巧.png)\n\n## Git常用命令\n\n### 链接 —> https://blog.csdn.net/halaoda/article/details/78661334\n\n(注：该篇参考自https://blog.csdn.net/Best_arrangement/article/details/107745523)","source":"_posts/Git学习笔记.md","raw":"---\ntitle: Git学习笔记\ndate:\ntags:\n  - Git\ncategories:\n  - [Git]\n---\n\n# Git学习笔记\n\n## Git——世界上最先进的分布式版本控制系统\n\n​\t\t**学习git，可以去Git菜鸟** [Git菜鸟教程](https://www.runoob.com/git/git-tutorial.html)\n\n## 一、Git简介\n\n### 1、Git的诞生\n\nGit是Linus花了两周时间自己用**C语言**写了一个分布式版本控制系统\n\n### 2、分布式VS集中式\n\n- 集中式版本控制系统，版本库是集中存放在中央服务器的，而干活的时候，用的都是自己的电脑，所以要先从中央服务器取得最新的版本，然后开始干活，干完活了，再把自己的活推送给中央服务器。中央服务器就好比是一个图书馆，你要改一本书，必须先从图书馆借出来，然后回到家自己改，改完了，再放回图书馆\n  - 最大缺点：必须联网才能工作\n  - 其次，安全性较低，当中央服务器出了问题，所有人都没法工作\n- 分布式版本控制系统根本没有“中央服务器”，每个人的电脑上都是一个完整的版本库。当你在自己电脑上改了文件A，你的同事也在他的电脑上改了文件A，这时，你们俩之间只需把各自的修改推送给对方，就可以互相看到对方的修改了\n  - 优点：避免了集中式的缺点\n\n## 二、在windows上安装Git\n\n从Git官网直接[下载安装程序](https://git-scm.com/downloads)，然后按默认选项安装即可\n\n安装完成后，在开始菜单里找到“Git”  —>“Git Bash”，会跳出一个命令行窗口，说明Git安装成功\n\n安装成功后，还需要最后一步设置，在命令行输入：\n\n```xml\n$ git config --global user.name \"Your Name\"\n$ git config --global user.email \"email@example.com\"\n```\n\n>因为Git是分布式版本控制系统，所以每个机器都必须自报家门：你的名字和你的Email地址\n\n## 三、版本库的创建\n\n版本库又称仓库，英文名repository，你可以简单理解成一个目录，这个目录里面的所有文件都可以被Git管理起来，每个文件的修改、删除，Git都可以跟踪，以便任何时刻都可以追踪历史，或者在将来某个时刻可以还原\n\n假如你想管理某个目录里面的所有文件\n\n你需要通过命令行cmd进入该目录下，通过`git init`命令把这个目录变成Git可以管理的仓库：\n\n```xml\n$ git init\nInitialized empty Git repository in /Users/michael/learngit/.git/\n```\n\n> 如果你使用Windows系统，为了避免遇到各种莫名其妙的问题，请确保目录名（包括父目录）不包含中文\n\n- 你会发现当前目录下多了一个.git的目录，这个目录是Git来跟踪管理版本库的，没事千万不要手动修改这个目录里面的文件，不然改乱了，就把Git仓库给破坏了\n\n- 如果你没有看到.git目录，那是因为这个目录默认是隐藏的，用`ls -ah`命令就可以看见\n\n## 四、工作去和暂存区\n\n工作区（Working Directory）：就是你在电脑里能看到的目录。\n\n版本库（Repository）：工作区有一个隐藏目录.git，这个不算工作区，而是git的版本库。Git的版本库里村里很多东西，其中最重要的就是称为stage（或者交iudex）的暂存区。还有Git为什么自动创建的第一个分支master，以及指向master的一个指针叫HEAD\n\n![Git工作流程](/img/Git工作流程.png)\n\n## 五、远程仓库\n\n### 1、从远程仓库克隆到本地库\n\n[GitHub](https://github.com/)这个网站就是提供Git仓库托管服务的，只要注册一个GitHub账号，就可以免费获得Git远程仓库\n\n远程库创建好后，可以用命令`git clone`克隆一个本地库\n\n```xml\n$ git clone git@github.com:perfect-code-hzy/supermall.git\n```\n\n> 注意把Git库的地址换成你自己的，然后进入你想要创建到的目录看看，已经有对应的文件了\n\n### 2、项目从本地库推送到github远程库管理\n\n1. github上创建git仓库为supermall\n2. 创建项目：vue create supermall\n3. `git init`初始化仓库\n4. `git status`//查看当前库的状态\n5. `git diff` //查看修改内容\n6. `git add .` //把所有文件提交到暂存区，即本地库\n7. `git commit -m '初始化项目'` //即此次提交的说明\n\n以上是提交到本地仓库，以下是提交到github远程库\n\n9. `git remote add origin https://github.com/JiangH156/JiangH156.github.io.git`//将本地仓库关联到远程仓库\n\n10. `git remote -v` // 列出已关联的库，带有url\n\n11. `git remote show JiangH156.github.io` //查看某一指定库\n\n12. `git pull --rebase origin master` //当出现错误原因是github中的README.md文件不在本地代码目录中,通过该命令进行代码合并\n\n13. `git push -u origin master` // 提交到远程库\n\n14. 撤销修改\n\n    场景1：当你改乱了工作区某个文件的内容，想直接丢弃工作区的修改时，用命令`git checkout -- file`\n    场景2：当你不但改乱了工作区某个文件的内容，还添加到了暂存区时，想丢弃修改，分两步，第一步用命令`git reset HEAD < file >`，就回到了场景1，第二步按场景1操作\n    场景3：已经提交了不合适的修改到版本库时，想要撤销本次提交，参考版本回退一节，**不过前提是没有推送到远程库**\n\n15. 删除文件\n\n​\t\t`git rm file` 用于删除一个文件。如果一个文件已经被提交到版本库，那么你永远不用担心误删，但是要小心，你只能恢复文件到最新版本，你会丢失最近一次提交后你修改的内容。\n\n## 六、分支管理\n\n你创建了一个属于你自己的分支，别人看不到，还继续在原来的分支上正常工作，而你在自己的分支上干活，想提交就提交，直到开发完毕后，再一次性合并到原来的分支上，这样，既安全，又不影响别人工作\n\n#### 1、创建和合并分支（重点）\n\n使用分支完成某个任务，合并后再删掉分支，这和直接在master分支上工作效果是一样的，但过程更安全。\n\n- 创建dev分支并切换到dev分支\n\n```xml\ngit checkout -b dev\n// 或者\ngit switch -c <dev>\n```\n\n- 创建并切换相当于两条命令（略）\n\n```\ngit branch dev\ngit checkout dev 或者 git switch <dev>\n```\n\n- 查看分支\n\n```\ngit branch\n* dev \n  master\n```\n\n> 当前分支前面会标一个*号\n\n- 当dev分支的工作完成，我们就可以合并分支到主分支\n\n```\ngit checkout master    \t\t//切换会master分支\ngit merge dev \t\t   \t\t//把dev分支的工作成果合并到master分支上\ngit push \t\t\t   \t\t//推送到远程仓库\n```\n\n- 远程仓库保存login分支\n\n```\ngit checkout login\t\t\t//切换login分支\ngit push -u origin login \t//推送到云端origin仓库的login分支\n```\n\n- 合并完成后，删除dev分支\n\n```\ngit branch -d dev\n```\n\n#### 2、合并分支冲突（略）\n\n当Git无法自动合并分支时，就必须首先解决冲突。解决冲突后，再提交，合并完成。\n\n解决冲突就是把Git合并失败的文件手动编辑为我们希望的内容，再提交。\n\n用`git log --graph`命令可以看到分支合并图\n\n#### 3、分支策略（略）\n\n在实际开发中，我们应该按照几个基本原则进行分支管理：\n\n- master分支应该是非常稳定的，也就是仅用来发布新版本，平时不能在上面干活\n- 干活都在dev分支上，也就是说，dev分支是不稳定的，到某个时候，比如1.0版本发布时，再把dev分支合并到master上，在master分支发布1.0版本\n- 合并分支时，加上–no-ff参数就可以用普通模式合并，合并后的历史有分支，能看出来曾经做过合并，而fast forward合并就看不出来曾经做过合并\n\n```\n$ git merge --no-ff -m \"merge with no-ff\" dev\n```\n\n- 合并后，我们用`git log`看看分支历史\n\n```\n$ git log --graph --pretty=oneline --abbrev-commit\n*   e1e9c68 (HEAD -> master) merge with no-ff\n|\\  \n| * f52c633 (dev) add merge\n|/  \n*   cf810e4 conflict fixed\n...\n```\n\n#### 4、bug分支\n\n当你接到一个修复一个代号101的bug的任务时，很自然地，你想创建一个分支issue-101来修复它，但是，等等，当前正在dev上进行的工作还没有提交，但由于工作只进行到一半，还没法提交，预计完成还需1天时间。但是，必须在两个小时内修复该bug，怎么办？\n\nGit还提供了一个stash功能，可以把当前工作现场“储藏”起来，等以后恢复现场后继续工作\n```\n$ git stash\n```\n\n然后，用`git status`查看工作区，就是干净的（除非有没有被Git管理的文件），因此可以放心地**创建分支来修复bug**\n\n```xml\n切换到master分支\n$ git checkout master\n创建并切换修复bug的分支\n$ git checkout -b issue-101\n然后修复bug\n$ vi readme.txt\n提交文件\n$ git add readme.txt\n$ git commit -m 'fix bug 101'\n切换到master分支\n$ git checkout master\n$ git merge --no-ff -m \"merged bug fix 101\" issue-101\n删除修复bug的分支\n$ git branch -d issue-101\n$ git checkout dev\n查看刚才存放的工作现场\n$ git stash list\n恢复工作现场\n$ git stash pop\n```\n\n工作现场恢复的两个方法：\n\n- 用`git stash apply`恢复，但是恢复后，stash内容并不删除，你需要用`git stash drop`来删除；\n- 用`git stash pop`，恢复的同时把stash内容也删了\n\n同样的bug，要在dev上修复，我们只需要把4c805e2 fix bug 101这个提交所做的修改“复制”到dev分支。\n\n> 注意：我们只想复制4c805e2 fix bug 101这个提交所做的修改，并不是把整个master分支merge过来\n\n为了方便操作，Git专门提供了一个cherry-pick命令，让我们能复制一个特定的提交到当前分支：\n\n```xml\n$ git branch\n* dev\n  master\n$ git cherry-pick 4c805e2\n```\n\n#### 5、Feature分支\n\n添加一个新功能时，你肯定不希望因为一些实验性质的代码，把主分支搞乱了，所以，每添加一个新功能，最好新建一个feature分支，在上面开发，完成后，合并，最后，删除该feature分支。\n\n一般删除用`-d`，有时会删除不掉。如要丢弃一个没有被合并过的分支，需要使用大写的`-D`参数\n\n```\n$ git branch -D feature-1\n```\n\n#### 6、多人协作\n\n1. 分支推送\n   - master分支是主分支，因此要时刻与远程同步；\n   - dev分支是开发分支，团队所有成员都需要在上面工作，所以也需要与远程同步；\n   - bug分支只用于在本地修复bug，就没必要推到远程了，除非老板要看看你每周到底修复了几个bug；\n   - feature分支是否推到远程，取决于你是否和你的小伙伴合作在上面开发。\n2. 工作模式\n   - 首先，可以试图用`git push origin < branch-name >`推送自己的修改；\n   - 如果推送失败，则因为远程分支比你的本地更新，需要先用`git pull`试图合并；\n   - 如果合并有冲突，则解决冲突，并在本地提交；\n   - 没有冲突或者解决掉冲突后，再用`git push origin < branch-name >`推送就能成功！\n   - 如果`git pull`提示`no tracking information`，则说明本地分支和远程分支的链接关系没有创建，用命令`git branch --set-upstream-to < branch-name > origin/< branch-name >`。\n\n#### 7、Rebase\n\n多人在同一个分支上协作时，很容易出现冲突。即使没有冲突，后push的童鞋不得不先pull，在本地合并，然后才能push成功。这样会造成查看提交历史会出现很多分支。\n\n- rebase操作可以把本地未push的分叉提交历史整理成直线；\n- rebase的目的是使得我们在查看历史提交的变化时更容易，因为分叉的提交需要三方对比\n\n## 七、标签管理\n\nGit的标签虽然是版本库的快照，但其实它就是指向某个commit的指针（跟分支很像对不对？但是分支可以移动，标签不能移动），所以，创建和删除标签都是瞬间完成的\n\n#### 1、创建标签\n\n- 首先，切换到需要打标签的分支上，打标签即可\n\n```xml\n$ git branch\n* dev\n  master\n$ git checkout master\nSwitched to branch 'master'\n$ git tag v1.0\n查看所有标签\n$ git tag\nv1.0\n```\n\n- 可以查看历史提交的commit id，为其打上标签\n\n```xml\n$ git log --pretty=oneline --abbrev-commit\n12a631b (HEAD -> master, tag: v1.0, origin/master) merged bug fix 101\n4c805e2 fix bug 101\ne1e9c68 merge with no-ff\nf52c633 add merge\ncf810e4 conflict fixed\n```\n\n- 比方说要对`add merge`这次提交打标签，它对应的commit id是f52c633，敲入命令：\n\n```xml\n$ git tag v0.9 f52c633\n查看标签信息：\n$ git show <tagname>\n还可以创建带有说明的标签，用-a指定标签名，-m指定说明文字\n$ git tag -a v0.1 -m \"version 0.1 released\" 1094adb\n```\n\n> 注意：标签总是和某个commit挂钩。如果这个commit既出现在master分支，又出现在dev分支，那么在这两个分支上都可以看到这个标签。\n\n#### 2、操作标签\n\n创建的标签都只存储在本地，不会自动推送到远程。打错的标签可以在本地安全删除\n\n```xml\n删除标签\n$ git tag -d v0.1\n推送某个标签到远程\n$ git push origin <tagname>\n一次性推送全部尚未推送到远程的本地标签\n$ git push origin --tags\n如果标签已经推送到远程，要删除远程标签就麻烦一点，先从本地删除：\n$ git tag -d v0.9\n$ git push origin :refs/tags/v0.9\n要看看是否真的从远程库删除了标签，可以登陆GitHub查看\n```\n\n\n\n## 九、Github和Gitee使用（重点）\n\n#### 1、Github上搜索项目技巧\n\n![Github搜索项目技巧](/img/Github搜索项目技巧.png)\n\n## Git常用命令\n\n### 链接 —> https://blog.csdn.net/halaoda/article/details/78661334\n\n(注：该篇参考自https://blog.csdn.net/Best_arrangement/article/details/107745523)","slug":"Git学习笔记","published":1,"updated":"2022-11-20T12:26:16.273Z","comments":1,"layout":"post","photos":[],"link":"","_id":"claryulc300035ojrcjvbd62t","content":"<h1 id=\"Git学习笔记\"><a href=\"#Git学习笔记\" class=\"headerlink\" title=\"Git学习笔记\"></a>Git学习笔记</h1><h2 id=\"Git——世界上最先进的分布式版本控制系统\"><a href=\"#Git——世界上最先进的分布式版本控制系统\" class=\"headerlink\" title=\"Git——世界上最先进的分布式版本控制系统\"></a>Git——世界上最先进的分布式版本控制系统</h2><p>​        <strong>学习git，可以去Git菜鸟</strong> <a href=\"https://www.runoob.com/git/git-tutorial.html\">Git菜鸟教程</a></p>\n<h2 id=\"一、Git简介\"><a href=\"#一、Git简介\" class=\"headerlink\" title=\"一、Git简介\"></a>一、Git简介</h2><h3 id=\"1、Git的诞生\"><a href=\"#1、Git的诞生\" class=\"headerlink\" title=\"1、Git的诞生\"></a>1、Git的诞生</h3><p>Git是Linus花了两周时间自己用<strong>C语言</strong>写了一个分布式版本控制系统</p>\n<h3 id=\"2、分布式VS集中式\"><a href=\"#2、分布式VS集中式\" class=\"headerlink\" title=\"2、分布式VS集中式\"></a>2、分布式VS集中式</h3><ul>\n<li>集中式版本控制系统，版本库是集中存放在中央服务器的，而干活的时候，用的都是自己的电脑，所以要先从中央服务器取得最新的版本，然后开始干活，干完活了，再把自己的活推送给中央服务器。中央服务器就好比是一个图书馆，你要改一本书，必须先从图书馆借出来，然后回到家自己改，改完了，再放回图书馆<ul>\n<li>最大缺点：必须联网才能工作</li>\n<li>其次，安全性较低，当中央服务器出了问题，所有人都没法工作</li>\n</ul>\n</li>\n<li>分布式版本控制系统根本没有“中央服务器”，每个人的电脑上都是一个完整的版本库。当你在自己电脑上改了文件A，你的同事也在他的电脑上改了文件A，这时，你们俩之间只需把各自的修改推送给对方，就可以互相看到对方的修改了<ul>\n<li>优点：避免了集中式的缺点</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"二、在windows上安装Git\"><a href=\"#二、在windows上安装Git\" class=\"headerlink\" title=\"二、在windows上安装Git\"></a>二、在windows上安装Git</h2><p>从Git官网直接<a href=\"https://git-scm.com/downloads\">下载安装程序</a>，然后按默认选项安装即可</p>\n<p>安装完成后，在开始菜单里找到“Git”  —&gt;“Git Bash”，会跳出一个命令行窗口，说明Git安装成功</p>\n<p>安装成功后，还需要最后一步设置，在命令行输入：</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git config --global user.name &quot;Your Name&quot;</span><br><span class=\"line\">$ git config --global user.email &quot;email@example.com&quot;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>因为Git是分布式版本控制系统，所以每个机器都必须自报家门：你的名字和你的Email地址</p>\n</blockquote>\n<h2 id=\"三、版本库的创建\"><a href=\"#三、版本库的创建\" class=\"headerlink\" title=\"三、版本库的创建\"></a>三、版本库的创建</h2><p>版本库又称仓库，英文名repository，你可以简单理解成一个目录，这个目录里面的所有文件都可以被Git管理起来，每个文件的修改、删除，Git都可以跟踪，以便任何时刻都可以追踪历史，或者在将来某个时刻可以还原</p>\n<p>假如你想管理某个目录里面的所有文件</p>\n<p>你需要通过命令行cmd进入该目录下，通过<code>git init</code>命令把这个目录变成Git可以管理的仓库：</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git init</span><br><span class=\"line\">Initialized empty Git repository in /Users/michael/learngit/.git/</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>如果你使用Windows系统，为了避免遇到各种莫名其妙的问题，请确保目录名（包括父目录）不包含中文</p>\n</blockquote>\n<ul>\n<li><p>你会发现当前目录下多了一个.git的目录，这个目录是Git来跟踪管理版本库的，没事千万不要手动修改这个目录里面的文件，不然改乱了，就把Git仓库给破坏了</p>\n</li>\n<li><p>如果你没有看到.git目录，那是因为这个目录默认是隐藏的，用<code>ls -ah</code>命令就可以看见</p>\n</li>\n</ul>\n<h2 id=\"四、工作去和暂存区\"><a href=\"#四、工作去和暂存区\" class=\"headerlink\" title=\"四、工作去和暂存区\"></a>四、工作去和暂存区</h2><p>工作区（Working Directory）：就是你在电脑里能看到的目录。</p>\n<p>版本库（Repository）：工作区有一个隐藏目录.git，这个不算工作区，而是git的版本库。Git的版本库里村里很多东西，其中最重要的就是称为stage（或者交iudex）的暂存区。还有Git为什么自动创建的第一个分支master，以及指向master的一个指针叫HEAD</p>\n<p><img src=\"/img/Git%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B.png\" alt=\"Git工作流程\"></p>\n<h2 id=\"五、远程仓库\"><a href=\"#五、远程仓库\" class=\"headerlink\" title=\"五、远程仓库\"></a>五、远程仓库</h2><h3 id=\"1、从远程仓库克隆到本地库\"><a href=\"#1、从远程仓库克隆到本地库\" class=\"headerlink\" title=\"1、从远程仓库克隆到本地库\"></a>1、从远程仓库克隆到本地库</h3><p><a href=\"https://github.com/\">GitHub</a>这个网站就是提供Git仓库托管服务的，只要注册一个GitHub账号，就可以免费获得Git远程仓库</p>\n<p>远程库创建好后，可以用命令<code>git clone</code>克隆一个本地库</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git clone git@github.com:perfect-code-hzy/supermall.git</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>注意把Git库的地址换成你自己的，然后进入你想要创建到的目录看看，已经有对应的文件了</p>\n</blockquote>\n<h3 id=\"2、项目从本地库推送到github远程库管理\"><a href=\"#2、项目从本地库推送到github远程库管理\" class=\"headerlink\" title=\"2、项目从本地库推送到github远程库管理\"></a>2、项目从本地库推送到github远程库管理</h3><ol>\n<li>github上创建git仓库为supermall</li>\n<li>创建项目：vue create supermall</li>\n<li><code>git init</code>初始化仓库</li>\n<li><code>git status</code>//查看当前库的状态</li>\n<li><code>git diff</code> //查看修改内容</li>\n<li><code>git add .</code> //把所有文件提交到暂存区，即本地库</li>\n<li><code>git commit -m &#39;初始化项目&#39;</code> //即此次提交的说明</li>\n</ol>\n<p>以上是提交到本地仓库，以下是提交到github远程库</p>\n<ol start=\"9\">\n<li><p><code>git remote add origin https://github.com/JiangH156/JiangH156.github.io.git</code>//将本地仓库关联到远程仓库</p>\n</li>\n<li><p><code>git remote -v</code> // 列出已关联的库，带有url</p>\n</li>\n<li><p><code>git remote show JiangH156.github.io</code> //查看某一指定库</p>\n</li>\n<li><p><code>git pull --rebase origin master</code> //当出现错误原因是github中的README.md文件不在本地代码目录中,通过该命令进行代码合并</p>\n</li>\n<li><p><code>git push -u origin master</code> // 提交到远程库</p>\n</li>\n<li><p>撤销修改</p>\n<p>场景1：当你改乱了工作区某个文件的内容，想直接丢弃工作区的修改时，用命令<code>git checkout -- file</code><br>场景2：当你不但改乱了工作区某个文件的内容，还添加到了暂存区时，想丢弃修改，分两步，第一步用命令<code>git reset HEAD &lt; file &gt;</code>，就回到了场景1，第二步按场景1操作<br>场景3：已经提交了不合适的修改到版本库时，想要撤销本次提交，参考版本回退一节，<strong>不过前提是没有推送到远程库</strong></p>\n</li>\n<li><p>删除文件</p>\n</li>\n</ol>\n<p>​        <code>git rm file</code> 用于删除一个文件。如果一个文件已经被提交到版本库，那么你永远不用担心误删，但是要小心，你只能恢复文件到最新版本，你会丢失最近一次提交后你修改的内容。</p>\n<h2 id=\"六、分支管理\"><a href=\"#六、分支管理\" class=\"headerlink\" title=\"六、分支管理\"></a>六、分支管理</h2><p>你创建了一个属于你自己的分支，别人看不到，还继续在原来的分支上正常工作，而你在自己的分支上干活，想提交就提交，直到开发完毕后，再一次性合并到原来的分支上，这样，既安全，又不影响别人工作</p>\n<h4 id=\"1、创建和合并分支（重点）\"><a href=\"#1、创建和合并分支（重点）\" class=\"headerlink\" title=\"1、创建和合并分支（重点）\"></a>1、创建和合并分支（重点）</h4><p>使用分支完成某个任务，合并后再删掉分支，这和直接在master分支上工作效果是一样的，但过程更安全。</p>\n<ul>\n<li>创建dev分支并切换到dev分支</li>\n</ul>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git checkout -b dev</span><br><span class=\"line\">// 或者</span><br><span class=\"line\">git switch -c <span class=\"tag\">&lt;<span class=\"name\">dev</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>创建并切换相当于两条命令（略）</li>\n</ul>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git branch dev</span><br><span class=\"line\">git checkout dev 或者 git switch &lt;dev&gt;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>查看分支</li>\n</ul>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git branch</span><br><span class=\"line\">* dev </span><br><span class=\"line\">  master</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>当前分支前面会标一个*号</p>\n</blockquote>\n<ul>\n<li>当dev分支的工作完成，我们就可以合并分支到主分支</li>\n</ul>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git checkout master    \t\t//切换会master分支</span><br><span class=\"line\">git merge dev \t\t   \t\t//把dev分支的工作成果合并到master分支上</span><br><span class=\"line\">git push \t\t\t   \t\t//推送到远程仓库</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>远程仓库保存login分支</li>\n</ul>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git checkout login\t\t\t//切换login分支</span><br><span class=\"line\">git push -u origin login \t//推送到云端origin仓库的login分支</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>合并完成后，删除dev分支</li>\n</ul>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git branch -d dev</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"2、合并分支冲突（略）\"><a href=\"#2、合并分支冲突（略）\" class=\"headerlink\" title=\"2、合并分支冲突（略）\"></a>2、合并分支冲突（略）</h4><p>当Git无法自动合并分支时，就必须首先解决冲突。解决冲突后，再提交，合并完成。</p>\n<p>解决冲突就是把Git合并失败的文件手动编辑为我们希望的内容，再提交。</p>\n<p>用<code>git log --graph</code>命令可以看到分支合并图</p>\n<h4 id=\"3、分支策略（略）\"><a href=\"#3、分支策略（略）\" class=\"headerlink\" title=\"3、分支策略（略）\"></a>3、分支策略（略）</h4><p>在实际开发中，我们应该按照几个基本原则进行分支管理：</p>\n<ul>\n<li>master分支应该是非常稳定的，也就是仅用来发布新版本，平时不能在上面干活</li>\n<li>干活都在dev分支上，也就是说，dev分支是不稳定的，到某个时候，比如1.0版本发布时，再把dev分支合并到master上，在master分支发布1.0版本</li>\n<li>合并分支时，加上–no-ff参数就可以用普通模式合并，合并后的历史有分支，能看出来曾经做过合并，而fast forward合并就看不出来曾经做过合并</li>\n</ul>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git merge --no-ff -m &quot;merge with no-ff&quot; dev</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>合并后，我们用<code>git log</code>看看分支历史</li>\n</ul>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git log --graph --pretty=oneline --abbrev-commit</span><br><span class=\"line\">*   e1e9c68 (HEAD -&gt; master) merge with no-ff</span><br><span class=\"line\">|\\  </span><br><span class=\"line\">| * f52c633 (dev) add merge</span><br><span class=\"line\">|/  </span><br><span class=\"line\">*   cf810e4 conflict fixed</span><br><span class=\"line\">...</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"4、bug分支\"><a href=\"#4、bug分支\" class=\"headerlink\" title=\"4、bug分支\"></a>4、bug分支</h4><p>当你接到一个修复一个代号101的bug的任务时，很自然地，你想创建一个分支issue-101来修复它，但是，等等，当前正在dev上进行的工作还没有提交，但由于工作只进行到一半，还没法提交，预计完成还需1天时间。但是，必须在两个小时内修复该bug，怎么办？</p>\n<p>Git还提供了一个stash功能，可以把当前工作现场“储藏”起来，等以后恢复现场后继续工作</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git stash</span><br></pre></td></tr></table></figure>\n\n<p>然后，用<code>git status</code>查看工作区，就是干净的（除非有没有被Git管理的文件），因此可以放心地<strong>创建分支来修复bug</strong></p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">切换到master分支</span><br><span class=\"line\">$ git checkout master</span><br><span class=\"line\">创建并切换修复bug的分支</span><br><span class=\"line\">$ git checkout -b issue-101</span><br><span class=\"line\">然后修复bug</span><br><span class=\"line\">$ vi readme.txt</span><br><span class=\"line\">提交文件</span><br><span class=\"line\">$ git add readme.txt</span><br><span class=\"line\">$ git commit -m &#x27;fix bug 101&#x27;</span><br><span class=\"line\">切换到master分支</span><br><span class=\"line\">$ git checkout master</span><br><span class=\"line\">$ git merge --no-ff -m &quot;merged bug fix 101&quot; issue-101</span><br><span class=\"line\">删除修复bug的分支</span><br><span class=\"line\">$ git branch -d issue-101</span><br><span class=\"line\">$ git checkout dev</span><br><span class=\"line\">查看刚才存放的工作现场</span><br><span class=\"line\">$ git stash list</span><br><span class=\"line\">恢复工作现场</span><br><span class=\"line\">$ git stash pop</span><br></pre></td></tr></table></figure>\n\n<p>工作现场恢复的两个方法：</p>\n<ul>\n<li>用<code>git stash apply</code>恢复，但是恢复后，stash内容并不删除，你需要用<code>git stash drop</code>来删除；</li>\n<li>用<code>git stash pop</code>，恢复的同时把stash内容也删了</li>\n</ul>\n<p>同样的bug，要在dev上修复，我们只需要把4c805e2 fix bug 101这个提交所做的修改“复制”到dev分支。</p>\n<blockquote>\n<p>注意：我们只想复制4c805e2 fix bug 101这个提交所做的修改，并不是把整个master分支merge过来</p>\n</blockquote>\n<p>为了方便操作，Git专门提供了一个cherry-pick命令，让我们能复制一个特定的提交到当前分支：</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git branch</span><br><span class=\"line\">* dev</span><br><span class=\"line\">  master</span><br><span class=\"line\">$ git cherry-pick 4c805e2</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"5、Feature分支\"><a href=\"#5、Feature分支\" class=\"headerlink\" title=\"5、Feature分支\"></a>5、Feature分支</h4><p>添加一个新功能时，你肯定不希望因为一些实验性质的代码，把主分支搞乱了，所以，每添加一个新功能，最好新建一个feature分支，在上面开发，完成后，合并，最后，删除该feature分支。</p>\n<p>一般删除用<code>-d</code>，有时会删除不掉。如要丢弃一个没有被合并过的分支，需要使用大写的<code>-D</code>参数</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git branch -D feature-1</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"6、多人协作\"><a href=\"#6、多人协作\" class=\"headerlink\" title=\"6、多人协作\"></a>6、多人协作</h4><ol>\n<li>分支推送<ul>\n<li>master分支是主分支，因此要时刻与远程同步；</li>\n<li>dev分支是开发分支，团队所有成员都需要在上面工作，所以也需要与远程同步；</li>\n<li>bug分支只用于在本地修复bug，就没必要推到远程了，除非老板要看看你每周到底修复了几个bug；</li>\n<li>feature分支是否推到远程，取决于你是否和你的小伙伴合作在上面开发。</li>\n</ul>\n</li>\n<li>工作模式<ul>\n<li>首先，可以试图用<code>git push origin &lt; branch-name &gt;</code>推送自己的修改；</li>\n<li>如果推送失败，则因为远程分支比你的本地更新，需要先用<code>git pull</code>试图合并；</li>\n<li>如果合并有冲突，则解决冲突，并在本地提交；</li>\n<li>没有冲突或者解决掉冲突后，再用<code>git push origin &lt; branch-name &gt;</code>推送就能成功！</li>\n<li>如果<code>git pull</code>提示<code>no tracking information</code>，则说明本地分支和远程分支的链接关系没有创建，用命令<code>git branch --set-upstream-to &lt; branch-name &gt; origin/&lt; branch-name &gt;</code>。</li>\n</ul>\n</li>\n</ol>\n<h4 id=\"7、Rebase\"><a href=\"#7、Rebase\" class=\"headerlink\" title=\"7、Rebase\"></a>7、Rebase</h4><p>多人在同一个分支上协作时，很容易出现冲突。即使没有冲突，后push的童鞋不得不先pull，在本地合并，然后才能push成功。这样会造成查看提交历史会出现很多分支。</p>\n<ul>\n<li>rebase操作可以把本地未push的分叉提交历史整理成直线；</li>\n<li>rebase的目的是使得我们在查看历史提交的变化时更容易，因为分叉的提交需要三方对比</li>\n</ul>\n<h2 id=\"七、标签管理\"><a href=\"#七、标签管理\" class=\"headerlink\" title=\"七、标签管理\"></a>七、标签管理</h2><p>Git的标签虽然是版本库的快照，但其实它就是指向某个commit的指针（跟分支很像对不对？但是分支可以移动，标签不能移动），所以，创建和删除标签都是瞬间完成的</p>\n<h4 id=\"1、创建标签\"><a href=\"#1、创建标签\" class=\"headerlink\" title=\"1、创建标签\"></a>1、创建标签</h4><ul>\n<li>首先，切换到需要打标签的分支上，打标签即可</li>\n</ul>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git branch</span><br><span class=\"line\">* dev</span><br><span class=\"line\">  master</span><br><span class=\"line\">$ git checkout master</span><br><span class=\"line\">Switched to branch &#x27;master&#x27;</span><br><span class=\"line\">$ git tag v1.0</span><br><span class=\"line\">查看所有标签</span><br><span class=\"line\">$ git tag</span><br><span class=\"line\">v1.0</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>可以查看历史提交的commit id，为其打上标签</li>\n</ul>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git log --pretty=oneline --abbrev-commit</span><br><span class=\"line\">12a631b (HEAD -&gt; master, tag: v1.0, origin/master) merged bug fix 101</span><br><span class=\"line\">4c805e2 fix bug 101</span><br><span class=\"line\">e1e9c68 merge with no-ff</span><br><span class=\"line\">f52c633 add merge</span><br><span class=\"line\">cf810e4 conflict fixed</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>比方说要对<code>add merge</code>这次提交打标签，它对应的commit id是f52c633，敲入命令：</li>\n</ul>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git tag v0.9 f52c633</span><br><span class=\"line\">查看标签信息：</span><br><span class=\"line\">$ git show <span class=\"tag\">&lt;<span class=\"name\">tagname</span>&gt;</span></span><br><span class=\"line\">还可以创建带有说明的标签，用-a指定标签名，-m指定说明文字</span><br><span class=\"line\">$ git tag -a v0.1 -m &quot;version 0.1 released&quot; 1094adb</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>注意：标签总是和某个commit挂钩。如果这个commit既出现在master分支，又出现在dev分支，那么在这两个分支上都可以看到这个标签。</p>\n</blockquote>\n<h4 id=\"2、操作标签\"><a href=\"#2、操作标签\" class=\"headerlink\" title=\"2、操作标签\"></a>2、操作标签</h4><p>创建的标签都只存储在本地，不会自动推送到远程。打错的标签可以在本地安全删除</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">删除标签</span><br><span class=\"line\">$ git tag -d v0.1</span><br><span class=\"line\">推送某个标签到远程</span><br><span class=\"line\">$ git push origin <span class=\"tag\">&lt;<span class=\"name\">tagname</span>&gt;</span></span><br><span class=\"line\">一次性推送全部尚未推送到远程的本地标签</span><br><span class=\"line\">$ git push origin --tags</span><br><span class=\"line\">如果标签已经推送到远程，要删除远程标签就麻烦一点，先从本地删除：</span><br><span class=\"line\">$ git tag -d v0.9</span><br><span class=\"line\">$ git push origin :refs/tags/v0.9</span><br><span class=\"line\">要看看是否真的从远程库删除了标签，可以登陆GitHub查看</span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"九、Github和Gitee使用（重点）\"><a href=\"#九、Github和Gitee使用（重点）\" class=\"headerlink\" title=\"九、Github和Gitee使用（重点）\"></a>九、Github和Gitee使用（重点）</h2><h4 id=\"1、Github上搜索项目技巧\"><a href=\"#1、Github上搜索项目技巧\" class=\"headerlink\" title=\"1、Github上搜索项目技巧\"></a>1、Github上搜索项目技巧</h4><p><img src=\"/img/Github%E6%90%9C%E7%B4%A2%E9%A1%B9%E7%9B%AE%E6%8A%80%E5%B7%A7.png\" alt=\"Github搜索项目技巧\"></p>\n<h2 id=\"Git常用命令\"><a href=\"#Git常用命令\" class=\"headerlink\" title=\"Git常用命令\"></a>Git常用命令</h2><h3 id=\"链接-—-gt-https-blog-csdn-net-halaoda-article-details-78661334\"><a href=\"#链接-—-gt-https-blog-csdn-net-halaoda-article-details-78661334\" class=\"headerlink\" title=\"链接 —&gt; https://blog.csdn.net/halaoda/article/details/78661334\"></a>链接 —&gt; <a href=\"https://blog.csdn.net/halaoda/article/details/78661334\">https://blog.csdn.net/halaoda/article/details/78661334</a></h3><p>(注：该篇参考自<a href=\"https://blog.csdn.net/Best_arrangement/article/details/107745523\">https://blog.csdn.net/Best_arrangement/article/details/107745523</a>)</p>\n","site":{"data":{"link":[{"class_name":"友情链接","class_desc":"那些人，那些事","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]},{"class_name":"网站","class_desc":"值得推荐的网站","link_list":[{"name":"Youtube","link":"https://www.youtube.com/","avatar":"https://i.loli.net/2020/05/14/9ZkGg8v3azHJfM1.png","descr":"视频网站"},{"name":"Weibo","link":"https://www.weibo.com/","avatar":"https://i.loli.net/2020/05/14/TLJBum386vcnI1P.png","descr":"中国最大社交分享平台"},{"name":"Twitter","link":"https://twitter.com/","avatar":"https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png","descr":"社交分享平台"}]}]}},"cover":"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7","excerpt":"","more":"<h1 id=\"Git学习笔记\"><a href=\"#Git学习笔记\" class=\"headerlink\" title=\"Git学习笔记\"></a>Git学习笔记</h1><h2 id=\"Git——世界上最先进的分布式版本控制系统\"><a href=\"#Git——世界上最先进的分布式版本控制系统\" class=\"headerlink\" title=\"Git——世界上最先进的分布式版本控制系统\"></a>Git——世界上最先进的分布式版本控制系统</h2><p>​        <strong>学习git，可以去Git菜鸟</strong> <a href=\"https://www.runoob.com/git/git-tutorial.html\">Git菜鸟教程</a></p>\n<h2 id=\"一、Git简介\"><a href=\"#一、Git简介\" class=\"headerlink\" title=\"一、Git简介\"></a>一、Git简介</h2><h3 id=\"1、Git的诞生\"><a href=\"#1、Git的诞生\" class=\"headerlink\" title=\"1、Git的诞生\"></a>1、Git的诞生</h3><p>Git是Linus花了两周时间自己用<strong>C语言</strong>写了一个分布式版本控制系统</p>\n<h3 id=\"2、分布式VS集中式\"><a href=\"#2、分布式VS集中式\" class=\"headerlink\" title=\"2、分布式VS集中式\"></a>2、分布式VS集中式</h3><ul>\n<li>集中式版本控制系统，版本库是集中存放在中央服务器的，而干活的时候，用的都是自己的电脑，所以要先从中央服务器取得最新的版本，然后开始干活，干完活了，再把自己的活推送给中央服务器。中央服务器就好比是一个图书馆，你要改一本书，必须先从图书馆借出来，然后回到家自己改，改完了，再放回图书馆<ul>\n<li>最大缺点：必须联网才能工作</li>\n<li>其次，安全性较低，当中央服务器出了问题，所有人都没法工作</li>\n</ul>\n</li>\n<li>分布式版本控制系统根本没有“中央服务器”，每个人的电脑上都是一个完整的版本库。当你在自己电脑上改了文件A，你的同事也在他的电脑上改了文件A，这时，你们俩之间只需把各自的修改推送给对方，就可以互相看到对方的修改了<ul>\n<li>优点：避免了集中式的缺点</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"二、在windows上安装Git\"><a href=\"#二、在windows上安装Git\" class=\"headerlink\" title=\"二、在windows上安装Git\"></a>二、在windows上安装Git</h2><p>从Git官网直接<a href=\"https://git-scm.com/downloads\">下载安装程序</a>，然后按默认选项安装即可</p>\n<p>安装完成后，在开始菜单里找到“Git”  —&gt;“Git Bash”，会跳出一个命令行窗口，说明Git安装成功</p>\n<p>安装成功后，还需要最后一步设置，在命令行输入：</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git config --global user.name &quot;Your Name&quot;</span><br><span class=\"line\">$ git config --global user.email &quot;email@example.com&quot;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>因为Git是分布式版本控制系统，所以每个机器都必须自报家门：你的名字和你的Email地址</p>\n</blockquote>\n<h2 id=\"三、版本库的创建\"><a href=\"#三、版本库的创建\" class=\"headerlink\" title=\"三、版本库的创建\"></a>三、版本库的创建</h2><p>版本库又称仓库，英文名repository，你可以简单理解成一个目录，这个目录里面的所有文件都可以被Git管理起来，每个文件的修改、删除，Git都可以跟踪，以便任何时刻都可以追踪历史，或者在将来某个时刻可以还原</p>\n<p>假如你想管理某个目录里面的所有文件</p>\n<p>你需要通过命令行cmd进入该目录下，通过<code>git init</code>命令把这个目录变成Git可以管理的仓库：</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git init</span><br><span class=\"line\">Initialized empty Git repository in /Users/michael/learngit/.git/</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>如果你使用Windows系统，为了避免遇到各种莫名其妙的问题，请确保目录名（包括父目录）不包含中文</p>\n</blockquote>\n<ul>\n<li><p>你会发现当前目录下多了一个.git的目录，这个目录是Git来跟踪管理版本库的，没事千万不要手动修改这个目录里面的文件，不然改乱了，就把Git仓库给破坏了</p>\n</li>\n<li><p>如果你没有看到.git目录，那是因为这个目录默认是隐藏的，用<code>ls -ah</code>命令就可以看见</p>\n</li>\n</ul>\n<h2 id=\"四、工作去和暂存区\"><a href=\"#四、工作去和暂存区\" class=\"headerlink\" title=\"四、工作去和暂存区\"></a>四、工作去和暂存区</h2><p>工作区（Working Directory）：就是你在电脑里能看到的目录。</p>\n<p>版本库（Repository）：工作区有一个隐藏目录.git，这个不算工作区，而是git的版本库。Git的版本库里村里很多东西，其中最重要的就是称为stage（或者交iudex）的暂存区。还有Git为什么自动创建的第一个分支master，以及指向master的一个指针叫HEAD</p>\n<p><img src=\"/img/Git%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B.png\" alt=\"Git工作流程\"></p>\n<h2 id=\"五、远程仓库\"><a href=\"#五、远程仓库\" class=\"headerlink\" title=\"五、远程仓库\"></a>五、远程仓库</h2><h3 id=\"1、从远程仓库克隆到本地库\"><a href=\"#1、从远程仓库克隆到本地库\" class=\"headerlink\" title=\"1、从远程仓库克隆到本地库\"></a>1、从远程仓库克隆到本地库</h3><p><a href=\"https://github.com/\">GitHub</a>这个网站就是提供Git仓库托管服务的，只要注册一个GitHub账号，就可以免费获得Git远程仓库</p>\n<p>远程库创建好后，可以用命令<code>git clone</code>克隆一个本地库</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git clone git@github.com:perfect-code-hzy/supermall.git</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>注意把Git库的地址换成你自己的，然后进入你想要创建到的目录看看，已经有对应的文件了</p>\n</blockquote>\n<h3 id=\"2、项目从本地库推送到github远程库管理\"><a href=\"#2、项目从本地库推送到github远程库管理\" class=\"headerlink\" title=\"2、项目从本地库推送到github远程库管理\"></a>2、项目从本地库推送到github远程库管理</h3><ol>\n<li>github上创建git仓库为supermall</li>\n<li>创建项目：vue create supermall</li>\n<li><code>git init</code>初始化仓库</li>\n<li><code>git status</code>//查看当前库的状态</li>\n<li><code>git diff</code> //查看修改内容</li>\n<li><code>git add .</code> //把所有文件提交到暂存区，即本地库</li>\n<li><code>git commit -m &#39;初始化项目&#39;</code> //即此次提交的说明</li>\n</ol>\n<p>以上是提交到本地仓库，以下是提交到github远程库</p>\n<ol start=\"9\">\n<li><p><code>git remote add origin https://github.com/JiangH156/JiangH156.github.io.git</code>//将本地仓库关联到远程仓库</p>\n</li>\n<li><p><code>git remote -v</code> // 列出已关联的库，带有url</p>\n</li>\n<li><p><code>git remote show JiangH156.github.io</code> //查看某一指定库</p>\n</li>\n<li><p><code>git pull --rebase origin master</code> //当出现错误原因是github中的README.md文件不在本地代码目录中,通过该命令进行代码合并</p>\n</li>\n<li><p><code>git push -u origin master</code> // 提交到远程库</p>\n</li>\n<li><p>撤销修改</p>\n<p>场景1：当你改乱了工作区某个文件的内容，想直接丢弃工作区的修改时，用命令<code>git checkout -- file</code><br>场景2：当你不但改乱了工作区某个文件的内容，还添加到了暂存区时，想丢弃修改，分两步，第一步用命令<code>git reset HEAD &lt; file &gt;</code>，就回到了场景1，第二步按场景1操作<br>场景3：已经提交了不合适的修改到版本库时，想要撤销本次提交，参考版本回退一节，<strong>不过前提是没有推送到远程库</strong></p>\n</li>\n<li><p>删除文件</p>\n</li>\n</ol>\n<p>​        <code>git rm file</code> 用于删除一个文件。如果一个文件已经被提交到版本库，那么你永远不用担心误删，但是要小心，你只能恢复文件到最新版本，你会丢失最近一次提交后你修改的内容。</p>\n<h2 id=\"六、分支管理\"><a href=\"#六、分支管理\" class=\"headerlink\" title=\"六、分支管理\"></a>六、分支管理</h2><p>你创建了一个属于你自己的分支，别人看不到，还继续在原来的分支上正常工作，而你在自己的分支上干活，想提交就提交，直到开发完毕后，再一次性合并到原来的分支上，这样，既安全，又不影响别人工作</p>\n<h4 id=\"1、创建和合并分支（重点）\"><a href=\"#1、创建和合并分支（重点）\" class=\"headerlink\" title=\"1、创建和合并分支（重点）\"></a>1、创建和合并分支（重点）</h4><p>使用分支完成某个任务，合并后再删掉分支，这和直接在master分支上工作效果是一样的，但过程更安全。</p>\n<ul>\n<li>创建dev分支并切换到dev分支</li>\n</ul>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git checkout -b dev</span><br><span class=\"line\">// 或者</span><br><span class=\"line\">git switch -c <span class=\"tag\">&lt;<span class=\"name\">dev</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>创建并切换相当于两条命令（略）</li>\n</ul>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git branch dev</span><br><span class=\"line\">git checkout dev 或者 git switch &lt;dev&gt;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>查看分支</li>\n</ul>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git branch</span><br><span class=\"line\">* dev </span><br><span class=\"line\">  master</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>当前分支前面会标一个*号</p>\n</blockquote>\n<ul>\n<li>当dev分支的工作完成，我们就可以合并分支到主分支</li>\n</ul>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git checkout master    \t\t//切换会master分支</span><br><span class=\"line\">git merge dev \t\t   \t\t//把dev分支的工作成果合并到master分支上</span><br><span class=\"line\">git push \t\t\t   \t\t//推送到远程仓库</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>远程仓库保存login分支</li>\n</ul>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git checkout login\t\t\t//切换login分支</span><br><span class=\"line\">git push -u origin login \t//推送到云端origin仓库的login分支</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>合并完成后，删除dev分支</li>\n</ul>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git branch -d dev</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"2、合并分支冲突（略）\"><a href=\"#2、合并分支冲突（略）\" class=\"headerlink\" title=\"2、合并分支冲突（略）\"></a>2、合并分支冲突（略）</h4><p>当Git无法自动合并分支时，就必须首先解决冲突。解决冲突后，再提交，合并完成。</p>\n<p>解决冲突就是把Git合并失败的文件手动编辑为我们希望的内容，再提交。</p>\n<p>用<code>git log --graph</code>命令可以看到分支合并图</p>\n<h4 id=\"3、分支策略（略）\"><a href=\"#3、分支策略（略）\" class=\"headerlink\" title=\"3、分支策略（略）\"></a>3、分支策略（略）</h4><p>在实际开发中，我们应该按照几个基本原则进行分支管理：</p>\n<ul>\n<li>master分支应该是非常稳定的，也就是仅用来发布新版本，平时不能在上面干活</li>\n<li>干活都在dev分支上，也就是说，dev分支是不稳定的，到某个时候，比如1.0版本发布时，再把dev分支合并到master上，在master分支发布1.0版本</li>\n<li>合并分支时，加上–no-ff参数就可以用普通模式合并，合并后的历史有分支，能看出来曾经做过合并，而fast forward合并就看不出来曾经做过合并</li>\n</ul>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git merge --no-ff -m &quot;merge with no-ff&quot; dev</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>合并后，我们用<code>git log</code>看看分支历史</li>\n</ul>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git log --graph --pretty=oneline --abbrev-commit</span><br><span class=\"line\">*   e1e9c68 (HEAD -&gt; master) merge with no-ff</span><br><span class=\"line\">|\\  </span><br><span class=\"line\">| * f52c633 (dev) add merge</span><br><span class=\"line\">|/  </span><br><span class=\"line\">*   cf810e4 conflict fixed</span><br><span class=\"line\">...</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"4、bug分支\"><a href=\"#4、bug分支\" class=\"headerlink\" title=\"4、bug分支\"></a>4、bug分支</h4><p>当你接到一个修复一个代号101的bug的任务时，很自然地，你想创建一个分支issue-101来修复它，但是，等等，当前正在dev上进行的工作还没有提交，但由于工作只进行到一半，还没法提交，预计完成还需1天时间。但是，必须在两个小时内修复该bug，怎么办？</p>\n<p>Git还提供了一个stash功能，可以把当前工作现场“储藏”起来，等以后恢复现场后继续工作</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git stash</span><br></pre></td></tr></table></figure>\n\n<p>然后，用<code>git status</code>查看工作区，就是干净的（除非有没有被Git管理的文件），因此可以放心地<strong>创建分支来修复bug</strong></p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">切换到master分支</span><br><span class=\"line\">$ git checkout master</span><br><span class=\"line\">创建并切换修复bug的分支</span><br><span class=\"line\">$ git checkout -b issue-101</span><br><span class=\"line\">然后修复bug</span><br><span class=\"line\">$ vi readme.txt</span><br><span class=\"line\">提交文件</span><br><span class=\"line\">$ git add readme.txt</span><br><span class=\"line\">$ git commit -m &#x27;fix bug 101&#x27;</span><br><span class=\"line\">切换到master分支</span><br><span class=\"line\">$ git checkout master</span><br><span class=\"line\">$ git merge --no-ff -m &quot;merged bug fix 101&quot; issue-101</span><br><span class=\"line\">删除修复bug的分支</span><br><span class=\"line\">$ git branch -d issue-101</span><br><span class=\"line\">$ git checkout dev</span><br><span class=\"line\">查看刚才存放的工作现场</span><br><span class=\"line\">$ git stash list</span><br><span class=\"line\">恢复工作现场</span><br><span class=\"line\">$ git stash pop</span><br></pre></td></tr></table></figure>\n\n<p>工作现场恢复的两个方法：</p>\n<ul>\n<li>用<code>git stash apply</code>恢复，但是恢复后，stash内容并不删除，你需要用<code>git stash drop</code>来删除；</li>\n<li>用<code>git stash pop</code>，恢复的同时把stash内容也删了</li>\n</ul>\n<p>同样的bug，要在dev上修复，我们只需要把4c805e2 fix bug 101这个提交所做的修改“复制”到dev分支。</p>\n<blockquote>\n<p>注意：我们只想复制4c805e2 fix bug 101这个提交所做的修改，并不是把整个master分支merge过来</p>\n</blockquote>\n<p>为了方便操作，Git专门提供了一个cherry-pick命令，让我们能复制一个特定的提交到当前分支：</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git branch</span><br><span class=\"line\">* dev</span><br><span class=\"line\">  master</span><br><span class=\"line\">$ git cherry-pick 4c805e2</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"5、Feature分支\"><a href=\"#5、Feature分支\" class=\"headerlink\" title=\"5、Feature分支\"></a>5、Feature分支</h4><p>添加一个新功能时，你肯定不希望因为一些实验性质的代码，把主分支搞乱了，所以，每添加一个新功能，最好新建一个feature分支，在上面开发，完成后，合并，最后，删除该feature分支。</p>\n<p>一般删除用<code>-d</code>，有时会删除不掉。如要丢弃一个没有被合并过的分支，需要使用大写的<code>-D</code>参数</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git branch -D feature-1</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"6、多人协作\"><a href=\"#6、多人协作\" class=\"headerlink\" title=\"6、多人协作\"></a>6、多人协作</h4><ol>\n<li>分支推送<ul>\n<li>master分支是主分支，因此要时刻与远程同步；</li>\n<li>dev分支是开发分支，团队所有成员都需要在上面工作，所以也需要与远程同步；</li>\n<li>bug分支只用于在本地修复bug，就没必要推到远程了，除非老板要看看你每周到底修复了几个bug；</li>\n<li>feature分支是否推到远程，取决于你是否和你的小伙伴合作在上面开发。</li>\n</ul>\n</li>\n<li>工作模式<ul>\n<li>首先，可以试图用<code>git push origin &lt; branch-name &gt;</code>推送自己的修改；</li>\n<li>如果推送失败，则因为远程分支比你的本地更新，需要先用<code>git pull</code>试图合并；</li>\n<li>如果合并有冲突，则解决冲突，并在本地提交；</li>\n<li>没有冲突或者解决掉冲突后，再用<code>git push origin &lt; branch-name &gt;</code>推送就能成功！</li>\n<li>如果<code>git pull</code>提示<code>no tracking information</code>，则说明本地分支和远程分支的链接关系没有创建，用命令<code>git branch --set-upstream-to &lt; branch-name &gt; origin/&lt; branch-name &gt;</code>。</li>\n</ul>\n</li>\n</ol>\n<h4 id=\"7、Rebase\"><a href=\"#7、Rebase\" class=\"headerlink\" title=\"7、Rebase\"></a>7、Rebase</h4><p>多人在同一个分支上协作时，很容易出现冲突。即使没有冲突，后push的童鞋不得不先pull，在本地合并，然后才能push成功。这样会造成查看提交历史会出现很多分支。</p>\n<ul>\n<li>rebase操作可以把本地未push的分叉提交历史整理成直线；</li>\n<li>rebase的目的是使得我们在查看历史提交的变化时更容易，因为分叉的提交需要三方对比</li>\n</ul>\n<h2 id=\"七、标签管理\"><a href=\"#七、标签管理\" class=\"headerlink\" title=\"七、标签管理\"></a>七、标签管理</h2><p>Git的标签虽然是版本库的快照，但其实它就是指向某个commit的指针（跟分支很像对不对？但是分支可以移动，标签不能移动），所以，创建和删除标签都是瞬间完成的</p>\n<h4 id=\"1、创建标签\"><a href=\"#1、创建标签\" class=\"headerlink\" title=\"1、创建标签\"></a>1、创建标签</h4><ul>\n<li>首先，切换到需要打标签的分支上，打标签即可</li>\n</ul>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git branch</span><br><span class=\"line\">* dev</span><br><span class=\"line\">  master</span><br><span class=\"line\">$ git checkout master</span><br><span class=\"line\">Switched to branch &#x27;master&#x27;</span><br><span class=\"line\">$ git tag v1.0</span><br><span class=\"line\">查看所有标签</span><br><span class=\"line\">$ git tag</span><br><span class=\"line\">v1.0</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>可以查看历史提交的commit id，为其打上标签</li>\n</ul>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git log --pretty=oneline --abbrev-commit</span><br><span class=\"line\">12a631b (HEAD -&gt; master, tag: v1.0, origin/master) merged bug fix 101</span><br><span class=\"line\">4c805e2 fix bug 101</span><br><span class=\"line\">e1e9c68 merge with no-ff</span><br><span class=\"line\">f52c633 add merge</span><br><span class=\"line\">cf810e4 conflict fixed</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>比方说要对<code>add merge</code>这次提交打标签，它对应的commit id是f52c633，敲入命令：</li>\n</ul>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git tag v0.9 f52c633</span><br><span class=\"line\">查看标签信息：</span><br><span class=\"line\">$ git show <span class=\"tag\">&lt;<span class=\"name\">tagname</span>&gt;</span></span><br><span class=\"line\">还可以创建带有说明的标签，用-a指定标签名，-m指定说明文字</span><br><span class=\"line\">$ git tag -a v0.1 -m &quot;version 0.1 released&quot; 1094adb</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>注意：标签总是和某个commit挂钩。如果这个commit既出现在master分支，又出现在dev分支，那么在这两个分支上都可以看到这个标签。</p>\n</blockquote>\n<h4 id=\"2、操作标签\"><a href=\"#2、操作标签\" class=\"headerlink\" title=\"2、操作标签\"></a>2、操作标签</h4><p>创建的标签都只存储在本地，不会自动推送到远程。打错的标签可以在本地安全删除</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">删除标签</span><br><span class=\"line\">$ git tag -d v0.1</span><br><span class=\"line\">推送某个标签到远程</span><br><span class=\"line\">$ git push origin <span class=\"tag\">&lt;<span class=\"name\">tagname</span>&gt;</span></span><br><span class=\"line\">一次性推送全部尚未推送到远程的本地标签</span><br><span class=\"line\">$ git push origin --tags</span><br><span class=\"line\">如果标签已经推送到远程，要删除远程标签就麻烦一点，先从本地删除：</span><br><span class=\"line\">$ git tag -d v0.9</span><br><span class=\"line\">$ git push origin :refs/tags/v0.9</span><br><span class=\"line\">要看看是否真的从远程库删除了标签，可以登陆GitHub查看</span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"九、Github和Gitee使用（重点）\"><a href=\"#九、Github和Gitee使用（重点）\" class=\"headerlink\" title=\"九、Github和Gitee使用（重点）\"></a>九、Github和Gitee使用（重点）</h2><h4 id=\"1、Github上搜索项目技巧\"><a href=\"#1、Github上搜索项目技巧\" class=\"headerlink\" title=\"1、Github上搜索项目技巧\"></a>1、Github上搜索项目技巧</h4><p><img src=\"/img/Github%E6%90%9C%E7%B4%A2%E9%A1%B9%E7%9B%AE%E6%8A%80%E5%B7%A7.png\" alt=\"Github搜索项目技巧\"></p>\n<h2 id=\"Git常用命令\"><a href=\"#Git常用命令\" class=\"headerlink\" title=\"Git常用命令\"></a>Git常用命令</h2><h3 id=\"链接-—-gt-https-blog-csdn-net-halaoda-article-details-78661334\"><a href=\"#链接-—-gt-https-blog-csdn-net-halaoda-article-details-78661334\" class=\"headerlink\" title=\"链接 —&gt; https://blog.csdn.net/halaoda/article/details/78661334\"></a>链接 —&gt; <a href=\"https://blog.csdn.net/halaoda/article/details/78661334\">https://blog.csdn.net/halaoda/article/details/78661334</a></h3><p>(注：该篇参考自<a href=\"https://blog.csdn.net/Best_arrangement/article/details/107745523\">https://blog.csdn.net/Best_arrangement/article/details/107745523</a>)</p>\n"},{"title":"Maven","date":"2022-11-19T06:42:05.113Z","_content":"\n# Maven学习笔记\n\n## Maven基础\n\n**概念**\n\nMaven是一个项目管理工具，它包含了一个项目对象模型（POM：Project Object Model），一组标准集合，一个项目生命瘦子（Project Lifecycle），一个依赖管理系统（Dependency Management System），和用来运行定义在生命周期阶段（phase）中插件（plugin）目标（goal）的逻辑。\n\n**功能**\n\n帮助程序员构建工程，管理jar报，编译代码，自动运行单元测试，打包，生成报表，以及部署项目，生成Web站点。\n\nMaven本地仓库介绍：\n\n- 本地仓库：\n\n  用来存储从远程仓库或中央仓库下载的插件和jar包，项目使用一些插件或jar包，优先从本地仓库查找\n\n- 远程仓库：\n\n  如果本地需要插件或jar包，本地仓库没有，默认是从远程仓库下载。远程仓库可以在互联网内，也可以子啊局域网内。\n\n- 中央仓库：\n\n  在maven软件中内置一个远程仓库地址：`http://repo1.maven.org/maven2`，它是中央仓库，服务与整个互联网，它是由Maven团队自己维护，里面存储了非常全的jar包，它包含了世界上大部分流行的开源项目构件。但是由于在国外，下载速度慢，不利于使用，可改为使用国内公司架设的远程仓库。\n\n**Maven目录结构：**\n\n- src 源码\n  - main：主工程代码\n    - java：主工程代码\n    - resources：需要使用的配置文件\n    - webapp：web项目的资源目录（jap/html/WEB-INF），有web项目时存在\n  - test：测试目录\n    - java：测试代码\n    - resources：测试需要使用的配置文件\n- pom.xml：项目和核心配置文件\n\n**常用命令：**\n\n- compile：编译，将 src/main/java 下的文件编译为 class 文件输出到 target 目录下\n- clean：清理，执行 clean会删除 target 目录及内容\n- package：打包，对于 java 工程执行package打成 jar 包，对于web工程打成war 包\n- install：安装，执行 install 将maven打成 jar 包或war 包发布到本地仓库\n- 注意：当后面的命令执行时，前面的操作过程也都会自动执行\n\n**Maven的生命周期**\n\n- Clean：在进行真正的构建之前进行一些清理工作\n- 核心构建：编译、测试、打包、部署等等\n- 站点发布\n\n**Maven坐标**\n概念：被Maven管理的资源的唯一标识\n\n- groupid：组织名称\n- artifactid：模块名称\n- version：版本号\n\n坐标搜索：[Maven Repository](https://mvnrepository.com/)\n\n**依赖的范围**\n\n项目依赖某个包，需要在pom.xml中添加包的坐标，而且要指定依赖范围`<scope></scope>`\n\n| **依赖范围** | **对编译有效** | **对测试有效** | **对运行时有效** |        **示例**         |\n| :----------: | :------------: | :------------: | :--------------: | :---------------------: |\n|   compile    |       ✔️        |       ✔️        |        ✔️         |       spring-core       |\n|     test     |       -        |       ✔️        |        -         |          Junit          |\n|   provided   |       ✔️        |       ✔️        |        -         |       servlet-api       |\n|   runtime    |       -        |       ✔️        |        ✔️         |        JDBC驱动         |\n|    system    |       ✔️        |       ✔️        |        -         | 本地Maven仓库之外的类库 |\n\n依赖范围由强到弱的顺序是：compile > provided > runtime > test\n\n使用方式：\n\n- 默认引入 的 jar 包 ------- compile 【默认范围 可以不写】（编译、测试、运行都有效 ）\n- servlet-api 、jsp-api ------- provided （编译、测试有效， 运行时无效防止和 tomcat 下 jar 包冲突）\n- jdbc 驱动 jar 包 ---- runtime （测试、运行 有效 ）\n- junit ----- test （测试有效）\n\n## Maven进阶\n\n### 1、分模块开发与设计\n\n**意义：**\n使得各个模块中仅包含当前模块对应的功能与配置文件，满足不同模块之间的共享的需求\n\n**步骤**\n\t1、使用install指令将当前模块发布到本地仓库\n\n​\t2、需要依赖当前模块的模块通过导入当前模块的坐标进行使用\n\n### 2、依赖管理\n\n#### 1.依赖传递\n\n依赖具有传递性，模块1依赖模块2，而模块2依赖模块3、4、5等模块，此时1抹开均可以使用这些依赖\n\n- 直接依赖：在当前项目中通过依赖配置建立的依赖关系\n- 简介依赖：被依赖的资源如果依赖其他资源，则当前项目间接依赖其他资源\n\n**依赖传递冲突问题：**\n\n- 路径优先：当依赖中出现了相同的资源时，层级越深，优先级越低，层级越浅，优先级越高\n- 声明优先：当资源在相同层级被依赖时，配置顺序考前的覆盖配置顺序靠后的\n- 特殊优先：当同级配置了相同资源的不同版本，后配置的覆盖先配置的，即后配置的优先级高\n\n#### 2.可选依赖\n\n可选依赖是隐藏当前工程所依赖的资源，隐藏后对应的资源不具有依赖传递性，即对外隐藏当前依赖的资源（不透明）\n\n在对应资源的坐标中添加，true表示隐藏，false表示不隐藏\n\n```xml\n<optional>true</optional>\n```\n\n#### 3.排序依赖\n\n排除依赖是指在当前引用的资源中将其中的某些依赖排除。在某些资源不可通过可选依赖进行隐藏时，可使用排除依赖，即主动断开依赖的资源，被排除的资源无需指定版本（不需要）\n\n```xml\n<exclusions>\n    <exclusion>\n        <groupId></groupId>\n        <artifactId></artifactId>\n    </exclusion>\n</exclusions>\n\n```\n\n### 3、聚合\n\n- 聚合：将多个模块组织成一个整体，同时对整个项目进行构建的过程称为聚合\n- 聚合工程：通常是一个不具有业务功能的空工程（有且仅有一个pom文件）\n- 作用：使用聚合工程可以将多个工程编组，通过对聚合工程进行构建，实现对所包含的模块进行同步构建\n  - 当工程中的莫格模块更新时，必须保障工程中与已更新模块关联的模块同步更新，使用聚合工程可以解决批量模块同步构建的问题\n\n**步骤**\n\n​\t1、创建聚合工程\n\n​\t2、指定聚合工程的打包方式\n\n```xml\n<packaging>pom</packaging>\n```\n\n​\t3、设置所管理的模块名称\n\n```xml\n<modules>\n    <!--配置各个模块的路径即可 如 ../maven-xxx -->\n    <module></module>\n</modules>\n```\n\n### 4、继承\n\n**概念**\n继承描述的是两个工程之间的关系，与Java中的继承类似，子工程可以继承父工程的配置信息，常见与依赖关系的继承\n\n**作用**\n\n- 简化配置\n- 减少版本冲突\n\n**配置**\n在子工程中配置所继承的父工程\n\n```xml\n<parent>\n\t<groupId></groupId>\n    <artifactId></artifactId>\n    <version></version>\n    <relativePath></relativePath><!--(可选配置)通过相对路径可以快速找到父工程 如：../maven-parent/pom.xml-->\n</parent>\n\n```\n\n\n\n在父工程中配置可选的依赖\n\n```xml\n<dependencyManagement>\n    <dependencies>\n        <dependency>\n        \t<groupId></groupId>\n            <artifactId></artifactId>\n            <version></version>\n        </dependency>\n    </dependencies>\n</dependencyManagement>\n\n```\n\n\n\n在子工程中根据需要配置上述的可选依赖\n\n```xml\n<dependency>\n    <groupId></groupId>\n    <artifactId></artifactId>\n</dependency>\n\n```\n\n**聚合与继承的区别**\n\n- 作用：\n  - 聚合用于快速构建项目\n  - 继承用于快速配置\n- 相同点\n  - 打包方式均为pom\n  - 均属于设计型模块，无实际模块内容\n- 不同点\n  - 聚合在当前模块中配置关系，可以感知参与聚合的模块有哪些\n  - 继承在子模块中配置关系，父模块无法感知哪些子模块继承了自己\n\n### 5、属性\n\n通过配置属性对版本进行统一管理\n\n```xml\n<properties>\n\t<!--定义变量-->\n    <spring.version>5.1.9.RELEASE</spring.version>\n</properties>\n<dependency>\n    <groupId></groupId>\n    <artifactId></artifactId>\n    <version>${spring.version}</version>\n</dependency>\n\n```\n\n**配置文件加载pom中的属性**\n\t1、自定义属性：\n\n```xml\n<properties>\n    <jdbc.url>jdbc:mysql//.....</jdbc.url>\n</properties>\n\n```\n\n​\t2、配置文件中引用属性\n\n```xml\njdbc.url=${jdbc.url}\n```\n\n​\t3、开启资源文件目录加载属性的过滤器\n\n```xml\n<build>\n    <resources>\n        <resource>\n            <!--使用内置属性${project.baseject}进行统一配置-->\n            <directory>${project.basedir}/src/main/resources</directory>\n            <!--开启-->\n            <filter>true</filter>\n        </resource>\n    </resources>\n</build>\n\n```\n\n​\t4、配置maven打包war包时，可以使用以下配置忽略web.xml配置检查\n\n```xml\n<plugin>\n\t<groupId>org.apache.maven.plugins</groupId>\n    <artifactId>maven-war-plugin</artifactId>\n    <version>3.2.3</version>\n    <configuration>\n        <failOnMissingWebXml>false</failOnMissingWebXml>\n    </configuration>\n</plugin>\n\n```\n\n**属性分类**\n\t1、自定义属性\n\n​\t2、内置属性：`${basedir}`、`${vesrsion}`等\n\n​\t3、Setting属性：`${settings.localRepository}`等\n\n​\t4、Java系统属性：`${user.home}`等\n\n​\t5、环境变量属性：`${env.JAVA_HOME}`等\n\n### 6、版本管理\n\n- 工程版本\n  - SNAPSHOT(快照版本)\n    - 项目开发工程中临时输出的版本，称为快照版本\n    - 快照版本随着开发的进展不断更新\n  - RELEASE(发布版本)\n    - 项目开发到阶段里程碑后，向外部发布较为稳定的版本。此时版本所对应的构件文件相对稳定，即\n    - 进行功能的后续开发，也不会改变当前发布版本内容，称为发布版本\n- 发布版本\n  - alpha版\n  - beta版\n  - 数字版\n\n### 7、多环境开发配置\n\n实际开发环境中，存在多种不同的环境如测试环境、生成环境等等，而maven提供配置多种环境的设定，帮助开发者使用工程中快速切换环境\n\n```xml\n<!--配置多环境-->\n<profiles>\n    <!--开发环境-->\n    <profile>\n        <id>env_dep</id>\n        <properties>\n            <jdbc.url>jdbc:mysql//.....1</jdbc.url>\n        </properties>\n        <!--设置为默认环境-->\n        <activation>\n            <activeByDefault>true</activeByDefault>\n        </activation>\n    </profile>\n    <!--生产环境-->\n     <profile>\n        <id>env_pro</id>\n        <properties>\n            <jdbc.url>jdbc:mysql//.....2</jdbc.url>\n        </properties>\n    </profile>\n    <!--测试环境-->\n    <profile>\n        <id>env_test</id>\n        <properties>\n            <jdbc.url>jdbc:mysql//.....3</jdbc.url>\n        </properties>\n    </profile>\n</profiles>\n\n```\n\n**指定环境**\n\n```xml\nmvn install(生命周期指令) -P id(环境id)\n```\n\n### 8、跳过测试\n\n在存在开发功能更新中且未开发完毕或者需要快速打包等等情况下，常常需要跳过测试。\n\n**使用**\n\t1、点击闪电按钮开启全局跳过\n\n​\t2、细粒度控制跳过测试，使用和指定包含和排除\n\n```xml\n<build>\n    <plugins>\n        <plugin>\n            <!--测试插件-->\n            <artifactId>maven-surefire-plugin</artifactId>\n            <version>2.xxxx</version>\n            <configuration>\n                <!--整体跳过-->\n                <skipTest>true</skipTest>\n                <!-- 配置排除部分不参与测试的内容\n\t\t\t\t整体不跳过:\n\t\t\t\t<skipTest>false</skipTest>\n\t\t\t\t排除内容:\n\t\t\t\t<excludes>\n\t\t\t\t\t<exclude>**/xxxTest.java</exclude>\n\t\t\t\t</excludes>\n-->\n            </configuration>\n        </plugin>\n    </plugins>\n</build>\n```\n\n3、使用指定\n\n```xml\nmvn package(生命周期指令) -D skipTests\n```\n\n### 9、私服\n\n#### 1.简介\n\n私服是一台独立的服务器，用于解决团队内部的资源共享和资源同步问题。\n\nNexus，一款maven私服产品，下载：https://help.sonatype.com/repomanager3/product-information/download\n\n**安装与启动**\n\n- 启动服务器（命令行启动）：nexus.exe /run nexus\n- 访问服务器（默认端口：8081）：http://localhost:8081\n- 修改基础配置信息\n  - etc/nexus-default.properties 文件中保存nexus的基础配置信息，包括默认端口\n- 修改服务器运行配置信息\n  - bin/nexus.vmoptions 文件中保存nexus服务器启动对应的配置信息，如默认占用内存空间\n\n#### 2.仓库分类\n\n| **仓库类别** | **英文** |        **功能**         | **关联操作** |\n| :----------: | :------: | :---------------------: | :----------: |\n|   宿主仓库   |  hosted  | 保存自主研发+第三方资源 |     上传     |\n|   代理仓库   |  proxy   |    代理连接中央仓库     |     下载     |\n|    仓库组    |  group   | 为仓库编组简化下载操作  |     下载     |\n\n- 宿主仓库：保存无法从中央仓库获取的资源\n  - 自主研发资源\n  - 第三方非开源资源\n- 代理仓库：代理远程仓库，通过nexus访问其他公共仓库\n- 仓库组：将若干仓库设计成一个组，简化配置\n  - 不用于保存资料，属于设计型仓库\n\n#### 3.资源上传与下载\n\n**配置**\n\n- 配置本地仓库访问私服权限\n\n```xml\n<!--私服的访问权限-->\n<server>\n  <id>zyl-snapshot</id>\n  <username>admin</username>\n  <password>admin</password>\n</server>\n<server>\n  <id>zyl-release</id>\n  <username>admin</username>\n  <password>admin</password>\n</server>\n```\n\n- 配置本地仓库访问私服的路径\n\n```xml\n<!--私服的访问路径-->\n<mirror>\n  <id>maven-public</id>\n  <mirrorOf>*</mirrorOf>\n  <url>http://localhost:8081/repository/maven-public/</url>\n</mirror>\n```\n\n\n\n- 在pom.xml配置当前项目访问私服上次资源的保存位置\n\n```xml\n<distributionManagement> \n    <repository> \n        <id>zyl-release</id> \n        <url>http://localhost:8081/repository/zyl-release/</url>      \n \t</repository> \n    <snapshotRepository> \n        <id>zyl-snapshot</id> \n        <url>http://localhost:8081/repository/zyl-snapshot/</url>\n\t</snapshotRepository>\n</distributionManagement>\n```\n\n- 资源上传 ：deploy指定\n\n（注：本文参考https://blog.csdn.net/L1ghtn1nggggg/article/details/124437648）\n","source":"_posts/Maven.md","raw":"---\ntitle: Maven\ndate: \ntags:\n\t- Maven\ncategories:\n\t- [Maven]\n---\n\n# Maven学习笔记\n\n## Maven基础\n\n**概念**\n\nMaven是一个项目管理工具，它包含了一个项目对象模型（POM：Project Object Model），一组标准集合，一个项目生命瘦子（Project Lifecycle），一个依赖管理系统（Dependency Management System），和用来运行定义在生命周期阶段（phase）中插件（plugin）目标（goal）的逻辑。\n\n**功能**\n\n帮助程序员构建工程，管理jar报，编译代码，自动运行单元测试，打包，生成报表，以及部署项目，生成Web站点。\n\nMaven本地仓库介绍：\n\n- 本地仓库：\n\n  用来存储从远程仓库或中央仓库下载的插件和jar包，项目使用一些插件或jar包，优先从本地仓库查找\n\n- 远程仓库：\n\n  如果本地需要插件或jar包，本地仓库没有，默认是从远程仓库下载。远程仓库可以在互联网内，也可以子啊局域网内。\n\n- 中央仓库：\n\n  在maven软件中内置一个远程仓库地址：`http://repo1.maven.org/maven2`，它是中央仓库，服务与整个互联网，它是由Maven团队自己维护，里面存储了非常全的jar包，它包含了世界上大部分流行的开源项目构件。但是由于在国外，下载速度慢，不利于使用，可改为使用国内公司架设的远程仓库。\n\n**Maven目录结构：**\n\n- src 源码\n  - main：主工程代码\n    - java：主工程代码\n    - resources：需要使用的配置文件\n    - webapp：web项目的资源目录（jap/html/WEB-INF），有web项目时存在\n  - test：测试目录\n    - java：测试代码\n    - resources：测试需要使用的配置文件\n- pom.xml：项目和核心配置文件\n\n**常用命令：**\n\n- compile：编译，将 src/main/java 下的文件编译为 class 文件输出到 target 目录下\n- clean：清理，执行 clean会删除 target 目录及内容\n- package：打包，对于 java 工程执行package打成 jar 包，对于web工程打成war 包\n- install：安装，执行 install 将maven打成 jar 包或war 包发布到本地仓库\n- 注意：当后面的命令执行时，前面的操作过程也都会自动执行\n\n**Maven的生命周期**\n\n- Clean：在进行真正的构建之前进行一些清理工作\n- 核心构建：编译、测试、打包、部署等等\n- 站点发布\n\n**Maven坐标**\n概念：被Maven管理的资源的唯一标识\n\n- groupid：组织名称\n- artifactid：模块名称\n- version：版本号\n\n坐标搜索：[Maven Repository](https://mvnrepository.com/)\n\n**依赖的范围**\n\n项目依赖某个包，需要在pom.xml中添加包的坐标，而且要指定依赖范围`<scope></scope>`\n\n| **依赖范围** | **对编译有效** | **对测试有效** | **对运行时有效** |        **示例**         |\n| :----------: | :------------: | :------------: | :--------------: | :---------------------: |\n|   compile    |       ✔️        |       ✔️        |        ✔️         |       spring-core       |\n|     test     |       -        |       ✔️        |        -         |          Junit          |\n|   provided   |       ✔️        |       ✔️        |        -         |       servlet-api       |\n|   runtime    |       -        |       ✔️        |        ✔️         |        JDBC驱动         |\n|    system    |       ✔️        |       ✔️        |        -         | 本地Maven仓库之外的类库 |\n\n依赖范围由强到弱的顺序是：compile > provided > runtime > test\n\n使用方式：\n\n- 默认引入 的 jar 包 ------- compile 【默认范围 可以不写】（编译、测试、运行都有效 ）\n- servlet-api 、jsp-api ------- provided （编译、测试有效， 运行时无效防止和 tomcat 下 jar 包冲突）\n- jdbc 驱动 jar 包 ---- runtime （测试、运行 有效 ）\n- junit ----- test （测试有效）\n\n## Maven进阶\n\n### 1、分模块开发与设计\n\n**意义：**\n使得各个模块中仅包含当前模块对应的功能与配置文件，满足不同模块之间的共享的需求\n\n**步骤**\n\t1、使用install指令将当前模块发布到本地仓库\n\n​\t2、需要依赖当前模块的模块通过导入当前模块的坐标进行使用\n\n### 2、依赖管理\n\n#### 1.依赖传递\n\n依赖具有传递性，模块1依赖模块2，而模块2依赖模块3、4、5等模块，此时1抹开均可以使用这些依赖\n\n- 直接依赖：在当前项目中通过依赖配置建立的依赖关系\n- 简介依赖：被依赖的资源如果依赖其他资源，则当前项目间接依赖其他资源\n\n**依赖传递冲突问题：**\n\n- 路径优先：当依赖中出现了相同的资源时，层级越深，优先级越低，层级越浅，优先级越高\n- 声明优先：当资源在相同层级被依赖时，配置顺序考前的覆盖配置顺序靠后的\n- 特殊优先：当同级配置了相同资源的不同版本，后配置的覆盖先配置的，即后配置的优先级高\n\n#### 2.可选依赖\n\n可选依赖是隐藏当前工程所依赖的资源，隐藏后对应的资源不具有依赖传递性，即对外隐藏当前依赖的资源（不透明）\n\n在对应资源的坐标中添加，true表示隐藏，false表示不隐藏\n\n```xml\n<optional>true</optional>\n```\n\n#### 3.排序依赖\n\n排除依赖是指在当前引用的资源中将其中的某些依赖排除。在某些资源不可通过可选依赖进行隐藏时，可使用排除依赖，即主动断开依赖的资源，被排除的资源无需指定版本（不需要）\n\n```xml\n<exclusions>\n    <exclusion>\n        <groupId></groupId>\n        <artifactId></artifactId>\n    </exclusion>\n</exclusions>\n\n```\n\n### 3、聚合\n\n- 聚合：将多个模块组织成一个整体，同时对整个项目进行构建的过程称为聚合\n- 聚合工程：通常是一个不具有业务功能的空工程（有且仅有一个pom文件）\n- 作用：使用聚合工程可以将多个工程编组，通过对聚合工程进行构建，实现对所包含的模块进行同步构建\n  - 当工程中的莫格模块更新时，必须保障工程中与已更新模块关联的模块同步更新，使用聚合工程可以解决批量模块同步构建的问题\n\n**步骤**\n\n​\t1、创建聚合工程\n\n​\t2、指定聚合工程的打包方式\n\n```xml\n<packaging>pom</packaging>\n```\n\n​\t3、设置所管理的模块名称\n\n```xml\n<modules>\n    <!--配置各个模块的路径即可 如 ../maven-xxx -->\n    <module></module>\n</modules>\n```\n\n### 4、继承\n\n**概念**\n继承描述的是两个工程之间的关系，与Java中的继承类似，子工程可以继承父工程的配置信息，常见与依赖关系的继承\n\n**作用**\n\n- 简化配置\n- 减少版本冲突\n\n**配置**\n在子工程中配置所继承的父工程\n\n```xml\n<parent>\n\t<groupId></groupId>\n    <artifactId></artifactId>\n    <version></version>\n    <relativePath></relativePath><!--(可选配置)通过相对路径可以快速找到父工程 如：../maven-parent/pom.xml-->\n</parent>\n\n```\n\n\n\n在父工程中配置可选的依赖\n\n```xml\n<dependencyManagement>\n    <dependencies>\n        <dependency>\n        \t<groupId></groupId>\n            <artifactId></artifactId>\n            <version></version>\n        </dependency>\n    </dependencies>\n</dependencyManagement>\n\n```\n\n\n\n在子工程中根据需要配置上述的可选依赖\n\n```xml\n<dependency>\n    <groupId></groupId>\n    <artifactId></artifactId>\n</dependency>\n\n```\n\n**聚合与继承的区别**\n\n- 作用：\n  - 聚合用于快速构建项目\n  - 继承用于快速配置\n- 相同点\n  - 打包方式均为pom\n  - 均属于设计型模块，无实际模块内容\n- 不同点\n  - 聚合在当前模块中配置关系，可以感知参与聚合的模块有哪些\n  - 继承在子模块中配置关系，父模块无法感知哪些子模块继承了自己\n\n### 5、属性\n\n通过配置属性对版本进行统一管理\n\n```xml\n<properties>\n\t<!--定义变量-->\n    <spring.version>5.1.9.RELEASE</spring.version>\n</properties>\n<dependency>\n    <groupId></groupId>\n    <artifactId></artifactId>\n    <version>${spring.version}</version>\n</dependency>\n\n```\n\n**配置文件加载pom中的属性**\n\t1、自定义属性：\n\n```xml\n<properties>\n    <jdbc.url>jdbc:mysql//.....</jdbc.url>\n</properties>\n\n```\n\n​\t2、配置文件中引用属性\n\n```xml\njdbc.url=${jdbc.url}\n```\n\n​\t3、开启资源文件目录加载属性的过滤器\n\n```xml\n<build>\n    <resources>\n        <resource>\n            <!--使用内置属性${project.baseject}进行统一配置-->\n            <directory>${project.basedir}/src/main/resources</directory>\n            <!--开启-->\n            <filter>true</filter>\n        </resource>\n    </resources>\n</build>\n\n```\n\n​\t4、配置maven打包war包时，可以使用以下配置忽略web.xml配置检查\n\n```xml\n<plugin>\n\t<groupId>org.apache.maven.plugins</groupId>\n    <artifactId>maven-war-plugin</artifactId>\n    <version>3.2.3</version>\n    <configuration>\n        <failOnMissingWebXml>false</failOnMissingWebXml>\n    </configuration>\n</plugin>\n\n```\n\n**属性分类**\n\t1、自定义属性\n\n​\t2、内置属性：`${basedir}`、`${vesrsion}`等\n\n​\t3、Setting属性：`${settings.localRepository}`等\n\n​\t4、Java系统属性：`${user.home}`等\n\n​\t5、环境变量属性：`${env.JAVA_HOME}`等\n\n### 6、版本管理\n\n- 工程版本\n  - SNAPSHOT(快照版本)\n    - 项目开发工程中临时输出的版本，称为快照版本\n    - 快照版本随着开发的进展不断更新\n  - RELEASE(发布版本)\n    - 项目开发到阶段里程碑后，向外部发布较为稳定的版本。此时版本所对应的构件文件相对稳定，即\n    - 进行功能的后续开发，也不会改变当前发布版本内容，称为发布版本\n- 发布版本\n  - alpha版\n  - beta版\n  - 数字版\n\n### 7、多环境开发配置\n\n实际开发环境中，存在多种不同的环境如测试环境、生成环境等等，而maven提供配置多种环境的设定，帮助开发者使用工程中快速切换环境\n\n```xml\n<!--配置多环境-->\n<profiles>\n    <!--开发环境-->\n    <profile>\n        <id>env_dep</id>\n        <properties>\n            <jdbc.url>jdbc:mysql//.....1</jdbc.url>\n        </properties>\n        <!--设置为默认环境-->\n        <activation>\n            <activeByDefault>true</activeByDefault>\n        </activation>\n    </profile>\n    <!--生产环境-->\n     <profile>\n        <id>env_pro</id>\n        <properties>\n            <jdbc.url>jdbc:mysql//.....2</jdbc.url>\n        </properties>\n    </profile>\n    <!--测试环境-->\n    <profile>\n        <id>env_test</id>\n        <properties>\n            <jdbc.url>jdbc:mysql//.....3</jdbc.url>\n        </properties>\n    </profile>\n</profiles>\n\n```\n\n**指定环境**\n\n```xml\nmvn install(生命周期指令) -P id(环境id)\n```\n\n### 8、跳过测试\n\n在存在开发功能更新中且未开发完毕或者需要快速打包等等情况下，常常需要跳过测试。\n\n**使用**\n\t1、点击闪电按钮开启全局跳过\n\n​\t2、细粒度控制跳过测试，使用和指定包含和排除\n\n```xml\n<build>\n    <plugins>\n        <plugin>\n            <!--测试插件-->\n            <artifactId>maven-surefire-plugin</artifactId>\n            <version>2.xxxx</version>\n            <configuration>\n                <!--整体跳过-->\n                <skipTest>true</skipTest>\n                <!-- 配置排除部分不参与测试的内容\n\t\t\t\t整体不跳过:\n\t\t\t\t<skipTest>false</skipTest>\n\t\t\t\t排除内容:\n\t\t\t\t<excludes>\n\t\t\t\t\t<exclude>**/xxxTest.java</exclude>\n\t\t\t\t</excludes>\n-->\n            </configuration>\n        </plugin>\n    </plugins>\n</build>\n```\n\n3、使用指定\n\n```xml\nmvn package(生命周期指令) -D skipTests\n```\n\n### 9、私服\n\n#### 1.简介\n\n私服是一台独立的服务器，用于解决团队内部的资源共享和资源同步问题。\n\nNexus，一款maven私服产品，下载：https://help.sonatype.com/repomanager3/product-information/download\n\n**安装与启动**\n\n- 启动服务器（命令行启动）：nexus.exe /run nexus\n- 访问服务器（默认端口：8081）：http://localhost:8081\n- 修改基础配置信息\n  - etc/nexus-default.properties 文件中保存nexus的基础配置信息，包括默认端口\n- 修改服务器运行配置信息\n  - bin/nexus.vmoptions 文件中保存nexus服务器启动对应的配置信息，如默认占用内存空间\n\n#### 2.仓库分类\n\n| **仓库类别** | **英文** |        **功能**         | **关联操作** |\n| :----------: | :------: | :---------------------: | :----------: |\n|   宿主仓库   |  hosted  | 保存自主研发+第三方资源 |     上传     |\n|   代理仓库   |  proxy   |    代理连接中央仓库     |     下载     |\n|    仓库组    |  group   | 为仓库编组简化下载操作  |     下载     |\n\n- 宿主仓库：保存无法从中央仓库获取的资源\n  - 自主研发资源\n  - 第三方非开源资源\n- 代理仓库：代理远程仓库，通过nexus访问其他公共仓库\n- 仓库组：将若干仓库设计成一个组，简化配置\n  - 不用于保存资料，属于设计型仓库\n\n#### 3.资源上传与下载\n\n**配置**\n\n- 配置本地仓库访问私服权限\n\n```xml\n<!--私服的访问权限-->\n<server>\n  <id>zyl-snapshot</id>\n  <username>admin</username>\n  <password>admin</password>\n</server>\n<server>\n  <id>zyl-release</id>\n  <username>admin</username>\n  <password>admin</password>\n</server>\n```\n\n- 配置本地仓库访问私服的路径\n\n```xml\n<!--私服的访问路径-->\n<mirror>\n  <id>maven-public</id>\n  <mirrorOf>*</mirrorOf>\n  <url>http://localhost:8081/repository/maven-public/</url>\n</mirror>\n```\n\n\n\n- 在pom.xml配置当前项目访问私服上次资源的保存位置\n\n```xml\n<distributionManagement> \n    <repository> \n        <id>zyl-release</id> \n        <url>http://localhost:8081/repository/zyl-release/</url>      \n \t</repository> \n    <snapshotRepository> \n        <id>zyl-snapshot</id> \n        <url>http://localhost:8081/repository/zyl-snapshot/</url>\n\t</snapshotRepository>\n</distributionManagement>\n```\n\n- 资源上传 ：deploy指定\n\n（注：本文参考https://blog.csdn.net/L1ghtn1nggggg/article/details/124437648）\n","slug":"Maven","published":1,"updated":"2022-11-20T05:53:17.893Z","comments":1,"layout":"post","photos":[],"link":"","_id":"claryulc500065ojr52yx6xnv","content":"<h1 id=\"Maven学习笔记\"><a href=\"#Maven学习笔记\" class=\"headerlink\" title=\"Maven学习笔记\"></a>Maven学习笔记</h1><h2 id=\"Maven基础\"><a href=\"#Maven基础\" class=\"headerlink\" title=\"Maven基础\"></a>Maven基础</h2><p><strong>概念</strong></p>\n<p>Maven是一个项目管理工具，它包含了一个项目对象模型（POM：Project Object Model），一组标准集合，一个项目生命瘦子（Project Lifecycle），一个依赖管理系统（Dependency Management System），和用来运行定义在生命周期阶段（phase）中插件（plugin）目标（goal）的逻辑。</p>\n<p><strong>功能</strong></p>\n<p>帮助程序员构建工程，管理jar报，编译代码，自动运行单元测试，打包，生成报表，以及部署项目，生成Web站点。</p>\n<p>Maven本地仓库介绍：</p>\n<ul>\n<li><p>本地仓库：</p>\n<p>用来存储从远程仓库或中央仓库下载的插件和jar包，项目使用一些插件或jar包，优先从本地仓库查找</p>\n</li>\n<li><p>远程仓库：</p>\n<p>如果本地需要插件或jar包，本地仓库没有，默认是从远程仓库下载。远程仓库可以在互联网内，也可以子啊局域网内。</p>\n</li>\n<li><p>中央仓库：</p>\n<p>在maven软件中内置一个远程仓库地址：<code>http://repo1.maven.org/maven2</code>，它是中央仓库，服务与整个互联网，它是由Maven团队自己维护，里面存储了非常全的jar包，它包含了世界上大部分流行的开源项目构件。但是由于在国外，下载速度慢，不利于使用，可改为使用国内公司架设的远程仓库。</p>\n</li>\n</ul>\n<p><strong>Maven目录结构：</strong></p>\n<ul>\n<li>src 源码<ul>\n<li>main：主工程代码<ul>\n<li>java：主工程代码</li>\n<li>resources：需要使用的配置文件</li>\n<li>webapp：web项目的资源目录（jap/html/WEB-INF），有web项目时存在</li>\n</ul>\n</li>\n<li>test：测试目录<ul>\n<li>java：测试代码</li>\n<li>resources：测试需要使用的配置文件</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>pom.xml：项目和核心配置文件</li>\n</ul>\n<p><strong>常用命令：</strong></p>\n<ul>\n<li>compile：编译，将 src/main/java 下的文件编译为 class 文件输出到 target 目录下</li>\n<li>clean：清理，执行 clean会删除 target 目录及内容</li>\n<li>package：打包，对于 java 工程执行package打成 jar 包，对于web工程打成war 包</li>\n<li>install：安装，执行 install 将maven打成 jar 包或war 包发布到本地仓库</li>\n<li>注意：当后面的命令执行时，前面的操作过程也都会自动执行</li>\n</ul>\n<p><strong>Maven的生命周期</strong></p>\n<ul>\n<li>Clean：在进行真正的构建之前进行一些清理工作</li>\n<li>核心构建：编译、测试、打包、部署等等</li>\n<li>站点发布</li>\n</ul>\n<p><strong>Maven坐标</strong><br>概念：被Maven管理的资源的唯一标识</p>\n<ul>\n<li>groupid：组织名称</li>\n<li>artifactid：模块名称</li>\n<li>version：版本号</li>\n</ul>\n<p>坐标搜索：<a href=\"https://mvnrepository.com/\">Maven Repository</a></p>\n<p><strong>依赖的范围</strong></p>\n<p>项目依赖某个包，需要在pom.xml中添加包的坐标，而且要指定依赖范围<code>&lt;scope&gt;&lt;/scope&gt;</code></p>\n<table>\n<thead>\n<tr>\n<th align=\"center\"><strong>依赖范围</strong></th>\n<th align=\"center\"><strong>对编译有效</strong></th>\n<th align=\"center\"><strong>对测试有效</strong></th>\n<th align=\"center\"><strong>对运行时有效</strong></th>\n<th align=\"center\"><strong>示例</strong></th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\">compile</td>\n<td align=\"center\">✔️</td>\n<td align=\"center\">✔️</td>\n<td align=\"center\">✔️</td>\n<td align=\"center\">spring-core</td>\n</tr>\n<tr>\n<td align=\"center\">test</td>\n<td align=\"center\">-</td>\n<td align=\"center\">✔️</td>\n<td align=\"center\">-</td>\n<td align=\"center\">Junit</td>\n</tr>\n<tr>\n<td align=\"center\">provided</td>\n<td align=\"center\">✔️</td>\n<td align=\"center\">✔️</td>\n<td align=\"center\">-</td>\n<td align=\"center\">servlet-api</td>\n</tr>\n<tr>\n<td align=\"center\">runtime</td>\n<td align=\"center\">-</td>\n<td align=\"center\">✔️</td>\n<td align=\"center\">✔️</td>\n<td align=\"center\">JDBC驱动</td>\n</tr>\n<tr>\n<td align=\"center\">system</td>\n<td align=\"center\">✔️</td>\n<td align=\"center\">✔️</td>\n<td align=\"center\">-</td>\n<td align=\"center\">本地Maven仓库之外的类库</td>\n</tr>\n</tbody></table>\n<p>依赖范围由强到弱的顺序是：compile &gt; provided &gt; runtime &gt; test</p>\n<p>使用方式：</p>\n<ul>\n<li>默认引入 的 jar 包 ——- compile 【默认范围 可以不写】（编译、测试、运行都有效 ）</li>\n<li>servlet-api 、jsp-api ——- provided （编译、测试有效， 运行时无效防止和 tomcat 下 jar 包冲突）</li>\n<li>jdbc 驱动 jar 包 —- runtime （测试、运行 有效 ）</li>\n<li>junit —– test （测试有效）</li>\n</ul>\n<h2 id=\"Maven进阶\"><a href=\"#Maven进阶\" class=\"headerlink\" title=\"Maven进阶\"></a>Maven进阶</h2><h3 id=\"1、分模块开发与设计\"><a href=\"#1、分模块开发与设计\" class=\"headerlink\" title=\"1、分模块开发与设计\"></a>1、分模块开发与设计</h3><p><strong>意义：</strong><br>使得各个模块中仅包含当前模块对应的功能与配置文件，满足不同模块之间的共享的需求</p>\n<p><strong>步骤</strong><br>    1、使用install指令将当前模块发布到本地仓库</p>\n<p>​    2、需要依赖当前模块的模块通过导入当前模块的坐标进行使用</p>\n<h3 id=\"2、依赖管理\"><a href=\"#2、依赖管理\" class=\"headerlink\" title=\"2、依赖管理\"></a>2、依赖管理</h3><h4 id=\"1-依赖传递\"><a href=\"#1-依赖传递\" class=\"headerlink\" title=\"1.依赖传递\"></a>1.依赖传递</h4><p>依赖具有传递性，模块1依赖模块2，而模块2依赖模块3、4、5等模块，此时1抹开均可以使用这些依赖</p>\n<ul>\n<li>直接依赖：在当前项目中通过依赖配置建立的依赖关系</li>\n<li>简介依赖：被依赖的资源如果依赖其他资源，则当前项目间接依赖其他资源</li>\n</ul>\n<p><strong>依赖传递冲突问题：</strong></p>\n<ul>\n<li>路径优先：当依赖中出现了相同的资源时，层级越深，优先级越低，层级越浅，优先级越高</li>\n<li>声明优先：当资源在相同层级被依赖时，配置顺序考前的覆盖配置顺序靠后的</li>\n<li>特殊优先：当同级配置了相同资源的不同版本，后配置的覆盖先配置的，即后配置的优先级高</li>\n</ul>\n<h4 id=\"2-可选依赖\"><a href=\"#2-可选依赖\" class=\"headerlink\" title=\"2.可选依赖\"></a>2.可选依赖</h4><p>可选依赖是隐藏当前工程所依赖的资源，隐藏后对应的资源不具有依赖传递性，即对外隐藏当前依赖的资源（不透明）</p>\n<p>在对应资源的坐标中添加，true表示隐藏，false表示不隐藏</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">optional</span>&gt;</span>true<span class=\"tag\">&lt;/<span class=\"name\">optional</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"3-排序依赖\"><a href=\"#3-排序依赖\" class=\"headerlink\" title=\"3.排序依赖\"></a>3.排序依赖</h4><p>排除依赖是指在当前引用的资源中将其中的某些依赖排除。在某些资源不可通过可选依赖进行隐藏时，可使用排除依赖，即主动断开依赖的资源，被排除的资源无需指定版本（不需要）</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">exclusions</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">exclusion</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">exclusion</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">exclusions</span>&gt;</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3、聚合\"><a href=\"#3、聚合\" class=\"headerlink\" title=\"3、聚合\"></a>3、聚合</h3><ul>\n<li>聚合：将多个模块组织成一个整体，同时对整个项目进行构建的过程称为聚合</li>\n<li>聚合工程：通常是一个不具有业务功能的空工程（有且仅有一个pom文件）</li>\n<li>作用：使用聚合工程可以将多个工程编组，通过对聚合工程进行构建，实现对所包含的模块进行同步构建<ul>\n<li>当工程中的莫格模块更新时，必须保障工程中与已更新模块关联的模块同步更新，使用聚合工程可以解决批量模块同步构建的问题</li>\n</ul>\n</li>\n</ul>\n<p><strong>步骤</strong></p>\n<p>​    1、创建聚合工程</p>\n<p>​    2、指定聚合工程的打包方式</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">packaging</span>&gt;</span>pom<span class=\"tag\">&lt;/<span class=\"name\">packaging</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>​    3、设置所管理的模块名称</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">modules</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!--配置各个模块的路径即可 如 ../maven-xxx --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">module</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">module</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">modules</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"4、继承\"><a href=\"#4、继承\" class=\"headerlink\" title=\"4、继承\"></a>4、继承</h3><p><strong>概念</strong><br>继承描述的是两个工程之间的关系，与Java中的继承类似，子工程可以继承父工程的配置信息，常见与依赖关系的继承</p>\n<p><strong>作用</strong></p>\n<ul>\n<li>简化配置</li>\n<li>减少版本冲突</li>\n</ul>\n<p><strong>配置</strong><br>在子工程中配置所继承的父工程</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">parent</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">relativePath</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">relativePath</span>&gt;</span><span class=\"comment\">&lt;!--(可选配置)通过相对路径可以快速找到父工程 如：../maven-parent/pom.xml--&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">parent</span>&gt;</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n\n\n<p>在父工程中配置可选的依赖</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependencyManagement</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">dependencies</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">        \t<span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">dependencies</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependencyManagement</span>&gt;</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n\n\n<p>在子工程中根据需要配置上述的可选依赖</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p><strong>聚合与继承的区别</strong></p>\n<ul>\n<li>作用：<ul>\n<li>聚合用于快速构建项目</li>\n<li>继承用于快速配置</li>\n</ul>\n</li>\n<li>相同点<ul>\n<li>打包方式均为pom</li>\n<li>均属于设计型模块，无实际模块内容</li>\n</ul>\n</li>\n<li>不同点<ul>\n<li>聚合在当前模块中配置关系，可以感知参与聚合的模块有哪些</li>\n<li>继承在子模块中配置关系，父模块无法感知哪些子模块继承了自己</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"5、属性\"><a href=\"#5、属性\" class=\"headerlink\" title=\"5、属性\"></a>5、属性</h3><p>通过配置属性对版本进行统一管理</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">properties</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"comment\">&lt;!--定义变量--&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">spring.version</span>&gt;</span>5.1.9.RELEASE<span class=\"tag\">&lt;/<span class=\"name\">spring.version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">properties</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>$&#123;spring.version&#125;<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p><strong>配置文件加载pom中的属性</strong><br>    1、自定义属性：</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">properties</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">jdbc.url</span>&gt;</span>jdbc:mysql//.....<span class=\"tag\">&lt;/<span class=\"name\">jdbc.url</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">properties</span>&gt;</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>​    2、配置文件中引用属性</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">jdbc.url=$&#123;jdbc.url&#125;</span><br></pre></td></tr></table></figure>\n\n<p>​    3、开启资源文件目录加载属性的过滤器</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">build</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">resources</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">resource</span>&gt;</span></span><br><span class=\"line\">            <span class=\"comment\">&lt;!--使用内置属性$&#123;project.baseject&#125;进行统一配置--&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">directory</span>&gt;</span>$&#123;project.basedir&#125;/src/main/resources<span class=\"tag\">&lt;/<span class=\"name\">directory</span>&gt;</span></span><br><span class=\"line\">            <span class=\"comment\">&lt;!--开启--&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">filter</span>&gt;</span>true<span class=\"tag\">&lt;/<span class=\"name\">filter</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">resource</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">resources</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">build</span>&gt;</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>​    4、配置maven打包war包时，可以使用以下配置忽略web.xml配置检查</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">plugin</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.apache.maven.plugins<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>maven-war-plugin<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>3.2.3<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">configuration</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">failOnMissingWebXml</span>&gt;</span>false<span class=\"tag\">&lt;/<span class=\"name\">failOnMissingWebXml</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">configuration</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">plugin</span>&gt;</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p><strong>属性分类</strong><br>    1、自定义属性</p>\n<p>​    2、内置属性：<code>$&#123;basedir&#125;</code>、<code>$&#123;vesrsion&#125;</code>等</p>\n<p>​    3、Setting属性：<code>$&#123;settings.localRepository&#125;</code>等</p>\n<p>​    4、Java系统属性：<code>$&#123;user.home&#125;</code>等</p>\n<p>​    5、环境变量属性：<code>$&#123;env.JAVA_HOME&#125;</code>等</p>\n<h3 id=\"6、版本管理\"><a href=\"#6、版本管理\" class=\"headerlink\" title=\"6、版本管理\"></a>6、版本管理</h3><ul>\n<li>工程版本<ul>\n<li>SNAPSHOT(快照版本)<ul>\n<li>项目开发工程中临时输出的版本，称为快照版本</li>\n<li>快照版本随着开发的进展不断更新</li>\n</ul>\n</li>\n<li>RELEASE(发布版本)<ul>\n<li>项目开发到阶段里程碑后，向外部发布较为稳定的版本。此时版本所对应的构件文件相对稳定，即</li>\n<li>进行功能的后续开发，也不会改变当前发布版本内容，称为发布版本</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>发布版本<ul>\n<li>alpha版</li>\n<li>beta版</li>\n<li>数字版</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"7、多环境开发配置\"><a href=\"#7、多环境开发配置\" class=\"headerlink\" title=\"7、多环境开发配置\"></a>7、多环境开发配置</h3><p>实际开发环境中，存在多种不同的环境如测试环境、生成环境等等，而maven提供配置多种环境的设定，帮助开发者使用工程中快速切换环境</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!--配置多环境--&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">profiles</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!--开发环境--&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">profile</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">id</span>&gt;</span>env_dep<span class=\"tag\">&lt;/<span class=\"name\">id</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">properties</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">jdbc.url</span>&gt;</span>jdbc:mysql//.....1<span class=\"tag\">&lt;/<span class=\"name\">jdbc.url</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">properties</span>&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!--设置为默认环境--&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">activation</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">activeByDefault</span>&gt;</span>true<span class=\"tag\">&lt;/<span class=\"name\">activeByDefault</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">activation</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">profile</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!--生产环境--&gt;</span></span><br><span class=\"line\">     <span class=\"tag\">&lt;<span class=\"name\">profile</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">id</span>&gt;</span>env_pro<span class=\"tag\">&lt;/<span class=\"name\">id</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">properties</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">jdbc.url</span>&gt;</span>jdbc:mysql//.....2<span class=\"tag\">&lt;/<span class=\"name\">jdbc.url</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">properties</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">profile</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!--测试环境--&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">profile</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">id</span>&gt;</span>env_test<span class=\"tag\">&lt;/<span class=\"name\">id</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">properties</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">jdbc.url</span>&gt;</span>jdbc:mysql//.....3<span class=\"tag\">&lt;/<span class=\"name\">jdbc.url</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">properties</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">profile</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">profiles</span>&gt;</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p><strong>指定环境</strong></p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mvn install(生命周期指令) -P id(环境id)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"8、跳过测试\"><a href=\"#8、跳过测试\" class=\"headerlink\" title=\"8、跳过测试\"></a>8、跳过测试</h3><p>在存在开发功能更新中且未开发完毕或者需要快速打包等等情况下，常常需要跳过测试。</p>\n<p><strong>使用</strong><br>    1、点击闪电按钮开启全局跳过</p>\n<p>​    2、细粒度控制跳过测试，使用和指定包含和排除</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">build</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">plugins</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">plugin</span>&gt;</span></span><br><span class=\"line\">            <span class=\"comment\">&lt;!--测试插件--&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>maven-surefire-plugin<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>2.xxxx<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">configuration</span>&gt;</span></span><br><span class=\"line\">                <span class=\"comment\">&lt;!--整体跳过--&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">skipTest</span>&gt;</span>true<span class=\"tag\">&lt;/<span class=\"name\">skipTest</span>&gt;</span></span><br><span class=\"line\">                <span class=\"comment\">&lt;!-- 配置排除部分不参与测试的内容</span></span><br><span class=\"line\"><span class=\"comment\">\t\t\t\t整体不跳过:</span></span><br><span class=\"line\"><span class=\"comment\">\t\t\t\t&lt;skipTest&gt;false&lt;/skipTest&gt;</span></span><br><span class=\"line\"><span class=\"comment\">\t\t\t\t排除内容:</span></span><br><span class=\"line\"><span class=\"comment\">\t\t\t\t&lt;excludes&gt;</span></span><br><span class=\"line\"><span class=\"comment\">\t\t\t\t\t&lt;exclude&gt;**/xxxTest.java&lt;/exclude&gt;</span></span><br><span class=\"line\"><span class=\"comment\">\t\t\t\t&lt;/excludes&gt;</span></span><br><span class=\"line\"><span class=\"comment\">--&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">configuration</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">plugin</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">plugins</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">build</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>3、使用指定</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mvn package(生命周期指令) -D skipTests</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"9、私服\"><a href=\"#9、私服\" class=\"headerlink\" title=\"9、私服\"></a>9、私服</h3><h4 id=\"1-简介\"><a href=\"#1-简介\" class=\"headerlink\" title=\"1.简介\"></a>1.简介</h4><p>私服是一台独立的服务器，用于解决团队内部的资源共享和资源同步问题。</p>\n<p>Nexus，一款maven私服产品，下载：<a href=\"https://help.sonatype.com/repomanager3/product-information/download\">https://help.sonatype.com/repomanager3/product-information/download</a></p>\n<p><strong>安装与启动</strong></p>\n<ul>\n<li>启动服务器（命令行启动）：nexus.exe /run nexus</li>\n<li>访问服务器（默认端口：8081）：<a href=\"http://localhost:8081/\">http://localhost:8081</a></li>\n<li>修改基础配置信息<ul>\n<li>etc/nexus-default.properties 文件中保存nexus的基础配置信息，包括默认端口</li>\n</ul>\n</li>\n<li>修改服务器运行配置信息<ul>\n<li>bin/nexus.vmoptions 文件中保存nexus服务器启动对应的配置信息，如默认占用内存空间</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"2-仓库分类\"><a href=\"#2-仓库分类\" class=\"headerlink\" title=\"2.仓库分类\"></a>2.仓库分类</h4><table>\n<thead>\n<tr>\n<th align=\"center\"><strong>仓库类别</strong></th>\n<th align=\"center\"><strong>英文</strong></th>\n<th align=\"center\"><strong>功能</strong></th>\n<th align=\"center\"><strong>关联操作</strong></th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\">宿主仓库</td>\n<td align=\"center\">hosted</td>\n<td align=\"center\">保存自主研发+第三方资源</td>\n<td align=\"center\">上传</td>\n</tr>\n<tr>\n<td align=\"center\">代理仓库</td>\n<td align=\"center\">proxy</td>\n<td align=\"center\">代理连接中央仓库</td>\n<td align=\"center\">下载</td>\n</tr>\n<tr>\n<td align=\"center\">仓库组</td>\n<td align=\"center\">group</td>\n<td align=\"center\">为仓库编组简化下载操作</td>\n<td align=\"center\">下载</td>\n</tr>\n</tbody></table>\n<ul>\n<li>宿主仓库：保存无法从中央仓库获取的资源<ul>\n<li>自主研发资源</li>\n<li>第三方非开源资源</li>\n</ul>\n</li>\n<li>代理仓库：代理远程仓库，通过nexus访问其他公共仓库</li>\n<li>仓库组：将若干仓库设计成一个组，简化配置<ul>\n<li>不用于保存资料，属于设计型仓库</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"3-资源上传与下载\"><a href=\"#3-资源上传与下载\" class=\"headerlink\" title=\"3.资源上传与下载\"></a>3.资源上传与下载</h4><p><strong>配置</strong></p>\n<ul>\n<li>配置本地仓库访问私服权限</li>\n</ul>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!--私服的访问权限--&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">server</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">id</span>&gt;</span>zyl-snapshot<span class=\"tag\">&lt;/<span class=\"name\">id</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">username</span>&gt;</span>admin<span class=\"tag\">&lt;/<span class=\"name\">username</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">password</span>&gt;</span>admin<span class=\"tag\">&lt;/<span class=\"name\">password</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">server</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">server</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">id</span>&gt;</span>zyl-release<span class=\"tag\">&lt;/<span class=\"name\">id</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">username</span>&gt;</span>admin<span class=\"tag\">&lt;/<span class=\"name\">username</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">password</span>&gt;</span>admin<span class=\"tag\">&lt;/<span class=\"name\">password</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">server</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>配置本地仓库访问私服的路径</li>\n</ul>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!--私服的访问路径--&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">mirror</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">id</span>&gt;</span>maven-public<span class=\"tag\">&lt;/<span class=\"name\">id</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">mirrorOf</span>&gt;</span>*<span class=\"tag\">&lt;/<span class=\"name\">mirrorOf</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">url</span>&gt;</span>http://localhost:8081/repository/maven-public/<span class=\"tag\">&lt;/<span class=\"name\">url</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">mirror</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n\n\n<ul>\n<li>在pom.xml配置当前项目访问私服上次资源的保存位置</li>\n</ul>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">distributionManagement</span>&gt;</span> </span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">repository</span>&gt;</span> </span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">id</span>&gt;</span>zyl-release<span class=\"tag\">&lt;/<span class=\"name\">id</span>&gt;</span> </span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">url</span>&gt;</span>http://localhost:8081/repository/zyl-release/<span class=\"tag\">&lt;/<span class=\"name\">url</span>&gt;</span>      </span><br><span class=\"line\"> \t<span class=\"tag\">&lt;/<span class=\"name\">repository</span>&gt;</span> </span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">snapshotRepository</span>&gt;</span> </span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">id</span>&gt;</span>zyl-snapshot<span class=\"tag\">&lt;/<span class=\"name\">id</span>&gt;</span> </span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">url</span>&gt;</span>http://localhost:8081/repository/zyl-snapshot/<span class=\"tag\">&lt;/<span class=\"name\">url</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">snapshotRepository</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">distributionManagement</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>资源上传 ：deploy指定</li>\n</ul>\n<p>（注：本文参考<a href=\"https://blog.csdn.net/L1ghtn1nggggg/article/details/124437648%EF%BC%89\">https://blog.csdn.net/L1ghtn1nggggg/article/details/124437648）</a></p>\n","site":{"data":{"link":[{"class_name":"友情链接","class_desc":"那些人，那些事","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]},{"class_name":"网站","class_desc":"值得推荐的网站","link_list":[{"name":"Youtube","link":"https://www.youtube.com/","avatar":"https://i.loli.net/2020/05/14/9ZkGg8v3azHJfM1.png","descr":"视频网站"},{"name":"Weibo","link":"https://www.weibo.com/","avatar":"https://i.loli.net/2020/05/14/TLJBum386vcnI1P.png","descr":"中国最大社交分享平台"},{"name":"Twitter","link":"https://twitter.com/","avatar":"https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png","descr":"社交分享平台"}]}]}},"cover":"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7","excerpt":"","more":"<h1 id=\"Maven学习笔记\"><a href=\"#Maven学习笔记\" class=\"headerlink\" title=\"Maven学习笔记\"></a>Maven学习笔记</h1><h2 id=\"Maven基础\"><a href=\"#Maven基础\" class=\"headerlink\" title=\"Maven基础\"></a>Maven基础</h2><p><strong>概念</strong></p>\n<p>Maven是一个项目管理工具，它包含了一个项目对象模型（POM：Project Object Model），一组标准集合，一个项目生命瘦子（Project Lifecycle），一个依赖管理系统（Dependency Management System），和用来运行定义在生命周期阶段（phase）中插件（plugin）目标（goal）的逻辑。</p>\n<p><strong>功能</strong></p>\n<p>帮助程序员构建工程，管理jar报，编译代码，自动运行单元测试，打包，生成报表，以及部署项目，生成Web站点。</p>\n<p>Maven本地仓库介绍：</p>\n<ul>\n<li><p>本地仓库：</p>\n<p>用来存储从远程仓库或中央仓库下载的插件和jar包，项目使用一些插件或jar包，优先从本地仓库查找</p>\n</li>\n<li><p>远程仓库：</p>\n<p>如果本地需要插件或jar包，本地仓库没有，默认是从远程仓库下载。远程仓库可以在互联网内，也可以子啊局域网内。</p>\n</li>\n<li><p>中央仓库：</p>\n<p>在maven软件中内置一个远程仓库地址：<code>http://repo1.maven.org/maven2</code>，它是中央仓库，服务与整个互联网，它是由Maven团队自己维护，里面存储了非常全的jar包，它包含了世界上大部分流行的开源项目构件。但是由于在国外，下载速度慢，不利于使用，可改为使用国内公司架设的远程仓库。</p>\n</li>\n</ul>\n<p><strong>Maven目录结构：</strong></p>\n<ul>\n<li>src 源码<ul>\n<li>main：主工程代码<ul>\n<li>java：主工程代码</li>\n<li>resources：需要使用的配置文件</li>\n<li>webapp：web项目的资源目录（jap/html/WEB-INF），有web项目时存在</li>\n</ul>\n</li>\n<li>test：测试目录<ul>\n<li>java：测试代码</li>\n<li>resources：测试需要使用的配置文件</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>pom.xml：项目和核心配置文件</li>\n</ul>\n<p><strong>常用命令：</strong></p>\n<ul>\n<li>compile：编译，将 src/main/java 下的文件编译为 class 文件输出到 target 目录下</li>\n<li>clean：清理，执行 clean会删除 target 目录及内容</li>\n<li>package：打包，对于 java 工程执行package打成 jar 包，对于web工程打成war 包</li>\n<li>install：安装，执行 install 将maven打成 jar 包或war 包发布到本地仓库</li>\n<li>注意：当后面的命令执行时，前面的操作过程也都会自动执行</li>\n</ul>\n<p><strong>Maven的生命周期</strong></p>\n<ul>\n<li>Clean：在进行真正的构建之前进行一些清理工作</li>\n<li>核心构建：编译、测试、打包、部署等等</li>\n<li>站点发布</li>\n</ul>\n<p><strong>Maven坐标</strong><br>概念：被Maven管理的资源的唯一标识</p>\n<ul>\n<li>groupid：组织名称</li>\n<li>artifactid：模块名称</li>\n<li>version：版本号</li>\n</ul>\n<p>坐标搜索：<a href=\"https://mvnrepository.com/\">Maven Repository</a></p>\n<p><strong>依赖的范围</strong></p>\n<p>项目依赖某个包，需要在pom.xml中添加包的坐标，而且要指定依赖范围<code>&lt;scope&gt;&lt;/scope&gt;</code></p>\n<table>\n<thead>\n<tr>\n<th align=\"center\"><strong>依赖范围</strong></th>\n<th align=\"center\"><strong>对编译有效</strong></th>\n<th align=\"center\"><strong>对测试有效</strong></th>\n<th align=\"center\"><strong>对运行时有效</strong></th>\n<th align=\"center\"><strong>示例</strong></th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\">compile</td>\n<td align=\"center\">✔️</td>\n<td align=\"center\">✔️</td>\n<td align=\"center\">✔️</td>\n<td align=\"center\">spring-core</td>\n</tr>\n<tr>\n<td align=\"center\">test</td>\n<td align=\"center\">-</td>\n<td align=\"center\">✔️</td>\n<td align=\"center\">-</td>\n<td align=\"center\">Junit</td>\n</tr>\n<tr>\n<td align=\"center\">provided</td>\n<td align=\"center\">✔️</td>\n<td align=\"center\">✔️</td>\n<td align=\"center\">-</td>\n<td align=\"center\">servlet-api</td>\n</tr>\n<tr>\n<td align=\"center\">runtime</td>\n<td align=\"center\">-</td>\n<td align=\"center\">✔️</td>\n<td align=\"center\">✔️</td>\n<td align=\"center\">JDBC驱动</td>\n</tr>\n<tr>\n<td align=\"center\">system</td>\n<td align=\"center\">✔️</td>\n<td align=\"center\">✔️</td>\n<td align=\"center\">-</td>\n<td align=\"center\">本地Maven仓库之外的类库</td>\n</tr>\n</tbody></table>\n<p>依赖范围由强到弱的顺序是：compile &gt; provided &gt; runtime &gt; test</p>\n<p>使用方式：</p>\n<ul>\n<li>默认引入 的 jar 包 ——- compile 【默认范围 可以不写】（编译、测试、运行都有效 ）</li>\n<li>servlet-api 、jsp-api ——- provided （编译、测试有效， 运行时无效防止和 tomcat 下 jar 包冲突）</li>\n<li>jdbc 驱动 jar 包 —- runtime （测试、运行 有效 ）</li>\n<li>junit —– test （测试有效）</li>\n</ul>\n<h2 id=\"Maven进阶\"><a href=\"#Maven进阶\" class=\"headerlink\" title=\"Maven进阶\"></a>Maven进阶</h2><h3 id=\"1、分模块开发与设计\"><a href=\"#1、分模块开发与设计\" class=\"headerlink\" title=\"1、分模块开发与设计\"></a>1、分模块开发与设计</h3><p><strong>意义：</strong><br>使得各个模块中仅包含当前模块对应的功能与配置文件，满足不同模块之间的共享的需求</p>\n<p><strong>步骤</strong><br>    1、使用install指令将当前模块发布到本地仓库</p>\n<p>​    2、需要依赖当前模块的模块通过导入当前模块的坐标进行使用</p>\n<h3 id=\"2、依赖管理\"><a href=\"#2、依赖管理\" class=\"headerlink\" title=\"2、依赖管理\"></a>2、依赖管理</h3><h4 id=\"1-依赖传递\"><a href=\"#1-依赖传递\" class=\"headerlink\" title=\"1.依赖传递\"></a>1.依赖传递</h4><p>依赖具有传递性，模块1依赖模块2，而模块2依赖模块3、4、5等模块，此时1抹开均可以使用这些依赖</p>\n<ul>\n<li>直接依赖：在当前项目中通过依赖配置建立的依赖关系</li>\n<li>简介依赖：被依赖的资源如果依赖其他资源，则当前项目间接依赖其他资源</li>\n</ul>\n<p><strong>依赖传递冲突问题：</strong></p>\n<ul>\n<li>路径优先：当依赖中出现了相同的资源时，层级越深，优先级越低，层级越浅，优先级越高</li>\n<li>声明优先：当资源在相同层级被依赖时，配置顺序考前的覆盖配置顺序靠后的</li>\n<li>特殊优先：当同级配置了相同资源的不同版本，后配置的覆盖先配置的，即后配置的优先级高</li>\n</ul>\n<h4 id=\"2-可选依赖\"><a href=\"#2-可选依赖\" class=\"headerlink\" title=\"2.可选依赖\"></a>2.可选依赖</h4><p>可选依赖是隐藏当前工程所依赖的资源，隐藏后对应的资源不具有依赖传递性，即对外隐藏当前依赖的资源（不透明）</p>\n<p>在对应资源的坐标中添加，true表示隐藏，false表示不隐藏</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">optional</span>&gt;</span>true<span class=\"tag\">&lt;/<span class=\"name\">optional</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"3-排序依赖\"><a href=\"#3-排序依赖\" class=\"headerlink\" title=\"3.排序依赖\"></a>3.排序依赖</h4><p>排除依赖是指在当前引用的资源中将其中的某些依赖排除。在某些资源不可通过可选依赖进行隐藏时，可使用排除依赖，即主动断开依赖的资源，被排除的资源无需指定版本（不需要）</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">exclusions</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">exclusion</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">exclusion</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">exclusions</span>&gt;</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3、聚合\"><a href=\"#3、聚合\" class=\"headerlink\" title=\"3、聚合\"></a>3、聚合</h3><ul>\n<li>聚合：将多个模块组织成一个整体，同时对整个项目进行构建的过程称为聚合</li>\n<li>聚合工程：通常是一个不具有业务功能的空工程（有且仅有一个pom文件）</li>\n<li>作用：使用聚合工程可以将多个工程编组，通过对聚合工程进行构建，实现对所包含的模块进行同步构建<ul>\n<li>当工程中的莫格模块更新时，必须保障工程中与已更新模块关联的模块同步更新，使用聚合工程可以解决批量模块同步构建的问题</li>\n</ul>\n</li>\n</ul>\n<p><strong>步骤</strong></p>\n<p>​    1、创建聚合工程</p>\n<p>​    2、指定聚合工程的打包方式</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">packaging</span>&gt;</span>pom<span class=\"tag\">&lt;/<span class=\"name\">packaging</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>​    3、设置所管理的模块名称</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">modules</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!--配置各个模块的路径即可 如 ../maven-xxx --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">module</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">module</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">modules</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"4、继承\"><a href=\"#4、继承\" class=\"headerlink\" title=\"4、继承\"></a>4、继承</h3><p><strong>概念</strong><br>继承描述的是两个工程之间的关系，与Java中的继承类似，子工程可以继承父工程的配置信息，常见与依赖关系的继承</p>\n<p><strong>作用</strong></p>\n<ul>\n<li>简化配置</li>\n<li>减少版本冲突</li>\n</ul>\n<p><strong>配置</strong><br>在子工程中配置所继承的父工程</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">parent</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">relativePath</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">relativePath</span>&gt;</span><span class=\"comment\">&lt;!--(可选配置)通过相对路径可以快速找到父工程 如：../maven-parent/pom.xml--&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">parent</span>&gt;</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n\n\n<p>在父工程中配置可选的依赖</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependencyManagement</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">dependencies</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">        \t<span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">dependencies</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependencyManagement</span>&gt;</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n\n\n<p>在子工程中根据需要配置上述的可选依赖</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p><strong>聚合与继承的区别</strong></p>\n<ul>\n<li>作用：<ul>\n<li>聚合用于快速构建项目</li>\n<li>继承用于快速配置</li>\n</ul>\n</li>\n<li>相同点<ul>\n<li>打包方式均为pom</li>\n<li>均属于设计型模块，无实际模块内容</li>\n</ul>\n</li>\n<li>不同点<ul>\n<li>聚合在当前模块中配置关系，可以感知参与聚合的模块有哪些</li>\n<li>继承在子模块中配置关系，父模块无法感知哪些子模块继承了自己</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"5、属性\"><a href=\"#5、属性\" class=\"headerlink\" title=\"5、属性\"></a>5、属性</h3><p>通过配置属性对版本进行统一管理</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">properties</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"comment\">&lt;!--定义变量--&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">spring.version</span>&gt;</span>5.1.9.RELEASE<span class=\"tag\">&lt;/<span class=\"name\">spring.version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">properties</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>$&#123;spring.version&#125;<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p><strong>配置文件加载pom中的属性</strong><br>    1、自定义属性：</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">properties</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">jdbc.url</span>&gt;</span>jdbc:mysql//.....<span class=\"tag\">&lt;/<span class=\"name\">jdbc.url</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">properties</span>&gt;</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>​    2、配置文件中引用属性</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">jdbc.url=$&#123;jdbc.url&#125;</span><br></pre></td></tr></table></figure>\n\n<p>​    3、开启资源文件目录加载属性的过滤器</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">build</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">resources</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">resource</span>&gt;</span></span><br><span class=\"line\">            <span class=\"comment\">&lt;!--使用内置属性$&#123;project.baseject&#125;进行统一配置--&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">directory</span>&gt;</span>$&#123;project.basedir&#125;/src/main/resources<span class=\"tag\">&lt;/<span class=\"name\">directory</span>&gt;</span></span><br><span class=\"line\">            <span class=\"comment\">&lt;!--开启--&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">filter</span>&gt;</span>true<span class=\"tag\">&lt;/<span class=\"name\">filter</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">resource</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">resources</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">build</span>&gt;</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>​    4、配置maven打包war包时，可以使用以下配置忽略web.xml配置检查</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">plugin</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.apache.maven.plugins<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>maven-war-plugin<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>3.2.3<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">configuration</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">failOnMissingWebXml</span>&gt;</span>false<span class=\"tag\">&lt;/<span class=\"name\">failOnMissingWebXml</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">configuration</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">plugin</span>&gt;</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p><strong>属性分类</strong><br>    1、自定义属性</p>\n<p>​    2、内置属性：<code>$&#123;basedir&#125;</code>、<code>$&#123;vesrsion&#125;</code>等</p>\n<p>​    3、Setting属性：<code>$&#123;settings.localRepository&#125;</code>等</p>\n<p>​    4、Java系统属性：<code>$&#123;user.home&#125;</code>等</p>\n<p>​    5、环境变量属性：<code>$&#123;env.JAVA_HOME&#125;</code>等</p>\n<h3 id=\"6、版本管理\"><a href=\"#6、版本管理\" class=\"headerlink\" title=\"6、版本管理\"></a>6、版本管理</h3><ul>\n<li>工程版本<ul>\n<li>SNAPSHOT(快照版本)<ul>\n<li>项目开发工程中临时输出的版本，称为快照版本</li>\n<li>快照版本随着开发的进展不断更新</li>\n</ul>\n</li>\n<li>RELEASE(发布版本)<ul>\n<li>项目开发到阶段里程碑后，向外部发布较为稳定的版本。此时版本所对应的构件文件相对稳定，即</li>\n<li>进行功能的后续开发，也不会改变当前发布版本内容，称为发布版本</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>发布版本<ul>\n<li>alpha版</li>\n<li>beta版</li>\n<li>数字版</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"7、多环境开发配置\"><a href=\"#7、多环境开发配置\" class=\"headerlink\" title=\"7、多环境开发配置\"></a>7、多环境开发配置</h3><p>实际开发环境中，存在多种不同的环境如测试环境、生成环境等等，而maven提供配置多种环境的设定，帮助开发者使用工程中快速切换环境</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!--配置多环境--&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">profiles</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!--开发环境--&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">profile</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">id</span>&gt;</span>env_dep<span class=\"tag\">&lt;/<span class=\"name\">id</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">properties</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">jdbc.url</span>&gt;</span>jdbc:mysql//.....1<span class=\"tag\">&lt;/<span class=\"name\">jdbc.url</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">properties</span>&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!--设置为默认环境--&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">activation</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">activeByDefault</span>&gt;</span>true<span class=\"tag\">&lt;/<span class=\"name\">activeByDefault</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">activation</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">profile</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!--生产环境--&gt;</span></span><br><span class=\"line\">     <span class=\"tag\">&lt;<span class=\"name\">profile</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">id</span>&gt;</span>env_pro<span class=\"tag\">&lt;/<span class=\"name\">id</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">properties</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">jdbc.url</span>&gt;</span>jdbc:mysql//.....2<span class=\"tag\">&lt;/<span class=\"name\">jdbc.url</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">properties</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">profile</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!--测试环境--&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">profile</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">id</span>&gt;</span>env_test<span class=\"tag\">&lt;/<span class=\"name\">id</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">properties</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">jdbc.url</span>&gt;</span>jdbc:mysql//.....3<span class=\"tag\">&lt;/<span class=\"name\">jdbc.url</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">properties</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">profile</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">profiles</span>&gt;</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p><strong>指定环境</strong></p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mvn install(生命周期指令) -P id(环境id)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"8、跳过测试\"><a href=\"#8、跳过测试\" class=\"headerlink\" title=\"8、跳过测试\"></a>8、跳过测试</h3><p>在存在开发功能更新中且未开发完毕或者需要快速打包等等情况下，常常需要跳过测试。</p>\n<p><strong>使用</strong><br>    1、点击闪电按钮开启全局跳过</p>\n<p>​    2、细粒度控制跳过测试，使用和指定包含和排除</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">build</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">plugins</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">plugin</span>&gt;</span></span><br><span class=\"line\">            <span class=\"comment\">&lt;!--测试插件--&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>maven-surefire-plugin<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>2.xxxx<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">configuration</span>&gt;</span></span><br><span class=\"line\">                <span class=\"comment\">&lt;!--整体跳过--&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">skipTest</span>&gt;</span>true<span class=\"tag\">&lt;/<span class=\"name\">skipTest</span>&gt;</span></span><br><span class=\"line\">                <span class=\"comment\">&lt;!-- 配置排除部分不参与测试的内容</span></span><br><span class=\"line\"><span class=\"comment\">\t\t\t\t整体不跳过:</span></span><br><span class=\"line\"><span class=\"comment\">\t\t\t\t&lt;skipTest&gt;false&lt;/skipTest&gt;</span></span><br><span class=\"line\"><span class=\"comment\">\t\t\t\t排除内容:</span></span><br><span class=\"line\"><span class=\"comment\">\t\t\t\t&lt;excludes&gt;</span></span><br><span class=\"line\"><span class=\"comment\">\t\t\t\t\t&lt;exclude&gt;**/xxxTest.java&lt;/exclude&gt;</span></span><br><span class=\"line\"><span class=\"comment\">\t\t\t\t&lt;/excludes&gt;</span></span><br><span class=\"line\"><span class=\"comment\">--&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">configuration</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">plugin</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">plugins</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">build</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>3、使用指定</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mvn package(生命周期指令) -D skipTests</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"9、私服\"><a href=\"#9、私服\" class=\"headerlink\" title=\"9、私服\"></a>9、私服</h3><h4 id=\"1-简介\"><a href=\"#1-简介\" class=\"headerlink\" title=\"1.简介\"></a>1.简介</h4><p>私服是一台独立的服务器，用于解决团队内部的资源共享和资源同步问题。</p>\n<p>Nexus，一款maven私服产品，下载：<a href=\"https://help.sonatype.com/repomanager3/product-information/download\">https://help.sonatype.com/repomanager3/product-information/download</a></p>\n<p><strong>安装与启动</strong></p>\n<ul>\n<li>启动服务器（命令行启动）：nexus.exe /run nexus</li>\n<li>访问服务器（默认端口：8081）：<a href=\"http://localhost:8081/\">http://localhost:8081</a></li>\n<li>修改基础配置信息<ul>\n<li>etc/nexus-default.properties 文件中保存nexus的基础配置信息，包括默认端口</li>\n</ul>\n</li>\n<li>修改服务器运行配置信息<ul>\n<li>bin/nexus.vmoptions 文件中保存nexus服务器启动对应的配置信息，如默认占用内存空间</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"2-仓库分类\"><a href=\"#2-仓库分类\" class=\"headerlink\" title=\"2.仓库分类\"></a>2.仓库分类</h4><table>\n<thead>\n<tr>\n<th align=\"center\"><strong>仓库类别</strong></th>\n<th align=\"center\"><strong>英文</strong></th>\n<th align=\"center\"><strong>功能</strong></th>\n<th align=\"center\"><strong>关联操作</strong></th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\">宿主仓库</td>\n<td align=\"center\">hosted</td>\n<td align=\"center\">保存自主研发+第三方资源</td>\n<td align=\"center\">上传</td>\n</tr>\n<tr>\n<td align=\"center\">代理仓库</td>\n<td align=\"center\">proxy</td>\n<td align=\"center\">代理连接中央仓库</td>\n<td align=\"center\">下载</td>\n</tr>\n<tr>\n<td align=\"center\">仓库组</td>\n<td align=\"center\">group</td>\n<td align=\"center\">为仓库编组简化下载操作</td>\n<td align=\"center\">下载</td>\n</tr>\n</tbody></table>\n<ul>\n<li>宿主仓库：保存无法从中央仓库获取的资源<ul>\n<li>自主研发资源</li>\n<li>第三方非开源资源</li>\n</ul>\n</li>\n<li>代理仓库：代理远程仓库，通过nexus访问其他公共仓库</li>\n<li>仓库组：将若干仓库设计成一个组，简化配置<ul>\n<li>不用于保存资料，属于设计型仓库</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"3-资源上传与下载\"><a href=\"#3-资源上传与下载\" class=\"headerlink\" title=\"3.资源上传与下载\"></a>3.资源上传与下载</h4><p><strong>配置</strong></p>\n<ul>\n<li>配置本地仓库访问私服权限</li>\n</ul>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!--私服的访问权限--&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">server</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">id</span>&gt;</span>zyl-snapshot<span class=\"tag\">&lt;/<span class=\"name\">id</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">username</span>&gt;</span>admin<span class=\"tag\">&lt;/<span class=\"name\">username</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">password</span>&gt;</span>admin<span class=\"tag\">&lt;/<span class=\"name\">password</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">server</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">server</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">id</span>&gt;</span>zyl-release<span class=\"tag\">&lt;/<span class=\"name\">id</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">username</span>&gt;</span>admin<span class=\"tag\">&lt;/<span class=\"name\">username</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">password</span>&gt;</span>admin<span class=\"tag\">&lt;/<span class=\"name\">password</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">server</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>配置本地仓库访问私服的路径</li>\n</ul>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!--私服的访问路径--&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">mirror</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">id</span>&gt;</span>maven-public<span class=\"tag\">&lt;/<span class=\"name\">id</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">mirrorOf</span>&gt;</span>*<span class=\"tag\">&lt;/<span class=\"name\">mirrorOf</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">url</span>&gt;</span>http://localhost:8081/repository/maven-public/<span class=\"tag\">&lt;/<span class=\"name\">url</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">mirror</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n\n\n<ul>\n<li>在pom.xml配置当前项目访问私服上次资源的保存位置</li>\n</ul>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">distributionManagement</span>&gt;</span> </span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">repository</span>&gt;</span> </span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">id</span>&gt;</span>zyl-release<span class=\"tag\">&lt;/<span class=\"name\">id</span>&gt;</span> </span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">url</span>&gt;</span>http://localhost:8081/repository/zyl-release/<span class=\"tag\">&lt;/<span class=\"name\">url</span>&gt;</span>      </span><br><span class=\"line\"> \t<span class=\"tag\">&lt;/<span class=\"name\">repository</span>&gt;</span> </span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">snapshotRepository</span>&gt;</span> </span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">id</span>&gt;</span>zyl-snapshot<span class=\"tag\">&lt;/<span class=\"name\">id</span>&gt;</span> </span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">url</span>&gt;</span>http://localhost:8081/repository/zyl-snapshot/<span class=\"tag\">&lt;/<span class=\"name\">url</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">snapshotRepository</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">distributionManagement</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>资源上传 ：deploy指定</li>\n</ul>\n<p>（注：本文参考<a href=\"https://blog.csdn.net/L1ghtn1nggggg/article/details/124437648%EF%BC%89\">https://blog.csdn.net/L1ghtn1nggggg/article/details/124437648）</a></p>\n"},{"title":"Mybatis和Mybatis-Plus","date":"2022-11-20T12:26:52.505Z","categorories":[["Mybatis、Mybatis-Plus"]],"_content":"\n# Mybatis篇\n\nhttps://blog.csdn.net/li643937579/article/details/109194467\n\n# Mybatis-plus篇\n\n# 补充","source":"_posts/MybatisAndMybatis-plus.md","raw":"---\ntitle: Mybatis和Mybatis-Plus\ndate:\ntags:\n  - Mybatis\n  - Mybatis-Plus\ncategorories:\n  - [Mybatis、Mybatis-Plus]\n---\n\n# Mybatis篇\n\nhttps://blog.csdn.net/li643937579/article/details/109194467\n\n# Mybatis-plus篇\n\n# 补充","slug":"MybatisAndMybatis-plus","published":1,"updated":"2022-11-20T13:02:13.210Z","comments":1,"layout":"post","photos":[],"link":"","_id":"claryulc600085ojra53v3ifg","content":"<h1 id=\"Mybatis篇\"><a href=\"#Mybatis篇\" class=\"headerlink\" title=\"Mybatis篇\"></a>Mybatis篇</h1><p><a href=\"https://blog.csdn.net/li643937579/article/details/109194467\">https://blog.csdn.net/li643937579/article/details/109194467</a></p>\n<h1 id=\"Mybatis-plus篇\"><a href=\"#Mybatis-plus篇\" class=\"headerlink\" title=\"Mybatis-plus篇\"></a>Mybatis-plus篇</h1><h1 id=\"补充\"><a href=\"#补充\" class=\"headerlink\" title=\"补充\"></a>补充</h1>","site":{"data":{"link":[{"class_name":"友情链接","class_desc":"那些人，那些事","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]},{"class_name":"网站","class_desc":"值得推荐的网站","link_list":[{"name":"Youtube","link":"https://www.youtube.com/","avatar":"https://i.loli.net/2020/05/14/9ZkGg8v3azHJfM1.png","descr":"视频网站"},{"name":"Weibo","link":"https://www.weibo.com/","avatar":"https://i.loli.net/2020/05/14/TLJBum386vcnI1P.png","descr":"中国最大社交分享平台"},{"name":"Twitter","link":"https://twitter.com/","avatar":"https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png","descr":"社交分享平台"}]}]}},"cover":"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7","excerpt":"","more":"<h1 id=\"Mybatis篇\"><a href=\"#Mybatis篇\" class=\"headerlink\" title=\"Mybatis篇\"></a>Mybatis篇</h1><p><a href=\"https://blog.csdn.net/li643937579/article/details/109194467\">https://blog.csdn.net/li643937579/article/details/109194467</a></p>\n<h1 id=\"Mybatis-plus篇\"><a href=\"#Mybatis-plus篇\" class=\"headerlink\" title=\"Mybatis-plus篇\"></a>Mybatis-plus篇</h1><h1 id=\"补充\"><a href=\"#补充\" class=\"headerlink\" title=\"补充\"></a>补充</h1>"},{"title":"SSM学习笔记","date":"2022-11-20T12:51:27.574Z","_content":"","source":"_posts/SSM.md","raw":"---\ntitle: SSM学习笔记\ndate:\ntags:\n  - SSM\n---","slug":"SSM","published":1,"updated":"2022-11-20T13:02:31.795Z","comments":1,"layout":"post","photos":[],"link":"","_id":"claryulc700095ojrcra48ofj","content":"","site":{"data":{"link":[{"class_name":"友情链接","class_desc":"那些人，那些事","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]},{"class_name":"网站","class_desc":"值得推荐的网站","link_list":[{"name":"Youtube","link":"https://www.youtube.com/","avatar":"https://i.loli.net/2020/05/14/9ZkGg8v3azHJfM1.png","descr":"视频网站"},{"name":"Weibo","link":"https://www.weibo.com/","avatar":"https://i.loli.net/2020/05/14/TLJBum386vcnI1P.png","descr":"中国最大社交分享平台"},{"name":"Twitter","link":"https://twitter.com/","avatar":"https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png","descr":"社交分享平台"}]}]}},"cover":"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7","excerpt":"","more":""},{"title":"Mysql","date":"2022-11-22T07:16:49.852Z","_content":"\n## MySQL基础\n\n>  -- 笔记来自B站黑马程序员的javaweb课程\n\n**今日目标：**\n\n> * 完成MySQL的安装及登陆基本操作\n> * 能通过SQL对数据库进行CRUD\n> * 能通过SQL对表进行CRUD\n> * 能通过SQL对数据进行CRUD\n\n## 1，数据库相关概念\n\n以前我们做系统，数据持久化的存储采用的是文件存储。存储到文件中可以达到系统关闭数据不会丢失的效果，当然文件存储也有它的弊端。\n\n假设在文件中存储以下的数据：\n\n```\n姓名\t年龄\t性别\t住址\n张三\t23\t男\t北京西三旗\n李四\t24\t女\t北京西二旗\n王五\t25\t男\t西安软件新城\n```\n\n现要修改李四这条数据的性别数据改为男，我们现学习的IO技术可以通过将所有的数据读取到内存中，然后进行修改再存到该文件中。通过这种方式操作存在很大问题，现在只有三条数据，如果文件中存储1T的数据，那么就会发现内存根本就存储不了。\n\n现需要既能持久化存储数据，也要能避免上述问题的技术使用在我们的系统中。数据库就是这样的一门技术。\n\n### 1.1  数据库\n\n* 存储和管理数据的仓库，数据是有组织的进行存储。\n\n* 数据库英文名是 DataBase，简称DB。\n\n数据库就是将数据存储在硬盘上，可以达到持久化存储的效果。那又是如何解决上述问题的？使用数据库管理系统。\n\n### 1.2  数据库管理系统\n\n* 管理数据库的大型软件\n* 英文：DataBase Management System，简称 DBMS\n\n在电脑上安装了数据库管理系统后，就可以通过数据库管理系统创建数据库来存储数据，也可以通过该系统对数据库中的数据进行数据的增删改查相关的操作。我们平时说的MySQL数据库其实是MySQL数据库管理系统。\n\n通过上面的描述，大家应该已经知道了 `数据库管理系统` 和 `数据库` 的关系。那么有有哪些常见的数据库管理系统呢？\n\n### 1.3  常见的数据库管理系统\n\n接下来对上面列举的数据库管理系统进行简单的介绍：\n\n* Oracle：收费的大型数据库，Oracle 公司的产品\n* MySQL： 开源免费的中小型数据库。后来 Sun公司收购了 MySQL，而 Sun 公司又被 Oracle 收购\n* SQL Server：MicroSoft 公司收费的中型的数据库。C#、.net 等语言常使用\n* PostgreSQL：开源免费中小型的数据库\n* DB2：IBM 公司的大型收费数据库产品\n* SQLite：嵌入式的微型数据库。如：作为 Android 内置数据库\n* MariaDB：开源免费中小型的数据库\n\n我们课程上学习的是MySQL数据库管理系统，PostgreSQL在一些公司也有使用，此时大家肯定会想以后在公司中如果使用我们没有学习过程的PostgreSQL数据库管理系统怎么办？这点大家大可不必担心，如下图所示：\n\n我们可以通过数据库管理系统操作数据库，对数据库中的数据进行增删改查操作，而怎么样让用户跟数据库管理系统打交道呢？就可以通过一门编程语言（SQL）来实现。\n\n### 1.4  SQL\n\n* 英文：Structured Query Language，简称 SQL，结构化查询语言\n* 操作关系型数据库的编程语言\n* 定义操作所有关系型数据库的统一标准，可以使用SQL操作所有的关系型数据库管理系统，以后工作中如果使用到了其他的数据库管理系统，也同样的使用SQL来操作。\n\n\n\n## 2，MySQL\n\n### 2.1  MySQL安装\n\n> **安装环境:Win10 64位**\n> **软件版本:MySQL 5.7.24 解压版**\n\n#### 2.1.1  下载\n\nhttps://downloads.mysql.com/archives/community/\n\n点开上面的链接就能看到如下界面：\n\n选择选择和自己**系统位数**相对应的版本点击右边的`Download`，此时会进到另一个页面，同样在接近页面底部的地方找到如下图所示的位置：\n\n不用理会上面的登录和注册按钮，直接点击 `No thanks, just start my download.` 就可以下载。\n\n#### 2.1.2  安装(解压)\n\n下载完成后我们得到的是一个压缩包，将其解压，我们就可以得到MySQL 5.7.24的软件本体了(就是一个文件夹)，我们可以把它放在你想安装的位置。\n\n### 2.2  MySQL卸载\n\n如果你想卸载MySQL，也很简单。\n\n右键开始菜单，选择`命令提示符(管理员)`，打开黑框。\n\n1. 敲入`net stop mysql`，回车。\n\n```\nnet stop mysql\n```\n\n2. 再敲入`mysqld -remove mysql`，回车。\n\n```\nmysqld -remove mysql\n```\n\n3. 最后删除MySQL目录及相关的环境变量。\n\n**至此，MySQL卸载完成！**\n\n\n\n### 2.3  MySQL配置\n\n#### 2.3.1  添加环境变量\n\n> 环境变量里面有很多选项，这里我们只用到`Path`这个参数。为什么在初始化的开始要添加环境变量呢？\n> 在黑框(即CMD)中输入一个可执行程序的名字，Windows会先在环境变量中的`Path`所指的路径中寻找一遍，如果找到了就直接执行，没找到就在当前工作目录找，如果还没找到，就报错。我们添加环境变量的目的就是能够在任意一个黑框直接调用MySQL中的相关程序而不用总是修改工作目录，大大简化了操作。\n\n\n\n右键`此电脑`→`属性`，点击`高级系统设置`\n\n点击`环境变量`\n\n在`系统变量`中新建MYSQL_HOME\n\n在`系统变量`中找到并**双击**`Path`\n\n点击`新建`\n\n最后点击确定。\n\n**如何验证是否添加成功？**\n\n右键开始菜单(就是屏幕左下角)，选择`命令提示符(管理员)`，打开黑框，敲入`mysql`，回车。\n如果提示`Can't connect to MySQL server on 'localhost'`则证明添加成功；\n如果提示`mysql不是内部或外部命令，也不是可运行的程序或批处理文件`则表示添加添加失败，请重新检查步骤并重试。\n\n#### 2.3.2  新建配置文件\n\n新建一个文本文件，内容如下：\n\n```properties\n[mysql]\ndefault-character-set=utf8\n\n[mysqld]\ncharacter-set-server=utf8\ndefault-storage-engine=INNODB\nsql_mode=STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION\n```\n\n把上面的文本文件另存为，在保存类型里选`所有文件 (*.*)`，文件名叫`my.ini`，存放的路径为MySQL的`根目录`(例如我的是`D:\\software\\mysql-5.7.24-winx64`,根据自己的MySQL目录位置修改)。\n\n上面代码意思就是配置数据库的默认编码集为utf-8和默认存储引擎为INNODB。\n\n#### 2.3.3  初始化MySQL\n\n在刚才的黑框中敲入`mysqld --initialize-insecure`，回车，稍微等待一会，如果出现没有出现报错信息(如下图)则证明data目录初始化没有问题，此时再查看MySQL目录下已经有data目录生成。\n\n```\nmysqld --initialize-insecure\n```\n\n\n\ntips：如果出现如下错误\n\n是由于权限不足导致的，去`C:\\Windows\\System32` 下以管理员方式运行 cmd.exe\n\n![image-20201109140001186](H:\\BaiDuWangPan\\JavaWeb\\day01-MySQL基础\\ppt\\assets\\image-20201109140001186.png)\n\n#### 2.3.4  注册MySQL服务\n\n在黑框里敲入`mysqld -install`，回车。\n\n```\nmysqld -install\n```\n\n现在你的计算机上已经安装好了MySQL服务了。\n\nMySQL服务器\n\n\n\n#### 2.3.5  启动MySQL服务\n\n在黑框里敲入`net start mysql`，回车。\n\n```java\nnet start mysql  // 启动mysql服务\n    \nnet stop mysql  // 停止mysql服务\n```\n\n\n\n#### 2.3.6  修改默认账户密码\n\n在黑框里敲入`mysqladmin -u root password 1234`，这里的`1234`就是指默认管理员(即root账户)的密码，可以自行修改成你喜欢的。\n\n```\nmysqladmin -u root password 1234\n```\n\n**至此，MySQL 5.7 解压版安装完毕！**\n\n\n\n### 2.4  MySQL登陆和退出\n\n#### 2.4.1  登陆\n\n右键开始菜单，选择`命令提示符`，打开黑框。\n在黑框中输入，`mysql -uroot -p1234`，回车，出现下图且左下角为`mysql>`，则登录成功。\n\n```\nmysql -uroot -p1234\n```\n\n**到这里你就可以开始你的MySQL之旅了！**\n\n登陆参数：\n\n```\nmysql -u用户名 -p密码 -h要连接的mysql服务器的ip地址(默认127.0.0.1) -P端口号(默认3306)\n```\n\n\n\n#### 2.4.2  退出\n\n退出mysql：\n\n```\nexit\nquit\n```\n\n\n\n### 2.5  MySQL数据模型\n\n**关系型数据库：**\n\n> 关系型数据库是建立在关系模型基础上的数据库，简单说，关系型数据库是由多张能互相连接的 二维表 组成的数据库\n\n如下图，`订单信息表` 和 `客户信息表` 都是有行有列二维表我们将这样的称为关系型数据库。\n\n接下来看关系型数据库的优点：\n\n* 都是使用表结构，格式一致，易于维护。\n* 使用通用的 SQL 语言操作，使用方便，可用于复杂查询。\n  * 关系型数据库都可以通过SQL进行操作，所以使用方便。\n  * 复杂查询。现在需要查询001号订单数据，我们可以看到该订单是1号客户的订单，而1号订单是李聪这个客户。以后也可以在一张表中进行统计分析等操作。\n* 数据存储在磁盘中，安全。\n\n**数据模型：**\n\n如上图，我们通过客户端可以通过数据库管理系统创建数据库，在数据库中创建表，在表中添加数据。创建的每一个数据库对应到磁盘上都是一个文件夹。比如可以通过SQL语句创建一个数据库（数据库名称为db1），语句如下。该语句咱们后面会学习。\n\n\n\n我们可以在数据库安装目录下的data目录下看到多了一个 `db1` 的文件夹。所以，**在MySQL中一个数据库对应到磁盘上的一个文件夹。**\n\n而一个数据库下可以创建多张表，我们到MySQL中自带的mysql数据库的文件夹目录下：\n\n而上图中右边的 `db.frm` 是表文件，`db.MYD` 是数据文件，通过这两个文件就可以查询到数据展示成二维表的效果。\n\n**小结：**\n\n* MySQL中可以创建多个数据库，每个数据库对应到磁盘上的一个文件夹\n* 在每个数据库中可以创建多个表，每张都对应到磁盘上一个 frm 文件\n* 每张表可以存储多条数据，数据会被存储到磁盘中  MYD 文件中\n\n\n\n## 3，SQL概述\n\n了解了数据模型后，接下来我们就学习SQL语句，通过SQL语句对数据库、表、数据进行增删改查操作。 \n\n### 3.1  SQL简介\n\n* 英文：Structured Query Language，简称 SQL\n* 结构化查询语言，一门操作关系型数据库的编程语言\n* 定义操作所有关系型数据库的统一标准\n* 对于同一个需求，每一种数据库操作的方式可能会存在一些不一样的地方，我们称为“方言”\n\n### 3.2  通用语法\n\n* SQL 语句可以单行或多行书写，以分号结尾。 \n\n  如上，以分号结尾才是一个完整的sql语句。\n\n* MySQL 数据库的 SQL 语句不区分大小写，关键字建议使用大写。\n\n  同样的一条sql语句写成下图的样子，一样可以运行处结果。\n\n   \n\n* 注释\n\n  * 单行注释: -- 注释内容 或 #注释内容(MySQL 特有)  \n\n    > 注意：使用-- 添加单行注释时，--后面一定要加空格，而#没有要求。\n\n  * 多行注释: /* 注释 */\n\n### 3.3  SQL分类\n\n* DDL(Data Definition Language) ： 数据定义语言，用来定义数据库对象：数据库，表，列等\n\n  DDL简单理解就是用来操作数据库，表等\n\n* DML(Data Manipulation Language) 数据操作语言，用来对数据库中表的数据进行增删改\n\n  DML简单理解就对表中数据进行增删改\n\n* DQL(Data Query Language) 数据查询语言，用来查询数据库中表的记录(数据)\n\n  DQL简单理解就是对数据进行查询操作。从数据库表中查询到我们想要的数据。\n\n* DCL(Data Control Language) 数据控制语言，用来定义数据库的访问权限和安全级别，及创建用户\n\n  DML简单理解就是对数据库进行权限控制。比如我让某一个数据库表只能让某一个用户进行操作等。\n\n> 注意： 以后我们最常操作的是 `DML` 和 `DQL`  ，因为我们开发中最常操作的就是数据。\n\n## 4，DDL:操作数据库\n\n我们先来学习DDL来操作数据库。而操作数据库主要就是对数据库的增删查操作。\n\n### 4.1  查询\n\n查询所有的数据库\n\n```sql\nSHOW DATABASES;\n```\n\n运行上面语句效果如下：\n\n上述查询到的是的这些数据库是mysql安装好自带的数据库，我们以后不要操作这些数据库。\n\n### 4.2  创建数据库\n\n* **创建数据库**：\n\n```sql\nCREATE DATABASE 数据库名称;\n```\n\n运行语句效果如下：\n\n而在创建数据库的时候，我并不知道db1数据库有没有创建，直接再次创建名为db1的数据库就会出现错误。\n\n为了避免上面的错误，在创建数据库的时候先做判断，如果不存在再创建。\n\n* **创建数据库(判断，如果不存在则创建)**\n\n```sql\nCREATE DATABASE IF NOT EXISTS 数据库名称;\n```\n\n运行语句效果如下：\n\n从上面的效果可以看到虽然db1数据库已经存在，再创建db1也没有报错，而创建db2数据库则创建成功。\n\n### 4.3  删除数据库\n\n* **删除数据库**\n\n```sql\nDROP DATABASE 数据库名称;\n```\n\n* **删除数据库(判断，如果存在则删除)**\n\n```sql\nDROP DATABASE IF EXISTS 数据库名称;\n```\n\n运行语句效果如下：\n\n### 4.4  使用数据库\n\n数据库创建好了，要在数据库中创建表，得先明确在哪儿个数据库中操作，此时就需要使用数据库。\n\n* **使用数据库**\n\n```sql\nUSE 数据库名称;\n```\n\n* **查看当前使用的数据库**\n\n```sql\nSELECT DATABASE();\n```\n\n运行语句效果如下：\n\n## 5，DDL:操作表\n\n操作表也就是对表进行增（Create）删（Retrieve）改（Update）查（Delete）。\n\n### 5.1  查询表\n\n* **查询当前数据库下所有表名称**\n\n```sql\nSHOW TABLES;\n```\n\n我们创建的数据库中没有任何表，因此我们进入mysql自带的mysql数据库，执行上述语句查看\n\n* **查询表结构**\n\n```sql\nDESC 表名称;\n```\n\n查看mysql数据库中func表的结构，运行语句如下：\n\n### 5.2  创建表\n\n* **创建表**\n\n```sql\nCREATE TABLE 表名 (\n\t字段名1  数据类型1,\n\t字段名2  数据类型2,\n\t…\n\t字段名n  数据类型n\n);\n\n```\n\n> 注意：最后一行末尾，不能加逗号\n\n知道了创建表的语句，那么我们创建创建如下结构的表\n\n```sql\ncreate table tb_user (\n\tid int,\n    username varchar(20),\n    password varchar(32)\n);\n```\n\n运行语句如下：\n\n### 5.3  数据类型\n\nMySQL 支持多种类型，可以分为三类：\n\n* 数值\n\n  ```sql\n  tinyint : 小整数型，占一个字节\n  int\t： 大整数类型，占四个字节\n  \teg ： age int\n  double ： 浮点类型\n  \t使用格式： 字段名 double(总长度,小数点后保留的位数)\n  \teg ： score double(5,2)   \n  ```\n\n* 日期\n\n  ```sql\n  date ： 日期值。只包含年月日\n  \teg ：birthday date ： \n  datetime ： 混合日期和时间值。包含年月日时分秒\n  ```\n\n* 字符串\n\n  ```sql\n  char ： 定长字符串。\n  \t优点：存储性能高\n  \t缺点：浪费空间\n  \teg ： name char(10)  如果存储的数据字符个数不足10个，也会占10个的空间\n  varchar ： 变长字符串。\n  \t优点：节约空间\n  \t缺点：存储性能底\n  \teg ： name varchar(10) 如果存储的数据字符个数不足10个，那就数据字符个数是几就占几个的空间\t\n  ```\n\n> 注意：其他类型参考资料中的《MySQL数据类型].xlsx》\n\n**案例：**\n\n```\n需求：设计一张学生表，请注重数据类型、长度的合理性\n\t1. 编号\n\t2. 姓名，姓名最长不超过10个汉字\n\t3. 性别，因为取值只有两种可能，因此最多一个汉字\n\t4. 生日，取值为年月日\n\t5. 入学成绩，小数点后保留两位\n\t6. 邮件地址，最大长度不超过 64\n\t7. 家庭联系电话，不一定是手机号码，可能会出现 - 等字符\n\t8. 学生状态（用数字表示，正常、休学、毕业...）\n```\n\n语句设计如下：\n\n```sql\ncreate table student (\n\tid int,\n    name varchar(10),\n    gender char(1),\n    birthday date,\n    score double(5,2),\n    email varchar(15),\n    tel varchar(15),\n    status tinyint\n);\n```\n\n### 5.4  删除表\n\n* **删除表**\n\n```sql\nDROP TABLE 表名;\n```\n\n* **删除表时判断表是否存在**\n\n```sql\nDROP TABLE IF EXISTS 表名;\n```\n\n运行语句效果如下：\n\n### 5.5  修改表\n\n* **修改表名**\n\n```sql\nALTER TABLE 表名 RENAME TO 新的表名;\n\n-- 将表名student修改为stu\nalter table student rename to stu;\n```\n\n* **添加一列**\n\n```sql\nALTER TABLE 表名 ADD 列名 数据类型;\n\n-- 给stu表添加一列address，该字段类型是varchar(50)\nalter table stu add address varchar(50);\n```\n\n* **修改数据类型**\n\n```sql\nALTER TABLE 表名 MODIFY 列名 新数据类型;\n\n-- 将stu表中的address字段的类型改为 char(50)\nalter table stu modify address char(50);\n```\n\n* **修改列名和数据类型**\n\n```sql\nALTER TABLE 表名 CHANGE 列名 新列名 新数据类型;\n\n-- 将stu表中的address字段名改为 addr，类型改为varchar(50)\nalter table stu change address addr varchar(50);\n```\n\n* **删除列**\n\n```sql\nALTER TABLE 表名 DROP 列名;\n\n-- 将stu表中的addr字段 删除\nalter table stu drop addr;\n```\n\n\n\n## 6，navicat使用\n\n通过上面的学习，我们发现在命令行中写sql语句特别不方便，尤其是编写创建表的语句，我们只能在记事本上写好后直接复制到命令行进行执行。那么有没有刚好的工具提供给我们进行使用呢？ 有。\n\n### 6.1  navicat概述\n\n* Navicat for MySQL 是管理和开发 MySQL 或 MariaDB 的理想解决方案。\n* 这套全面的前端工具为数据库管理、开发和维护提供了一款直观而强大的图形界面。\n* 官网： [http://www.navicat.com.cn](http://www.navicat.com.cn/) \n\n### 6.2  navicat安装\n\n参考 : 资料\\navicat安装包\\navicat_mysql_x86\\navicat安装步骤.md\n\n### 6.3  navicat使用\n\n#### 6.3.1  建立和mysql服务的连接\n\n第一步： 点击连接，选择MySQL\n\n第二步：填写连接数据库必要的信息\n\n以上操作没有问题就会出现如下图所示界面：\n\n#### 6.3.2  操作\n\n连接成功后就能看到如下图界面：\n\n* **修改表结构**\n\n通过下图操作修改表结构：\n\n点击了设计表后即出现如下图所示界面，在图中红框中直接修改字段名，类型等信息：\n\n* **编写SQL语句并执行**\n\n按照如下图所示进行操作即可书写SQL语句并执行sql语句。\n\n## 7，DML\n\nDML主要是对数据进行增（insert）删（delete）改（update）操作。\n\n### 7.1  添加数据\n\n* **给指定列添加数据**\n\n```sql\nINSERT INTO 表名(列名1,列名2,…) VALUES(值1,值2,…);\n```\n\n* **给全部列添加数据**\n\n```sql\nINSERT INTO 表名 VALUES(值1,值2,…);\n```\n\n* **批量添加数据**\n\n```sql\nINSERT INTO 表名(列名1,列名2,…) VALUES(值1,值2,…),(值1,值2,…),(值1,值2,…)…;\nINSERT INTO 表名 VALUES(值1,值2,…),(值1,值2,…),(值1,值2,…)…;\n```\n\n\n\n* **练习**\n\n为了演示以下的增删改操作是否操作成功，故先将查询所有数据的语句介绍给大家：\n\n```sql\nselect * from stu;\n```\n\n\n\n```sql\n-- 给指定列添加数据\nINSERT INTO stu (id, NAME) VALUES (1, '张三');\n-- 给所有列添加数据，列名的列表可以省略的\nINSERT INTO stu (id,NAME,sex,birthday,score,email,tel,STATUS) VALUES (2,'李四','男','1999-11-11',88.88,'lisi@itcast.cn','13888888888',1);\n\nINSERT INTO stu VALUES (2,'李四','男','1999-11-11',88.88,'lisi@itcast.cn','13888888888',1);\n\n-- 批量添加数据\nINSERT INTO stu VALUES \n\t(2,'李四','男','1999-11-11',88.88,'lisi@itcast.cn','13888888888',1),\n\t(2,'李四','男','1999-11-11',88.88,'lisi@itcast.cn','13888888888',1),\n\t(2,'李四','男','1999-11-11',88.88,'lisi@itcast.cn','13888888888',1);\n```\n\n\n\n### 7.2  修改数据\n\n* **修改表数据**\n\n```sql\nUPDATE 表名 SET 列名1=值1,列名2=值2,… [WHERE 条件] ;\n```\n\n> 注意：\n>\n> 1. 修改语句中如果不加条件，则将所有数据都修改！\n> 2. 像上面的语句中的中括号，表示在写sql语句中可以省略这部分\n\n\n\n* **练习**\n\n  * 将张三的性别改为女\n\n    ```sql\n    update stu set sex = '女' where name = '张三';\n    ```\n\n  * 将张三的生日改为 1999-12-12 分数改为99.99\n\n    ```sql\n    update stu set birthday = '1999-12-12', score = 99.99 where name = '张三';\n    ```\n\n  * 注意：如果update语句没有加where条件，则会将表中所有数据全部修改！\n\n    ```sql\n    update stu set sex = '女';\n    ```\n\n    上面语句的执行完后查询到的结果是：\n\n\n\n\n### 7.3  删除数据\n\n* **删除数据**\n\n```sql\nDELETE FROM 表名 [WHERE 条件] ;\n```\n\n* **练习**\n\n```sql\n-- 删除张三记录\ndelete from stu where name = '张三';\n\n-- 删除stu表中所有的数据\ndelete from stu;\n```\n\n\n\n## 8，DQL\n\n下面是黑马程序员展示试题库数据的页面\n\n页面上展示的数据肯定是在数据库中的试题库表中进行存储，而我们需要将数据库中的数据查询出来并展示在页面给用户看。上图中的是最基本的查询效果，那么数据库其实是很多的，不可能在将所有的数据在一页进行全部展示，而页面上会有分页展示的效果，如下：\n\n![image-20210722220139174](H:\\BaiDuWangPan\\JavaWeb\\day01-MySQL基础\\ppt\\assets\\image-20210722220139174.png)\n\n当然上图中的难度字段当我们点击也可以实现排序查询操作。从这个例子我们就可以看出，对于数据库的查询时灵活多变的，需要根据具体的需求来实现，而数据库查询操作也是最重要的操作，所以此部分需要大家重点掌握。\n\n接下来我们先介绍查询的完整语法：\n\n```sql\nSELECT \n    字段列表\nFROM \n    表名列表 \nWHERE \n    条件列表\nGROUP BY\n    分组字段\nHAVING\n    分组后条件\nORDER BY\n    排序字段\nLIMIT\n    分页限定\n```\n\n为了给大家演示查询的语句，我们需要先准备表及一些数据：\n\n```sql\n-- 删除stu表\ndrop table if exists stu;\n\n\n-- 创建stu表\nCREATE TABLE stu (\n id int, -- 编号\n name varchar(20), -- 姓名\n age int, -- 年龄\n sex varchar(5), -- 性别\n address varchar(100), -- 地址\n math double(5,2), -- 数学成绩\n english double(5,2), -- 英语成绩\n hire_date date -- 入学时间\n);\n\n-- 添加数据\nINSERT INTO stu(id,NAME,age,sex,address,math,english,hire_date) \nVALUES \n(1,'马运',55,'男','杭州',66,78,'1995-09-01'),\n(2,'马花疼',45,'女','深圳',98,87,'1998-09-01'),\n(3,'马斯克',55,'男','香港',56,77,'1999-09-02'),\n(4,'柳白',20,'女','湖南',76,65,'1997-09-05'),\n(5,'柳青',20,'男','湖南',86,NULL,'1998-09-01'),\n(6,'刘德花',57,'男','香港',99,99,'1998-09-01'),\n(7,'张学右',22,'女','香港',99,99,'1998-09-01'),\n(8,'德玛西亚',18,'男','南京',56,65,'1994-09-02');\n```\n\n接下来咱们从最基本的查询语句开始学起。\n\n### 8.1  基础查询\n\n#### 8.1.1  语法\n\n* **查询多个字段**\n\n```sql\nSELECT 字段列表 FROM 表名;\nSELECT * FROM 表名; -- 查询所有数据\n```\n\n* **去除重复记录**\n\n```sql\nSELECT DISTINCT 字段列表 FROM 表名;\n```\n\n* **起别名**\n\n```sql\nAS: AS 也可以省略\n```\n\n\n\n#### 8.1.2  练习\n\n* 查询name、age两列\n\n  ```sql\n  select name,age from stu;\n  ```\n\n* 查询所有列的数据，列名的列表可以使用*替代\n\n  ```sql\n  select * from stu;\n  ```\n\n  上面语句中的\\*不建议大家使用，因为在这写\\*不方便我们阅读sql语句。我们写字段列表的话，可以添加注释对每一个字段进行说明\n\n  而在上课期间为了简约课程的时间，老师很多地方都会写*。\n\n* 查询地址信息\n\n  ```sql\n  select address from stu;\n  ```\n\n  执行上面语句结果如下：\n\n  从上面的结果我们可以看到有重复的数据，我们也可以使用 `distinct` 关键字去重重复数据。\n\n* 去除重复记录\n\n  ```sql\n  select distinct address from stu;\n  ```\n\n* 查询姓名、数学成绩、英语成绩。并通过as给math和english起别名（as关键字可以省略）\n\n  ```sql\n  select name,math as 数学成绩,english as 英文成绩 from stu;\n  select name,math 数学成绩,english 英文成绩 from stu;\n  ```\n\n  \n\n### 8.2  条件查询\n\n#### 8.2.1  语法\n\n```sql\nSELECT 字段列表 FROM 表名 WHERE 条件列表;\n```\n\n* **条件**\n\n条件列表可以使用以下运算符\n\n#### 8.2.2  条件查询练习\n\n* 查询年龄大于20岁的学员信息\n\n  ```sql\n  select * from stu where age > 20;\n  ```\n\n* 查询年龄大于等于20岁的学员信息\n\n  ```sql\n  select * from stu where age >= 20;\n  ```\n\n* 查询年龄大于等于20岁 并且 年龄 小于等于 30岁 的学员信息\n\n  ```sql\n  select * from stu where age >= 20 &&  age <= 30;\n  select * from stu where age >= 20 and  age <= 30;\n  ```\n\n  > 上面语句中 &&  和  and  都表示并且的意思。建议使用 and 。\n  >\n  > 也可以使用  between ... and 来实现上面需求\n\n  ```sql\n  select * from stu where age BETWEEN 20 and 30;\n  ```\n\n* 查询入学日期在'1998-09-01' 到 '1999-09-01'  之间的学员信息\n\n  ```sql\n  select * from stu where hire_date BETWEEN '1998-09-01' and '1999-09-01';\n  ```\n\n* 查询年龄等于18岁的学员信息\n\n  ```sql\n  select * from stu where age = 18;\n  ```\n\n* 查询年龄不等于18岁的学员信息\n\n  ```sql\n  select * from stu where age != 18;\n  select * from stu where age <> 18;\n  ```\n\n* 查询年龄等于18岁 或者 年龄等于20岁 或者 年龄等于22岁的学员信息\n\n  ```sql\n  select * from stu where age = 18 or age = 20 or age = 22;\n  select * from stu where age in (18,20 ,22);\n  ```\n\n* 查询英语成绩为 null的学员信息\n\n  null值的比较不能使用 =  或者 != 。需要使用 is  或者 is not\n\n  ```sql\n  select * from stu where english = null; -- 这个语句是不行的\n  select * from stu where english is null;\n  select * from stu where english is not null;\n  ```\n\n#### 8.2.3  模糊查询练习\n\n> 模糊查询使用like关键字，可以使用通配符进行占位:\n>\n> （1）_ : 代表单个任意字符\n>\n> （2）% : 代表任意个数字符\n\n* 查询姓'马'的学员信息\n\n  ```sql\n  select * from stu where name like '马%';\n  ```\n\n* 查询第二个字是'花'的学员信息  \n\n  ```sql\n  select * from stu where name like '_花%';\n  ```\n\n* 查询名字中包含 '德' 的学员信息\n\n  ```sql\n  select * from stu where name like '%德%';\n  ```\n\n  \n\n### 8.3  排序查询\n\n#### 8.3.1  语法\n\n```sql\nSELECT 字段列表 FROM 表名 ORDER BY 排序字段名1 [排序方式1],排序字段名2 [排序方式2] …;\n```\n\n上述语句中的排序方式有两种，分别是：\n\n* ASC ： 升序排列 **（默认值）**\n* DESC ： 降序排列\n\n> 注意：如果有多个排序条件，当前边的条件值一样时，才会根据第二条件进行排序\n\n\n\n#### 8.3.2  练习\n\n* 查询学生信息，按照年龄升序排列 \n\n  ```sql\n  select * from stu order by age ;\n  ```\n\n* 查询学生信息，按照数学成绩降序排列\n\n  ```sql\n  select * from stu order by math desc ;\n  ```\n\n* 查询学生信息，按照数学成绩降序排列，如果数学成绩一样，再按照英语成绩升序排列\n\n  ```sql\n  select * from stu order by math desc , english asc ;\n  ```\n\n  \n\n### 8.4  聚合函数\n\n#### 8.4.1  概念\n\n ==将一列数据作为一个整体，进行纵向计算。==\n\n如何理解呢？假设有如下表\n\n现有一需求让我们求表中所有数据的数学成绩的总和。这就是对math字段进行纵向求和。\n\n#### 8.4.2  聚合函数分类\n\n| 函数名      | 功能                             |\n| ----------- | -------------------------------- |\n| count(列名) | 统计数量（一般选用不为null的列） |\n| max(列名)   | 最大值                           |\n| min(列名)   | 最小值                           |\n| sum(列名)   | 求和                             |\n| avg(列名)   | 平均值                           |\n\n#### 8.4.3  聚合函数语法\n\n```sql\nSELECT 聚合函数名(列名) FROM 表;\n```\n\n> 注意：null 值不参与所有聚合函数运算\n\n\n\n#### 8.4.4  练习\n\n* 统计班级一共有多少个学生\n\n  ```sql\n  select count(id) from stu;\n  select count(english) from stu;\n  ```\n\n  上面语句根据某个字段进行统计，如果该字段某一行的值为null的话，将不会被统计。所以可以在count(*) 来实现。\\* 表示所有字段数据，一行中也不可能所有的数据都为null，所以建议使用 count(\\*)\n\n  ```sql\n  select count(*) from stu;\n  ```\n\n* 查询数学成绩的最高分\n\n  ```sql\n  select max(math) from stu;\n  ```\n\n* 查询数学成绩的最低分\n\n  ```sql\n  select min(math) from stu;\n  ```\n\n* 查询数学成绩的总分\n\n  ```sql\n  select sum(math) from stu;\n  ```\n\n* 查询数学成绩的平均分\n\n  ```sql\n  select avg(math) from stu;\n  ```\n\n* 查询英语成绩的最低分\n\n  ```sql\n  select min(english) from stu;\n  ```\n\n  \n\n### 8.5  分组查询\n\n#### 8.5.1  语法\n\n```sql\nSELECT 字段列表 FROM 表名 [WHERE 分组前条件限定] GROUP BY 分组字段名 [HAVING 分组后条件过滤];\n```\n\n> 注意：分组之后，查询的字段为聚合函数和分组字段，查询其他字段无任何意义\n\n\n\n#### 8.5.2  练习\n\n* 查询男同学和女同学各自的数学平均分\n\n  ```sql\n  select sex, avg(math) from stu group by sex;\n  ```\n\n  > 注意：分组之后，查询的字段为聚合函数和分组字段，查询其他字段无任何意义\n\n  ```sql\n  select name, sex, avg(math) from stu group by sex;  -- 这里查询name字段就没有任何意义\n  ```\n\n* 查询男同学和女同学各自的数学平均分，以及各自人数\n\n  ```sql\n  select sex, avg(math),count(*) from stu group by sex;\n  ```\n\n* 查询男同学和女同学各自的数学平均分，以及各自人数，要求：分数低于70分的不参与分组\n\n  ```sql\n  select sex, avg(math),count(*) from stu where math > 70 group by sex;\n  ```\n\n* 查询男同学和女同学各自的数学平均分，以及各自人数，要求：分数低于70分的不参与分组，分组之后人数大于2个的\n\n  ```sql\n  select sex, avg(math),count(*) from stu where math > 70 group by sex having count(*)  > 2;\n  ```\n\n  \n\n**where 和 having 区别：**\n\n* 执行时机不一样：where 是分组之前进行限定，不满足where条件，则不参与分组，而having是分组之后对结果进行过滤。\n\n* 可判断的条件不一样：where 不能对聚合函数进行判断，having 可以。\n\n\n\n### 8.6  分页查询\n\n如下图所示，大家在很多网站都见过类似的效果，如京东、百度、淘宝等。分页查询是将数据一页一页的展示给用户看，用户也可以通过点击查看下一页的数据。\n\n接下来我们先说分页查询的语法。\n\n#### 8.6.1  语法\n\n```sql\nSELECT 字段列表 FROM 表名 LIMIT  起始索引 , 查询条目数;\n```\n\n> 注意： 上述语句中的起始索引是从0开始\n\n\n\n#### 8.6.2  练习\n\n* 从0开始查询，查询3条数据\n\n  ```sql\n  select * from stu limit 0 , 3;\n  ```\n\n* 每页显示3条数据，查询第1页数据\n\n  ```sql\n  select * from stu limit 0 , 3;\n  ```\n\n* 每页显示3条数据，查询第2页数据\n\n  ```sql\n  select * from stu limit 3 , 3;\n  ```\n\n* 每页显示3条数据，查询第3页数据\n\n  ```sql\n  select * from stu limit 6 , 3;\n  ```\n\n从上面的练习推导出起始索引计算公式：\n\n```sql\n起始索引 = (当前页码 - 1) * 每页显示的条数\n```\n\n\n\n## mysql高级\n\n**今日目标**\n\n> * 掌握约束的使用\n>\n> * 掌握表关系及建表原则\n>\n> * 重点掌握多表查询操作\n> * 掌握事务操作\n\n## 1，约束\n\n上面表中可以看到表中数据存在一些问题：\n\n* id 列一般是用标示数据的唯一性的，而上述表中的id为1的有三条数据，并且 `马花疼` 没有id进行标示\n* `柳白` 这条数据的age列的数据是3000，而人也不可能活到3000岁\n* `马运`  这条数据的math数学成绩是-5，而数学学得再不好也不可能出现负分\n\n* `柳青` 这条数据的english列（英文成绩）值为null，而成绩即使没考也得是0分\n\n针对上述数据问题，我们就可以从数据库层面在添加数据的时候进行限制，这个就是约束。\n\n### 1.1  概念\n\n* 约束是作用于表中列上的规则，用于限制加入表的数据\n\n  例如：我们可以给id列加约束，让其值不能重复，不能为null值。\n\n* 约束的存在保证了数据库中数据的正确性、有效性和完整性\n\n  添加约束可以在添加数据的时候就限制不正确的数据，年龄是3000，数学成绩是-5分这样无效的数据，继而保障数据的完整性。\n\n### 1.2  分类\n\n* **非空约束： 关键字是 NOT NULL**\n\n  保证列中所有的数据不能有null值。\n\n  例如：id列在添加 `马花疼` 这条数据时就不能添加成功。\n\n* **唯一约束：关键字是  UNIQUE**\n\n  保证列中所有数据各不相同。\n\n  例如：id列中三条数据的值都是1，这样的数据在添加时是绝对不允许的。\n\n* **主键约束： 关键字是  PRIMARY KEY**\n\n  主键是一行数据的唯一标识，要求非空且唯一。一般我们都会给没张表添加一个主键列用来唯一标识数据。\n\n  例如：上图表中id就可以作为主键，来标识每条数据。那么这样就要求数据中id的值不能重复，不能为null值。\n\n* **检查约束： 关键字是  CHECK** \n\n  保证列中的值满足某一条件。\n\n  例如：我们可以给age列添加一个范围，最低年龄可以设置为1，最大年龄就可以设置为300，这样的数据才更合理些。\n\n  > 注意：MySQL不支持检查约束。\n  >\n  > 这样是不是就没办法保证年龄在指定的范围内了？从数据库层面不能保证，以后可以在java代码中进行限制，一样也可以实现要求。\n\n* **默认约束： 关键字是   DEFAULT**\n\n  保存数据时，未指定值则采用默认值。\n\n  例如：我们在给english列添加该约束，指定默认值是0，这样在添加数据时没有指定具体值时就会采用默认给定的0。\n\n* **外键约束： 关键字是  FOREIGN KEY**\n\n  外键用来让两个表的数据之间建立链接，保证数据的一致性和完整性。\n\n  外键约束现在可能还不太好理解，后面我们会重点进行讲解。\n\n### 1.3  非空约束\n\n* 概念\n\n  非空约束用于保证列中所有数据不能有NULL值\n\n* 语法\n\n  * 添加约束\n\n    ```sql\n    -- 创建表时添加非空约束\n    CREATE TABLE 表名(\n       列名 数据类型 NOT NULL,\n       …\n    ); \n    \n    ```\n\n    ```sql\n    -- 建完表后添加非空约束\n    ALTER TABLE 表名 MODIFY 字段名 数据类型 NOT NULL;\n    ```\n\n  * 删除约束\n\n    ```sql\n    ALTER TABLE 表名 MODIFY 字段名 数据类型;\n    ```\n\n### 1.4  唯一约束\n\n* 概念\n\n  唯一约束用于保证列中所有数据各不相同\n\n* 语法\n\n  * 添加约束\n\n    ```sql\n    -- 创建表时添加唯一约束\n    CREATE TABLE 表名(\n       列名 数据类型 UNIQUE [AUTO_INCREMENT],\n       -- AUTO_INCREMENT: 当不指定值时自动增长\n       …\n    ); \n    CREATE TABLE 表名(\n       列名 数据类型,\n       …\n       [CONSTRAINT] [约束名称] UNIQUE(列名)\n    ); \n    ```\n\n    ```sql\n    -- 建完表后添加唯一约束\n    ALTER TABLE 表名 MODIFY 字段名 数据类型 UNIQUE;\n    ```\n\n  * 删除约束\n\n    ```sql\n    ALTER TABLE 表名 DROP INDEX 字段名;\n    ```\n\n### 1.5  主键约束\n\n* 概念\n\n  主键是一行数据的唯一标识，要求非空且唯一\n\n  一张表只能有一个主键\n\n* 语法\n\n  * 添加约束\n\n    ```sql\n    -- 创建表时添加主键约束\n    CREATE TABLE 表名(\n       列名 数据类型 PRIMARY KEY [AUTO_INCREMENT],\n       …\n    ); \n    CREATE TABLE 表名(\n       列名 数据类型,\n       [CONSTRAINT] [约束名称] PRIMARY KEY(列名)\n    ); \n    \n    ```\n\n    ```sql\n    -- 建完表后添加主键约束\n    ALTER TABLE 表名 ADD PRIMARY KEY(字段名);\n    ```\n\n  * 删除约束\n\n    ```sql\n    ALTER TABLE 表名 DROP PRIMARY KEY;\n    ```\n\n### 1.6  默认约束\n\n* 概念\n\n  保存数据时，未指定值则采用默认值\n\n* 语法\n\n  * 添加约束\n\n    ```sql\n    -- 创建表时添加默认约束\n    CREATE TABLE 表名(\n       列名 数据类型 DEFAULT 默认值,\n       …\n    ); \n    ```\n\n    ```sql\n    -- 建完表后添加默认约束\n    ALTER TABLE 表名 ALTER 列名 SET DEFAULT 默认值;\n    ```\n\n  * 删除约束\n\n    ```sql\n    ALTER TABLE 表名 ALTER 列名 DROP DEFAULT;\n    ```\n\n### 1.7  约束练习\n\n**根据需求，为表添加合适的约束**\n\n```sql\n-- 员工表\nCREATE TABLE emp (\n\tid INT,  -- 员工id，主键且自增长\n    ename VARCHAR(50), -- 员工姓名，非空且唯一\n    joindate DATE,  -- 入职日期，非空\n    salary DOUBLE(7,2),  -- 工资，非空\n    bonus DOUBLE(7,2)  -- 奖金，如果没有将近默认为0\n);\n```\n\n上面一定给出了具体的要求，我们可以根据要求创建这张表，并为每一列添加对应的约束。建表语句如下：\n\n```sql\nDROP TABLE IF EXISTS emp;\n\n-- 员工表\nCREATE TABLE emp (\n  id INT PRIMARY KEY, -- 员工id，主键且自增长\n  ename VARCHAR(50) NOT NULL UNIQUE, -- 员工姓名，非空并且唯一\n  joindate DATE NOT NULL , -- 入职日期，非空\n  salary DOUBLE(7,2) NOT NULL , -- 工资，非空\n  bonus DOUBLE(7,2) DEFAULT 0 -- 奖金，如果没有奖金默认为0\n);\n```\n\n通过上面语句可以创建带有约束的 `emp` 表，约束能不能发挥作用呢。接下来我们一一进行验证，先添加一条没有问题的数据\n\n```sql\nINSERT INTO emp(id,ename,joindate,salary,bonus) values(1,'张三','1999-11-11',8800,5000);\n```\n\n* **验证主键约束，非空且唯一**\n\n```sql\nINSERT INTO emp(id,ename,joindate,salary,bonus) values(null,'张三','1999-11-11',8800,5000);\n```\n\n执行结果如下：\n\n从上面的结果可以看到，字段 `id` 不能为null。那我们重新添加一条数据，如下：\n\n```sql\nINSERT INTO emp(id,ename,joindate,salary,bonus) values(1,'张三','1999-11-11',8800,5000);\n```\n\n执行结果如下：\n\n从上面结果可以看到，1这个值重复了。所以主键约束是用来限制数据非空且唯一的。那我们再添加一条符合要求的数据\n\n```sql\nINSERT INTO emp(id,ename,joindate,salary,bonus) values(2,'李四','1999-11-11',8800,5000);\n```\n\n执行结果如下：\n\n* **验证非空约束**\n\n```sql\nINSERT INTO emp(id,ename,joindate,salary,bonus) values(3,null,'1999-11-11',8800,5000);\n```\n\n执行结果如下：\n\n从上面结果可以看到，`ename` 字段的非空约束生效了。\n\n* **验证唯一约束**\n\n```sql\nINSERT INTO emp(id,ename,joindate,salary,bonus) values(3,'李四','1999-11-11',8800,5000);\n```\n\n执行结果如下：\n\n从上面结果可以看到，`ename` 字段的唯一约束生效了。\n\n* **验证默认约束**\n\n```sql\nINSERT INTO emp(id,ename,joindate,salary) values(3,'王五','1999-11-11',8800);\n```\n\n执行完上面语句后查询表中数据，如下图可以看到王五这条数据的bonus列就有了默认值0。\n\n==注意：默认约束只有在不给值时才会采用默认值。如果给了null，那值就是null值。==\n\n如下：\n\n```sql\nINSERT INTO emp(id,ename,joindate,salary,bonus) values(4,'赵六','1999-11-11',8800,null);\n```\n\n执行完上面语句后查询表中数据，如下图可以看到赵六这条数据的bonus列的值是null。\n\n* **验证自动增长： auto_increment  当列是数字类型 并且唯一约束**\n\n重新创建 `emp` 表，并给id列添加自动增长\n\n```sql\n-- 员工表\nCREATE TABLE emp (\n  id INT PRIMARY KEY auto_increment, -- 员工id，主键且自增长\n  ename VARCHAR(50) NOT NULL UNIQUE, -- 员工姓名，非空并且唯一\n  joindate DATE NOT NULL , -- 入职日期，非空\n  salary DOUBLE(7,2) NOT NULL , -- 工资，非空\n  bonus DOUBLE(7,2) DEFAULT 0 -- 奖金，如果没有奖金默认为0\n);\n```\n\n接下来给emp添加数据，分别验证不给id列添加值以及给id列添加null值，id列的值会不会自动增长：\n\n```sql\nINSERT INTO emp(ename,joindate,salary,bonus) values('赵六','1999-11-11',8800,null);\nINSERT INTO emp(id,ename,joindate,salary,bonus) values(null,'赵六2','1999-11-11',8800,null);\nINSERT INTO emp(id,ename,joindate,salary,bonus) values(null,'赵六3','1999-11-11',8800,null);\n```\n\n\n\n### 1.8  外键约束\n\n#### 1.8.1  概述\n\n外键用来让两个表的数据之间建立链接，保证数据的一致性和完整性。\n\n如何理解上面的概念呢？如下图有两张表，员工表和部门表：\n\n员工表中的dep_id字段是部门表的id字段关联，也就是说1号学生张三属于1号部门研发部的员工。现在我要删除1号部门，就会出现错误的数据（员工表中属于1号部门的数据）。而我们上面说的两张表的关系只是我们认为它们有关系，此时需要通过外键让这两张表产生数据库层面的关系，这样你要删除部门表中的1号部门的数据将无法删除。\n\n#### 1.8.2  语法\n\n* 添加外键约束\n\n```sql\n-- 创建表时添加外键约束\nCREATE TABLE 表名(\n   列名 数据类型,\n   …\n   [CONSTRAINT] [外键名称] FOREIGN KEY(外键列名) REFERENCES 主表(主表列名) \n); \n```\n\n```sql\n-- 建完表后添加外键约束\nALTER TABLE 表名 ADD CONSTRAINT 外键名称 FOREIGN KEY (外键字段名称) REFERENCES 主表名称(主表列名称);\n```\n\n* 删除外键约束\n\n```sql\nALTER TABLE 表名 DROP FOREIGN KEY 外键名称;\n```\n\n\n\n#### 1.8.3  练习\n\n根据上述语法创建员工表和部门表，并添加上外键约束：\n\n```sql\n-- 删除表\nDROP TABLE IF EXISTS emp;\nDROP TABLE IF EXISTS dept;\n\n-- 部门表\nCREATE TABLE dept(\n\tid int primary key auto_increment,\n\tdep_name varchar(20),\n\taddr varchar(20)\n);\n-- 员工表 \nCREATE TABLE emp(\n\tid int primary key auto_increment,\n\tname varchar(20),\n\tage int,\n\tdep_id int,\n\n\t-- 添加外键 dep_id,关联 dept 表的id主键\n\tCONSTRAINT fk_emp_dept FOREIGN KEY(dep_id) REFERENCES dept(id)\t\n);\n```\n\n添加数据\n\n```sql\n-- 添加 2 个部门\ninsert into dept(dep_name,addr) values\n('研发部','广州'),('销售部', '深圳');\n\n-- 添加员工,dep_id 表示员工所在的部门\nINSERT INTO emp (NAME, age, dep_id) VALUES \n('张三', 20, 1),\n('李四', 20, 1),\n('王五', 20, 1),\n('赵六', 20, 2),\n('孙七', 22, 2),\n('周八', 18, 2);\n```\n\n此时删除 `研发部` 这条数据，会发现无法删除。\n\n删除外键\n\n```sql\nalter table emp drop FOREIGN key fk_emp_dept;\n```\n\n重新添加外键\n\n```sql\nalter table emp add CONSTRAINT fk_emp_dept FOREIGN key(dep_id) REFERENCES dept(id);\n```\n\n\n\n## 2，数据库设计\n\n### 2.1  数据库设计简介\n\n* 软件的研发步骤\n\n* 数据库设计概念\n\n  * 数据库设计就是根据业务系统的具体需求，结合我们所选用的DBMS，为这个业务系统构造出最优的数据存储模型。\n  * 建立数据库中的==表结构==以及==表与表之间的关联关系==的过程。\n  * 有哪些表？表里有哪些字段？表和表之间有什么关系？\n\n* 数据库设计的步骤\n\n  * 需求分析（数据是什么? 数据具有哪些属性? 数据与属性的特点是什么）\n\n  * 逻辑分析（通过ER图对数据库进行逻辑建模，不需要考虑我们所选用的数据库管理系统）\n\n    如下图就是ER(Entity/Relation)图：\n\n  * 物理设计（根据数据库自身的特点把逻辑设计转换为物理设计）\n\n  * 维护设计（1.对新的需求进行建表；2.表优化）\n\n* 表关系\n\n  * 一对一\n\n    * 如：用户 和 用户详情\n    * 一对一关系多用于表拆分，将一个实体中经常使用的字段放一张表，不经常使用的字段放另一张表，用于提升查询性能\n\n    上图左边是用户的详细信息，而我们真正在展示用户信息时最长用的则是上图右边红框所示，所以我们会将详细信息查分成两周那个表。\n\n  * 一对多\n\n    * 如：部门 和 员工\n\n    * 一个部门对应多个员工，一个员工对应一个部门。如下图：\n\n  * 多对多\n\n    * 如：商品 和 订单\n\n    * 一个商品对应多个订单，一个订单包含多个商品。如下图：\n\n\n### 2.2  表关系(一对多)\n\n* 一对多\n\n  * 如：部门 和 员工\n  * 一个部门对应多个员工，一个员工对应一个部门。\n\n* 实现方式\n\n  ==在多的一方建立外键，指向一的一方的主键==\n\n* 案例\n\n  我们还是以 `员工表` 和 `部门表` 举例:\n\n  经过分析发现，员工表属于多的一方，而部门表属于一的一方，此时我们会在员工表中添加一列（dep_id），指向于部门表的主键（id）：\n\n  建表语句如下：\n\n  ```sql\n  -- 删除表\n  DROP TABLE IF EXISTS tb_emp;\n  DROP TABLE IF EXISTS tb_dept;\n  \n  -- 部门表\n  CREATE TABLE tb_dept(\n  \tid int primary key auto_increment,\n  \tdep_name varchar(20),\n  \taddr varchar(20)\n  );\n  -- 员工表 \n  CREATE TABLE tb_emp(\n  \tid int primary key auto_increment,\n  \tname varchar(20),\n  \tage int,\n  \tdep_id int,\n  \n  \t-- 添加外键 dep_id,关联 dept 表的id主键\n  \tCONSTRAINT fk_emp_dept FOREIGN KEY(dep_id) REFERENCES tb_dept(id)\t\n  );\n  ```\n\n  查看表结构模型图：\n\n\n### 2.3  表关系(多对多)\n\n* 多对多\n\n  * 如：商品 和 订单\n  * 一个商品对应多个订单，一个订单包含多个商品\n\n* 实现方式\n\n  ==建立第三张中间表，中间表至少包含两个外键，分别关联两方主键==\n\n* 案例\n\n  我们以 `订单表` 和 `商品表` 举例：\n\n  经过分析发现，订单表和商品表都属于多的一方，此时需要创建一个中间表，在中间表中添加订单表的外键和商品表的外键指向两张表的主键：\n\n  建表语句如下：\n\n  ```sql\n  -- 删除表\n  DROP TABLE IF EXISTS tb_order_goods;\n  DROP TABLE IF EXISTS tb_order;\n  DROP TABLE IF EXISTS tb_goods;\n  \n  -- 订单表\n  CREATE TABLE tb_order(\n  \tid int primary key auto_increment,\n  \tpayment double(10,2),\n  \tpayment_type TINYINT,\n  \tstatus TINYINT\n  );\n  \n  -- 商品表\n  CREATE TABLE tb_goods(\n  \tid int primary key auto_increment,\n  \ttitle varchar(100),\n  \tprice double(10,2)\n  );\n  \n  -- 订单商品中间表\n  CREATE TABLE tb_order_goods(\n  \tid int primary key auto_increment,\n  \torder_id int,\n  \tgoods_id int,\n  \tcount int\n  );\n  \n  -- 建完表后，添加外键\n  alter table tb_order_goods add CONSTRAINT fk_order_id FOREIGN key(order_id) REFERENCES tb_order(id);\n  alter table tb_order_goods add CONSTRAINT fk_goods_id FOREIGN key(goods_id) REFERENCES tb_goods(id);\n  ```\n\n  查看表结构模型图：\n\n\n### 2.4  表关系(一对一)\n\n* 一对一\n\n  * 如：用户 和 用户详情\n  * 一对一关系多用于表拆分，将一个实体中经常使用的字段放一张表，不经常使用的字段放另一张表，用于提升查询性能\n\n* 实现方式\n\n  ==在任意一方加入外键，关联另一方主键，并且设置外键为唯一(UNIQUE)==\n\n* 案例\n\n  我们以 `用户表` 举例：\n\n  而在真正使用过程中发现 id、photo、nickname、age、gender 字段比较常用，此时就可以将这张表查分成两张表。\n\n\n\n​\t\n\n​\t建表语句如下：\n\n```sql\ncreate table tb_user_desc (\n\tid int primary key auto_increment,\n\tcity varchar(20),\n\tedu varchar(10),\n\tincome int,\n\tstatus char(2),\n\tdes varchar(100)\n);\n\ncreate table tb_user (\n\tid int primary key auto_increment,\n\tphoto varchar(100),\n\tnickname varchar(50),\n\tage int,\n\tgender char(1),\n\tdesc_id int unique,\n\t-- 添加外键\n\tCONSTRAINT fk_user_desc FOREIGN KEY(desc_id) REFERENCES tb_user_desc(id)\t\n);\n```\n\n## 3，多表查询\n\n多表查询顾名思义就是从多张表中一次性的查询出我们想要的数据。我们通过具体的sql给他们演示，先准备环境\n\n```sql\nDROP TABLE IF EXISTS emp;\nDROP TABLE IF EXISTS dept;\n\n\n# 创建部门表\n\tCREATE TABLE dept(\n        did INT PRIMARY KEY AUTO_INCREMENT,\n        dname VARCHAR(20)\n    );\n\n\t# 创建员工表\n\tCREATE TABLE emp (\n        id INT PRIMARY KEY AUTO_INCREMENT,\n        NAME VARCHAR(10),\n        gender CHAR(1), -- 性别\n        salary DOUBLE, -- 工资\n        join_date DATE, -- 入职日期\n        dep_id INT,\n        FOREIGN KEY (dep_id) REFERENCES dept(did) -- 外键，关联部门表(部门表的主键)\n    );\n\t-- 添加部门数据\n\tINSERT INTO dept (dNAME) VALUES ('研发部'),('市场部'),('财务部'),('销售部');\n\t-- 添加员工数据\n\tINSERT INTO emp(NAME,gender,salary,join_date,dep_id) VALUES\n\t('孙悟空','男',7200,'2013-02-24',1),\n\t('猪八戒','男',3600,'2010-12-02',2),\n\t('唐僧','男',9000,'2008-08-08',2),\n\t('白骨精','女',5000,'2015-10-07',3),\n\t('蜘蛛精','女',4500,'2011-03-14',1),\n\t('小白龙','男',2500,'2011-02-14',null);\t\n```\n\n执行下面的多表查询语句\n\n```sql\nselect * from emp , dept;  -- 从emp和dept表中查询所有的字段数据\n```\n\n结果如下：\n\n从上面的结果我们看到有一些无效的数据，如 `孙悟空` 这个员工属于1号部门，但也同时关联的2、3、4号部门。所以我们要通过限制员工表中的 `dep_id` 字段的值和部门表 `did` 字段的值相等来消除这些无效的数据，\n\n```sql\nselect * from emp , dept where emp.dep_id = dept.did;\n```\n\n执行后结果如下：\n\n上面语句就是连接查询，那么多表查询都有哪些呢？\n\n* 连接查询 \n\n  * 内连接查询 ：相当于查询AB交集数据\n  * 外连接查询\n    * 左外连接查询 ：相当于查询A表所有数据和交集部门数据\n    * 右外连接查询 ： 相当于查询B表所有数据和交集部分数据\n\n* 子查询\n\n### 3.1  内连接查询\n\n* 语法\n\n```sql\n-- 隐式内连接\nSELECT 字段列表 FROM 表1,表2… WHERE 条件;\n\n-- 显示内连接\nSELECT 字段列表 FROM 表1 [INNER] JOIN 表2 ON 条件;\n```\n\n> 内连接相当于查询 A B 交集数据\n\n* 案例\n\n  * 隐式内连接\n\n    ```sql\n    SELECT\n    \t*\n    FROM\n    \temp,\n    \tdept\n    WHERE\n    \temp.dep_id = dept.did;\n    ```\n\n    执行上述语句结果如下：\n\n  * 查询 emp的 name， gender，dept表的dname\n\n    ```sql\n    SELECT\n    \temp. NAME,\n    \temp.gender,\n    \tdept.dname\n    FROM\n    \temp,\n    \tdept\n    WHERE\n    \temp.dep_id = dept.did;\n    ```\n\n    执行语句结果如下：\n\n    上面语句中使用表名指定字段所属有点麻烦，sql也支持给表指别名，上述语句可以改进为\n\n    ```sql\n    SELECT\n    \tt1. NAME,\n    \tt1.gender,\n    \tt2.dname\n    FROM\n    \temp t1,\n    \tdept t2\n    WHERE\n    \tt1.dep_id = t2.did;\n    ```\n\n  * 显式内连接\n\n    ```sql\n    select * from emp inner join dept on emp.dep_id = dept.did;\n    -- 上面语句中的inner可以省略，可以书写为如下语句\n    select * from emp  join dept on emp.dep_id = dept.did;\n    ```\n\n    执行结果如下：\n\n\n### 3.2  外连接查询\n\n* 语法\n\n  ```sql\n  -- 左外连接\n  SELECT 字段列表 FROM 表1 LEFT [OUTER] JOIN 表2 ON 条件;\n  \n  -- 右外连接\n  SELECT 字段列表 FROM 表1 RIGHT [OUTER] JOIN 表2 ON 条件;\n  ```\n\n  > 左外连接：相当于查询A表所有数据和交集部分数据\n  >\n  > 右外连接：相当于查询B表所有数据和交集部分数据\n\n* 案例\n\n  * 查询emp表所有数据和对应的部门信息（左外连接）\n\n    ```sql\n    select * from emp left join dept on emp.dep_id = dept.did;\n    ```\n\n    执行语句结果如下：\n\n    结果显示查询到了左表（emp）中所有的数据及两张表能关联的数据。\n\n  * 查询dept表所有数据和对应的员工信息（右外连接）\n\n    ```sql\n    select * from emp right join dept on emp.dep_id = dept.did;\n    ```\n\n    执行语句结果如下：\n\n    结果显示查询到了右表（dept）中所有的数据及两张表能关联的数据。\n\n    要查询出部门表中所有的数据，也可以通过左外连接实现，只需要将两个表的位置进行互换：\n\n    ```sql\n    select * from dept left join emp on emp.dep_id = dept.did;\n    ```\n\n    \n\n### 3.3  子查询\n\n* 概念\n\n  ==查询中嵌套查询，称嵌套查询为子查询。==\n\n  什么是查询中嵌套查询呢？我们通过一个例子来看：\n\n  **需求：查询工资高于猪八戒的员工信息。**\n\n  来实现这个需求，我们就可以通过二步实现，第一步：先查询出来 猪八戒的工资\n\n  ```sql\n  select salary from emp where name = '猪八戒'\n  ```\n\n   第二步：查询工资高于猪八戒的员工信息\n\n  ```sql\n  select * from emp where salary > 3600;\n  ```\n\n  第二步中的3600可以通过第一步的sql查询出来，所以将3600用第一步的sql语句进行替换\n\n  ```sql\n  select * from emp where salary > (select salary from emp where name = '猪八戒');\n  ```\n\n  这就是查询语句中嵌套查询语句。\n\n* 子查询根据查询结果不同，作用不同\n\n  * 子查询语句结果是单行单列，子查询语句作为条件值，使用 =  !=  >  <  等进行条件判断\n  * 子查询语句结果是多行单列，子查询语句作为条件值，使用 in 等关键字进行条件判断\n  * 子查询语句结果是多行多列，子查询语句作为虚拟表\n\n* 案例\n\n  * 查询 '财务部' 和 '市场部' 所有的员工信息\n\n    ```sql\n    -- 查询 '财务部' 或者 '市场部' 所有的员工的部门did\n    select did from dept where dname = '财务部' or dname = '市场部';\n    \n    select * from emp where dep_id in (select did from dept where dname = '财务部' or dname = '市场部');\n    ```\n\n  * 查询入职日期是 '2011-11-11' 之后的员工信息和部门信息\n\n    ```sql\n    -- 查询入职日期是 '2011-11-11' 之后的员工信息\n    select * from emp where join_date > '2011-11-11' ;\n    -- 将上面语句的结果作为虚拟表和dept表进行内连接查询\n    select * from (select * from emp where join_date > '2011-11-11' ) t1, dept where t1.dep_id = dept.did;\n    ```\n\n\n\n### 3.4  案例\n\n* 环境准备：\n\n```sql\nDROP TABLE IF EXISTS emp;\nDROP TABLE IF EXISTS dept;\nDROP TABLE IF EXISTS job;\nDROP TABLE IF EXISTS salarygrade;\n\n-- 部门表\nCREATE TABLE dept (\n  did INT PRIMARY KEY PRIMARY KEY, -- 部门id\n  dname VARCHAR(50), -- 部门名称\n  loc VARCHAR(50) -- 部门所在地\n);\n\n-- 职务表，职务名称，职务描述\nCREATE TABLE job (\n  id INT PRIMARY KEY,\n  jname VARCHAR(20),\n  description VARCHAR(50)\n);\n\n-- 员工表\nCREATE TABLE emp (\n  id INT PRIMARY KEY, -- 员工id\n  ename VARCHAR(50), -- 员工姓名\n  job_id INT, -- 职务id\n  mgr INT , -- 上级领导\n  joindate DATE, -- 入职日期\n  salary DECIMAL(7,2), -- 工资\n  bonus DECIMAL(7,2), -- 奖金\n  dept_id INT, -- 所在部门编号\n  CONSTRAINT emp_jobid_ref_job_id_fk FOREIGN KEY (job_id) REFERENCES job (id),\n  CONSTRAINT emp_deptid_ref_dept_id_fk FOREIGN KEY (dept_id) REFERENCES dept (id)\n);\n-- 工资等级表\nCREATE TABLE salarygrade (\n  grade INT PRIMARY KEY,   -- 级别\n  losalary INT,  -- 最低工资\n  hisalary INT -- 最高工资\n);\n\t\t\t\t\n-- 添加4个部门\nINSERT INTO dept(did,dname,loc) VALUES \n(10,'教研部','北京'),\n(20,'学工部','上海'),\n(30,'销售部','广州'),\n(40,'财务部','深圳');\n\n-- 添加4个职务\nINSERT INTO job (id, jname, description) VALUES\n(1, '董事长', '管理整个公司，接单'),\n(2, '经理', '管理部门员工'),\n(3, '销售员', '向客人推销产品'),\n(4, '文员', '使用办公软件');\n\n\n-- 添加员工\nINSERT INTO emp(id,ename,job_id,mgr,joindate,salary,bonus,dept_id) VALUES \n(1001,'孙悟空',4,1004,'2000-12-17','8000.00',NULL,20),\n(1002,'卢俊义',3,1006,'2001-02-20','16000.00','3000.00',30),\n(1003,'林冲',3,1006,'2001-02-22','12500.00','5000.00',30),\n(1004,'唐僧',2,1009,'2001-04-02','29750.00',NULL,20),\n(1005,'李逵',4,1006,'2001-09-28','12500.00','14000.00',30),\n(1006,'宋江',2,1009,'2001-05-01','28500.00',NULL,30),\n(1007,'刘备',2,1009,'2001-09-01','24500.00',NULL,10),\n(1008,'猪八戒',4,1004,'2007-04-19','30000.00',NULL,20),\n(1009,'罗贯中',1,NULL,'2001-11-17','50000.00',NULL,10),\n(1010,'吴用',3,1006,'2001-09-08','15000.00','0.00',30),\n(1011,'沙僧',4,1004,'2007-05-23','11000.00',NULL,20),\n(1012,'李逵',4,1006,'2001-12-03','9500.00',NULL,30),\n(1013,'小白龙',4,1004,'2001-12-03','30000.00',NULL,20),\n(1014,'关羽',4,1007,'2002-01-23','13000.00',NULL,10);\n\n\n-- 添加5个工资等级\nINSERT INTO salarygrade(grade,losalary,hisalary) VALUES \n(1,7000,12000),\n(2,12010,14000),\n(3,14010,20000),\n(4,20010,30000),\n(5,30010,99990);\n```\n\n* 需求\n\n  1. 查询所有员工信息。查询员工编号，员工姓名，工资，职务名称，职务描述\n\n     ```sql\n     /*\n     \t分析：\n     \t\t1. 员工编号，员工姓名，工资 信息在emp 员工表中\n     \t\t2. 职务名称，职务描述 信息在 job 职务表中\n     \t\t3. job 职务表 和 emp 员工表 是 一对多的关系 emp.job_id = job.id\n     */\n     -- 方式一 ：隐式内连接\n     SELECT\n     \temp.id,\n     \temp.ename,\n     \temp.salary,\n     \tjob.jname,\n     \tjob.description\n     FROM\n     \temp,\n     \tjob\n     WHERE\n     \temp.job_id = job.id;\n     \n     -- 方式二 ：显式内连接\n     SELECT\n     \temp.id,\n     \temp.ename,\n     \temp.salary,\n     \tjob.jname,\n     \tjob.description\n     FROM\n     \temp\n     INNER JOIN job ON emp.job_id = job.id;\n     ```\n\n  2. 查询员工编号，员工姓名，工资，职务名称，职务描述，部门名称，部门位置\n\n     ```sql\n     /*\n     \t分析：\n     \t\t1. 员工编号，员工姓名，工资 信息在emp 员工表中\n     \t\t2. 职务名称，职务描述 信息在 job 职务表中\n     \t\t3. job 职务表 和 emp 员工表 是 一对多的关系 emp.job_id = job.id\n     \n     \t\t4. 部门名称，部门位置 来自于 部门表 dept\n     \t\t5. dept 和 emp 一对多关系 dept.id = emp.dept_id\n     */\n     \n     -- 方式一 ：隐式内连接\n     SELECT\n     \temp.id,\n     \temp.ename,\n     \temp.salary,\n     \tjob.jname,\n     \tjob.description,\n     \tdept.dname,\n     \tdept.loc\n     FROM\n     \temp,\n     \tjob,\n     \tdept\n     WHERE\n     \temp.job_id = job.id\n     \tand dept.id = emp.dept_id\n     ;\n     \n     -- 方式二 ：显式内连接\n     SELECT\n     \temp.id,\n     \temp.ename,\n     \temp.salary,\n     \tjob.jname,\n     \tjob.description,\n     \tdept.dname,\n     \tdept.loc\n     FROM\n     \temp\n     INNER JOIN job ON emp.job_id = job.id\n     INNER JOIN dept ON dept.id = emp.dept_id\n     ```\n\n  3. 查询员工姓名，工资，工资等级\n\n     ```sql\n     /*\n     \t分析：\n     \t\t1. 员工姓名，工资 信息在emp 员工表中\n     \t\t2. 工资等级 信息在 salarygrade 工资等级表中\n     \t\t3. emp.salary >= salarygrade.losalary  and emp.salary <= salarygrade.hisalary\n     */\n     SELECT\n     \temp.ename,\n     \temp.salary,\n     \tt2.*\n     FROM\n     \temp,\n     \tsalarygrade t2\n     WHERE\n     \temp.salary >= t2.losalary\n     AND emp.salary <= t2.hisalary\n     ```\n\n  4. 查询员工姓名，工资，职务名称，职务描述，部门名称，部门位置，工资等级\n\n     ```sql\n     /*\n     \t分析：\n     \t\t1. 员工编号，员工姓名，工资 信息在emp 员工表中\n     \t\t2. 职务名称，职务描述 信息在 job 职务表中\n     \t\t3. job 职务表 和 emp 员工表 是 一对多的关系 emp.job_id = job.id\n     \n     \t\t4. 部门名称，部门位置 来自于 部门表 dept\n     \t\t5. dept 和 emp 一对多关系 dept.id = emp.dept_id\n     \t\t6. 工资等级 信息在 salarygrade 工资等级表中\n     \t\t7. emp.salary >= salarygrade.losalary  and emp.salary <= salarygrade.hisalary\n     */\n     SELECT\n     \temp.id,\n     \temp.ename,\n     \temp.salary,\n     \tjob.jname,\n     \tjob.description,\n     \tdept.dname,\n     \tdept.loc,\n     \tt2.grade\n     FROM\n     \temp\n     INNER JOIN job ON emp.job_id = job.id\n     INNER JOIN dept ON dept.id = emp.dept_id\n     INNER JOIN salarygrade t2 ON emp.salary BETWEEN t2.losalary and t2.hisalary;\n     ```\n\n  5. 查询出部门编号、部门名称、部门位置、部门人数\n\n     ```sql\n     /*\n     \t分析：\n     \t\t1. 部门编号、部门名称、部门位置 来自于部门 dept 表\n     \t\t2. 部门人数: 在emp表中 按照dept_id 进行分组，然后count(*)统计数量\n     \t\t3. 使用子查询，让部门表和分组后的表进行内连接\n     */\n     -- 根据部门id分组查询每一个部门id和员工数\n     select dept_id, count(*) from emp group by dept_id;\n     \n     SELECT\n     \tdept.id,\n     \tdept.dname,\n     \tdept.loc,\n     \tt1.count\n     FROM\n     \tdept,\n     \t(\n     \t\tSELECT\n     \t\t\tdept_id,\n     \t\t\tcount(*) count\n     \t\tFROM\n     \t\t\temp\n     \t\tGROUP BY\n     \t\t\tdept_id\n     \t) t1\n     WHERE\n     \tdept.id = t1.dept_id\n     ```\n\n     \n\n## 4，事务\n\n### 4.1  概述\n\n> 数据库的事务（Transaction）是一种机制、一个操作序列，包含了==一组数据库操作命令==。\n>\n> 事务把所有的命令作为一个整体一起向系统提交或撤销操作请求，即这一组数据库命令==要么同时成功，要么同时失败==。\n>\n> 事务是一个不可分割的工作逻辑单元。\n\n这些概念不好理解，接下来举例说明，如下图有一张表\n\n张三和李四账户中各有100块钱，现李四需要转换500块钱给张三，具体的转账操作为\n\n* 第一步：查询李四账户余额\n* 第二步：从李四账户金额 -500\n* 第三步：给张三账户金额 +500\n\n现在假设在转账过程中第二步完成后出现了异常第三步没有执行，就会造成李四账户金额少了500，而张三金额并没有多500；这样的系统是有问题的。如果解决呢？使用事务可以解决上述问题\n\n从上图可以看到在转账前开启事务，如果出现了异常回滚事务，三步正常执行就提交事务，这样就可以完美解决问题。\n\n### 4.2  语法\n\n* 开启事务\n\n  ```sql\n  START TRANSACTION;\n  或者  \n  BEGIN;\n  ```\n\n* 提交事务\n\n  ```sql\n  commit;\n  ```\n\n* 回滚事务\n\n  ```sql\n  rollback;\n  ```\n\n  \n\n### 4.3  代码验证\n\n* 环境准备\n\n  ```sql\n  DROP TABLE IF EXISTS account;\n  \n  -- 创建账户表\n  CREATE TABLE account(\n  \tid int PRIMARY KEY auto_increment,\n  \tname varchar(10),\n  \tmoney double(10,2)\n  );\n  \n  -- 添加数据\n  INSERT INTO account(name,money) values('张三',1000),('李四',1000);\n  ```\n\n  \n\n* 不加事务演示问题\n\n  ```sql\n  -- 转账操作\n  -- 1. 查询李四账户金额是否大于500\n  \n  -- 2. 李四账户 -500\n  UPDATE account set money = money - 500 where name = '李四';\n  \n  出现异常了...  -- 此处不是注释，在整体执行时会出问题，后面的sql则不执行\n  -- 3. 张三账户 +500\n  UPDATE account set money = money + 500 where name = '张三';\n  ```\n\n  整体执行结果肯定会出问题，我们查询账户表中数据，发现李四账户少了500。\n\n* 添加事务sql如下：\n\n  ```sql\n  -- 开启事务\n  BEGIN;\n  -- 转账操作\n  -- 1. 查询李四账户金额是否大于500\n  \n  -- 2. 李四账户 -500\n  UPDATE account set money = money - 500 where name = '李四';\n  \n  出现异常了...  -- 此处不是注释，在整体执行时会出问题，后面的sql则不执行\n  -- 3. 张三账户 +500\n  UPDATE account set money = money + 500 where name = '张三';\n  \n  -- 提交事务\n  COMMIT;\n  \n  -- 回滚事务\n  ROLLBACK;\n  ```\n\n  上面sql中的执行成功进选择执行提交事务，而出现问题则执行回滚事务的语句。以后我们肯定不可能这样操作，而是在java中进行操作，在java中可以抓取异常，没出现异常提交事务，出现异常回滚事务。\n\n### 4.4  事务的四大特征\n\n* 原子性（Atomicity）: 事务是不可分割的最小操作单位，要么同时成功，要么同时失败\n\n* 一致性（Consistency） :事务完成时，必须使所有的数据都保持一致状态\n\n* 隔离性（Isolation） :多个事务之间，操作的可见性\n\n* 持久性（Durability） :事务一旦提交或回滚，它对数据库中的数据的改变就是永久的\n\n> ==说明：==\n>\n> mysql中事务是自动提交的。\n>\n> 也就是说我们不添加事务执行sql语句，语句执行完毕会自动的提交事务。\n>\n> 可以通过下面语句查询默认提交方式：\n>\n> ```java\n> SELECT @@autocommit;\n> ```\n>\n> 查询到的结果是1 则表示自动提交，结果是0表示手动提交。当然也可以通过下面语句修改提交方式\n>\n> ```sql\n> set @@autocommit = 0;\n> ```\n\n","source":"_posts/Mysql.md","raw":"---\ntitle: Mysql\ndate: \ntags:\n  - Mysql\ncategories:\n  - [Mysql]\n---\n\n## MySQL基础\n\n>  -- 笔记来自B站黑马程序员的javaweb课程\n\n**今日目标：**\n\n> * 完成MySQL的安装及登陆基本操作\n> * 能通过SQL对数据库进行CRUD\n> * 能通过SQL对表进行CRUD\n> * 能通过SQL对数据进行CRUD\n\n## 1，数据库相关概念\n\n以前我们做系统，数据持久化的存储采用的是文件存储。存储到文件中可以达到系统关闭数据不会丢失的效果，当然文件存储也有它的弊端。\n\n假设在文件中存储以下的数据：\n\n```\n姓名\t年龄\t性别\t住址\n张三\t23\t男\t北京西三旗\n李四\t24\t女\t北京西二旗\n王五\t25\t男\t西安软件新城\n```\n\n现要修改李四这条数据的性别数据改为男，我们现学习的IO技术可以通过将所有的数据读取到内存中，然后进行修改再存到该文件中。通过这种方式操作存在很大问题，现在只有三条数据，如果文件中存储1T的数据，那么就会发现内存根本就存储不了。\n\n现需要既能持久化存储数据，也要能避免上述问题的技术使用在我们的系统中。数据库就是这样的一门技术。\n\n### 1.1  数据库\n\n* 存储和管理数据的仓库，数据是有组织的进行存储。\n\n* 数据库英文名是 DataBase，简称DB。\n\n数据库就是将数据存储在硬盘上，可以达到持久化存储的效果。那又是如何解决上述问题的？使用数据库管理系统。\n\n### 1.2  数据库管理系统\n\n* 管理数据库的大型软件\n* 英文：DataBase Management System，简称 DBMS\n\n在电脑上安装了数据库管理系统后，就可以通过数据库管理系统创建数据库来存储数据，也可以通过该系统对数据库中的数据进行数据的增删改查相关的操作。我们平时说的MySQL数据库其实是MySQL数据库管理系统。\n\n通过上面的描述，大家应该已经知道了 `数据库管理系统` 和 `数据库` 的关系。那么有有哪些常见的数据库管理系统呢？\n\n### 1.3  常见的数据库管理系统\n\n接下来对上面列举的数据库管理系统进行简单的介绍：\n\n* Oracle：收费的大型数据库，Oracle 公司的产品\n* MySQL： 开源免费的中小型数据库。后来 Sun公司收购了 MySQL，而 Sun 公司又被 Oracle 收购\n* SQL Server：MicroSoft 公司收费的中型的数据库。C#、.net 等语言常使用\n* PostgreSQL：开源免费中小型的数据库\n* DB2：IBM 公司的大型收费数据库产品\n* SQLite：嵌入式的微型数据库。如：作为 Android 内置数据库\n* MariaDB：开源免费中小型的数据库\n\n我们课程上学习的是MySQL数据库管理系统，PostgreSQL在一些公司也有使用，此时大家肯定会想以后在公司中如果使用我们没有学习过程的PostgreSQL数据库管理系统怎么办？这点大家大可不必担心，如下图所示：\n\n我们可以通过数据库管理系统操作数据库，对数据库中的数据进行增删改查操作，而怎么样让用户跟数据库管理系统打交道呢？就可以通过一门编程语言（SQL）来实现。\n\n### 1.4  SQL\n\n* 英文：Structured Query Language，简称 SQL，结构化查询语言\n* 操作关系型数据库的编程语言\n* 定义操作所有关系型数据库的统一标准，可以使用SQL操作所有的关系型数据库管理系统，以后工作中如果使用到了其他的数据库管理系统，也同样的使用SQL来操作。\n\n\n\n## 2，MySQL\n\n### 2.1  MySQL安装\n\n> **安装环境:Win10 64位**\n> **软件版本:MySQL 5.7.24 解压版**\n\n#### 2.1.1  下载\n\nhttps://downloads.mysql.com/archives/community/\n\n点开上面的链接就能看到如下界面：\n\n选择选择和自己**系统位数**相对应的版本点击右边的`Download`，此时会进到另一个页面，同样在接近页面底部的地方找到如下图所示的位置：\n\n不用理会上面的登录和注册按钮，直接点击 `No thanks, just start my download.` 就可以下载。\n\n#### 2.1.2  安装(解压)\n\n下载完成后我们得到的是一个压缩包，将其解压，我们就可以得到MySQL 5.7.24的软件本体了(就是一个文件夹)，我们可以把它放在你想安装的位置。\n\n### 2.2  MySQL卸载\n\n如果你想卸载MySQL，也很简单。\n\n右键开始菜单，选择`命令提示符(管理员)`，打开黑框。\n\n1. 敲入`net stop mysql`，回车。\n\n```\nnet stop mysql\n```\n\n2. 再敲入`mysqld -remove mysql`，回车。\n\n```\nmysqld -remove mysql\n```\n\n3. 最后删除MySQL目录及相关的环境变量。\n\n**至此，MySQL卸载完成！**\n\n\n\n### 2.3  MySQL配置\n\n#### 2.3.1  添加环境变量\n\n> 环境变量里面有很多选项，这里我们只用到`Path`这个参数。为什么在初始化的开始要添加环境变量呢？\n> 在黑框(即CMD)中输入一个可执行程序的名字，Windows会先在环境变量中的`Path`所指的路径中寻找一遍，如果找到了就直接执行，没找到就在当前工作目录找，如果还没找到，就报错。我们添加环境变量的目的就是能够在任意一个黑框直接调用MySQL中的相关程序而不用总是修改工作目录，大大简化了操作。\n\n\n\n右键`此电脑`→`属性`，点击`高级系统设置`\n\n点击`环境变量`\n\n在`系统变量`中新建MYSQL_HOME\n\n在`系统变量`中找到并**双击**`Path`\n\n点击`新建`\n\n最后点击确定。\n\n**如何验证是否添加成功？**\n\n右键开始菜单(就是屏幕左下角)，选择`命令提示符(管理员)`，打开黑框，敲入`mysql`，回车。\n如果提示`Can't connect to MySQL server on 'localhost'`则证明添加成功；\n如果提示`mysql不是内部或外部命令，也不是可运行的程序或批处理文件`则表示添加添加失败，请重新检查步骤并重试。\n\n#### 2.3.2  新建配置文件\n\n新建一个文本文件，内容如下：\n\n```properties\n[mysql]\ndefault-character-set=utf8\n\n[mysqld]\ncharacter-set-server=utf8\ndefault-storage-engine=INNODB\nsql_mode=STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION\n```\n\n把上面的文本文件另存为，在保存类型里选`所有文件 (*.*)`，文件名叫`my.ini`，存放的路径为MySQL的`根目录`(例如我的是`D:\\software\\mysql-5.7.24-winx64`,根据自己的MySQL目录位置修改)。\n\n上面代码意思就是配置数据库的默认编码集为utf-8和默认存储引擎为INNODB。\n\n#### 2.3.3  初始化MySQL\n\n在刚才的黑框中敲入`mysqld --initialize-insecure`，回车，稍微等待一会，如果出现没有出现报错信息(如下图)则证明data目录初始化没有问题，此时再查看MySQL目录下已经有data目录生成。\n\n```\nmysqld --initialize-insecure\n```\n\n\n\ntips：如果出现如下错误\n\n是由于权限不足导致的，去`C:\\Windows\\System32` 下以管理员方式运行 cmd.exe\n\n![image-20201109140001186](H:\\BaiDuWangPan\\JavaWeb\\day01-MySQL基础\\ppt\\assets\\image-20201109140001186.png)\n\n#### 2.3.4  注册MySQL服务\n\n在黑框里敲入`mysqld -install`，回车。\n\n```\nmysqld -install\n```\n\n现在你的计算机上已经安装好了MySQL服务了。\n\nMySQL服务器\n\n\n\n#### 2.3.5  启动MySQL服务\n\n在黑框里敲入`net start mysql`，回车。\n\n```java\nnet start mysql  // 启动mysql服务\n    \nnet stop mysql  // 停止mysql服务\n```\n\n\n\n#### 2.3.6  修改默认账户密码\n\n在黑框里敲入`mysqladmin -u root password 1234`，这里的`1234`就是指默认管理员(即root账户)的密码，可以自行修改成你喜欢的。\n\n```\nmysqladmin -u root password 1234\n```\n\n**至此，MySQL 5.7 解压版安装完毕！**\n\n\n\n### 2.4  MySQL登陆和退出\n\n#### 2.4.1  登陆\n\n右键开始菜单，选择`命令提示符`，打开黑框。\n在黑框中输入，`mysql -uroot -p1234`，回车，出现下图且左下角为`mysql>`，则登录成功。\n\n```\nmysql -uroot -p1234\n```\n\n**到这里你就可以开始你的MySQL之旅了！**\n\n登陆参数：\n\n```\nmysql -u用户名 -p密码 -h要连接的mysql服务器的ip地址(默认127.0.0.1) -P端口号(默认3306)\n```\n\n\n\n#### 2.4.2  退出\n\n退出mysql：\n\n```\nexit\nquit\n```\n\n\n\n### 2.5  MySQL数据模型\n\n**关系型数据库：**\n\n> 关系型数据库是建立在关系模型基础上的数据库，简单说，关系型数据库是由多张能互相连接的 二维表 组成的数据库\n\n如下图，`订单信息表` 和 `客户信息表` 都是有行有列二维表我们将这样的称为关系型数据库。\n\n接下来看关系型数据库的优点：\n\n* 都是使用表结构，格式一致，易于维护。\n* 使用通用的 SQL 语言操作，使用方便，可用于复杂查询。\n  * 关系型数据库都可以通过SQL进行操作，所以使用方便。\n  * 复杂查询。现在需要查询001号订单数据，我们可以看到该订单是1号客户的订单，而1号订单是李聪这个客户。以后也可以在一张表中进行统计分析等操作。\n* 数据存储在磁盘中，安全。\n\n**数据模型：**\n\n如上图，我们通过客户端可以通过数据库管理系统创建数据库，在数据库中创建表，在表中添加数据。创建的每一个数据库对应到磁盘上都是一个文件夹。比如可以通过SQL语句创建一个数据库（数据库名称为db1），语句如下。该语句咱们后面会学习。\n\n\n\n我们可以在数据库安装目录下的data目录下看到多了一个 `db1` 的文件夹。所以，**在MySQL中一个数据库对应到磁盘上的一个文件夹。**\n\n而一个数据库下可以创建多张表，我们到MySQL中自带的mysql数据库的文件夹目录下：\n\n而上图中右边的 `db.frm` 是表文件，`db.MYD` 是数据文件，通过这两个文件就可以查询到数据展示成二维表的效果。\n\n**小结：**\n\n* MySQL中可以创建多个数据库，每个数据库对应到磁盘上的一个文件夹\n* 在每个数据库中可以创建多个表，每张都对应到磁盘上一个 frm 文件\n* 每张表可以存储多条数据，数据会被存储到磁盘中  MYD 文件中\n\n\n\n## 3，SQL概述\n\n了解了数据模型后，接下来我们就学习SQL语句，通过SQL语句对数据库、表、数据进行增删改查操作。 \n\n### 3.1  SQL简介\n\n* 英文：Structured Query Language，简称 SQL\n* 结构化查询语言，一门操作关系型数据库的编程语言\n* 定义操作所有关系型数据库的统一标准\n* 对于同一个需求，每一种数据库操作的方式可能会存在一些不一样的地方，我们称为“方言”\n\n### 3.2  通用语法\n\n* SQL 语句可以单行或多行书写，以分号结尾。 \n\n  如上，以分号结尾才是一个完整的sql语句。\n\n* MySQL 数据库的 SQL 语句不区分大小写，关键字建议使用大写。\n\n  同样的一条sql语句写成下图的样子，一样可以运行处结果。\n\n   \n\n* 注释\n\n  * 单行注释: -- 注释内容 或 #注释内容(MySQL 特有)  \n\n    > 注意：使用-- 添加单行注释时，--后面一定要加空格，而#没有要求。\n\n  * 多行注释: /* 注释 */\n\n### 3.3  SQL分类\n\n* DDL(Data Definition Language) ： 数据定义语言，用来定义数据库对象：数据库，表，列等\n\n  DDL简单理解就是用来操作数据库，表等\n\n* DML(Data Manipulation Language) 数据操作语言，用来对数据库中表的数据进行增删改\n\n  DML简单理解就对表中数据进行增删改\n\n* DQL(Data Query Language) 数据查询语言，用来查询数据库中表的记录(数据)\n\n  DQL简单理解就是对数据进行查询操作。从数据库表中查询到我们想要的数据。\n\n* DCL(Data Control Language) 数据控制语言，用来定义数据库的访问权限和安全级别，及创建用户\n\n  DML简单理解就是对数据库进行权限控制。比如我让某一个数据库表只能让某一个用户进行操作等。\n\n> 注意： 以后我们最常操作的是 `DML` 和 `DQL`  ，因为我们开发中最常操作的就是数据。\n\n## 4，DDL:操作数据库\n\n我们先来学习DDL来操作数据库。而操作数据库主要就是对数据库的增删查操作。\n\n### 4.1  查询\n\n查询所有的数据库\n\n```sql\nSHOW DATABASES;\n```\n\n运行上面语句效果如下：\n\n上述查询到的是的这些数据库是mysql安装好自带的数据库，我们以后不要操作这些数据库。\n\n### 4.2  创建数据库\n\n* **创建数据库**：\n\n```sql\nCREATE DATABASE 数据库名称;\n```\n\n运行语句效果如下：\n\n而在创建数据库的时候，我并不知道db1数据库有没有创建，直接再次创建名为db1的数据库就会出现错误。\n\n为了避免上面的错误，在创建数据库的时候先做判断，如果不存在再创建。\n\n* **创建数据库(判断，如果不存在则创建)**\n\n```sql\nCREATE DATABASE IF NOT EXISTS 数据库名称;\n```\n\n运行语句效果如下：\n\n从上面的效果可以看到虽然db1数据库已经存在，再创建db1也没有报错，而创建db2数据库则创建成功。\n\n### 4.3  删除数据库\n\n* **删除数据库**\n\n```sql\nDROP DATABASE 数据库名称;\n```\n\n* **删除数据库(判断，如果存在则删除)**\n\n```sql\nDROP DATABASE IF EXISTS 数据库名称;\n```\n\n运行语句效果如下：\n\n### 4.4  使用数据库\n\n数据库创建好了，要在数据库中创建表，得先明确在哪儿个数据库中操作，此时就需要使用数据库。\n\n* **使用数据库**\n\n```sql\nUSE 数据库名称;\n```\n\n* **查看当前使用的数据库**\n\n```sql\nSELECT DATABASE();\n```\n\n运行语句效果如下：\n\n## 5，DDL:操作表\n\n操作表也就是对表进行增（Create）删（Retrieve）改（Update）查（Delete）。\n\n### 5.1  查询表\n\n* **查询当前数据库下所有表名称**\n\n```sql\nSHOW TABLES;\n```\n\n我们创建的数据库中没有任何表，因此我们进入mysql自带的mysql数据库，执行上述语句查看\n\n* **查询表结构**\n\n```sql\nDESC 表名称;\n```\n\n查看mysql数据库中func表的结构，运行语句如下：\n\n### 5.2  创建表\n\n* **创建表**\n\n```sql\nCREATE TABLE 表名 (\n\t字段名1  数据类型1,\n\t字段名2  数据类型2,\n\t…\n\t字段名n  数据类型n\n);\n\n```\n\n> 注意：最后一行末尾，不能加逗号\n\n知道了创建表的语句，那么我们创建创建如下结构的表\n\n```sql\ncreate table tb_user (\n\tid int,\n    username varchar(20),\n    password varchar(32)\n);\n```\n\n运行语句如下：\n\n### 5.3  数据类型\n\nMySQL 支持多种类型，可以分为三类：\n\n* 数值\n\n  ```sql\n  tinyint : 小整数型，占一个字节\n  int\t： 大整数类型，占四个字节\n  \teg ： age int\n  double ： 浮点类型\n  \t使用格式： 字段名 double(总长度,小数点后保留的位数)\n  \teg ： score double(5,2)   \n  ```\n\n* 日期\n\n  ```sql\n  date ： 日期值。只包含年月日\n  \teg ：birthday date ： \n  datetime ： 混合日期和时间值。包含年月日时分秒\n  ```\n\n* 字符串\n\n  ```sql\n  char ： 定长字符串。\n  \t优点：存储性能高\n  \t缺点：浪费空间\n  \teg ： name char(10)  如果存储的数据字符个数不足10个，也会占10个的空间\n  varchar ： 变长字符串。\n  \t优点：节约空间\n  \t缺点：存储性能底\n  \teg ： name varchar(10) 如果存储的数据字符个数不足10个，那就数据字符个数是几就占几个的空间\t\n  ```\n\n> 注意：其他类型参考资料中的《MySQL数据类型].xlsx》\n\n**案例：**\n\n```\n需求：设计一张学生表，请注重数据类型、长度的合理性\n\t1. 编号\n\t2. 姓名，姓名最长不超过10个汉字\n\t3. 性别，因为取值只有两种可能，因此最多一个汉字\n\t4. 生日，取值为年月日\n\t5. 入学成绩，小数点后保留两位\n\t6. 邮件地址，最大长度不超过 64\n\t7. 家庭联系电话，不一定是手机号码，可能会出现 - 等字符\n\t8. 学生状态（用数字表示，正常、休学、毕业...）\n```\n\n语句设计如下：\n\n```sql\ncreate table student (\n\tid int,\n    name varchar(10),\n    gender char(1),\n    birthday date,\n    score double(5,2),\n    email varchar(15),\n    tel varchar(15),\n    status tinyint\n);\n```\n\n### 5.4  删除表\n\n* **删除表**\n\n```sql\nDROP TABLE 表名;\n```\n\n* **删除表时判断表是否存在**\n\n```sql\nDROP TABLE IF EXISTS 表名;\n```\n\n运行语句效果如下：\n\n### 5.5  修改表\n\n* **修改表名**\n\n```sql\nALTER TABLE 表名 RENAME TO 新的表名;\n\n-- 将表名student修改为stu\nalter table student rename to stu;\n```\n\n* **添加一列**\n\n```sql\nALTER TABLE 表名 ADD 列名 数据类型;\n\n-- 给stu表添加一列address，该字段类型是varchar(50)\nalter table stu add address varchar(50);\n```\n\n* **修改数据类型**\n\n```sql\nALTER TABLE 表名 MODIFY 列名 新数据类型;\n\n-- 将stu表中的address字段的类型改为 char(50)\nalter table stu modify address char(50);\n```\n\n* **修改列名和数据类型**\n\n```sql\nALTER TABLE 表名 CHANGE 列名 新列名 新数据类型;\n\n-- 将stu表中的address字段名改为 addr，类型改为varchar(50)\nalter table stu change address addr varchar(50);\n```\n\n* **删除列**\n\n```sql\nALTER TABLE 表名 DROP 列名;\n\n-- 将stu表中的addr字段 删除\nalter table stu drop addr;\n```\n\n\n\n## 6，navicat使用\n\n通过上面的学习，我们发现在命令行中写sql语句特别不方便，尤其是编写创建表的语句，我们只能在记事本上写好后直接复制到命令行进行执行。那么有没有刚好的工具提供给我们进行使用呢？ 有。\n\n### 6.1  navicat概述\n\n* Navicat for MySQL 是管理和开发 MySQL 或 MariaDB 的理想解决方案。\n* 这套全面的前端工具为数据库管理、开发和维护提供了一款直观而强大的图形界面。\n* 官网： [http://www.navicat.com.cn](http://www.navicat.com.cn/) \n\n### 6.2  navicat安装\n\n参考 : 资料\\navicat安装包\\navicat_mysql_x86\\navicat安装步骤.md\n\n### 6.3  navicat使用\n\n#### 6.3.1  建立和mysql服务的连接\n\n第一步： 点击连接，选择MySQL\n\n第二步：填写连接数据库必要的信息\n\n以上操作没有问题就会出现如下图所示界面：\n\n#### 6.3.2  操作\n\n连接成功后就能看到如下图界面：\n\n* **修改表结构**\n\n通过下图操作修改表结构：\n\n点击了设计表后即出现如下图所示界面，在图中红框中直接修改字段名，类型等信息：\n\n* **编写SQL语句并执行**\n\n按照如下图所示进行操作即可书写SQL语句并执行sql语句。\n\n## 7，DML\n\nDML主要是对数据进行增（insert）删（delete）改（update）操作。\n\n### 7.1  添加数据\n\n* **给指定列添加数据**\n\n```sql\nINSERT INTO 表名(列名1,列名2,…) VALUES(值1,值2,…);\n```\n\n* **给全部列添加数据**\n\n```sql\nINSERT INTO 表名 VALUES(值1,值2,…);\n```\n\n* **批量添加数据**\n\n```sql\nINSERT INTO 表名(列名1,列名2,…) VALUES(值1,值2,…),(值1,值2,…),(值1,值2,…)…;\nINSERT INTO 表名 VALUES(值1,值2,…),(值1,值2,…),(值1,值2,…)…;\n```\n\n\n\n* **练习**\n\n为了演示以下的增删改操作是否操作成功，故先将查询所有数据的语句介绍给大家：\n\n```sql\nselect * from stu;\n```\n\n\n\n```sql\n-- 给指定列添加数据\nINSERT INTO stu (id, NAME) VALUES (1, '张三');\n-- 给所有列添加数据，列名的列表可以省略的\nINSERT INTO stu (id,NAME,sex,birthday,score,email,tel,STATUS) VALUES (2,'李四','男','1999-11-11',88.88,'lisi@itcast.cn','13888888888',1);\n\nINSERT INTO stu VALUES (2,'李四','男','1999-11-11',88.88,'lisi@itcast.cn','13888888888',1);\n\n-- 批量添加数据\nINSERT INTO stu VALUES \n\t(2,'李四','男','1999-11-11',88.88,'lisi@itcast.cn','13888888888',1),\n\t(2,'李四','男','1999-11-11',88.88,'lisi@itcast.cn','13888888888',1),\n\t(2,'李四','男','1999-11-11',88.88,'lisi@itcast.cn','13888888888',1);\n```\n\n\n\n### 7.2  修改数据\n\n* **修改表数据**\n\n```sql\nUPDATE 表名 SET 列名1=值1,列名2=值2,… [WHERE 条件] ;\n```\n\n> 注意：\n>\n> 1. 修改语句中如果不加条件，则将所有数据都修改！\n> 2. 像上面的语句中的中括号，表示在写sql语句中可以省略这部分\n\n\n\n* **练习**\n\n  * 将张三的性别改为女\n\n    ```sql\n    update stu set sex = '女' where name = '张三';\n    ```\n\n  * 将张三的生日改为 1999-12-12 分数改为99.99\n\n    ```sql\n    update stu set birthday = '1999-12-12', score = 99.99 where name = '张三';\n    ```\n\n  * 注意：如果update语句没有加where条件，则会将表中所有数据全部修改！\n\n    ```sql\n    update stu set sex = '女';\n    ```\n\n    上面语句的执行完后查询到的结果是：\n\n\n\n\n### 7.3  删除数据\n\n* **删除数据**\n\n```sql\nDELETE FROM 表名 [WHERE 条件] ;\n```\n\n* **练习**\n\n```sql\n-- 删除张三记录\ndelete from stu where name = '张三';\n\n-- 删除stu表中所有的数据\ndelete from stu;\n```\n\n\n\n## 8，DQL\n\n下面是黑马程序员展示试题库数据的页面\n\n页面上展示的数据肯定是在数据库中的试题库表中进行存储，而我们需要将数据库中的数据查询出来并展示在页面给用户看。上图中的是最基本的查询效果，那么数据库其实是很多的，不可能在将所有的数据在一页进行全部展示，而页面上会有分页展示的效果，如下：\n\n![image-20210722220139174](H:\\BaiDuWangPan\\JavaWeb\\day01-MySQL基础\\ppt\\assets\\image-20210722220139174.png)\n\n当然上图中的难度字段当我们点击也可以实现排序查询操作。从这个例子我们就可以看出，对于数据库的查询时灵活多变的，需要根据具体的需求来实现，而数据库查询操作也是最重要的操作，所以此部分需要大家重点掌握。\n\n接下来我们先介绍查询的完整语法：\n\n```sql\nSELECT \n    字段列表\nFROM \n    表名列表 \nWHERE \n    条件列表\nGROUP BY\n    分组字段\nHAVING\n    分组后条件\nORDER BY\n    排序字段\nLIMIT\n    分页限定\n```\n\n为了给大家演示查询的语句，我们需要先准备表及一些数据：\n\n```sql\n-- 删除stu表\ndrop table if exists stu;\n\n\n-- 创建stu表\nCREATE TABLE stu (\n id int, -- 编号\n name varchar(20), -- 姓名\n age int, -- 年龄\n sex varchar(5), -- 性别\n address varchar(100), -- 地址\n math double(5,2), -- 数学成绩\n english double(5,2), -- 英语成绩\n hire_date date -- 入学时间\n);\n\n-- 添加数据\nINSERT INTO stu(id,NAME,age,sex,address,math,english,hire_date) \nVALUES \n(1,'马运',55,'男','杭州',66,78,'1995-09-01'),\n(2,'马花疼',45,'女','深圳',98,87,'1998-09-01'),\n(3,'马斯克',55,'男','香港',56,77,'1999-09-02'),\n(4,'柳白',20,'女','湖南',76,65,'1997-09-05'),\n(5,'柳青',20,'男','湖南',86,NULL,'1998-09-01'),\n(6,'刘德花',57,'男','香港',99,99,'1998-09-01'),\n(7,'张学右',22,'女','香港',99,99,'1998-09-01'),\n(8,'德玛西亚',18,'男','南京',56,65,'1994-09-02');\n```\n\n接下来咱们从最基本的查询语句开始学起。\n\n### 8.1  基础查询\n\n#### 8.1.1  语法\n\n* **查询多个字段**\n\n```sql\nSELECT 字段列表 FROM 表名;\nSELECT * FROM 表名; -- 查询所有数据\n```\n\n* **去除重复记录**\n\n```sql\nSELECT DISTINCT 字段列表 FROM 表名;\n```\n\n* **起别名**\n\n```sql\nAS: AS 也可以省略\n```\n\n\n\n#### 8.1.2  练习\n\n* 查询name、age两列\n\n  ```sql\n  select name,age from stu;\n  ```\n\n* 查询所有列的数据，列名的列表可以使用*替代\n\n  ```sql\n  select * from stu;\n  ```\n\n  上面语句中的\\*不建议大家使用，因为在这写\\*不方便我们阅读sql语句。我们写字段列表的话，可以添加注释对每一个字段进行说明\n\n  而在上课期间为了简约课程的时间，老师很多地方都会写*。\n\n* 查询地址信息\n\n  ```sql\n  select address from stu;\n  ```\n\n  执行上面语句结果如下：\n\n  从上面的结果我们可以看到有重复的数据，我们也可以使用 `distinct` 关键字去重重复数据。\n\n* 去除重复记录\n\n  ```sql\n  select distinct address from stu;\n  ```\n\n* 查询姓名、数学成绩、英语成绩。并通过as给math和english起别名（as关键字可以省略）\n\n  ```sql\n  select name,math as 数学成绩,english as 英文成绩 from stu;\n  select name,math 数学成绩,english 英文成绩 from stu;\n  ```\n\n  \n\n### 8.2  条件查询\n\n#### 8.2.1  语法\n\n```sql\nSELECT 字段列表 FROM 表名 WHERE 条件列表;\n```\n\n* **条件**\n\n条件列表可以使用以下运算符\n\n#### 8.2.2  条件查询练习\n\n* 查询年龄大于20岁的学员信息\n\n  ```sql\n  select * from stu where age > 20;\n  ```\n\n* 查询年龄大于等于20岁的学员信息\n\n  ```sql\n  select * from stu where age >= 20;\n  ```\n\n* 查询年龄大于等于20岁 并且 年龄 小于等于 30岁 的学员信息\n\n  ```sql\n  select * from stu where age >= 20 &&  age <= 30;\n  select * from stu where age >= 20 and  age <= 30;\n  ```\n\n  > 上面语句中 &&  和  and  都表示并且的意思。建议使用 and 。\n  >\n  > 也可以使用  between ... and 来实现上面需求\n\n  ```sql\n  select * from stu where age BETWEEN 20 and 30;\n  ```\n\n* 查询入学日期在'1998-09-01' 到 '1999-09-01'  之间的学员信息\n\n  ```sql\n  select * from stu where hire_date BETWEEN '1998-09-01' and '1999-09-01';\n  ```\n\n* 查询年龄等于18岁的学员信息\n\n  ```sql\n  select * from stu where age = 18;\n  ```\n\n* 查询年龄不等于18岁的学员信息\n\n  ```sql\n  select * from stu where age != 18;\n  select * from stu where age <> 18;\n  ```\n\n* 查询年龄等于18岁 或者 年龄等于20岁 或者 年龄等于22岁的学员信息\n\n  ```sql\n  select * from stu where age = 18 or age = 20 or age = 22;\n  select * from stu where age in (18,20 ,22);\n  ```\n\n* 查询英语成绩为 null的学员信息\n\n  null值的比较不能使用 =  或者 != 。需要使用 is  或者 is not\n\n  ```sql\n  select * from stu where english = null; -- 这个语句是不行的\n  select * from stu where english is null;\n  select * from stu where english is not null;\n  ```\n\n#### 8.2.3  模糊查询练习\n\n> 模糊查询使用like关键字，可以使用通配符进行占位:\n>\n> （1）_ : 代表单个任意字符\n>\n> （2）% : 代表任意个数字符\n\n* 查询姓'马'的学员信息\n\n  ```sql\n  select * from stu where name like '马%';\n  ```\n\n* 查询第二个字是'花'的学员信息  \n\n  ```sql\n  select * from stu where name like '_花%';\n  ```\n\n* 查询名字中包含 '德' 的学员信息\n\n  ```sql\n  select * from stu where name like '%德%';\n  ```\n\n  \n\n### 8.3  排序查询\n\n#### 8.3.1  语法\n\n```sql\nSELECT 字段列表 FROM 表名 ORDER BY 排序字段名1 [排序方式1],排序字段名2 [排序方式2] …;\n```\n\n上述语句中的排序方式有两种，分别是：\n\n* ASC ： 升序排列 **（默认值）**\n* DESC ： 降序排列\n\n> 注意：如果有多个排序条件，当前边的条件值一样时，才会根据第二条件进行排序\n\n\n\n#### 8.3.2  练习\n\n* 查询学生信息，按照年龄升序排列 \n\n  ```sql\n  select * from stu order by age ;\n  ```\n\n* 查询学生信息，按照数学成绩降序排列\n\n  ```sql\n  select * from stu order by math desc ;\n  ```\n\n* 查询学生信息，按照数学成绩降序排列，如果数学成绩一样，再按照英语成绩升序排列\n\n  ```sql\n  select * from stu order by math desc , english asc ;\n  ```\n\n  \n\n### 8.4  聚合函数\n\n#### 8.4.1  概念\n\n ==将一列数据作为一个整体，进行纵向计算。==\n\n如何理解呢？假设有如下表\n\n现有一需求让我们求表中所有数据的数学成绩的总和。这就是对math字段进行纵向求和。\n\n#### 8.4.2  聚合函数分类\n\n| 函数名      | 功能                             |\n| ----------- | -------------------------------- |\n| count(列名) | 统计数量（一般选用不为null的列） |\n| max(列名)   | 最大值                           |\n| min(列名)   | 最小值                           |\n| sum(列名)   | 求和                             |\n| avg(列名)   | 平均值                           |\n\n#### 8.4.3  聚合函数语法\n\n```sql\nSELECT 聚合函数名(列名) FROM 表;\n```\n\n> 注意：null 值不参与所有聚合函数运算\n\n\n\n#### 8.4.4  练习\n\n* 统计班级一共有多少个学生\n\n  ```sql\n  select count(id) from stu;\n  select count(english) from stu;\n  ```\n\n  上面语句根据某个字段进行统计，如果该字段某一行的值为null的话，将不会被统计。所以可以在count(*) 来实现。\\* 表示所有字段数据，一行中也不可能所有的数据都为null，所以建议使用 count(\\*)\n\n  ```sql\n  select count(*) from stu;\n  ```\n\n* 查询数学成绩的最高分\n\n  ```sql\n  select max(math) from stu;\n  ```\n\n* 查询数学成绩的最低分\n\n  ```sql\n  select min(math) from stu;\n  ```\n\n* 查询数学成绩的总分\n\n  ```sql\n  select sum(math) from stu;\n  ```\n\n* 查询数学成绩的平均分\n\n  ```sql\n  select avg(math) from stu;\n  ```\n\n* 查询英语成绩的最低分\n\n  ```sql\n  select min(english) from stu;\n  ```\n\n  \n\n### 8.5  分组查询\n\n#### 8.5.1  语法\n\n```sql\nSELECT 字段列表 FROM 表名 [WHERE 分组前条件限定] GROUP BY 分组字段名 [HAVING 分组后条件过滤];\n```\n\n> 注意：分组之后，查询的字段为聚合函数和分组字段，查询其他字段无任何意义\n\n\n\n#### 8.5.2  练习\n\n* 查询男同学和女同学各自的数学平均分\n\n  ```sql\n  select sex, avg(math) from stu group by sex;\n  ```\n\n  > 注意：分组之后，查询的字段为聚合函数和分组字段，查询其他字段无任何意义\n\n  ```sql\n  select name, sex, avg(math) from stu group by sex;  -- 这里查询name字段就没有任何意义\n  ```\n\n* 查询男同学和女同学各自的数学平均分，以及各自人数\n\n  ```sql\n  select sex, avg(math),count(*) from stu group by sex;\n  ```\n\n* 查询男同学和女同学各自的数学平均分，以及各自人数，要求：分数低于70分的不参与分组\n\n  ```sql\n  select sex, avg(math),count(*) from stu where math > 70 group by sex;\n  ```\n\n* 查询男同学和女同学各自的数学平均分，以及各自人数，要求：分数低于70分的不参与分组，分组之后人数大于2个的\n\n  ```sql\n  select sex, avg(math),count(*) from stu where math > 70 group by sex having count(*)  > 2;\n  ```\n\n  \n\n**where 和 having 区别：**\n\n* 执行时机不一样：where 是分组之前进行限定，不满足where条件，则不参与分组，而having是分组之后对结果进行过滤。\n\n* 可判断的条件不一样：where 不能对聚合函数进行判断，having 可以。\n\n\n\n### 8.6  分页查询\n\n如下图所示，大家在很多网站都见过类似的效果，如京东、百度、淘宝等。分页查询是将数据一页一页的展示给用户看，用户也可以通过点击查看下一页的数据。\n\n接下来我们先说分页查询的语法。\n\n#### 8.6.1  语法\n\n```sql\nSELECT 字段列表 FROM 表名 LIMIT  起始索引 , 查询条目数;\n```\n\n> 注意： 上述语句中的起始索引是从0开始\n\n\n\n#### 8.6.2  练习\n\n* 从0开始查询，查询3条数据\n\n  ```sql\n  select * from stu limit 0 , 3;\n  ```\n\n* 每页显示3条数据，查询第1页数据\n\n  ```sql\n  select * from stu limit 0 , 3;\n  ```\n\n* 每页显示3条数据，查询第2页数据\n\n  ```sql\n  select * from stu limit 3 , 3;\n  ```\n\n* 每页显示3条数据，查询第3页数据\n\n  ```sql\n  select * from stu limit 6 , 3;\n  ```\n\n从上面的练习推导出起始索引计算公式：\n\n```sql\n起始索引 = (当前页码 - 1) * 每页显示的条数\n```\n\n\n\n## mysql高级\n\n**今日目标**\n\n> * 掌握约束的使用\n>\n> * 掌握表关系及建表原则\n>\n> * 重点掌握多表查询操作\n> * 掌握事务操作\n\n## 1，约束\n\n上面表中可以看到表中数据存在一些问题：\n\n* id 列一般是用标示数据的唯一性的，而上述表中的id为1的有三条数据，并且 `马花疼` 没有id进行标示\n* `柳白` 这条数据的age列的数据是3000，而人也不可能活到3000岁\n* `马运`  这条数据的math数学成绩是-5，而数学学得再不好也不可能出现负分\n\n* `柳青` 这条数据的english列（英文成绩）值为null，而成绩即使没考也得是0分\n\n针对上述数据问题，我们就可以从数据库层面在添加数据的时候进行限制，这个就是约束。\n\n### 1.1  概念\n\n* 约束是作用于表中列上的规则，用于限制加入表的数据\n\n  例如：我们可以给id列加约束，让其值不能重复，不能为null值。\n\n* 约束的存在保证了数据库中数据的正确性、有效性和完整性\n\n  添加约束可以在添加数据的时候就限制不正确的数据，年龄是3000，数学成绩是-5分这样无效的数据，继而保障数据的完整性。\n\n### 1.2  分类\n\n* **非空约束： 关键字是 NOT NULL**\n\n  保证列中所有的数据不能有null值。\n\n  例如：id列在添加 `马花疼` 这条数据时就不能添加成功。\n\n* **唯一约束：关键字是  UNIQUE**\n\n  保证列中所有数据各不相同。\n\n  例如：id列中三条数据的值都是1，这样的数据在添加时是绝对不允许的。\n\n* **主键约束： 关键字是  PRIMARY KEY**\n\n  主键是一行数据的唯一标识，要求非空且唯一。一般我们都会给没张表添加一个主键列用来唯一标识数据。\n\n  例如：上图表中id就可以作为主键，来标识每条数据。那么这样就要求数据中id的值不能重复，不能为null值。\n\n* **检查约束： 关键字是  CHECK** \n\n  保证列中的值满足某一条件。\n\n  例如：我们可以给age列添加一个范围，最低年龄可以设置为1，最大年龄就可以设置为300，这样的数据才更合理些。\n\n  > 注意：MySQL不支持检查约束。\n  >\n  > 这样是不是就没办法保证年龄在指定的范围内了？从数据库层面不能保证，以后可以在java代码中进行限制，一样也可以实现要求。\n\n* **默认约束： 关键字是   DEFAULT**\n\n  保存数据时，未指定值则采用默认值。\n\n  例如：我们在给english列添加该约束，指定默认值是0，这样在添加数据时没有指定具体值时就会采用默认给定的0。\n\n* **外键约束： 关键字是  FOREIGN KEY**\n\n  外键用来让两个表的数据之间建立链接，保证数据的一致性和完整性。\n\n  外键约束现在可能还不太好理解，后面我们会重点进行讲解。\n\n### 1.3  非空约束\n\n* 概念\n\n  非空约束用于保证列中所有数据不能有NULL值\n\n* 语法\n\n  * 添加约束\n\n    ```sql\n    -- 创建表时添加非空约束\n    CREATE TABLE 表名(\n       列名 数据类型 NOT NULL,\n       …\n    ); \n    \n    ```\n\n    ```sql\n    -- 建完表后添加非空约束\n    ALTER TABLE 表名 MODIFY 字段名 数据类型 NOT NULL;\n    ```\n\n  * 删除约束\n\n    ```sql\n    ALTER TABLE 表名 MODIFY 字段名 数据类型;\n    ```\n\n### 1.4  唯一约束\n\n* 概念\n\n  唯一约束用于保证列中所有数据各不相同\n\n* 语法\n\n  * 添加约束\n\n    ```sql\n    -- 创建表时添加唯一约束\n    CREATE TABLE 表名(\n       列名 数据类型 UNIQUE [AUTO_INCREMENT],\n       -- AUTO_INCREMENT: 当不指定值时自动增长\n       …\n    ); \n    CREATE TABLE 表名(\n       列名 数据类型,\n       …\n       [CONSTRAINT] [约束名称] UNIQUE(列名)\n    ); \n    ```\n\n    ```sql\n    -- 建完表后添加唯一约束\n    ALTER TABLE 表名 MODIFY 字段名 数据类型 UNIQUE;\n    ```\n\n  * 删除约束\n\n    ```sql\n    ALTER TABLE 表名 DROP INDEX 字段名;\n    ```\n\n### 1.5  主键约束\n\n* 概念\n\n  主键是一行数据的唯一标识，要求非空且唯一\n\n  一张表只能有一个主键\n\n* 语法\n\n  * 添加约束\n\n    ```sql\n    -- 创建表时添加主键约束\n    CREATE TABLE 表名(\n       列名 数据类型 PRIMARY KEY [AUTO_INCREMENT],\n       …\n    ); \n    CREATE TABLE 表名(\n       列名 数据类型,\n       [CONSTRAINT] [约束名称] PRIMARY KEY(列名)\n    ); \n    \n    ```\n\n    ```sql\n    -- 建完表后添加主键约束\n    ALTER TABLE 表名 ADD PRIMARY KEY(字段名);\n    ```\n\n  * 删除约束\n\n    ```sql\n    ALTER TABLE 表名 DROP PRIMARY KEY;\n    ```\n\n### 1.6  默认约束\n\n* 概念\n\n  保存数据时，未指定值则采用默认值\n\n* 语法\n\n  * 添加约束\n\n    ```sql\n    -- 创建表时添加默认约束\n    CREATE TABLE 表名(\n       列名 数据类型 DEFAULT 默认值,\n       …\n    ); \n    ```\n\n    ```sql\n    -- 建完表后添加默认约束\n    ALTER TABLE 表名 ALTER 列名 SET DEFAULT 默认值;\n    ```\n\n  * 删除约束\n\n    ```sql\n    ALTER TABLE 表名 ALTER 列名 DROP DEFAULT;\n    ```\n\n### 1.7  约束练习\n\n**根据需求，为表添加合适的约束**\n\n```sql\n-- 员工表\nCREATE TABLE emp (\n\tid INT,  -- 员工id，主键且自增长\n    ename VARCHAR(50), -- 员工姓名，非空且唯一\n    joindate DATE,  -- 入职日期，非空\n    salary DOUBLE(7,2),  -- 工资，非空\n    bonus DOUBLE(7,2)  -- 奖金，如果没有将近默认为0\n);\n```\n\n上面一定给出了具体的要求，我们可以根据要求创建这张表，并为每一列添加对应的约束。建表语句如下：\n\n```sql\nDROP TABLE IF EXISTS emp;\n\n-- 员工表\nCREATE TABLE emp (\n  id INT PRIMARY KEY, -- 员工id，主键且自增长\n  ename VARCHAR(50) NOT NULL UNIQUE, -- 员工姓名，非空并且唯一\n  joindate DATE NOT NULL , -- 入职日期，非空\n  salary DOUBLE(7,2) NOT NULL , -- 工资，非空\n  bonus DOUBLE(7,2) DEFAULT 0 -- 奖金，如果没有奖金默认为0\n);\n```\n\n通过上面语句可以创建带有约束的 `emp` 表，约束能不能发挥作用呢。接下来我们一一进行验证，先添加一条没有问题的数据\n\n```sql\nINSERT INTO emp(id,ename,joindate,salary,bonus) values(1,'张三','1999-11-11',8800,5000);\n```\n\n* **验证主键约束，非空且唯一**\n\n```sql\nINSERT INTO emp(id,ename,joindate,salary,bonus) values(null,'张三','1999-11-11',8800,5000);\n```\n\n执行结果如下：\n\n从上面的结果可以看到，字段 `id` 不能为null。那我们重新添加一条数据，如下：\n\n```sql\nINSERT INTO emp(id,ename,joindate,salary,bonus) values(1,'张三','1999-11-11',8800,5000);\n```\n\n执行结果如下：\n\n从上面结果可以看到，1这个值重复了。所以主键约束是用来限制数据非空且唯一的。那我们再添加一条符合要求的数据\n\n```sql\nINSERT INTO emp(id,ename,joindate,salary,bonus) values(2,'李四','1999-11-11',8800,5000);\n```\n\n执行结果如下：\n\n* **验证非空约束**\n\n```sql\nINSERT INTO emp(id,ename,joindate,salary,bonus) values(3,null,'1999-11-11',8800,5000);\n```\n\n执行结果如下：\n\n从上面结果可以看到，`ename` 字段的非空约束生效了。\n\n* **验证唯一约束**\n\n```sql\nINSERT INTO emp(id,ename,joindate,salary,bonus) values(3,'李四','1999-11-11',8800,5000);\n```\n\n执行结果如下：\n\n从上面结果可以看到，`ename` 字段的唯一约束生效了。\n\n* **验证默认约束**\n\n```sql\nINSERT INTO emp(id,ename,joindate,salary) values(3,'王五','1999-11-11',8800);\n```\n\n执行完上面语句后查询表中数据，如下图可以看到王五这条数据的bonus列就有了默认值0。\n\n==注意：默认约束只有在不给值时才会采用默认值。如果给了null，那值就是null值。==\n\n如下：\n\n```sql\nINSERT INTO emp(id,ename,joindate,salary,bonus) values(4,'赵六','1999-11-11',8800,null);\n```\n\n执行完上面语句后查询表中数据，如下图可以看到赵六这条数据的bonus列的值是null。\n\n* **验证自动增长： auto_increment  当列是数字类型 并且唯一约束**\n\n重新创建 `emp` 表，并给id列添加自动增长\n\n```sql\n-- 员工表\nCREATE TABLE emp (\n  id INT PRIMARY KEY auto_increment, -- 员工id，主键且自增长\n  ename VARCHAR(50) NOT NULL UNIQUE, -- 员工姓名，非空并且唯一\n  joindate DATE NOT NULL , -- 入职日期，非空\n  salary DOUBLE(7,2) NOT NULL , -- 工资，非空\n  bonus DOUBLE(7,2) DEFAULT 0 -- 奖金，如果没有奖金默认为0\n);\n```\n\n接下来给emp添加数据，分别验证不给id列添加值以及给id列添加null值，id列的值会不会自动增长：\n\n```sql\nINSERT INTO emp(ename,joindate,salary,bonus) values('赵六','1999-11-11',8800,null);\nINSERT INTO emp(id,ename,joindate,salary,bonus) values(null,'赵六2','1999-11-11',8800,null);\nINSERT INTO emp(id,ename,joindate,salary,bonus) values(null,'赵六3','1999-11-11',8800,null);\n```\n\n\n\n### 1.8  外键约束\n\n#### 1.8.1  概述\n\n外键用来让两个表的数据之间建立链接，保证数据的一致性和完整性。\n\n如何理解上面的概念呢？如下图有两张表，员工表和部门表：\n\n员工表中的dep_id字段是部门表的id字段关联，也就是说1号学生张三属于1号部门研发部的员工。现在我要删除1号部门，就会出现错误的数据（员工表中属于1号部门的数据）。而我们上面说的两张表的关系只是我们认为它们有关系，此时需要通过外键让这两张表产生数据库层面的关系，这样你要删除部门表中的1号部门的数据将无法删除。\n\n#### 1.8.2  语法\n\n* 添加外键约束\n\n```sql\n-- 创建表时添加外键约束\nCREATE TABLE 表名(\n   列名 数据类型,\n   …\n   [CONSTRAINT] [外键名称] FOREIGN KEY(外键列名) REFERENCES 主表(主表列名) \n); \n```\n\n```sql\n-- 建完表后添加外键约束\nALTER TABLE 表名 ADD CONSTRAINT 外键名称 FOREIGN KEY (外键字段名称) REFERENCES 主表名称(主表列名称);\n```\n\n* 删除外键约束\n\n```sql\nALTER TABLE 表名 DROP FOREIGN KEY 外键名称;\n```\n\n\n\n#### 1.8.3  练习\n\n根据上述语法创建员工表和部门表，并添加上外键约束：\n\n```sql\n-- 删除表\nDROP TABLE IF EXISTS emp;\nDROP TABLE IF EXISTS dept;\n\n-- 部门表\nCREATE TABLE dept(\n\tid int primary key auto_increment,\n\tdep_name varchar(20),\n\taddr varchar(20)\n);\n-- 员工表 \nCREATE TABLE emp(\n\tid int primary key auto_increment,\n\tname varchar(20),\n\tage int,\n\tdep_id int,\n\n\t-- 添加外键 dep_id,关联 dept 表的id主键\n\tCONSTRAINT fk_emp_dept FOREIGN KEY(dep_id) REFERENCES dept(id)\t\n);\n```\n\n添加数据\n\n```sql\n-- 添加 2 个部门\ninsert into dept(dep_name,addr) values\n('研发部','广州'),('销售部', '深圳');\n\n-- 添加员工,dep_id 表示员工所在的部门\nINSERT INTO emp (NAME, age, dep_id) VALUES \n('张三', 20, 1),\n('李四', 20, 1),\n('王五', 20, 1),\n('赵六', 20, 2),\n('孙七', 22, 2),\n('周八', 18, 2);\n```\n\n此时删除 `研发部` 这条数据，会发现无法删除。\n\n删除外键\n\n```sql\nalter table emp drop FOREIGN key fk_emp_dept;\n```\n\n重新添加外键\n\n```sql\nalter table emp add CONSTRAINT fk_emp_dept FOREIGN key(dep_id) REFERENCES dept(id);\n```\n\n\n\n## 2，数据库设计\n\n### 2.1  数据库设计简介\n\n* 软件的研发步骤\n\n* 数据库设计概念\n\n  * 数据库设计就是根据业务系统的具体需求，结合我们所选用的DBMS，为这个业务系统构造出最优的数据存储模型。\n  * 建立数据库中的==表结构==以及==表与表之间的关联关系==的过程。\n  * 有哪些表？表里有哪些字段？表和表之间有什么关系？\n\n* 数据库设计的步骤\n\n  * 需求分析（数据是什么? 数据具有哪些属性? 数据与属性的特点是什么）\n\n  * 逻辑分析（通过ER图对数据库进行逻辑建模，不需要考虑我们所选用的数据库管理系统）\n\n    如下图就是ER(Entity/Relation)图：\n\n  * 物理设计（根据数据库自身的特点把逻辑设计转换为物理设计）\n\n  * 维护设计（1.对新的需求进行建表；2.表优化）\n\n* 表关系\n\n  * 一对一\n\n    * 如：用户 和 用户详情\n    * 一对一关系多用于表拆分，将一个实体中经常使用的字段放一张表，不经常使用的字段放另一张表，用于提升查询性能\n\n    上图左边是用户的详细信息，而我们真正在展示用户信息时最长用的则是上图右边红框所示，所以我们会将详细信息查分成两周那个表。\n\n  * 一对多\n\n    * 如：部门 和 员工\n\n    * 一个部门对应多个员工，一个员工对应一个部门。如下图：\n\n  * 多对多\n\n    * 如：商品 和 订单\n\n    * 一个商品对应多个订单，一个订单包含多个商品。如下图：\n\n\n### 2.2  表关系(一对多)\n\n* 一对多\n\n  * 如：部门 和 员工\n  * 一个部门对应多个员工，一个员工对应一个部门。\n\n* 实现方式\n\n  ==在多的一方建立外键，指向一的一方的主键==\n\n* 案例\n\n  我们还是以 `员工表` 和 `部门表` 举例:\n\n  经过分析发现，员工表属于多的一方，而部门表属于一的一方，此时我们会在员工表中添加一列（dep_id），指向于部门表的主键（id）：\n\n  建表语句如下：\n\n  ```sql\n  -- 删除表\n  DROP TABLE IF EXISTS tb_emp;\n  DROP TABLE IF EXISTS tb_dept;\n  \n  -- 部门表\n  CREATE TABLE tb_dept(\n  \tid int primary key auto_increment,\n  \tdep_name varchar(20),\n  \taddr varchar(20)\n  );\n  -- 员工表 \n  CREATE TABLE tb_emp(\n  \tid int primary key auto_increment,\n  \tname varchar(20),\n  \tage int,\n  \tdep_id int,\n  \n  \t-- 添加外键 dep_id,关联 dept 表的id主键\n  \tCONSTRAINT fk_emp_dept FOREIGN KEY(dep_id) REFERENCES tb_dept(id)\t\n  );\n  ```\n\n  查看表结构模型图：\n\n\n### 2.3  表关系(多对多)\n\n* 多对多\n\n  * 如：商品 和 订单\n  * 一个商品对应多个订单，一个订单包含多个商品\n\n* 实现方式\n\n  ==建立第三张中间表，中间表至少包含两个外键，分别关联两方主键==\n\n* 案例\n\n  我们以 `订单表` 和 `商品表` 举例：\n\n  经过分析发现，订单表和商品表都属于多的一方，此时需要创建一个中间表，在中间表中添加订单表的外键和商品表的外键指向两张表的主键：\n\n  建表语句如下：\n\n  ```sql\n  -- 删除表\n  DROP TABLE IF EXISTS tb_order_goods;\n  DROP TABLE IF EXISTS tb_order;\n  DROP TABLE IF EXISTS tb_goods;\n  \n  -- 订单表\n  CREATE TABLE tb_order(\n  \tid int primary key auto_increment,\n  \tpayment double(10,2),\n  \tpayment_type TINYINT,\n  \tstatus TINYINT\n  );\n  \n  -- 商品表\n  CREATE TABLE tb_goods(\n  \tid int primary key auto_increment,\n  \ttitle varchar(100),\n  \tprice double(10,2)\n  );\n  \n  -- 订单商品中间表\n  CREATE TABLE tb_order_goods(\n  \tid int primary key auto_increment,\n  \torder_id int,\n  \tgoods_id int,\n  \tcount int\n  );\n  \n  -- 建完表后，添加外键\n  alter table tb_order_goods add CONSTRAINT fk_order_id FOREIGN key(order_id) REFERENCES tb_order(id);\n  alter table tb_order_goods add CONSTRAINT fk_goods_id FOREIGN key(goods_id) REFERENCES tb_goods(id);\n  ```\n\n  查看表结构模型图：\n\n\n### 2.4  表关系(一对一)\n\n* 一对一\n\n  * 如：用户 和 用户详情\n  * 一对一关系多用于表拆分，将一个实体中经常使用的字段放一张表，不经常使用的字段放另一张表，用于提升查询性能\n\n* 实现方式\n\n  ==在任意一方加入外键，关联另一方主键，并且设置外键为唯一(UNIQUE)==\n\n* 案例\n\n  我们以 `用户表` 举例：\n\n  而在真正使用过程中发现 id、photo、nickname、age、gender 字段比较常用，此时就可以将这张表查分成两张表。\n\n\n\n​\t\n\n​\t建表语句如下：\n\n```sql\ncreate table tb_user_desc (\n\tid int primary key auto_increment,\n\tcity varchar(20),\n\tedu varchar(10),\n\tincome int,\n\tstatus char(2),\n\tdes varchar(100)\n);\n\ncreate table tb_user (\n\tid int primary key auto_increment,\n\tphoto varchar(100),\n\tnickname varchar(50),\n\tage int,\n\tgender char(1),\n\tdesc_id int unique,\n\t-- 添加外键\n\tCONSTRAINT fk_user_desc FOREIGN KEY(desc_id) REFERENCES tb_user_desc(id)\t\n);\n```\n\n## 3，多表查询\n\n多表查询顾名思义就是从多张表中一次性的查询出我们想要的数据。我们通过具体的sql给他们演示，先准备环境\n\n```sql\nDROP TABLE IF EXISTS emp;\nDROP TABLE IF EXISTS dept;\n\n\n# 创建部门表\n\tCREATE TABLE dept(\n        did INT PRIMARY KEY AUTO_INCREMENT,\n        dname VARCHAR(20)\n    );\n\n\t# 创建员工表\n\tCREATE TABLE emp (\n        id INT PRIMARY KEY AUTO_INCREMENT,\n        NAME VARCHAR(10),\n        gender CHAR(1), -- 性别\n        salary DOUBLE, -- 工资\n        join_date DATE, -- 入职日期\n        dep_id INT,\n        FOREIGN KEY (dep_id) REFERENCES dept(did) -- 外键，关联部门表(部门表的主键)\n    );\n\t-- 添加部门数据\n\tINSERT INTO dept (dNAME) VALUES ('研发部'),('市场部'),('财务部'),('销售部');\n\t-- 添加员工数据\n\tINSERT INTO emp(NAME,gender,salary,join_date,dep_id) VALUES\n\t('孙悟空','男',7200,'2013-02-24',1),\n\t('猪八戒','男',3600,'2010-12-02',2),\n\t('唐僧','男',9000,'2008-08-08',2),\n\t('白骨精','女',5000,'2015-10-07',3),\n\t('蜘蛛精','女',4500,'2011-03-14',1),\n\t('小白龙','男',2500,'2011-02-14',null);\t\n```\n\n执行下面的多表查询语句\n\n```sql\nselect * from emp , dept;  -- 从emp和dept表中查询所有的字段数据\n```\n\n结果如下：\n\n从上面的结果我们看到有一些无效的数据，如 `孙悟空` 这个员工属于1号部门，但也同时关联的2、3、4号部门。所以我们要通过限制员工表中的 `dep_id` 字段的值和部门表 `did` 字段的值相等来消除这些无效的数据，\n\n```sql\nselect * from emp , dept where emp.dep_id = dept.did;\n```\n\n执行后结果如下：\n\n上面语句就是连接查询，那么多表查询都有哪些呢？\n\n* 连接查询 \n\n  * 内连接查询 ：相当于查询AB交集数据\n  * 外连接查询\n    * 左外连接查询 ：相当于查询A表所有数据和交集部门数据\n    * 右外连接查询 ： 相当于查询B表所有数据和交集部分数据\n\n* 子查询\n\n### 3.1  内连接查询\n\n* 语法\n\n```sql\n-- 隐式内连接\nSELECT 字段列表 FROM 表1,表2… WHERE 条件;\n\n-- 显示内连接\nSELECT 字段列表 FROM 表1 [INNER] JOIN 表2 ON 条件;\n```\n\n> 内连接相当于查询 A B 交集数据\n\n* 案例\n\n  * 隐式内连接\n\n    ```sql\n    SELECT\n    \t*\n    FROM\n    \temp,\n    \tdept\n    WHERE\n    \temp.dep_id = dept.did;\n    ```\n\n    执行上述语句结果如下：\n\n  * 查询 emp的 name， gender，dept表的dname\n\n    ```sql\n    SELECT\n    \temp. NAME,\n    \temp.gender,\n    \tdept.dname\n    FROM\n    \temp,\n    \tdept\n    WHERE\n    \temp.dep_id = dept.did;\n    ```\n\n    执行语句结果如下：\n\n    上面语句中使用表名指定字段所属有点麻烦，sql也支持给表指别名，上述语句可以改进为\n\n    ```sql\n    SELECT\n    \tt1. NAME,\n    \tt1.gender,\n    \tt2.dname\n    FROM\n    \temp t1,\n    \tdept t2\n    WHERE\n    \tt1.dep_id = t2.did;\n    ```\n\n  * 显式内连接\n\n    ```sql\n    select * from emp inner join dept on emp.dep_id = dept.did;\n    -- 上面语句中的inner可以省略，可以书写为如下语句\n    select * from emp  join dept on emp.dep_id = dept.did;\n    ```\n\n    执行结果如下：\n\n\n### 3.2  外连接查询\n\n* 语法\n\n  ```sql\n  -- 左外连接\n  SELECT 字段列表 FROM 表1 LEFT [OUTER] JOIN 表2 ON 条件;\n  \n  -- 右外连接\n  SELECT 字段列表 FROM 表1 RIGHT [OUTER] JOIN 表2 ON 条件;\n  ```\n\n  > 左外连接：相当于查询A表所有数据和交集部分数据\n  >\n  > 右外连接：相当于查询B表所有数据和交集部分数据\n\n* 案例\n\n  * 查询emp表所有数据和对应的部门信息（左外连接）\n\n    ```sql\n    select * from emp left join dept on emp.dep_id = dept.did;\n    ```\n\n    执行语句结果如下：\n\n    结果显示查询到了左表（emp）中所有的数据及两张表能关联的数据。\n\n  * 查询dept表所有数据和对应的员工信息（右外连接）\n\n    ```sql\n    select * from emp right join dept on emp.dep_id = dept.did;\n    ```\n\n    执行语句结果如下：\n\n    结果显示查询到了右表（dept）中所有的数据及两张表能关联的数据。\n\n    要查询出部门表中所有的数据，也可以通过左外连接实现，只需要将两个表的位置进行互换：\n\n    ```sql\n    select * from dept left join emp on emp.dep_id = dept.did;\n    ```\n\n    \n\n### 3.3  子查询\n\n* 概念\n\n  ==查询中嵌套查询，称嵌套查询为子查询。==\n\n  什么是查询中嵌套查询呢？我们通过一个例子来看：\n\n  **需求：查询工资高于猪八戒的员工信息。**\n\n  来实现这个需求，我们就可以通过二步实现，第一步：先查询出来 猪八戒的工资\n\n  ```sql\n  select salary from emp where name = '猪八戒'\n  ```\n\n   第二步：查询工资高于猪八戒的员工信息\n\n  ```sql\n  select * from emp where salary > 3600;\n  ```\n\n  第二步中的3600可以通过第一步的sql查询出来，所以将3600用第一步的sql语句进行替换\n\n  ```sql\n  select * from emp where salary > (select salary from emp where name = '猪八戒');\n  ```\n\n  这就是查询语句中嵌套查询语句。\n\n* 子查询根据查询结果不同，作用不同\n\n  * 子查询语句结果是单行单列，子查询语句作为条件值，使用 =  !=  >  <  等进行条件判断\n  * 子查询语句结果是多行单列，子查询语句作为条件值，使用 in 等关键字进行条件判断\n  * 子查询语句结果是多行多列，子查询语句作为虚拟表\n\n* 案例\n\n  * 查询 '财务部' 和 '市场部' 所有的员工信息\n\n    ```sql\n    -- 查询 '财务部' 或者 '市场部' 所有的员工的部门did\n    select did from dept where dname = '财务部' or dname = '市场部';\n    \n    select * from emp where dep_id in (select did from dept where dname = '财务部' or dname = '市场部');\n    ```\n\n  * 查询入职日期是 '2011-11-11' 之后的员工信息和部门信息\n\n    ```sql\n    -- 查询入职日期是 '2011-11-11' 之后的员工信息\n    select * from emp where join_date > '2011-11-11' ;\n    -- 将上面语句的结果作为虚拟表和dept表进行内连接查询\n    select * from (select * from emp where join_date > '2011-11-11' ) t1, dept where t1.dep_id = dept.did;\n    ```\n\n\n\n### 3.4  案例\n\n* 环境准备：\n\n```sql\nDROP TABLE IF EXISTS emp;\nDROP TABLE IF EXISTS dept;\nDROP TABLE IF EXISTS job;\nDROP TABLE IF EXISTS salarygrade;\n\n-- 部门表\nCREATE TABLE dept (\n  did INT PRIMARY KEY PRIMARY KEY, -- 部门id\n  dname VARCHAR(50), -- 部门名称\n  loc VARCHAR(50) -- 部门所在地\n);\n\n-- 职务表，职务名称，职务描述\nCREATE TABLE job (\n  id INT PRIMARY KEY,\n  jname VARCHAR(20),\n  description VARCHAR(50)\n);\n\n-- 员工表\nCREATE TABLE emp (\n  id INT PRIMARY KEY, -- 员工id\n  ename VARCHAR(50), -- 员工姓名\n  job_id INT, -- 职务id\n  mgr INT , -- 上级领导\n  joindate DATE, -- 入职日期\n  salary DECIMAL(7,2), -- 工资\n  bonus DECIMAL(7,2), -- 奖金\n  dept_id INT, -- 所在部门编号\n  CONSTRAINT emp_jobid_ref_job_id_fk FOREIGN KEY (job_id) REFERENCES job (id),\n  CONSTRAINT emp_deptid_ref_dept_id_fk FOREIGN KEY (dept_id) REFERENCES dept (id)\n);\n-- 工资等级表\nCREATE TABLE salarygrade (\n  grade INT PRIMARY KEY,   -- 级别\n  losalary INT,  -- 最低工资\n  hisalary INT -- 最高工资\n);\n\t\t\t\t\n-- 添加4个部门\nINSERT INTO dept(did,dname,loc) VALUES \n(10,'教研部','北京'),\n(20,'学工部','上海'),\n(30,'销售部','广州'),\n(40,'财务部','深圳');\n\n-- 添加4个职务\nINSERT INTO job (id, jname, description) VALUES\n(1, '董事长', '管理整个公司，接单'),\n(2, '经理', '管理部门员工'),\n(3, '销售员', '向客人推销产品'),\n(4, '文员', '使用办公软件');\n\n\n-- 添加员工\nINSERT INTO emp(id,ename,job_id,mgr,joindate,salary,bonus,dept_id) VALUES \n(1001,'孙悟空',4,1004,'2000-12-17','8000.00',NULL,20),\n(1002,'卢俊义',3,1006,'2001-02-20','16000.00','3000.00',30),\n(1003,'林冲',3,1006,'2001-02-22','12500.00','5000.00',30),\n(1004,'唐僧',2,1009,'2001-04-02','29750.00',NULL,20),\n(1005,'李逵',4,1006,'2001-09-28','12500.00','14000.00',30),\n(1006,'宋江',2,1009,'2001-05-01','28500.00',NULL,30),\n(1007,'刘备',2,1009,'2001-09-01','24500.00',NULL,10),\n(1008,'猪八戒',4,1004,'2007-04-19','30000.00',NULL,20),\n(1009,'罗贯中',1,NULL,'2001-11-17','50000.00',NULL,10),\n(1010,'吴用',3,1006,'2001-09-08','15000.00','0.00',30),\n(1011,'沙僧',4,1004,'2007-05-23','11000.00',NULL,20),\n(1012,'李逵',4,1006,'2001-12-03','9500.00',NULL,30),\n(1013,'小白龙',4,1004,'2001-12-03','30000.00',NULL,20),\n(1014,'关羽',4,1007,'2002-01-23','13000.00',NULL,10);\n\n\n-- 添加5个工资等级\nINSERT INTO salarygrade(grade,losalary,hisalary) VALUES \n(1,7000,12000),\n(2,12010,14000),\n(3,14010,20000),\n(4,20010,30000),\n(5,30010,99990);\n```\n\n* 需求\n\n  1. 查询所有员工信息。查询员工编号，员工姓名，工资，职务名称，职务描述\n\n     ```sql\n     /*\n     \t分析：\n     \t\t1. 员工编号，员工姓名，工资 信息在emp 员工表中\n     \t\t2. 职务名称，职务描述 信息在 job 职务表中\n     \t\t3. job 职务表 和 emp 员工表 是 一对多的关系 emp.job_id = job.id\n     */\n     -- 方式一 ：隐式内连接\n     SELECT\n     \temp.id,\n     \temp.ename,\n     \temp.salary,\n     \tjob.jname,\n     \tjob.description\n     FROM\n     \temp,\n     \tjob\n     WHERE\n     \temp.job_id = job.id;\n     \n     -- 方式二 ：显式内连接\n     SELECT\n     \temp.id,\n     \temp.ename,\n     \temp.salary,\n     \tjob.jname,\n     \tjob.description\n     FROM\n     \temp\n     INNER JOIN job ON emp.job_id = job.id;\n     ```\n\n  2. 查询员工编号，员工姓名，工资，职务名称，职务描述，部门名称，部门位置\n\n     ```sql\n     /*\n     \t分析：\n     \t\t1. 员工编号，员工姓名，工资 信息在emp 员工表中\n     \t\t2. 职务名称，职务描述 信息在 job 职务表中\n     \t\t3. job 职务表 和 emp 员工表 是 一对多的关系 emp.job_id = job.id\n     \n     \t\t4. 部门名称，部门位置 来自于 部门表 dept\n     \t\t5. dept 和 emp 一对多关系 dept.id = emp.dept_id\n     */\n     \n     -- 方式一 ：隐式内连接\n     SELECT\n     \temp.id,\n     \temp.ename,\n     \temp.salary,\n     \tjob.jname,\n     \tjob.description,\n     \tdept.dname,\n     \tdept.loc\n     FROM\n     \temp,\n     \tjob,\n     \tdept\n     WHERE\n     \temp.job_id = job.id\n     \tand dept.id = emp.dept_id\n     ;\n     \n     -- 方式二 ：显式内连接\n     SELECT\n     \temp.id,\n     \temp.ename,\n     \temp.salary,\n     \tjob.jname,\n     \tjob.description,\n     \tdept.dname,\n     \tdept.loc\n     FROM\n     \temp\n     INNER JOIN job ON emp.job_id = job.id\n     INNER JOIN dept ON dept.id = emp.dept_id\n     ```\n\n  3. 查询员工姓名，工资，工资等级\n\n     ```sql\n     /*\n     \t分析：\n     \t\t1. 员工姓名，工资 信息在emp 员工表中\n     \t\t2. 工资等级 信息在 salarygrade 工资等级表中\n     \t\t3. emp.salary >= salarygrade.losalary  and emp.salary <= salarygrade.hisalary\n     */\n     SELECT\n     \temp.ename,\n     \temp.salary,\n     \tt2.*\n     FROM\n     \temp,\n     \tsalarygrade t2\n     WHERE\n     \temp.salary >= t2.losalary\n     AND emp.salary <= t2.hisalary\n     ```\n\n  4. 查询员工姓名，工资，职务名称，职务描述，部门名称，部门位置，工资等级\n\n     ```sql\n     /*\n     \t分析：\n     \t\t1. 员工编号，员工姓名，工资 信息在emp 员工表中\n     \t\t2. 职务名称，职务描述 信息在 job 职务表中\n     \t\t3. job 职务表 和 emp 员工表 是 一对多的关系 emp.job_id = job.id\n     \n     \t\t4. 部门名称，部门位置 来自于 部门表 dept\n     \t\t5. dept 和 emp 一对多关系 dept.id = emp.dept_id\n     \t\t6. 工资等级 信息在 salarygrade 工资等级表中\n     \t\t7. emp.salary >= salarygrade.losalary  and emp.salary <= salarygrade.hisalary\n     */\n     SELECT\n     \temp.id,\n     \temp.ename,\n     \temp.salary,\n     \tjob.jname,\n     \tjob.description,\n     \tdept.dname,\n     \tdept.loc,\n     \tt2.grade\n     FROM\n     \temp\n     INNER JOIN job ON emp.job_id = job.id\n     INNER JOIN dept ON dept.id = emp.dept_id\n     INNER JOIN salarygrade t2 ON emp.salary BETWEEN t2.losalary and t2.hisalary;\n     ```\n\n  5. 查询出部门编号、部门名称、部门位置、部门人数\n\n     ```sql\n     /*\n     \t分析：\n     \t\t1. 部门编号、部门名称、部门位置 来自于部门 dept 表\n     \t\t2. 部门人数: 在emp表中 按照dept_id 进行分组，然后count(*)统计数量\n     \t\t3. 使用子查询，让部门表和分组后的表进行内连接\n     */\n     -- 根据部门id分组查询每一个部门id和员工数\n     select dept_id, count(*) from emp group by dept_id;\n     \n     SELECT\n     \tdept.id,\n     \tdept.dname,\n     \tdept.loc,\n     \tt1.count\n     FROM\n     \tdept,\n     \t(\n     \t\tSELECT\n     \t\t\tdept_id,\n     \t\t\tcount(*) count\n     \t\tFROM\n     \t\t\temp\n     \t\tGROUP BY\n     \t\t\tdept_id\n     \t) t1\n     WHERE\n     \tdept.id = t1.dept_id\n     ```\n\n     \n\n## 4，事务\n\n### 4.1  概述\n\n> 数据库的事务（Transaction）是一种机制、一个操作序列，包含了==一组数据库操作命令==。\n>\n> 事务把所有的命令作为一个整体一起向系统提交或撤销操作请求，即这一组数据库命令==要么同时成功，要么同时失败==。\n>\n> 事务是一个不可分割的工作逻辑单元。\n\n这些概念不好理解，接下来举例说明，如下图有一张表\n\n张三和李四账户中各有100块钱，现李四需要转换500块钱给张三，具体的转账操作为\n\n* 第一步：查询李四账户余额\n* 第二步：从李四账户金额 -500\n* 第三步：给张三账户金额 +500\n\n现在假设在转账过程中第二步完成后出现了异常第三步没有执行，就会造成李四账户金额少了500，而张三金额并没有多500；这样的系统是有问题的。如果解决呢？使用事务可以解决上述问题\n\n从上图可以看到在转账前开启事务，如果出现了异常回滚事务，三步正常执行就提交事务，这样就可以完美解决问题。\n\n### 4.2  语法\n\n* 开启事务\n\n  ```sql\n  START TRANSACTION;\n  或者  \n  BEGIN;\n  ```\n\n* 提交事务\n\n  ```sql\n  commit;\n  ```\n\n* 回滚事务\n\n  ```sql\n  rollback;\n  ```\n\n  \n\n### 4.3  代码验证\n\n* 环境准备\n\n  ```sql\n  DROP TABLE IF EXISTS account;\n  \n  -- 创建账户表\n  CREATE TABLE account(\n  \tid int PRIMARY KEY auto_increment,\n  \tname varchar(10),\n  \tmoney double(10,2)\n  );\n  \n  -- 添加数据\n  INSERT INTO account(name,money) values('张三',1000),('李四',1000);\n  ```\n\n  \n\n* 不加事务演示问题\n\n  ```sql\n  -- 转账操作\n  -- 1. 查询李四账户金额是否大于500\n  \n  -- 2. 李四账户 -500\n  UPDATE account set money = money - 500 where name = '李四';\n  \n  出现异常了...  -- 此处不是注释，在整体执行时会出问题，后面的sql则不执行\n  -- 3. 张三账户 +500\n  UPDATE account set money = money + 500 where name = '张三';\n  ```\n\n  整体执行结果肯定会出问题，我们查询账户表中数据，发现李四账户少了500。\n\n* 添加事务sql如下：\n\n  ```sql\n  -- 开启事务\n  BEGIN;\n  -- 转账操作\n  -- 1. 查询李四账户金额是否大于500\n  \n  -- 2. 李四账户 -500\n  UPDATE account set money = money - 500 where name = '李四';\n  \n  出现异常了...  -- 此处不是注释，在整体执行时会出问题，后面的sql则不执行\n  -- 3. 张三账户 +500\n  UPDATE account set money = money + 500 where name = '张三';\n  \n  -- 提交事务\n  COMMIT;\n  \n  -- 回滚事务\n  ROLLBACK;\n  ```\n\n  上面sql中的执行成功进选择执行提交事务，而出现问题则执行回滚事务的语句。以后我们肯定不可能这样操作，而是在java中进行操作，在java中可以抓取异常，没出现异常提交事务，出现异常回滚事务。\n\n### 4.4  事务的四大特征\n\n* 原子性（Atomicity）: 事务是不可分割的最小操作单位，要么同时成功，要么同时失败\n\n* 一致性（Consistency） :事务完成时，必须使所有的数据都保持一致状态\n\n* 隔离性（Isolation） :多个事务之间，操作的可见性\n\n* 持久性（Durability） :事务一旦提交或回滚，它对数据库中的数据的改变就是永久的\n\n> ==说明：==\n>\n> mysql中事务是自动提交的。\n>\n> 也就是说我们不添加事务执行sql语句，语句执行完毕会自动的提交事务。\n>\n> 可以通过下面语句查询默认提交方式：\n>\n> ```java\n> SELECT @@autocommit;\n> ```\n>\n> 查询到的结果是1 则表示自动提交，结果是0表示手动提交。当然也可以通过下面语句修改提交方式\n>\n> ```sql\n> set @@autocommit = 0;\n> ```\n\n","slug":"Mysql","published":1,"updated":"2022-11-22T07:41:31.486Z","comments":1,"layout":"post","photos":[],"link":"","_id":"claryulc8000d5ojrhcmgdg5x","content":"<h2 id=\"MySQL基础\"><a href=\"#MySQL基础\" class=\"headerlink\" title=\"MySQL基础\"></a>MySQL基础</h2><blockquote>\n<p> – 笔记来自B站黑马程序员的javaweb课程</p>\n</blockquote>\n<p><strong>今日目标：</strong></p>\n<blockquote>\n<ul>\n<li>完成MySQL的安装及登陆基本操作</li>\n<li>能通过SQL对数据库进行CRUD</li>\n<li>能通过SQL对表进行CRUD</li>\n<li>能通过SQL对数据进行CRUD</li>\n</ul>\n</blockquote>\n<h2 id=\"1，数据库相关概念\"><a href=\"#1，数据库相关概念\" class=\"headerlink\" title=\"1，数据库相关概念\"></a>1，数据库相关概念</h2><p>以前我们做系统，数据持久化的存储采用的是文件存储。存储到文件中可以达到系统关闭数据不会丢失的效果，当然文件存储也有它的弊端。</p>\n<p>假设在文件中存储以下的数据：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">姓名\t年龄\t性别\t住址</span><br><span class=\"line\">张三\t23\t男\t北京西三旗</span><br><span class=\"line\">李四\t24\t女\t北京西二旗</span><br><span class=\"line\">王五\t25\t男\t西安软件新城</span><br></pre></td></tr></table></figure>\n\n<p>现要修改李四这条数据的性别数据改为男，我们现学习的IO技术可以通过将所有的数据读取到内存中，然后进行修改再存到该文件中。通过这种方式操作存在很大问题，现在只有三条数据，如果文件中存储1T的数据，那么就会发现内存根本就存储不了。</p>\n<p>现需要既能持久化存储数据，也要能避免上述问题的技术使用在我们的系统中。数据库就是这样的一门技术。</p>\n<h3 id=\"1-1-数据库\"><a href=\"#1-1-数据库\" class=\"headerlink\" title=\"1.1  数据库\"></a>1.1  数据库</h3><ul>\n<li><p>存储和管理数据的仓库，数据是有组织的进行存储。</p>\n</li>\n<li><p>数据库英文名是 DataBase，简称DB。</p>\n</li>\n</ul>\n<p>数据库就是将数据存储在硬盘上，可以达到持久化存储的效果。那又是如何解决上述问题的？使用数据库管理系统。</p>\n<h3 id=\"1-2-数据库管理系统\"><a href=\"#1-2-数据库管理系统\" class=\"headerlink\" title=\"1.2  数据库管理系统\"></a>1.2  数据库管理系统</h3><ul>\n<li>管理数据库的大型软件</li>\n<li>英文：DataBase Management System，简称 DBMS</li>\n</ul>\n<p>在电脑上安装了数据库管理系统后，就可以通过数据库管理系统创建数据库来存储数据，也可以通过该系统对数据库中的数据进行数据的增删改查相关的操作。我们平时说的MySQL数据库其实是MySQL数据库管理系统。</p>\n<p>通过上面的描述，大家应该已经知道了 <code>数据库管理系统</code> 和 <code>数据库</code> 的关系。那么有有哪些常见的数据库管理系统呢？</p>\n<h3 id=\"1-3-常见的数据库管理系统\"><a href=\"#1-3-常见的数据库管理系统\" class=\"headerlink\" title=\"1.3  常见的数据库管理系统\"></a>1.3  常见的数据库管理系统</h3><p>接下来对上面列举的数据库管理系统进行简单的介绍：</p>\n<ul>\n<li>Oracle：收费的大型数据库，Oracle 公司的产品</li>\n<li>MySQL： 开源免费的中小型数据库。后来 Sun公司收购了 MySQL，而 Sun 公司又被 Oracle 收购</li>\n<li>SQL Server：MicroSoft 公司收费的中型的数据库。C#、.net 等语言常使用</li>\n<li>PostgreSQL：开源免费中小型的数据库</li>\n<li>DB2：IBM 公司的大型收费数据库产品</li>\n<li>SQLite：嵌入式的微型数据库。如：作为 Android 内置数据库</li>\n<li>MariaDB：开源免费中小型的数据库</li>\n</ul>\n<p>我们课程上学习的是MySQL数据库管理系统，PostgreSQL在一些公司也有使用，此时大家肯定会想以后在公司中如果使用我们没有学习过程的PostgreSQL数据库管理系统怎么办？这点大家大可不必担心，如下图所示：</p>\n<p>我们可以通过数据库管理系统操作数据库，对数据库中的数据进行增删改查操作，而怎么样让用户跟数据库管理系统打交道呢？就可以通过一门编程语言（SQL）来实现。</p>\n<h3 id=\"1-4-SQL\"><a href=\"#1-4-SQL\" class=\"headerlink\" title=\"1.4  SQL\"></a>1.4  SQL</h3><ul>\n<li>英文：Structured Query Language，简称 SQL，结构化查询语言</li>\n<li>操作关系型数据库的编程语言</li>\n<li>定义操作所有关系型数据库的统一标准，可以使用SQL操作所有的关系型数据库管理系统，以后工作中如果使用到了其他的数据库管理系统，也同样的使用SQL来操作。</li>\n</ul>\n<h2 id=\"2，MySQL\"><a href=\"#2，MySQL\" class=\"headerlink\" title=\"2，MySQL\"></a>2，MySQL</h2><h3 id=\"2-1-MySQL安装\"><a href=\"#2-1-MySQL安装\" class=\"headerlink\" title=\"2.1  MySQL安装\"></a>2.1  MySQL安装</h3><blockquote>\n<p><strong>安装环境:Win10 64位</strong><br><strong>软件版本:MySQL 5.7.24 解压版</strong></p>\n</blockquote>\n<h4 id=\"2-1-1-下载\"><a href=\"#2-1-1-下载\" class=\"headerlink\" title=\"2.1.1  下载\"></a>2.1.1  下载</h4><p><a href=\"https://downloads.mysql.com/archives/community/\">https://downloads.mysql.com/archives/community/</a></p>\n<p>点开上面的链接就能看到如下界面：</p>\n<p>选择选择和自己<strong>系统位数</strong>相对应的版本点击右边的<code>Download</code>，此时会进到另一个页面，同样在接近页面底部的地方找到如下图所示的位置：</p>\n<p>不用理会上面的登录和注册按钮，直接点击 <code>No thanks, just start my download.</code> 就可以下载。</p>\n<h4 id=\"2-1-2-安装-解压\"><a href=\"#2-1-2-安装-解压\" class=\"headerlink\" title=\"2.1.2  安装(解压)\"></a>2.1.2  安装(解压)</h4><p>下载完成后我们得到的是一个压缩包，将其解压，我们就可以得到MySQL 5.7.24的软件本体了(就是一个文件夹)，我们可以把它放在你想安装的位置。</p>\n<h3 id=\"2-2-MySQL卸载\"><a href=\"#2-2-MySQL卸载\" class=\"headerlink\" title=\"2.2  MySQL卸载\"></a>2.2  MySQL卸载</h3><p>如果你想卸载MySQL，也很简单。</p>\n<p>右键开始菜单，选择<code>命令提示符(管理员)</code>，打开黑框。</p>\n<ol>\n<li>敲入<code>net stop mysql</code>，回车。</li>\n</ol>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">net stop mysql</span><br></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li>再敲入<code>mysqld -remove mysql</code>，回车。</li>\n</ol>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysqld -remove mysql</span><br></pre></td></tr></table></figure>\n\n<ol start=\"3\">\n<li>最后删除MySQL目录及相关的环境变量。</li>\n</ol>\n<p><strong>至此，MySQL卸载完成！</strong></p>\n<h3 id=\"2-3-MySQL配置\"><a href=\"#2-3-MySQL配置\" class=\"headerlink\" title=\"2.3  MySQL配置\"></a>2.3  MySQL配置</h3><h4 id=\"2-3-1-添加环境变量\"><a href=\"#2-3-1-添加环境变量\" class=\"headerlink\" title=\"2.3.1  添加环境变量\"></a>2.3.1  添加环境变量</h4><blockquote>\n<p>环境变量里面有很多选项，这里我们只用到<code>Path</code>这个参数。为什么在初始化的开始要添加环境变量呢？<br>在黑框(即CMD)中输入一个可执行程序的名字，Windows会先在环境变量中的<code>Path</code>所指的路径中寻找一遍，如果找到了就直接执行，没找到就在当前工作目录找，如果还没找到，就报错。我们添加环境变量的目的就是能够在任意一个黑框直接调用MySQL中的相关程序而不用总是修改工作目录，大大简化了操作。</p>\n</blockquote>\n<p>右键<code>此电脑</code>→<code>属性</code>，点击<code>高级系统设置</code></p>\n<p>点击<code>环境变量</code></p>\n<p>在<code>系统变量</code>中新建MYSQL_HOME</p>\n<p>在<code>系统变量</code>中找到并<strong>双击</strong><code>Path</code></p>\n<p>点击<code>新建</code></p>\n<p>最后点击确定。</p>\n<p><strong>如何验证是否添加成功？</strong></p>\n<p>右键开始菜单(就是屏幕左下角)，选择<code>命令提示符(管理员)</code>，打开黑框，敲入<code>mysql</code>，回车。<br>如果提示<code>Can&#39;t connect to MySQL server on &#39;localhost&#39;</code>则证明添加成功；<br>如果提示<code>mysql不是内部或外部命令，也不是可运行的程序或批处理文件</code>则表示添加添加失败，请重新检查步骤并重试。</p>\n<h4 id=\"2-3-2-新建配置文件\"><a href=\"#2-3-2-新建配置文件\" class=\"headerlink\" title=\"2.3.2  新建配置文件\"></a>2.3.2  新建配置文件</h4><p>新建一个文本文件，内容如下：</p>\n<figure class=\"highlight properties\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">[mysql]</span></span><br><span class=\"line\"><span class=\"attr\">default-character-set</span>=<span class=\"string\">utf8</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">[mysqld]</span></span><br><span class=\"line\"><span class=\"attr\">character-set-server</span>=<span class=\"string\">utf8</span></span><br><span class=\"line\"><span class=\"attr\">default-storage-engine</span>=<span class=\"string\">INNODB</span></span><br><span class=\"line\"><span class=\"attr\">sql_mode</span>=<span class=\"string\">STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION</span></span><br></pre></td></tr></table></figure>\n\n<p>把上面的文本文件另存为，在保存类型里选<code>所有文件 (*.*)</code>，文件名叫<code>my.ini</code>，存放的路径为MySQL的<code>根目录</code>(例如我的是<code>D:\\software\\mysql-5.7.24-winx64</code>,根据自己的MySQL目录位置修改)。</p>\n<p>上面代码意思就是配置数据库的默认编码集为utf-8和默认存储引擎为INNODB。</p>\n<h4 id=\"2-3-3-初始化MySQL\"><a href=\"#2-3-3-初始化MySQL\" class=\"headerlink\" title=\"2.3.3  初始化MySQL\"></a>2.3.3  初始化MySQL</h4><p>在刚才的黑框中敲入<code>mysqld --initialize-insecure</code>，回车，稍微等待一会，如果出现没有出现报错信息(如下图)则证明data目录初始化没有问题，此时再查看MySQL目录下已经有data目录生成。</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysqld --initialize-insecure</span><br></pre></td></tr></table></figure>\n\n\n\n<p>tips：如果出现如下错误</p>\n<p>是由于权限不足导致的，去<code>C:\\Windows\\System32</code> 下以管理员方式运行 cmd.exe</p>\n<p><img src=\"H:\\BaiDuWangPan\\JavaWeb\\day01-MySQL基础\\ppt\\assets\\image-20201109140001186.png\" alt=\"image-20201109140001186\"></p>\n<h4 id=\"2-3-4-注册MySQL服务\"><a href=\"#2-3-4-注册MySQL服务\" class=\"headerlink\" title=\"2.3.4  注册MySQL服务\"></a>2.3.4  注册MySQL服务</h4><p>在黑框里敲入<code>mysqld -install</code>，回车。</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysqld -install</span><br></pre></td></tr></table></figure>\n\n<p>现在你的计算机上已经安装好了MySQL服务了。</p>\n<p>MySQL服务器</p>\n<h4 id=\"2-3-5-启动MySQL服务\"><a href=\"#2-3-5-启动MySQL服务\" class=\"headerlink\" title=\"2.3.5  启动MySQL服务\"></a>2.3.5  启动MySQL服务</h4><p>在黑框里敲入<code>net start mysql</code>，回车。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">net start mysql  <span class=\"comment\">// 启动mysql服务</span></span><br><span class=\"line\">    </span><br><span class=\"line\">net stop mysql  <span class=\"comment\">// 停止mysql服务</span></span><br></pre></td></tr></table></figure>\n\n\n\n<h4 id=\"2-3-6-修改默认账户密码\"><a href=\"#2-3-6-修改默认账户密码\" class=\"headerlink\" title=\"2.3.6  修改默认账户密码\"></a>2.3.6  修改默认账户密码</h4><p>在黑框里敲入<code>mysqladmin -u root password 1234</code>，这里的<code>1234</code>就是指默认管理员(即root账户)的密码，可以自行修改成你喜欢的。</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysqladmin -u root password 1234</span><br></pre></td></tr></table></figure>\n\n<p><strong>至此，MySQL 5.7 解压版安装完毕！</strong></p>\n<h3 id=\"2-4-MySQL登陆和退出\"><a href=\"#2-4-MySQL登陆和退出\" class=\"headerlink\" title=\"2.4  MySQL登陆和退出\"></a>2.4  MySQL登陆和退出</h3><h4 id=\"2-4-1-登陆\"><a href=\"#2-4-1-登陆\" class=\"headerlink\" title=\"2.4.1  登陆\"></a>2.4.1  登陆</h4><p>右键开始菜单，选择<code>命令提示符</code>，打开黑框。<br>在黑框中输入，<code>mysql -uroot -p1234</code>，回车，出现下图且左下角为<code>mysql&gt;</code>，则登录成功。</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql -uroot -p1234</span><br></pre></td></tr></table></figure>\n\n<p><strong>到这里你就可以开始你的MySQL之旅了！</strong></p>\n<p>登陆参数：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql -u用户名 -p密码 -h要连接的mysql服务器的ip地址(默认127.0.0.1) -P端口号(默认3306)</span><br></pre></td></tr></table></figure>\n\n\n\n<h4 id=\"2-4-2-退出\"><a href=\"#2-4-2-退出\" class=\"headerlink\" title=\"2.4.2  退出\"></a>2.4.2  退出</h4><p>退出mysql：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">exit</span><br><span class=\"line\">quit</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"2-5-MySQL数据模型\"><a href=\"#2-5-MySQL数据模型\" class=\"headerlink\" title=\"2.5  MySQL数据模型\"></a>2.5  MySQL数据模型</h3><p><strong>关系型数据库：</strong></p>\n<blockquote>\n<p>关系型数据库是建立在关系模型基础上的数据库，简单说，关系型数据库是由多张能互相连接的 二维表 组成的数据库</p>\n</blockquote>\n<p>如下图，<code>订单信息表</code> 和 <code>客户信息表</code> 都是有行有列二维表我们将这样的称为关系型数据库。</p>\n<p>接下来看关系型数据库的优点：</p>\n<ul>\n<li>都是使用表结构，格式一致，易于维护。</li>\n<li>使用通用的 SQL 语言操作，使用方便，可用于复杂查询。<ul>\n<li>关系型数据库都可以通过SQL进行操作，所以使用方便。</li>\n<li>复杂查询。现在需要查询001号订单数据，我们可以看到该订单是1号客户的订单，而1号订单是李聪这个客户。以后也可以在一张表中进行统计分析等操作。</li>\n</ul>\n</li>\n<li>数据存储在磁盘中，安全。</li>\n</ul>\n<p><strong>数据模型：</strong></p>\n<p>如上图，我们通过客户端可以通过数据库管理系统创建数据库，在数据库中创建表，在表中添加数据。创建的每一个数据库对应到磁盘上都是一个文件夹。比如可以通过SQL语句创建一个数据库（数据库名称为db1），语句如下。该语句咱们后面会学习。</p>\n<p>我们可以在数据库安装目录下的data目录下看到多了一个 <code>db1</code> 的文件夹。所以，<strong>在MySQL中一个数据库对应到磁盘上的一个文件夹。</strong></p>\n<p>而一个数据库下可以创建多张表，我们到MySQL中自带的mysql数据库的文件夹目录下：</p>\n<p>而上图中右边的 <code>db.frm</code> 是表文件，<code>db.MYD</code> 是数据文件，通过这两个文件就可以查询到数据展示成二维表的效果。</p>\n<p><strong>小结：</strong></p>\n<ul>\n<li>MySQL中可以创建多个数据库，每个数据库对应到磁盘上的一个文件夹</li>\n<li>在每个数据库中可以创建多个表，每张都对应到磁盘上一个 frm 文件</li>\n<li>每张表可以存储多条数据，数据会被存储到磁盘中  MYD 文件中</li>\n</ul>\n<h2 id=\"3，SQL概述\"><a href=\"#3，SQL概述\" class=\"headerlink\" title=\"3，SQL概述\"></a>3，SQL概述</h2><p>了解了数据模型后，接下来我们就学习SQL语句，通过SQL语句对数据库、表、数据进行增删改查操作。 </p>\n<h3 id=\"3-1-SQL简介\"><a href=\"#3-1-SQL简介\" class=\"headerlink\" title=\"3.1  SQL简介\"></a>3.1  SQL简介</h3><ul>\n<li>英文：Structured Query Language，简称 SQL</li>\n<li>结构化查询语言，一门操作关系型数据库的编程语言</li>\n<li>定义操作所有关系型数据库的统一标准</li>\n<li>对于同一个需求，每一种数据库操作的方式可能会存在一些不一样的地方，我们称为“方言”</li>\n</ul>\n<h3 id=\"3-2-通用语法\"><a href=\"#3-2-通用语法\" class=\"headerlink\" title=\"3.2  通用语法\"></a>3.2  通用语法</h3><ul>\n<li><p>SQL 语句可以单行或多行书写，以分号结尾。 </p>\n<p>如上，以分号结尾才是一个完整的sql语句。</p>\n</li>\n<li><p>MySQL 数据库的 SQL 语句不区分大小写，关键字建议使用大写。</p>\n<p>同样的一条sql语句写成下图的样子，一样可以运行处结果。</p>\n</li>\n<li><p>注释</p>\n<ul>\n<li><p>单行注释: – 注释内容 或 #注释内容(MySQL 特有)  </p>\n<blockquote>\n<p>注意：使用– 添加单行注释时，–后面一定要加空格，而#没有要求。</p>\n</blockquote>\n</li>\n<li><p>多行注释: /* 注释 */</p>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"3-3-SQL分类\"><a href=\"#3-3-SQL分类\" class=\"headerlink\" title=\"3.3  SQL分类\"></a>3.3  SQL分类</h3><ul>\n<li><p>DDL(Data Definition Language) ： 数据定义语言，用来定义数据库对象：数据库，表，列等</p>\n<p>DDL简单理解就是用来操作数据库，表等</p>\n</li>\n<li><p>DML(Data Manipulation Language) 数据操作语言，用来对数据库中表的数据进行增删改</p>\n<p>DML简单理解就对表中数据进行增删改</p>\n</li>\n<li><p>DQL(Data Query Language) 数据查询语言，用来查询数据库中表的记录(数据)</p>\n<p>DQL简单理解就是对数据进行查询操作。从数据库表中查询到我们想要的数据。</p>\n</li>\n<li><p>DCL(Data Control Language) 数据控制语言，用来定义数据库的访问权限和安全级别，及创建用户</p>\n<p>DML简单理解就是对数据库进行权限控制。比如我让某一个数据库表只能让某一个用户进行操作等。</p>\n</li>\n</ul>\n<blockquote>\n<p>注意： 以后我们最常操作的是 <code>DML</code> 和 <code>DQL</code>  ，因为我们开发中最常操作的就是数据。</p>\n</blockquote>\n<h2 id=\"4，DDL-操作数据库\"><a href=\"#4，DDL-操作数据库\" class=\"headerlink\" title=\"4，DDL:操作数据库\"></a>4，DDL:操作数据库</h2><p>我们先来学习DDL来操作数据库。而操作数据库主要就是对数据库的增删查操作。</p>\n<h3 id=\"4-1-查询\"><a href=\"#4-1-查询\" class=\"headerlink\" title=\"4.1  查询\"></a>4.1  查询</h3><p>查询所有的数据库</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SHOW</span> DATABASES;</span><br></pre></td></tr></table></figure>\n\n<p>运行上面语句效果如下：</p>\n<p>上述查询到的是的这些数据库是mysql安装好自带的数据库，我们以后不要操作这些数据库。</p>\n<h3 id=\"4-2-创建数据库\"><a href=\"#4-2-创建数据库\" class=\"headerlink\" title=\"4.2  创建数据库\"></a>4.2  创建数据库</h3><ul>\n<li><strong>创建数据库</strong>：</li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">CREATE</span> DATABASE 数据库名称;</span><br></pre></td></tr></table></figure>\n\n<p>运行语句效果如下：</p>\n<p>而在创建数据库的时候，我并不知道db1数据库有没有创建，直接再次创建名为db1的数据库就会出现错误。</p>\n<p>为了避免上面的错误，在创建数据库的时候先做判断，如果不存在再创建。</p>\n<ul>\n<li><strong>创建数据库(判断，如果不存在则创建)</strong></li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">CREATE</span> DATABASE IF <span class=\"keyword\">NOT</span> <span class=\"keyword\">EXISTS</span> 数据库名称;</span><br></pre></td></tr></table></figure>\n\n<p>运行语句效果如下：</p>\n<p>从上面的效果可以看到虽然db1数据库已经存在，再创建db1也没有报错，而创建db2数据库则创建成功。</p>\n<h3 id=\"4-3-删除数据库\"><a href=\"#4-3-删除数据库\" class=\"headerlink\" title=\"4.3  删除数据库\"></a>4.3  删除数据库</h3><ul>\n<li><strong>删除数据库</strong></li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">DROP</span> DATABASE 数据库名称;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><strong>删除数据库(判断，如果存在则删除)</strong></li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">DROP</span> DATABASE IF <span class=\"keyword\">EXISTS</span> 数据库名称;</span><br></pre></td></tr></table></figure>\n\n<p>运行语句效果如下：</p>\n<h3 id=\"4-4-使用数据库\"><a href=\"#4-4-使用数据库\" class=\"headerlink\" title=\"4.4  使用数据库\"></a>4.4  使用数据库</h3><p>数据库创建好了，要在数据库中创建表，得先明确在哪儿个数据库中操作，此时就需要使用数据库。</p>\n<ul>\n<li><strong>使用数据库</strong></li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">USE 数据库名称;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><strong>查看当前使用的数据库</strong></li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> DATABASE();</span><br></pre></td></tr></table></figure>\n\n<p>运行语句效果如下：</p>\n<h2 id=\"5，DDL-操作表\"><a href=\"#5，DDL-操作表\" class=\"headerlink\" title=\"5，DDL:操作表\"></a>5，DDL:操作表</h2><p>操作表也就是对表进行增（Create）删（Retrieve）改（Update）查（Delete）。</p>\n<h3 id=\"5-1-查询表\"><a href=\"#5-1-查询表\" class=\"headerlink\" title=\"5.1  查询表\"></a>5.1  查询表</h3><ul>\n<li><strong>查询当前数据库下所有表名称</strong></li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SHOW</span> TABLES;</span><br></pre></td></tr></table></figure>\n\n<p>我们创建的数据库中没有任何表，因此我们进入mysql自带的mysql数据库，执行上述语句查看</p>\n<ul>\n<li><strong>查询表结构</strong></li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">DESC</span> 表名称;</span><br></pre></td></tr></table></figure>\n\n<p>查看mysql数据库中func表的结构，运行语句如下：</p>\n<h3 id=\"5-2-创建表\"><a href=\"#5-2-创建表\" class=\"headerlink\" title=\"5.2  创建表\"></a>5.2  创建表</h3><ul>\n<li><strong>创建表</strong></li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> 表名 (</span><br><span class=\"line\">\t字段名<span class=\"number\">1</span>  数据类型<span class=\"number\">1</span>,</span><br><span class=\"line\">\t字段名<span class=\"number\">2</span>  数据类型<span class=\"number\">2</span>,</span><br><span class=\"line\">\t…</span><br><span class=\"line\">\t字段名n  数据类型n</span><br><span class=\"line\">);</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>注意：最后一行末尾，不能加逗号</p>\n</blockquote>\n<p>知道了创建表的语句，那么我们创建创建如下结构的表</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">table</span> tb_user (</span><br><span class=\"line\">\tid <span class=\"type\">int</span>,</span><br><span class=\"line\">    username <span class=\"type\">varchar</span>(<span class=\"number\">20</span>),</span><br><span class=\"line\">    password <span class=\"type\">varchar</span>(<span class=\"number\">32</span>)</span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n\n<p>运行语句如下：</p>\n<h3 id=\"5-3-数据类型\"><a href=\"#5-3-数据类型\" class=\"headerlink\" title=\"5.3  数据类型\"></a>5.3  数据类型</h3><p>MySQL 支持多种类型，可以分为三类：</p>\n<ul>\n<li><p>数值</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tinyint : 小整数型，占一个字节</span><br><span class=\"line\"><span class=\"type\">int</span>\t： 大整数类型，占四个字节</span><br><span class=\"line\">\teg ： age <span class=\"type\">int</span></span><br><span class=\"line\"><span class=\"keyword\">double</span> ： 浮点类型</span><br><span class=\"line\">\t使用格式： 字段名 <span class=\"keyword\">double</span>(总长度,小数点后保留的位数)</span><br><span class=\"line\">\teg ： score <span class=\"keyword\">double</span>(<span class=\"number\">5</span>,<span class=\"number\">2</span>)   </span><br></pre></td></tr></table></figure></li>\n<li><p>日期</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">date</span> ： 日期值。只包含年月日</span><br><span class=\"line\">\teg ：birthday <span class=\"type\">date</span> ： </span><br><span class=\"line\">datetime ： 混合日期和时间值。包含年月日时分秒</span><br></pre></td></tr></table></figure></li>\n<li><p>字符串</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">char</span> ： 定长字符串。</span><br><span class=\"line\">\t优点：存储性能高</span><br><span class=\"line\">\t缺点：浪费空间</span><br><span class=\"line\">\teg ： name <span class=\"type\">char</span>(<span class=\"number\">10</span>)  如果存储的数据字符个数不足<span class=\"number\">10</span>个，也会占<span class=\"number\">10</span>个的空间</span><br><span class=\"line\"><span class=\"type\">varchar</span> ： 变长字符串。</span><br><span class=\"line\">\t优点：节约空间</span><br><span class=\"line\">\t缺点：存储性能底</span><br><span class=\"line\">\teg ： name <span class=\"type\">varchar</span>(<span class=\"number\">10</span>) 如果存储的数据字符个数不足<span class=\"number\">10</span>个，那就数据字符个数是几就占几个的空间\t</span><br></pre></td></tr></table></figure></li>\n</ul>\n<blockquote>\n<p>注意：其他类型参考资料中的《MySQL数据类型].xlsx》</p>\n</blockquote>\n<p><strong>案例：</strong></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">需求：设计一张学生表，请注重数据类型、长度的合理性</span><br><span class=\"line\">\t1. 编号</span><br><span class=\"line\">\t2. 姓名，姓名最长不超过10个汉字</span><br><span class=\"line\">\t3. 性别，因为取值只有两种可能，因此最多一个汉字</span><br><span class=\"line\">\t4. 生日，取值为年月日</span><br><span class=\"line\">\t5. 入学成绩，小数点后保留两位</span><br><span class=\"line\">\t6. 邮件地址，最大长度不超过 64</span><br><span class=\"line\">\t7. 家庭联系电话，不一定是手机号码，可能会出现 - 等字符</span><br><span class=\"line\">\t8. 学生状态（用数字表示，正常、休学、毕业...）</span><br></pre></td></tr></table></figure>\n\n<p>语句设计如下：</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">table</span> student (</span><br><span class=\"line\">\tid <span class=\"type\">int</span>,</span><br><span class=\"line\">    name <span class=\"type\">varchar</span>(<span class=\"number\">10</span>),</span><br><span class=\"line\">    gender <span class=\"type\">char</span>(<span class=\"number\">1</span>),</span><br><span class=\"line\">    birthday <span class=\"type\">date</span>,</span><br><span class=\"line\">    score <span class=\"keyword\">double</span>(<span class=\"number\">5</span>,<span class=\"number\">2</span>),</span><br><span class=\"line\">    email <span class=\"type\">varchar</span>(<span class=\"number\">15</span>),</span><br><span class=\"line\">    tel <span class=\"type\">varchar</span>(<span class=\"number\">15</span>),</span><br><span class=\"line\">    status tinyint</span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"5-4-删除表\"><a href=\"#5-4-删除表\" class=\"headerlink\" title=\"5.4  删除表\"></a>5.4  删除表</h3><ul>\n<li><strong>删除表</strong></li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">DROP</span> <span class=\"keyword\">TABLE</span> 表名;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><strong>删除表时判断表是否存在</strong></li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">DROP</span> <span class=\"keyword\">TABLE</span> IF <span class=\"keyword\">EXISTS</span> 表名;</span><br></pre></td></tr></table></figure>\n\n<p>运行语句效果如下：</p>\n<h3 id=\"5-5-修改表\"><a href=\"#5-5-修改表\" class=\"headerlink\" title=\"5.5  修改表\"></a>5.5  修改表</h3><ul>\n<li><strong>修改表名</strong></li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">TABLE</span> 表名 RENAME <span class=\"keyword\">TO</span> 新的表名;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 将表名student修改为stu</span></span><br><span class=\"line\"><span class=\"keyword\">alter</span> <span class=\"keyword\">table</span> student rename <span class=\"keyword\">to</span> stu;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><strong>添加一列</strong></li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">TABLE</span> 表名 <span class=\"keyword\">ADD</span> 列名 数据类型;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 给stu表添加一列address，该字段类型是varchar(50)</span></span><br><span class=\"line\"><span class=\"keyword\">alter</span> <span class=\"keyword\">table</span> stu <span class=\"keyword\">add</span> address <span class=\"type\">varchar</span>(<span class=\"number\">50</span>);</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><strong>修改数据类型</strong></li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">TABLE</span> 表名 MODIFY 列名 新数据类型;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 将stu表中的address字段的类型改为 char(50)</span></span><br><span class=\"line\"><span class=\"keyword\">alter</span> <span class=\"keyword\">table</span> stu modify address <span class=\"type\">char</span>(<span class=\"number\">50</span>);</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><strong>修改列名和数据类型</strong></li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">TABLE</span> 表名 CHANGE 列名 新列名 新数据类型;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 将stu表中的address字段名改为 addr，类型改为varchar(50)</span></span><br><span class=\"line\"><span class=\"keyword\">alter</span> <span class=\"keyword\">table</span> stu change address addr <span class=\"type\">varchar</span>(<span class=\"number\">50</span>);</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><strong>删除列</strong></li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">TABLE</span> 表名 <span class=\"keyword\">DROP</span> 列名;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 将stu表中的addr字段 删除</span></span><br><span class=\"line\"><span class=\"keyword\">alter</span> <span class=\"keyword\">table</span> stu <span class=\"keyword\">drop</span> addr;</span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"6，navicat使用\"><a href=\"#6，navicat使用\" class=\"headerlink\" title=\"6，navicat使用\"></a>6，navicat使用</h2><p>通过上面的学习，我们发现在命令行中写sql语句特别不方便，尤其是编写创建表的语句，我们只能在记事本上写好后直接复制到命令行进行执行。那么有没有刚好的工具提供给我们进行使用呢？ 有。</p>\n<h3 id=\"6-1-navicat概述\"><a href=\"#6-1-navicat概述\" class=\"headerlink\" title=\"6.1  navicat概述\"></a>6.1  navicat概述</h3><ul>\n<li>Navicat for MySQL 是管理和开发 MySQL 或 MariaDB 的理想解决方案。</li>\n<li>这套全面的前端工具为数据库管理、开发和维护提供了一款直观而强大的图形界面。</li>\n<li>官网： <a href=\"http://www.navicat.com.cn/\">http://www.navicat.com.cn</a> </li>\n</ul>\n<h3 id=\"6-2-navicat安装\"><a href=\"#6-2-navicat安装\" class=\"headerlink\" title=\"6.2  navicat安装\"></a>6.2  navicat安装</h3><p>参考 : 资料\\navicat安装包\\navicat_mysql_x86\\navicat安装步骤.md</p>\n<h3 id=\"6-3-navicat使用\"><a href=\"#6-3-navicat使用\" class=\"headerlink\" title=\"6.3  navicat使用\"></a>6.3  navicat使用</h3><h4 id=\"6-3-1-建立和mysql服务的连接\"><a href=\"#6-3-1-建立和mysql服务的连接\" class=\"headerlink\" title=\"6.3.1  建立和mysql服务的连接\"></a>6.3.1  建立和mysql服务的连接</h4><p>第一步： 点击连接，选择MySQL</p>\n<p>第二步：填写连接数据库必要的信息</p>\n<p>以上操作没有问题就会出现如下图所示界面：</p>\n<h4 id=\"6-3-2-操作\"><a href=\"#6-3-2-操作\" class=\"headerlink\" title=\"6.3.2  操作\"></a>6.3.2  操作</h4><p>连接成功后就能看到如下图界面：</p>\n<ul>\n<li><strong>修改表结构</strong></li>\n</ul>\n<p>通过下图操作修改表结构：</p>\n<p>点击了设计表后即出现如下图所示界面，在图中红框中直接修改字段名，类型等信息：</p>\n<ul>\n<li><strong>编写SQL语句并执行</strong></li>\n</ul>\n<p>按照如下图所示进行操作即可书写SQL语句并执行sql语句。</p>\n<h2 id=\"7，DML\"><a href=\"#7，DML\" class=\"headerlink\" title=\"7，DML\"></a>7，DML</h2><p>DML主要是对数据进行增（insert）删（delete）改（update）操作。</p>\n<h3 id=\"7-1-添加数据\"><a href=\"#7-1-添加数据\" class=\"headerlink\" title=\"7.1  添加数据\"></a>7.1  添加数据</h3><ul>\n<li><strong>给指定列添加数据</strong></li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> 表名(列名<span class=\"number\">1</span>,列名<span class=\"number\">2</span>,…) <span class=\"keyword\">VALUES</span>(值<span class=\"number\">1</span>,值<span class=\"number\">2</span>,…);</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><strong>给全部列添加数据</strong></li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> 表名 <span class=\"keyword\">VALUES</span>(值<span class=\"number\">1</span>,值<span class=\"number\">2</span>,…);</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><strong>批量添加数据</strong></li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> 表名(列名<span class=\"number\">1</span>,列名<span class=\"number\">2</span>,…) <span class=\"keyword\">VALUES</span>(值<span class=\"number\">1</span>,值<span class=\"number\">2</span>,…),(值<span class=\"number\">1</span>,值<span class=\"number\">2</span>,…),(值<span class=\"number\">1</span>,值<span class=\"number\">2</span>,…)…;</span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> 表名 <span class=\"keyword\">VALUES</span>(值<span class=\"number\">1</span>,值<span class=\"number\">2</span>,…),(值<span class=\"number\">1</span>,值<span class=\"number\">2</span>,…),(值<span class=\"number\">1</span>,值<span class=\"number\">2</span>,…)…;</span><br></pre></td></tr></table></figure>\n\n\n\n<ul>\n<li><strong>练习</strong></li>\n</ul>\n<p>为了演示以下的增删改操作是否操作成功，故先将查询所有数据的语句介绍给大家：</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> stu;</span><br></pre></td></tr></table></figure>\n\n\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 给指定列添加数据</span></span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> stu (id, NAME) <span class=\"keyword\">VALUES</span> (<span class=\"number\">1</span>, <span class=\"string\">&#x27;张三&#x27;</span>);</span><br><span class=\"line\"><span class=\"comment\">-- 给所有列添加数据，列名的列表可以省略的</span></span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> stu (id,NAME,sex,birthday,score,email,tel,STATUS) <span class=\"keyword\">VALUES</span> (<span class=\"number\">2</span>,<span class=\"string\">&#x27;李四&#x27;</span>,<span class=\"string\">&#x27;男&#x27;</span>,<span class=\"string\">&#x27;1999-11-11&#x27;</span>,<span class=\"number\">88.88</span>,<span class=\"string\">&#x27;lisi@itcast.cn&#x27;</span>,<span class=\"string\">&#x27;13888888888&#x27;</span>,<span class=\"number\">1</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> stu <span class=\"keyword\">VALUES</span> (<span class=\"number\">2</span>,<span class=\"string\">&#x27;李四&#x27;</span>,<span class=\"string\">&#x27;男&#x27;</span>,<span class=\"string\">&#x27;1999-11-11&#x27;</span>,<span class=\"number\">88.88</span>,<span class=\"string\">&#x27;lisi@itcast.cn&#x27;</span>,<span class=\"string\">&#x27;13888888888&#x27;</span>,<span class=\"number\">1</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 批量添加数据</span></span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> stu <span class=\"keyword\">VALUES</span> </span><br><span class=\"line\">\t(<span class=\"number\">2</span>,<span class=\"string\">&#x27;李四&#x27;</span>,<span class=\"string\">&#x27;男&#x27;</span>,<span class=\"string\">&#x27;1999-11-11&#x27;</span>,<span class=\"number\">88.88</span>,<span class=\"string\">&#x27;lisi@itcast.cn&#x27;</span>,<span class=\"string\">&#x27;13888888888&#x27;</span>,<span class=\"number\">1</span>),</span><br><span class=\"line\">\t(<span class=\"number\">2</span>,<span class=\"string\">&#x27;李四&#x27;</span>,<span class=\"string\">&#x27;男&#x27;</span>,<span class=\"string\">&#x27;1999-11-11&#x27;</span>,<span class=\"number\">88.88</span>,<span class=\"string\">&#x27;lisi@itcast.cn&#x27;</span>,<span class=\"string\">&#x27;13888888888&#x27;</span>,<span class=\"number\">1</span>),</span><br><span class=\"line\">\t(<span class=\"number\">2</span>,<span class=\"string\">&#x27;李四&#x27;</span>,<span class=\"string\">&#x27;男&#x27;</span>,<span class=\"string\">&#x27;1999-11-11&#x27;</span>,<span class=\"number\">88.88</span>,<span class=\"string\">&#x27;lisi@itcast.cn&#x27;</span>,<span class=\"string\">&#x27;13888888888&#x27;</span>,<span class=\"number\">1</span>);</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"7-2-修改数据\"><a href=\"#7-2-修改数据\" class=\"headerlink\" title=\"7.2  修改数据\"></a>7.2  修改数据</h3><ul>\n<li><strong>修改表数据</strong></li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">UPDATE</span> 表名 <span class=\"keyword\">SET</span> 列名<span class=\"number\">1</span><span class=\"operator\">=</span>值<span class=\"number\">1</span>,列名<span class=\"number\">2</span><span class=\"operator\">=</span>值<span class=\"number\">2</span>,… [<span class=\"keyword\">WHERE</span> 条件] ;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>注意：</p>\n<ol>\n<li>修改语句中如果不加条件，则将所有数据都修改！</li>\n<li>像上面的语句中的中括号，表示在写sql语句中可以省略这部分</li>\n</ol>\n</blockquote>\n<ul>\n<li><p><strong>练习</strong></p>\n<ul>\n<li><p>将张三的性别改为女</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">update</span> stu <span class=\"keyword\">set</span> sex <span class=\"operator\">=</span> <span class=\"string\">&#x27;女&#x27;</span> <span class=\"keyword\">where</span> name <span class=\"operator\">=</span> <span class=\"string\">&#x27;张三&#x27;</span>;</span><br></pre></td></tr></table></figure></li>\n<li><p>将张三的生日改为 1999-12-12 分数改为99.99</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">update</span> stu <span class=\"keyword\">set</span> birthday <span class=\"operator\">=</span> <span class=\"string\">&#x27;1999-12-12&#x27;</span>, score <span class=\"operator\">=</span> <span class=\"number\">99.99</span> <span class=\"keyword\">where</span> name <span class=\"operator\">=</span> <span class=\"string\">&#x27;张三&#x27;</span>;</span><br></pre></td></tr></table></figure></li>\n<li><p>注意：如果update语句没有加where条件，则会将表中所有数据全部修改！</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">update</span> stu <span class=\"keyword\">set</span> sex <span class=\"operator\">=</span> <span class=\"string\">&#x27;女&#x27;</span>;</span><br></pre></td></tr></table></figure>\n\n<p>上面语句的执行完后查询到的结果是：</p>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"7-3-删除数据\"><a href=\"#7-3-删除数据\" class=\"headerlink\" title=\"7.3  删除数据\"></a>7.3  删除数据</h3><ul>\n<li><strong>删除数据</strong></li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">DELETE</span> <span class=\"keyword\">FROM</span> 表名 [<span class=\"keyword\">WHERE</span> 条件] ;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><strong>练习</strong></li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 删除张三记录</span></span><br><span class=\"line\"><span class=\"keyword\">delete</span> <span class=\"keyword\">from</span> stu <span class=\"keyword\">where</span> name <span class=\"operator\">=</span> <span class=\"string\">&#x27;张三&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 删除stu表中所有的数据</span></span><br><span class=\"line\"><span class=\"keyword\">delete</span> <span class=\"keyword\">from</span> stu;</span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"8，DQL\"><a href=\"#8，DQL\" class=\"headerlink\" title=\"8，DQL\"></a>8，DQL</h2><p>下面是黑马程序员展示试题库数据的页面</p>\n<p>页面上展示的数据肯定是在数据库中的试题库表中进行存储，而我们需要将数据库中的数据查询出来并展示在页面给用户看。上图中的是最基本的查询效果，那么数据库其实是很多的，不可能在将所有的数据在一页进行全部展示，而页面上会有分页展示的效果，如下：</p>\n<p><img src=\"H:\\BaiDuWangPan\\JavaWeb\\day01-MySQL基础\\ppt\\assets\\image-20210722220139174.png\" alt=\"image-20210722220139174\"></p>\n<p>当然上图中的难度字段当我们点击也可以实现排序查询操作。从这个例子我们就可以看出，对于数据库的查询时灵活多变的，需要根据具体的需求来实现，而数据库查询操作也是最重要的操作，所以此部分需要大家重点掌握。</p>\n<p>接下来我们先介绍查询的完整语法：</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> </span><br><span class=\"line\">    字段列表</span><br><span class=\"line\"><span class=\"keyword\">FROM</span> </span><br><span class=\"line\">    表名列表 </span><br><span class=\"line\"><span class=\"keyword\">WHERE</span> </span><br><span class=\"line\">    条件列表</span><br><span class=\"line\"><span class=\"keyword\">GROUP</span> <span class=\"keyword\">BY</span></span><br><span class=\"line\">    分组字段</span><br><span class=\"line\"><span class=\"keyword\">HAVING</span></span><br><span class=\"line\">    分组后条件</span><br><span class=\"line\"><span class=\"keyword\">ORDER</span> <span class=\"keyword\">BY</span></span><br><span class=\"line\">    排序字段</span><br><span class=\"line\">LIMIT</span><br><span class=\"line\">    分页限定</span><br></pre></td></tr></table></figure>\n\n<p>为了给大家演示查询的语句，我们需要先准备表及一些数据：</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 删除stu表</span></span><br><span class=\"line\"><span class=\"keyword\">drop</span> <span class=\"keyword\">table</span> if <span class=\"keyword\">exists</span> stu;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 创建stu表</span></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> stu (</span><br><span class=\"line\"> id <span class=\"type\">int</span>, <span class=\"comment\">-- 编号</span></span><br><span class=\"line\"> name <span class=\"type\">varchar</span>(<span class=\"number\">20</span>), <span class=\"comment\">-- 姓名</span></span><br><span class=\"line\"> age <span class=\"type\">int</span>, <span class=\"comment\">-- 年龄</span></span><br><span class=\"line\"> sex <span class=\"type\">varchar</span>(<span class=\"number\">5</span>), <span class=\"comment\">-- 性别</span></span><br><span class=\"line\"> address <span class=\"type\">varchar</span>(<span class=\"number\">100</span>), <span class=\"comment\">-- 地址</span></span><br><span class=\"line\"> math <span class=\"keyword\">double</span>(<span class=\"number\">5</span>,<span class=\"number\">2</span>), <span class=\"comment\">-- 数学成绩</span></span><br><span class=\"line\"> english <span class=\"keyword\">double</span>(<span class=\"number\">5</span>,<span class=\"number\">2</span>), <span class=\"comment\">-- 英语成绩</span></span><br><span class=\"line\"> hire_date <span class=\"type\">date</span> <span class=\"comment\">-- 入学时间</span></span><br><span class=\"line\">);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 添加数据</span></span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> stu(id,NAME,age,sex,address,math,english,hire_date) </span><br><span class=\"line\"><span class=\"keyword\">VALUES</span> </span><br><span class=\"line\">(<span class=\"number\">1</span>,<span class=\"string\">&#x27;马运&#x27;</span>,<span class=\"number\">55</span>,<span class=\"string\">&#x27;男&#x27;</span>,<span class=\"string\">&#x27;杭州&#x27;</span>,<span class=\"number\">66</span>,<span class=\"number\">78</span>,<span class=\"string\">&#x27;1995-09-01&#x27;</span>),</span><br><span class=\"line\">(<span class=\"number\">2</span>,<span class=\"string\">&#x27;马花疼&#x27;</span>,<span class=\"number\">45</span>,<span class=\"string\">&#x27;女&#x27;</span>,<span class=\"string\">&#x27;深圳&#x27;</span>,<span class=\"number\">98</span>,<span class=\"number\">87</span>,<span class=\"string\">&#x27;1998-09-01&#x27;</span>),</span><br><span class=\"line\">(<span class=\"number\">3</span>,<span class=\"string\">&#x27;马斯克&#x27;</span>,<span class=\"number\">55</span>,<span class=\"string\">&#x27;男&#x27;</span>,<span class=\"string\">&#x27;香港&#x27;</span>,<span class=\"number\">56</span>,<span class=\"number\">77</span>,<span class=\"string\">&#x27;1999-09-02&#x27;</span>),</span><br><span class=\"line\">(<span class=\"number\">4</span>,<span class=\"string\">&#x27;柳白&#x27;</span>,<span class=\"number\">20</span>,<span class=\"string\">&#x27;女&#x27;</span>,<span class=\"string\">&#x27;湖南&#x27;</span>,<span class=\"number\">76</span>,<span class=\"number\">65</span>,<span class=\"string\">&#x27;1997-09-05&#x27;</span>),</span><br><span class=\"line\">(<span class=\"number\">5</span>,<span class=\"string\">&#x27;柳青&#x27;</span>,<span class=\"number\">20</span>,<span class=\"string\">&#x27;男&#x27;</span>,<span class=\"string\">&#x27;湖南&#x27;</span>,<span class=\"number\">86</span>,<span class=\"keyword\">NULL</span>,<span class=\"string\">&#x27;1998-09-01&#x27;</span>),</span><br><span class=\"line\">(<span class=\"number\">6</span>,<span class=\"string\">&#x27;刘德花&#x27;</span>,<span class=\"number\">57</span>,<span class=\"string\">&#x27;男&#x27;</span>,<span class=\"string\">&#x27;香港&#x27;</span>,<span class=\"number\">99</span>,<span class=\"number\">99</span>,<span class=\"string\">&#x27;1998-09-01&#x27;</span>),</span><br><span class=\"line\">(<span class=\"number\">7</span>,<span class=\"string\">&#x27;张学右&#x27;</span>,<span class=\"number\">22</span>,<span class=\"string\">&#x27;女&#x27;</span>,<span class=\"string\">&#x27;香港&#x27;</span>,<span class=\"number\">99</span>,<span class=\"number\">99</span>,<span class=\"string\">&#x27;1998-09-01&#x27;</span>),</span><br><span class=\"line\">(<span class=\"number\">8</span>,<span class=\"string\">&#x27;德玛西亚&#x27;</span>,<span class=\"number\">18</span>,<span class=\"string\">&#x27;男&#x27;</span>,<span class=\"string\">&#x27;南京&#x27;</span>,<span class=\"number\">56</span>,<span class=\"number\">65</span>,<span class=\"string\">&#x27;1994-09-02&#x27;</span>);</span><br></pre></td></tr></table></figure>\n\n<p>接下来咱们从最基本的查询语句开始学起。</p>\n<h3 id=\"8-1-基础查询\"><a href=\"#8-1-基础查询\" class=\"headerlink\" title=\"8.1  基础查询\"></a>8.1  基础查询</h3><h4 id=\"8-1-1-语法\"><a href=\"#8-1-1-语法\" class=\"headerlink\" title=\"8.1.1  语法\"></a>8.1.1  语法</h4><ul>\n<li><strong>查询多个字段</strong></li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> 字段列表 <span class=\"keyword\">FROM</span> 表名;</span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> <span class=\"operator\">*</span> <span class=\"keyword\">FROM</span> 表名; <span class=\"comment\">-- 查询所有数据</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><strong>去除重复记录</strong></li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> <span class=\"keyword\">DISTINCT</span> 字段列表 <span class=\"keyword\">FROM</span> 表名;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><strong>起别名</strong></li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">AS</span>: <span class=\"keyword\">AS</span> 也可以省略</span><br></pre></td></tr></table></figure>\n\n\n\n<h4 id=\"8-1-2-练习\"><a href=\"#8-1-2-练习\" class=\"headerlink\" title=\"8.1.2  练习\"></a>8.1.2  练习</h4><ul>\n<li><p>查询name、age两列</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> name,age <span class=\"keyword\">from</span> stu;</span><br></pre></td></tr></table></figure></li>\n<li><p>查询所有列的数据，列名的列表可以使用*替代</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> stu;</span><br></pre></td></tr></table></figure>\n\n<p>上面语句中的*不建议大家使用，因为在这写*不方便我们阅读sql语句。我们写字段列表的话，可以添加注释对每一个字段进行说明</p>\n<p>而在上课期间为了简约课程的时间，老师很多地方都会写*。</p>\n</li>\n<li><p>查询地址信息</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> address <span class=\"keyword\">from</span> stu;</span><br></pre></td></tr></table></figure>\n\n<p>执行上面语句结果如下：</p>\n<p>从上面的结果我们可以看到有重复的数据，我们也可以使用 <code>distinct</code> 关键字去重重复数据。</p>\n</li>\n<li><p>去除重复记录</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"keyword\">distinct</span> address <span class=\"keyword\">from</span> stu;</span><br></pre></td></tr></table></figure></li>\n<li><p>查询姓名、数学成绩、英语成绩。并通过as给math和english起别名（as关键字可以省略）</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> name,math <span class=\"keyword\">as</span> 数学成绩,english <span class=\"keyword\">as</span> 英文成绩 <span class=\"keyword\">from</span> stu;</span><br><span class=\"line\"><span class=\"keyword\">select</span> name,math 数学成绩,english 英文成绩 <span class=\"keyword\">from</span> stu;</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h3 id=\"8-2-条件查询\"><a href=\"#8-2-条件查询\" class=\"headerlink\" title=\"8.2  条件查询\"></a>8.2  条件查询</h3><h4 id=\"8-2-1-语法\"><a href=\"#8-2-1-语法\" class=\"headerlink\" title=\"8.2.1  语法\"></a>8.2.1  语法</h4><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> 字段列表 <span class=\"keyword\">FROM</span> 表名 <span class=\"keyword\">WHERE</span> 条件列表;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><strong>条件</strong></li>\n</ul>\n<p>条件列表可以使用以下运算符</p>\n<h4 id=\"8-2-2-条件查询练习\"><a href=\"#8-2-2-条件查询练习\" class=\"headerlink\" title=\"8.2.2  条件查询练习\"></a>8.2.2  条件查询练习</h4><ul>\n<li><p>查询年龄大于20岁的学员信息</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> stu <span class=\"keyword\">where</span> age <span class=\"operator\">&gt;</span> <span class=\"number\">20</span>;</span><br></pre></td></tr></table></figure></li>\n<li><p>查询年龄大于等于20岁的学员信息</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> stu <span class=\"keyword\">where</span> age <span class=\"operator\">&gt;=</span> <span class=\"number\">20</span>;</span><br></pre></td></tr></table></figure></li>\n<li><p>查询年龄大于等于20岁 并且 年龄 小于等于 30岁 的学员信息</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> stu <span class=\"keyword\">where</span> age <span class=\"operator\">&gt;=</span> <span class=\"number\">20</span> <span class=\"operator\">&amp;&amp;</span>  age <span class=\"operator\">&lt;=</span> <span class=\"number\">30</span>;</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> stu <span class=\"keyword\">where</span> age <span class=\"operator\">&gt;=</span> <span class=\"number\">20</span> <span class=\"keyword\">and</span>  age <span class=\"operator\">&lt;=</span> <span class=\"number\">30</span>;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>上面语句中 &amp;&amp;  和  and  都表示并且的意思。建议使用 and 。</p>\n<p>也可以使用  between … and 来实现上面需求</p>\n</blockquote>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> stu <span class=\"keyword\">where</span> age <span class=\"keyword\">BETWEEN</span> <span class=\"number\">20</span> <span class=\"keyword\">and</span> <span class=\"number\">30</span>;</span><br></pre></td></tr></table></figure></li>\n<li><p>查询入学日期在’1998-09-01’ 到 ‘1999-09-01’  之间的学员信息</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> stu <span class=\"keyword\">where</span> hire_date <span class=\"keyword\">BETWEEN</span> <span class=\"string\">&#x27;1998-09-01&#x27;</span> <span class=\"keyword\">and</span> <span class=\"string\">&#x27;1999-09-01&#x27;</span>;</span><br></pre></td></tr></table></figure></li>\n<li><p>查询年龄等于18岁的学员信息</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> stu <span class=\"keyword\">where</span> age <span class=\"operator\">=</span> <span class=\"number\">18</span>;</span><br></pre></td></tr></table></figure></li>\n<li><p>查询年龄不等于18岁的学员信息</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> stu <span class=\"keyword\">where</span> age <span class=\"operator\">!=</span> <span class=\"number\">18</span>;</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> stu <span class=\"keyword\">where</span> age <span class=\"operator\">&lt;&gt;</span> <span class=\"number\">18</span>;</span><br></pre></td></tr></table></figure></li>\n<li><p>查询年龄等于18岁 或者 年龄等于20岁 或者 年龄等于22岁的学员信息</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> stu <span class=\"keyword\">where</span> age <span class=\"operator\">=</span> <span class=\"number\">18</span> <span class=\"keyword\">or</span> age <span class=\"operator\">=</span> <span class=\"number\">20</span> <span class=\"keyword\">or</span> age <span class=\"operator\">=</span> <span class=\"number\">22</span>;</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> stu <span class=\"keyword\">where</span> age <span class=\"keyword\">in</span> (<span class=\"number\">18</span>,<span class=\"number\">20</span> ,<span class=\"number\">22</span>);</span><br></pre></td></tr></table></figure></li>\n<li><p>查询英语成绩为 null的学员信息</p>\n<p>null值的比较不能使用 =  或者 != 。需要使用 is  或者 is not</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> stu <span class=\"keyword\">where</span> english <span class=\"operator\">=</span> <span class=\"keyword\">null</span>; <span class=\"comment\">-- 这个语句是不行的</span></span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> stu <span class=\"keyword\">where</span> english <span class=\"keyword\">is</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> stu <span class=\"keyword\">where</span> english <span class=\"keyword\">is</span> <span class=\"keyword\">not</span> <span class=\"keyword\">null</span>;</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h4 id=\"8-2-3-模糊查询练习\"><a href=\"#8-2-3-模糊查询练习\" class=\"headerlink\" title=\"8.2.3  模糊查询练习\"></a>8.2.3  模糊查询练习</h4><blockquote>\n<p>模糊查询使用like关键字，可以使用通配符进行占位:</p>\n<p>（1）_ : 代表单个任意字符</p>\n<p>（2）% : 代表任意个数字符</p>\n</blockquote>\n<ul>\n<li><p>查询姓’马’的学员信息</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> stu <span class=\"keyword\">where</span> name <span class=\"keyword\">like</span> <span class=\"string\">&#x27;马%&#x27;</span>;</span><br></pre></td></tr></table></figure></li>\n<li><p>查询第二个字是’花’的学员信息  </p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> stu <span class=\"keyword\">where</span> name <span class=\"keyword\">like</span> <span class=\"string\">&#x27;_花%&#x27;</span>;</span><br></pre></td></tr></table></figure></li>\n<li><p>查询名字中包含 ‘德’ 的学员信息</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> stu <span class=\"keyword\">where</span> name <span class=\"keyword\">like</span> <span class=\"string\">&#x27;%德%&#x27;</span>;</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h3 id=\"8-3-排序查询\"><a href=\"#8-3-排序查询\" class=\"headerlink\" title=\"8.3  排序查询\"></a>8.3  排序查询</h3><h4 id=\"8-3-1-语法\"><a href=\"#8-3-1-语法\" class=\"headerlink\" title=\"8.3.1  语法\"></a>8.3.1  语法</h4><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> 字段列表 <span class=\"keyword\">FROM</span> 表名 <span class=\"keyword\">ORDER</span> <span class=\"keyword\">BY</span> 排序字段名<span class=\"number\">1</span> [排序方式<span class=\"number\">1</span>],排序字段名<span class=\"number\">2</span> [排序方式<span class=\"number\">2</span>] …;</span><br></pre></td></tr></table></figure>\n\n<p>上述语句中的排序方式有两种，分别是：</p>\n<ul>\n<li>ASC ： 升序排列 <strong>（默认值）</strong></li>\n<li>DESC ： 降序排列</li>\n</ul>\n<blockquote>\n<p>注意：如果有多个排序条件，当前边的条件值一样时，才会根据第二条件进行排序</p>\n</blockquote>\n<h4 id=\"8-3-2-练习\"><a href=\"#8-3-2-练习\" class=\"headerlink\" title=\"8.3.2  练习\"></a>8.3.2  练习</h4><ul>\n<li><p>查询学生信息，按照年龄升序排列 </p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> stu <span class=\"keyword\">order</span> <span class=\"keyword\">by</span> age ;</span><br></pre></td></tr></table></figure></li>\n<li><p>查询学生信息，按照数学成绩降序排列</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> stu <span class=\"keyword\">order</span> <span class=\"keyword\">by</span> math <span class=\"keyword\">desc</span> ;</span><br></pre></td></tr></table></figure></li>\n<li><p>查询学生信息，按照数学成绩降序排列，如果数学成绩一样，再按照英语成绩升序排列</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> stu <span class=\"keyword\">order</span> <span class=\"keyword\">by</span> math <span class=\"keyword\">desc</span> , english <span class=\"keyword\">asc</span> ;</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h3 id=\"8-4-聚合函数\"><a href=\"#8-4-聚合函数\" class=\"headerlink\" title=\"8.4  聚合函数\"></a>8.4  聚合函数</h3><h4 id=\"8-4-1-概念\"><a href=\"#8-4-1-概念\" class=\"headerlink\" title=\"8.4.1  概念\"></a>8.4.1  概念</h4><p> ==将一列数据作为一个整体，进行纵向计算。==</p>\n<p>如何理解呢？假设有如下表</p>\n<p>现有一需求让我们求表中所有数据的数学成绩的总和。这就是对math字段进行纵向求和。</p>\n<h4 id=\"8-4-2-聚合函数分类\"><a href=\"#8-4-2-聚合函数分类\" class=\"headerlink\" title=\"8.4.2  聚合函数分类\"></a>8.4.2  聚合函数分类</h4><table>\n<thead>\n<tr>\n<th>函数名</th>\n<th>功能</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>count(列名)</td>\n<td>统计数量（一般选用不为null的列）</td>\n</tr>\n<tr>\n<td>max(列名)</td>\n<td>最大值</td>\n</tr>\n<tr>\n<td>min(列名)</td>\n<td>最小值</td>\n</tr>\n<tr>\n<td>sum(列名)</td>\n<td>求和</td>\n</tr>\n<tr>\n<td>avg(列名)</td>\n<td>平均值</td>\n</tr>\n</tbody></table>\n<h4 id=\"8-4-3-聚合函数语法\"><a href=\"#8-4-3-聚合函数语法\" class=\"headerlink\" title=\"8.4.3  聚合函数语法\"></a>8.4.3  聚合函数语法</h4><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> 聚合函数名(列名) <span class=\"keyword\">FROM</span> 表;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>注意：null 值不参与所有聚合函数运算</p>\n</blockquote>\n<h4 id=\"8-4-4-练习\"><a href=\"#8-4-4-练习\" class=\"headerlink\" title=\"8.4.4  练习\"></a>8.4.4  练习</h4><ul>\n<li><p>统计班级一共有多少个学生</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"built_in\">count</span>(id) <span class=\"keyword\">from</span> stu;</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"built_in\">count</span>(english) <span class=\"keyword\">from</span> stu;</span><br></pre></td></tr></table></figure>\n\n<p>上面语句根据某个字段进行统计，如果该字段某一行的值为null的话，将不会被统计。所以可以在count(*) 来实现。* 表示所有字段数据，一行中也不可能所有的数据都为null，所以建议使用 count(*)</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"built_in\">count</span>(<span class=\"operator\">*</span>) <span class=\"keyword\">from</span> stu;</span><br></pre></td></tr></table></figure></li>\n<li><p>查询数学成绩的最高分</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"built_in\">max</span>(math) <span class=\"keyword\">from</span> stu;</span><br></pre></td></tr></table></figure></li>\n<li><p>查询数学成绩的最低分</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"built_in\">min</span>(math) <span class=\"keyword\">from</span> stu;</span><br></pre></td></tr></table></figure></li>\n<li><p>查询数学成绩的总分</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"built_in\">sum</span>(math) <span class=\"keyword\">from</span> stu;</span><br></pre></td></tr></table></figure></li>\n<li><p>查询数学成绩的平均分</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"built_in\">avg</span>(math) <span class=\"keyword\">from</span> stu;</span><br></pre></td></tr></table></figure></li>\n<li><p>查询英语成绩的最低分</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"built_in\">min</span>(english) <span class=\"keyword\">from</span> stu;</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h3 id=\"8-5-分组查询\"><a href=\"#8-5-分组查询\" class=\"headerlink\" title=\"8.5  分组查询\"></a>8.5  分组查询</h3><h4 id=\"8-5-1-语法\"><a href=\"#8-5-1-语法\" class=\"headerlink\" title=\"8.5.1  语法\"></a>8.5.1  语法</h4><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> 字段列表 <span class=\"keyword\">FROM</span> 表名 [<span class=\"keyword\">WHERE</span> 分组前条件限定] <span class=\"keyword\">GROUP</span> <span class=\"keyword\">BY</span> 分组字段名 [<span class=\"keyword\">HAVING</span> 分组后条件过滤];</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>注意：分组之后，查询的字段为聚合函数和分组字段，查询其他字段无任何意义</p>\n</blockquote>\n<h4 id=\"8-5-2-练习\"><a href=\"#8-5-2-练习\" class=\"headerlink\" title=\"8.5.2  练习\"></a>8.5.2  练习</h4><ul>\n<li><p>查询男同学和女同学各自的数学平均分</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> sex, <span class=\"built_in\">avg</span>(math) <span class=\"keyword\">from</span> stu <span class=\"keyword\">group</span> <span class=\"keyword\">by</span> sex;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>注意：分组之后，查询的字段为聚合函数和分组字段，查询其他字段无任何意义</p>\n</blockquote>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> name, sex, <span class=\"built_in\">avg</span>(math) <span class=\"keyword\">from</span> stu <span class=\"keyword\">group</span> <span class=\"keyword\">by</span> sex;  <span class=\"comment\">-- 这里查询name字段就没有任何意义</span></span><br></pre></td></tr></table></figure></li>\n<li><p>查询男同学和女同学各自的数学平均分，以及各自人数</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> sex, <span class=\"built_in\">avg</span>(math),<span class=\"built_in\">count</span>(<span class=\"operator\">*</span>) <span class=\"keyword\">from</span> stu <span class=\"keyword\">group</span> <span class=\"keyword\">by</span> sex;</span><br></pre></td></tr></table></figure></li>\n<li><p>查询男同学和女同学各自的数学平均分，以及各自人数，要求：分数低于70分的不参与分组</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> sex, <span class=\"built_in\">avg</span>(math),<span class=\"built_in\">count</span>(<span class=\"operator\">*</span>) <span class=\"keyword\">from</span> stu <span class=\"keyword\">where</span> math <span class=\"operator\">&gt;</span> <span class=\"number\">70</span> <span class=\"keyword\">group</span> <span class=\"keyword\">by</span> sex;</span><br></pre></td></tr></table></figure></li>\n<li><p>查询男同学和女同学各自的数学平均分，以及各自人数，要求：分数低于70分的不参与分组，分组之后人数大于2个的</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> sex, <span class=\"built_in\">avg</span>(math),<span class=\"built_in\">count</span>(<span class=\"operator\">*</span>) <span class=\"keyword\">from</span> stu <span class=\"keyword\">where</span> math <span class=\"operator\">&gt;</span> <span class=\"number\">70</span> <span class=\"keyword\">group</span> <span class=\"keyword\">by</span> sex <span class=\"keyword\">having</span> <span class=\"built_in\">count</span>(<span class=\"operator\">*</span>)  <span class=\"operator\">&gt;</span> <span class=\"number\">2</span>;</span><br></pre></td></tr></table></figure></li>\n</ul>\n<p><strong>where 和 having 区别：</strong></p>\n<ul>\n<li><p>执行时机不一样：where 是分组之前进行限定，不满足where条件，则不参与分组，而having是分组之后对结果进行过滤。</p>\n</li>\n<li><p>可判断的条件不一样：where 不能对聚合函数进行判断，having 可以。</p>\n</li>\n</ul>\n<h3 id=\"8-6-分页查询\"><a href=\"#8-6-分页查询\" class=\"headerlink\" title=\"8.6  分页查询\"></a>8.6  分页查询</h3><p>如下图所示，大家在很多网站都见过类似的效果，如京东、百度、淘宝等。分页查询是将数据一页一页的展示给用户看，用户也可以通过点击查看下一页的数据。</p>\n<p>接下来我们先说分页查询的语法。</p>\n<h4 id=\"8-6-1-语法\"><a href=\"#8-6-1-语法\" class=\"headerlink\" title=\"8.6.1  语法\"></a>8.6.1  语法</h4><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> 字段列表 <span class=\"keyword\">FROM</span> 表名 LIMIT  起始索引 , 查询条目数;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>注意： 上述语句中的起始索引是从0开始</p>\n</blockquote>\n<h4 id=\"8-6-2-练习\"><a href=\"#8-6-2-练习\" class=\"headerlink\" title=\"8.6.2  练习\"></a>8.6.2  练习</h4><ul>\n<li><p>从0开始查询，查询3条数据</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> stu limit <span class=\"number\">0</span> , <span class=\"number\">3</span>;</span><br></pre></td></tr></table></figure></li>\n<li><p>每页显示3条数据，查询第1页数据</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> stu limit <span class=\"number\">0</span> , <span class=\"number\">3</span>;</span><br></pre></td></tr></table></figure></li>\n<li><p>每页显示3条数据，查询第2页数据</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> stu limit <span class=\"number\">3</span> , <span class=\"number\">3</span>;</span><br></pre></td></tr></table></figure></li>\n<li><p>每页显示3条数据，查询第3页数据</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> stu limit <span class=\"number\">6</span> , <span class=\"number\">3</span>;</span><br></pre></td></tr></table></figure></li>\n</ul>\n<p>从上面的练习推导出起始索引计算公式：</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">起始索引 <span class=\"operator\">=</span> (当前页码 <span class=\"operator\">-</span> <span class=\"number\">1</span>) <span class=\"operator\">*</span> 每页显示的条数</span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"mysql高级\"><a href=\"#mysql高级\" class=\"headerlink\" title=\"mysql高级\"></a>mysql高级</h2><p><strong>今日目标</strong></p>\n<blockquote>\n<ul>\n<li><p>掌握约束的使用</p>\n</li>\n<li><p>掌握表关系及建表原则</p>\n</li>\n<li><p>重点掌握多表查询操作</p>\n</li>\n<li><p>掌握事务操作</p>\n</li>\n</ul>\n</blockquote>\n<h2 id=\"1，约束\"><a href=\"#1，约束\" class=\"headerlink\" title=\"1，约束\"></a>1，约束</h2><p>上面表中可以看到表中数据存在一些问题：</p>\n<ul>\n<li><p>id 列一般是用标示数据的唯一性的，而上述表中的id为1的有三条数据，并且 <code>马花疼</code> 没有id进行标示</p>\n</li>\n<li><p><code>柳白</code> 这条数据的age列的数据是3000，而人也不可能活到3000岁</p>\n</li>\n<li><p><code>马运</code>  这条数据的math数学成绩是-5，而数学学得再不好也不可能出现负分</p>\n</li>\n<li><p><code>柳青</code> 这条数据的english列（英文成绩）值为null，而成绩即使没考也得是0分</p>\n</li>\n</ul>\n<p>针对上述数据问题，我们就可以从数据库层面在添加数据的时候进行限制，这个就是约束。</p>\n<h3 id=\"1-1-概念\"><a href=\"#1-1-概念\" class=\"headerlink\" title=\"1.1  概念\"></a>1.1  概念</h3><ul>\n<li><p>约束是作用于表中列上的规则，用于限制加入表的数据</p>\n<p>例如：我们可以给id列加约束，让其值不能重复，不能为null值。</p>\n</li>\n<li><p>约束的存在保证了数据库中数据的正确性、有效性和完整性</p>\n<p>添加约束可以在添加数据的时候就限制不正确的数据，年龄是3000，数学成绩是-5分这样无效的数据，继而保障数据的完整性。</p>\n</li>\n</ul>\n<h3 id=\"1-2-分类\"><a href=\"#1-2-分类\" class=\"headerlink\" title=\"1.2  分类\"></a>1.2  分类</h3><ul>\n<li><p><strong>非空约束： 关键字是 NOT NULL</strong></p>\n<p>保证列中所有的数据不能有null值。</p>\n<p>例如：id列在添加 <code>马花疼</code> 这条数据时就不能添加成功。</p>\n</li>\n<li><p><strong>唯一约束：关键字是  UNIQUE</strong></p>\n<p>保证列中所有数据各不相同。</p>\n<p>例如：id列中三条数据的值都是1，这样的数据在添加时是绝对不允许的。</p>\n</li>\n<li><p><strong>主键约束： 关键字是  PRIMARY KEY</strong></p>\n<p>主键是一行数据的唯一标识，要求非空且唯一。一般我们都会给没张表添加一个主键列用来唯一标识数据。</p>\n<p>例如：上图表中id就可以作为主键，来标识每条数据。那么这样就要求数据中id的值不能重复，不能为null值。</p>\n</li>\n<li><p><strong>检查约束： 关键字是  CHECK</strong> </p>\n<p>保证列中的值满足某一条件。</p>\n<p>例如：我们可以给age列添加一个范围，最低年龄可以设置为1，最大年龄就可以设置为300，这样的数据才更合理些。</p>\n<blockquote>\n<p>注意：MySQL不支持检查约束。</p>\n<p>这样是不是就没办法保证年龄在指定的范围内了？从数据库层面不能保证，以后可以在java代码中进行限制，一样也可以实现要求。</p>\n</blockquote>\n</li>\n<li><p><strong>默认约束： 关键字是   DEFAULT</strong></p>\n<p>保存数据时，未指定值则采用默认值。</p>\n<p>例如：我们在给english列添加该约束，指定默认值是0，这样在添加数据时没有指定具体值时就会采用默认给定的0。</p>\n</li>\n<li><p><strong>外键约束： 关键字是  FOREIGN KEY</strong></p>\n<p>外键用来让两个表的数据之间建立链接，保证数据的一致性和完整性。</p>\n<p>外键约束现在可能还不太好理解，后面我们会重点进行讲解。</p>\n</li>\n</ul>\n<h3 id=\"1-3-非空约束\"><a href=\"#1-3-非空约束\" class=\"headerlink\" title=\"1.3  非空约束\"></a>1.3  非空约束</h3><ul>\n<li><p>概念</p>\n<p>非空约束用于保证列中所有数据不能有NULL值</p>\n</li>\n<li><p>语法</p>\n<ul>\n<li><p>添加约束</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 创建表时添加非空约束</span></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> 表名(</span><br><span class=\"line\">   列名 数据类型 <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span>,</span><br><span class=\"line\">   …</span><br><span class=\"line\">); </span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 建完表后添加非空约束</span></span><br><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">TABLE</span> 表名 MODIFY 字段名 数据类型 <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span>;</span><br></pre></td></tr></table></figure></li>\n<li><p>删除约束</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">TABLE</span> 表名 MODIFY 字段名 数据类型;</span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"1-4-唯一约束\"><a href=\"#1-4-唯一约束\" class=\"headerlink\" title=\"1.4  唯一约束\"></a>1.4  唯一约束</h3><ul>\n<li><p>概念</p>\n<p>唯一约束用于保证列中所有数据各不相同</p>\n</li>\n<li><p>语法</p>\n<ul>\n<li><p>添加约束</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 创建表时添加唯一约束</span></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> 表名(</span><br><span class=\"line\">   列名 数据类型 <span class=\"keyword\">UNIQUE</span> [AUTO_INCREMENT],</span><br><span class=\"line\">   <span class=\"comment\">-- AUTO_INCREMENT: 当不指定值时自动增长</span></span><br><span class=\"line\">   …</span><br><span class=\"line\">); </span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> 表名(</span><br><span class=\"line\">   列名 数据类型,</span><br><span class=\"line\">   …</span><br><span class=\"line\">   [<span class=\"keyword\">CONSTRAINT</span>] [约束名称] <span class=\"keyword\">UNIQUE</span>(列名)</span><br><span class=\"line\">); </span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 建完表后添加唯一约束</span></span><br><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">TABLE</span> 表名 MODIFY 字段名 数据类型 <span class=\"keyword\">UNIQUE</span>;</span><br></pre></td></tr></table></figure></li>\n<li><p>删除约束</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">TABLE</span> 表名 <span class=\"keyword\">DROP</span> INDEX 字段名;</span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"1-5-主键约束\"><a href=\"#1-5-主键约束\" class=\"headerlink\" title=\"1.5  主键约束\"></a>1.5  主键约束</h3><ul>\n<li><p>概念</p>\n<p>主键是一行数据的唯一标识，要求非空且唯一</p>\n<p>一张表只能有一个主键</p>\n</li>\n<li><p>语法</p>\n<ul>\n<li><p>添加约束</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 创建表时添加主键约束</span></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> 表名(</span><br><span class=\"line\">   列名 数据类型 <span class=\"keyword\">PRIMARY</span> KEY [AUTO_INCREMENT],</span><br><span class=\"line\">   …</span><br><span class=\"line\">); </span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> 表名(</span><br><span class=\"line\">   列名 数据类型,</span><br><span class=\"line\">   [<span class=\"keyword\">CONSTRAINT</span>] [约束名称] <span class=\"keyword\">PRIMARY</span> KEY(列名)</span><br><span class=\"line\">); </span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 建完表后添加主键约束</span></span><br><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">TABLE</span> 表名 <span class=\"keyword\">ADD</span> <span class=\"keyword\">PRIMARY</span> KEY(字段名);</span><br></pre></td></tr></table></figure></li>\n<li><p>删除约束</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">TABLE</span> 表名 <span class=\"keyword\">DROP</span> <span class=\"keyword\">PRIMARY</span> KEY;</span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"1-6-默认约束\"><a href=\"#1-6-默认约束\" class=\"headerlink\" title=\"1.6  默认约束\"></a>1.6  默认约束</h3><ul>\n<li><p>概念</p>\n<p>保存数据时，未指定值则采用默认值</p>\n</li>\n<li><p>语法</p>\n<ul>\n<li><p>添加约束</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 创建表时添加默认约束</span></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> 表名(</span><br><span class=\"line\">   列名 数据类型 <span class=\"keyword\">DEFAULT</span> 默认值,</span><br><span class=\"line\">   …</span><br><span class=\"line\">); </span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 建完表后添加默认约束</span></span><br><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">TABLE</span> 表名 <span class=\"keyword\">ALTER</span> 列名 <span class=\"keyword\">SET</span> <span class=\"keyword\">DEFAULT</span> 默认值;</span><br></pre></td></tr></table></figure></li>\n<li><p>删除约束</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">TABLE</span> 表名 <span class=\"keyword\">ALTER</span> 列名 <span class=\"keyword\">DROP</span> <span class=\"keyword\">DEFAULT</span>;</span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"1-7-约束练习\"><a href=\"#1-7-约束练习\" class=\"headerlink\" title=\"1.7  约束练习\"></a>1.7  约束练习</h3><p><strong>根据需求，为表添加合适的约束</strong></p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 员工表</span></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> emp (</span><br><span class=\"line\">\tid <span class=\"type\">INT</span>,  <span class=\"comment\">-- 员工id，主键且自增长</span></span><br><span class=\"line\">    ename <span class=\"type\">VARCHAR</span>(<span class=\"number\">50</span>), <span class=\"comment\">-- 员工姓名，非空且唯一</span></span><br><span class=\"line\">    joindate <span class=\"type\">DATE</span>,  <span class=\"comment\">-- 入职日期，非空</span></span><br><span class=\"line\">    salary <span class=\"keyword\">DOUBLE</span>(<span class=\"number\">7</span>,<span class=\"number\">2</span>),  <span class=\"comment\">-- 工资，非空</span></span><br><span class=\"line\">    bonus <span class=\"keyword\">DOUBLE</span>(<span class=\"number\">7</span>,<span class=\"number\">2</span>)  <span class=\"comment\">-- 奖金，如果没有将近默认为0</span></span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n\n<p>上面一定给出了具体的要求，我们可以根据要求创建这张表，并为每一列添加对应的约束。建表语句如下：</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">DROP</span> <span class=\"keyword\">TABLE</span> IF <span class=\"keyword\">EXISTS</span> emp;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 员工表</span></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> emp (</span><br><span class=\"line\">  id <span class=\"type\">INT</span> <span class=\"keyword\">PRIMARY</span> KEY, <span class=\"comment\">-- 员工id，主键且自增长</span></span><br><span class=\"line\">  ename <span class=\"type\">VARCHAR</span>(<span class=\"number\">50</span>) <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span> <span class=\"keyword\">UNIQUE</span>, <span class=\"comment\">-- 员工姓名，非空并且唯一</span></span><br><span class=\"line\">  joindate <span class=\"type\">DATE</span> <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span> , <span class=\"comment\">-- 入职日期，非空</span></span><br><span class=\"line\">  salary <span class=\"keyword\">DOUBLE</span>(<span class=\"number\">7</span>,<span class=\"number\">2</span>) <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span> , <span class=\"comment\">-- 工资，非空</span></span><br><span class=\"line\">  bonus <span class=\"keyword\">DOUBLE</span>(<span class=\"number\">7</span>,<span class=\"number\">2</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"number\">0</span> <span class=\"comment\">-- 奖金，如果没有奖金默认为0</span></span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n\n<p>通过上面语句可以创建带有约束的 <code>emp</code> 表，约束能不能发挥作用呢。接下来我们一一进行验证，先添加一条没有问题的数据</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> emp(id,ename,joindate,salary,bonus) <span class=\"keyword\">values</span>(<span class=\"number\">1</span>,<span class=\"string\">&#x27;张三&#x27;</span>,<span class=\"string\">&#x27;1999-11-11&#x27;</span>,<span class=\"number\">8800</span>,<span class=\"number\">5000</span>);</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><strong>验证主键约束，非空且唯一</strong></li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> emp(id,ename,joindate,salary,bonus) <span class=\"keyword\">values</span>(<span class=\"keyword\">null</span>,<span class=\"string\">&#x27;张三&#x27;</span>,<span class=\"string\">&#x27;1999-11-11&#x27;</span>,<span class=\"number\">8800</span>,<span class=\"number\">5000</span>);</span><br></pre></td></tr></table></figure>\n\n<p>执行结果如下：</p>\n<p>从上面的结果可以看到，字段 <code>id</code> 不能为null。那我们重新添加一条数据，如下：</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> emp(id,ename,joindate,salary,bonus) <span class=\"keyword\">values</span>(<span class=\"number\">1</span>,<span class=\"string\">&#x27;张三&#x27;</span>,<span class=\"string\">&#x27;1999-11-11&#x27;</span>,<span class=\"number\">8800</span>,<span class=\"number\">5000</span>);</span><br></pre></td></tr></table></figure>\n\n<p>执行结果如下：</p>\n<p>从上面结果可以看到，1这个值重复了。所以主键约束是用来限制数据非空且唯一的。那我们再添加一条符合要求的数据</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> emp(id,ename,joindate,salary,bonus) <span class=\"keyword\">values</span>(<span class=\"number\">2</span>,<span class=\"string\">&#x27;李四&#x27;</span>,<span class=\"string\">&#x27;1999-11-11&#x27;</span>,<span class=\"number\">8800</span>,<span class=\"number\">5000</span>);</span><br></pre></td></tr></table></figure>\n\n<p>执行结果如下：</p>\n<ul>\n<li><strong>验证非空约束</strong></li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> emp(id,ename,joindate,salary,bonus) <span class=\"keyword\">values</span>(<span class=\"number\">3</span>,<span class=\"keyword\">null</span>,<span class=\"string\">&#x27;1999-11-11&#x27;</span>,<span class=\"number\">8800</span>,<span class=\"number\">5000</span>);</span><br></pre></td></tr></table></figure>\n\n<p>执行结果如下：</p>\n<p>从上面结果可以看到，<code>ename</code> 字段的非空约束生效了。</p>\n<ul>\n<li><strong>验证唯一约束</strong></li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> emp(id,ename,joindate,salary,bonus) <span class=\"keyword\">values</span>(<span class=\"number\">3</span>,<span class=\"string\">&#x27;李四&#x27;</span>,<span class=\"string\">&#x27;1999-11-11&#x27;</span>,<span class=\"number\">8800</span>,<span class=\"number\">5000</span>);</span><br></pre></td></tr></table></figure>\n\n<p>执行结果如下：</p>\n<p>从上面结果可以看到，<code>ename</code> 字段的唯一约束生效了。</p>\n<ul>\n<li><strong>验证默认约束</strong></li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> emp(id,ename,joindate,salary) <span class=\"keyword\">values</span>(<span class=\"number\">3</span>,<span class=\"string\">&#x27;王五&#x27;</span>,<span class=\"string\">&#x27;1999-11-11&#x27;</span>,<span class=\"number\">8800</span>);</span><br></pre></td></tr></table></figure>\n\n<p>执行完上面语句后查询表中数据，如下图可以看到王五这条数据的bonus列就有了默认值0。</p>\n<p>==注意：默认约束只有在不给值时才会采用默认值。如果给了null，那值就是null值。==</p>\n<p>如下：</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> emp(id,ename,joindate,salary,bonus) <span class=\"keyword\">values</span>(<span class=\"number\">4</span>,<span class=\"string\">&#x27;赵六&#x27;</span>,<span class=\"string\">&#x27;1999-11-11&#x27;</span>,<span class=\"number\">8800</span>,<span class=\"keyword\">null</span>);</span><br></pre></td></tr></table></figure>\n\n<p>执行完上面语句后查询表中数据，如下图可以看到赵六这条数据的bonus列的值是null。</p>\n<ul>\n<li><strong>验证自动增长： auto_increment  当列是数字类型 并且唯一约束</strong></li>\n</ul>\n<p>重新创建 <code>emp</code> 表，并给id列添加自动增长</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 员工表</span></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> emp (</span><br><span class=\"line\">  id <span class=\"type\">INT</span> <span class=\"keyword\">PRIMARY</span> KEY auto_increment, <span class=\"comment\">-- 员工id，主键且自增长</span></span><br><span class=\"line\">  ename <span class=\"type\">VARCHAR</span>(<span class=\"number\">50</span>) <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span> <span class=\"keyword\">UNIQUE</span>, <span class=\"comment\">-- 员工姓名，非空并且唯一</span></span><br><span class=\"line\">  joindate <span class=\"type\">DATE</span> <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span> , <span class=\"comment\">-- 入职日期，非空</span></span><br><span class=\"line\">  salary <span class=\"keyword\">DOUBLE</span>(<span class=\"number\">7</span>,<span class=\"number\">2</span>) <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span> , <span class=\"comment\">-- 工资，非空</span></span><br><span class=\"line\">  bonus <span class=\"keyword\">DOUBLE</span>(<span class=\"number\">7</span>,<span class=\"number\">2</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"number\">0</span> <span class=\"comment\">-- 奖金，如果没有奖金默认为0</span></span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n\n<p>接下来给emp添加数据，分别验证不给id列添加值以及给id列添加null值，id列的值会不会自动增长：</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> emp(ename,joindate,salary,bonus) <span class=\"keyword\">values</span>(<span class=\"string\">&#x27;赵六&#x27;</span>,<span class=\"string\">&#x27;1999-11-11&#x27;</span>,<span class=\"number\">8800</span>,<span class=\"keyword\">null</span>);</span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> emp(id,ename,joindate,salary,bonus) <span class=\"keyword\">values</span>(<span class=\"keyword\">null</span>,<span class=\"string\">&#x27;赵六2&#x27;</span>,<span class=\"string\">&#x27;1999-11-11&#x27;</span>,<span class=\"number\">8800</span>,<span class=\"keyword\">null</span>);</span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> emp(id,ename,joindate,salary,bonus) <span class=\"keyword\">values</span>(<span class=\"keyword\">null</span>,<span class=\"string\">&#x27;赵六3&#x27;</span>,<span class=\"string\">&#x27;1999-11-11&#x27;</span>,<span class=\"number\">8800</span>,<span class=\"keyword\">null</span>);</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"1-8-外键约束\"><a href=\"#1-8-外键约束\" class=\"headerlink\" title=\"1.8  外键约束\"></a>1.8  外键约束</h3><h4 id=\"1-8-1-概述\"><a href=\"#1-8-1-概述\" class=\"headerlink\" title=\"1.8.1  概述\"></a>1.8.1  概述</h4><p>外键用来让两个表的数据之间建立链接，保证数据的一致性和完整性。</p>\n<p>如何理解上面的概念呢？如下图有两张表，员工表和部门表：</p>\n<p>员工表中的dep_id字段是部门表的id字段关联，也就是说1号学生张三属于1号部门研发部的员工。现在我要删除1号部门，就会出现错误的数据（员工表中属于1号部门的数据）。而我们上面说的两张表的关系只是我们认为它们有关系，此时需要通过外键让这两张表产生数据库层面的关系，这样你要删除部门表中的1号部门的数据将无法删除。</p>\n<h4 id=\"1-8-2-语法\"><a href=\"#1-8-2-语法\" class=\"headerlink\" title=\"1.8.2  语法\"></a>1.8.2  语法</h4><ul>\n<li>添加外键约束</li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 创建表时添加外键约束</span></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> 表名(</span><br><span class=\"line\">   列名 数据类型,</span><br><span class=\"line\">   …</span><br><span class=\"line\">   [<span class=\"keyword\">CONSTRAINT</span>] [外键名称] <span class=\"keyword\">FOREIGN</span> KEY(外键列名) <span class=\"keyword\">REFERENCES</span> 主表(主表列名) </span><br><span class=\"line\">); </span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 建完表后添加外键约束</span></span><br><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">TABLE</span> 表名 <span class=\"keyword\">ADD</span> <span class=\"keyword\">CONSTRAINT</span> 外键名称 <span class=\"keyword\">FOREIGN</span> KEY (外键字段名称) <span class=\"keyword\">REFERENCES</span> 主表名称(主表列名称);</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>删除外键约束</li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">TABLE</span> 表名 <span class=\"keyword\">DROP</span> <span class=\"keyword\">FOREIGN</span> KEY 外键名称;</span><br></pre></td></tr></table></figure>\n\n\n\n<h4 id=\"1-8-3-练习\"><a href=\"#1-8-3-练习\" class=\"headerlink\" title=\"1.8.3  练习\"></a>1.8.3  练习</h4><p>根据上述语法创建员工表和部门表，并添加上外键约束：</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 删除表</span></span><br><span class=\"line\"><span class=\"keyword\">DROP</span> <span class=\"keyword\">TABLE</span> IF <span class=\"keyword\">EXISTS</span> emp;</span><br><span class=\"line\"><span class=\"keyword\">DROP</span> <span class=\"keyword\">TABLE</span> IF <span class=\"keyword\">EXISTS</span> dept;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 部门表</span></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> dept(</span><br><span class=\"line\">\tid <span class=\"type\">int</span> <span class=\"keyword\">primary</span> key auto_increment,</span><br><span class=\"line\">\tdep_name <span class=\"type\">varchar</span>(<span class=\"number\">20</span>),</span><br><span class=\"line\">\taddr <span class=\"type\">varchar</span>(<span class=\"number\">20</span>)</span><br><span class=\"line\">);</span><br><span class=\"line\"><span class=\"comment\">-- 员工表 </span></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> emp(</span><br><span class=\"line\">\tid <span class=\"type\">int</span> <span class=\"keyword\">primary</span> key auto_increment,</span><br><span class=\"line\">\tname <span class=\"type\">varchar</span>(<span class=\"number\">20</span>),</span><br><span class=\"line\">\tage <span class=\"type\">int</span>,</span><br><span class=\"line\">\tdep_id <span class=\"type\">int</span>,</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">-- 添加外键 dep_id,关联 dept 表的id主键</span></span><br><span class=\"line\">\t<span class=\"keyword\">CONSTRAINT</span> fk_emp_dept <span class=\"keyword\">FOREIGN</span> KEY(dep_id) <span class=\"keyword\">REFERENCES</span> dept(id)\t</span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n\n<p>添加数据</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 添加 2 个部门</span></span><br><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> dept(dep_name,addr) <span class=\"keyword\">values</span></span><br><span class=\"line\">(<span class=\"string\">&#x27;研发部&#x27;</span>,<span class=\"string\">&#x27;广州&#x27;</span>),(<span class=\"string\">&#x27;销售部&#x27;</span>, <span class=\"string\">&#x27;深圳&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 添加员工,dep_id 表示员工所在的部门</span></span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> emp (NAME, age, dep_id) <span class=\"keyword\">VALUES</span> </span><br><span class=\"line\">(<span class=\"string\">&#x27;张三&#x27;</span>, <span class=\"number\">20</span>, <span class=\"number\">1</span>),</span><br><span class=\"line\">(<span class=\"string\">&#x27;李四&#x27;</span>, <span class=\"number\">20</span>, <span class=\"number\">1</span>),</span><br><span class=\"line\">(<span class=\"string\">&#x27;王五&#x27;</span>, <span class=\"number\">20</span>, <span class=\"number\">1</span>),</span><br><span class=\"line\">(<span class=\"string\">&#x27;赵六&#x27;</span>, <span class=\"number\">20</span>, <span class=\"number\">2</span>),</span><br><span class=\"line\">(<span class=\"string\">&#x27;孙七&#x27;</span>, <span class=\"number\">22</span>, <span class=\"number\">2</span>),</span><br><span class=\"line\">(<span class=\"string\">&#x27;周八&#x27;</span>, <span class=\"number\">18</span>, <span class=\"number\">2</span>);</span><br></pre></td></tr></table></figure>\n\n<p>此时删除 <code>研发部</code> 这条数据，会发现无法删除。</p>\n<p>删除外键</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">alter</span> <span class=\"keyword\">table</span> emp <span class=\"keyword\">drop</span> <span class=\"keyword\">FOREIGN</span> key fk_emp_dept;</span><br></pre></td></tr></table></figure>\n\n<p>重新添加外键</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">alter</span> <span class=\"keyword\">table</span> emp <span class=\"keyword\">add</span> <span class=\"keyword\">CONSTRAINT</span> fk_emp_dept <span class=\"keyword\">FOREIGN</span> key(dep_id) <span class=\"keyword\">REFERENCES</span> dept(id);</span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"2，数据库设计\"><a href=\"#2，数据库设计\" class=\"headerlink\" title=\"2，数据库设计\"></a>2，数据库设计</h2><h3 id=\"2-1-数据库设计简介\"><a href=\"#2-1-数据库设计简介\" class=\"headerlink\" title=\"2.1  数据库设计简介\"></a>2.1  数据库设计简介</h3><ul>\n<li><p>软件的研发步骤</p>\n</li>\n<li><p>数据库设计概念</p>\n<ul>\n<li>数据库设计就是根据业务系统的具体需求，结合我们所选用的DBMS，为这个业务系统构造出最优的数据存储模型。</li>\n<li>建立数据库中的==表结构==以及==表与表之间的关联关系==的过程。</li>\n<li>有哪些表？表里有哪些字段？表和表之间有什么关系？</li>\n</ul>\n</li>\n<li><p>数据库设计的步骤</p>\n<ul>\n<li><p>需求分析（数据是什么? 数据具有哪些属性? 数据与属性的特点是什么）</p>\n</li>\n<li><p>逻辑分析（通过ER图对数据库进行逻辑建模，不需要考虑我们所选用的数据库管理系统）</p>\n<p>如下图就是ER(Entity/Relation)图：</p>\n</li>\n<li><p>物理设计（根据数据库自身的特点把逻辑设计转换为物理设计）</p>\n</li>\n<li><p>维护设计（1.对新的需求进行建表；2.表优化）</p>\n</li>\n</ul>\n</li>\n<li><p>表关系</p>\n<ul>\n<li><p>一对一</p>\n<ul>\n<li>如：用户 和 用户详情</li>\n<li>一对一关系多用于表拆分，将一个实体中经常使用的字段放一张表，不经常使用的字段放另一张表，用于提升查询性能</li>\n</ul>\n<p>上图左边是用户的详细信息，而我们真正在展示用户信息时最长用的则是上图右边红框所示，所以我们会将详细信息查分成两周那个表。</p>\n</li>\n<li><p>一对多</p>\n<ul>\n<li><p>如：部门 和 员工</p>\n</li>\n<li><p>一个部门对应多个员工，一个员工对应一个部门。如下图：</p>\n</li>\n</ul>\n</li>\n<li><p>多对多</p>\n<ul>\n<li><p>如：商品 和 订单</p>\n</li>\n<li><p>一个商品对应多个订单，一个订单包含多个商品。如下图：</p>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"2-2-表关系-一对多\"><a href=\"#2-2-表关系-一对多\" class=\"headerlink\" title=\"2.2  表关系(一对多)\"></a>2.2  表关系(一对多)</h3><ul>\n<li><p>一对多</p>\n<ul>\n<li>如：部门 和 员工</li>\n<li>一个部门对应多个员工，一个员工对应一个部门。</li>\n</ul>\n</li>\n<li><p>实现方式</p>\n<p>==在多的一方建立外键，指向一的一方的主键==</p>\n</li>\n<li><p>案例</p>\n<p>我们还是以 <code>员工表</code> 和 <code>部门表</code> 举例:</p>\n<p>经过分析发现，员工表属于多的一方，而部门表属于一的一方，此时我们会在员工表中添加一列（dep_id），指向于部门表的主键（id）：</p>\n<p>建表语句如下：</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 删除表</span></span><br><span class=\"line\"><span class=\"keyword\">DROP</span> <span class=\"keyword\">TABLE</span> IF <span class=\"keyword\">EXISTS</span> tb_emp;</span><br><span class=\"line\"><span class=\"keyword\">DROP</span> <span class=\"keyword\">TABLE</span> IF <span class=\"keyword\">EXISTS</span> tb_dept;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 部门表</span></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> tb_dept(</span><br><span class=\"line\">\tid <span class=\"type\">int</span> <span class=\"keyword\">primary</span> key auto_increment,</span><br><span class=\"line\">\tdep_name <span class=\"type\">varchar</span>(<span class=\"number\">20</span>),</span><br><span class=\"line\">\taddr <span class=\"type\">varchar</span>(<span class=\"number\">20</span>)</span><br><span class=\"line\">);</span><br><span class=\"line\"><span class=\"comment\">-- 员工表 </span></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> tb_emp(</span><br><span class=\"line\">\tid <span class=\"type\">int</span> <span class=\"keyword\">primary</span> key auto_increment,</span><br><span class=\"line\">\tname <span class=\"type\">varchar</span>(<span class=\"number\">20</span>),</span><br><span class=\"line\">\tage <span class=\"type\">int</span>,</span><br><span class=\"line\">\tdep_id <span class=\"type\">int</span>,</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">-- 添加外键 dep_id,关联 dept 表的id主键</span></span><br><span class=\"line\">\t<span class=\"keyword\">CONSTRAINT</span> fk_emp_dept <span class=\"keyword\">FOREIGN</span> KEY(dep_id) <span class=\"keyword\">REFERENCES</span> tb_dept(id)\t</span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n\n<p>查看表结构模型图：</p>\n</li>\n</ul>\n<h3 id=\"2-3-表关系-多对多\"><a href=\"#2-3-表关系-多对多\" class=\"headerlink\" title=\"2.3  表关系(多对多)\"></a>2.3  表关系(多对多)</h3><ul>\n<li><p>多对多</p>\n<ul>\n<li>如：商品 和 订单</li>\n<li>一个商品对应多个订单，一个订单包含多个商品</li>\n</ul>\n</li>\n<li><p>实现方式</p>\n<p>==建立第三张中间表，中间表至少包含两个外键，分别关联两方主键==</p>\n</li>\n<li><p>案例</p>\n<p>我们以 <code>订单表</code> 和 <code>商品表</code> 举例：</p>\n<p>经过分析发现，订单表和商品表都属于多的一方，此时需要创建一个中间表，在中间表中添加订单表的外键和商品表的外键指向两张表的主键：</p>\n<p>建表语句如下：</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 删除表</span></span><br><span class=\"line\"><span class=\"keyword\">DROP</span> <span class=\"keyword\">TABLE</span> IF <span class=\"keyword\">EXISTS</span> tb_order_goods;</span><br><span class=\"line\"><span class=\"keyword\">DROP</span> <span class=\"keyword\">TABLE</span> IF <span class=\"keyword\">EXISTS</span> tb_order;</span><br><span class=\"line\"><span class=\"keyword\">DROP</span> <span class=\"keyword\">TABLE</span> IF <span class=\"keyword\">EXISTS</span> tb_goods;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 订单表</span></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> tb_order(</span><br><span class=\"line\">\tid <span class=\"type\">int</span> <span class=\"keyword\">primary</span> key auto_increment,</span><br><span class=\"line\">\tpayment <span class=\"keyword\">double</span>(<span class=\"number\">10</span>,<span class=\"number\">2</span>),</span><br><span class=\"line\">\tpayment_type TINYINT,</span><br><span class=\"line\">\tstatus TINYINT</span><br><span class=\"line\">);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 商品表</span></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> tb_goods(</span><br><span class=\"line\">\tid <span class=\"type\">int</span> <span class=\"keyword\">primary</span> key auto_increment,</span><br><span class=\"line\">\ttitle <span class=\"type\">varchar</span>(<span class=\"number\">100</span>),</span><br><span class=\"line\">\tprice <span class=\"keyword\">double</span>(<span class=\"number\">10</span>,<span class=\"number\">2</span>)</span><br><span class=\"line\">);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 订单商品中间表</span></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> tb_order_goods(</span><br><span class=\"line\">\tid <span class=\"type\">int</span> <span class=\"keyword\">primary</span> key auto_increment,</span><br><span class=\"line\">\torder_id <span class=\"type\">int</span>,</span><br><span class=\"line\">\tgoods_id <span class=\"type\">int</span>,</span><br><span class=\"line\">\tcount <span class=\"type\">int</span></span><br><span class=\"line\">);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 建完表后，添加外键</span></span><br><span class=\"line\"><span class=\"keyword\">alter</span> <span class=\"keyword\">table</span> tb_order_goods <span class=\"keyword\">add</span> <span class=\"keyword\">CONSTRAINT</span> fk_order_id <span class=\"keyword\">FOREIGN</span> key(order_id) <span class=\"keyword\">REFERENCES</span> tb_order(id);</span><br><span class=\"line\"><span class=\"keyword\">alter</span> <span class=\"keyword\">table</span> tb_order_goods <span class=\"keyword\">add</span> <span class=\"keyword\">CONSTRAINT</span> fk_goods_id <span class=\"keyword\">FOREIGN</span> key(goods_id) <span class=\"keyword\">REFERENCES</span> tb_goods(id);</span><br></pre></td></tr></table></figure>\n\n<p>查看表结构模型图：</p>\n</li>\n</ul>\n<h3 id=\"2-4-表关系-一对一\"><a href=\"#2-4-表关系-一对一\" class=\"headerlink\" title=\"2.4  表关系(一对一)\"></a>2.4  表关系(一对一)</h3><ul>\n<li><p>一对一</p>\n<ul>\n<li>如：用户 和 用户详情</li>\n<li>一对一关系多用于表拆分，将一个实体中经常使用的字段放一张表，不经常使用的字段放另一张表，用于提升查询性能</li>\n</ul>\n</li>\n<li><p>实现方式</p>\n<p>==在任意一方加入外键，关联另一方主键，并且设置外键为唯一(UNIQUE)==</p>\n</li>\n<li><p>案例</p>\n<p>我们以 <code>用户表</code> 举例：</p>\n<p>而在真正使用过程中发现 id、photo、nickname、age、gender 字段比较常用，此时就可以将这张表查分成两张表。</p>\n</li>\n</ul>\n<p>​    </p>\n<p>​    建表语句如下：</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">table</span> tb_user_desc (</span><br><span class=\"line\">\tid <span class=\"type\">int</span> <span class=\"keyword\">primary</span> key auto_increment,</span><br><span class=\"line\">\tcity <span class=\"type\">varchar</span>(<span class=\"number\">20</span>),</span><br><span class=\"line\">\tedu <span class=\"type\">varchar</span>(<span class=\"number\">10</span>),</span><br><span class=\"line\">\tincome <span class=\"type\">int</span>,</span><br><span class=\"line\">\tstatus <span class=\"type\">char</span>(<span class=\"number\">2</span>),</span><br><span class=\"line\">\tdes <span class=\"type\">varchar</span>(<span class=\"number\">100</span>)</span><br><span class=\"line\">);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">table</span> tb_user (</span><br><span class=\"line\">\tid <span class=\"type\">int</span> <span class=\"keyword\">primary</span> key auto_increment,</span><br><span class=\"line\">\tphoto <span class=\"type\">varchar</span>(<span class=\"number\">100</span>),</span><br><span class=\"line\">\tnickname <span class=\"type\">varchar</span>(<span class=\"number\">50</span>),</span><br><span class=\"line\">\tage <span class=\"type\">int</span>,</span><br><span class=\"line\">\tgender <span class=\"type\">char</span>(<span class=\"number\">1</span>),</span><br><span class=\"line\">\tdesc_id <span class=\"type\">int</span> <span class=\"keyword\">unique</span>,</span><br><span class=\"line\">\t<span class=\"comment\">-- 添加外键</span></span><br><span class=\"line\">\t<span class=\"keyword\">CONSTRAINT</span> fk_user_desc <span class=\"keyword\">FOREIGN</span> KEY(desc_id) <span class=\"keyword\">REFERENCES</span> tb_user_desc(id)\t</span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"3，多表查询\"><a href=\"#3，多表查询\" class=\"headerlink\" title=\"3，多表查询\"></a>3，多表查询</h2><p>多表查询顾名思义就是从多张表中一次性的查询出我们想要的数据。我们通过具体的sql给他们演示，先准备环境</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">DROP</span> <span class=\"keyword\">TABLE</span> IF <span class=\"keyword\">EXISTS</span> emp;</span><br><span class=\"line\"><span class=\"keyword\">DROP</span> <span class=\"keyword\">TABLE</span> IF <span class=\"keyword\">EXISTS</span> dept;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"># 创建部门表</span><br><span class=\"line\">\t<span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> dept(</span><br><span class=\"line\">        did <span class=\"type\">INT</span> <span class=\"keyword\">PRIMARY</span> KEY AUTO_INCREMENT,</span><br><span class=\"line\">        dname <span class=\"type\">VARCHAR</span>(<span class=\"number\">20</span>)</span><br><span class=\"line\">    );</span><br><span class=\"line\"></span><br><span class=\"line\">\t# 创建员工表</span><br><span class=\"line\">\t<span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> emp (</span><br><span class=\"line\">        id <span class=\"type\">INT</span> <span class=\"keyword\">PRIMARY</span> KEY AUTO_INCREMENT,</span><br><span class=\"line\">        NAME <span class=\"type\">VARCHAR</span>(<span class=\"number\">10</span>),</span><br><span class=\"line\">        gender <span class=\"type\">CHAR</span>(<span class=\"number\">1</span>), <span class=\"comment\">-- 性别</span></span><br><span class=\"line\">        salary <span class=\"keyword\">DOUBLE</span>, <span class=\"comment\">-- 工资</span></span><br><span class=\"line\">        join_date <span class=\"type\">DATE</span>, <span class=\"comment\">-- 入职日期</span></span><br><span class=\"line\">        dep_id <span class=\"type\">INT</span>,</span><br><span class=\"line\">        <span class=\"keyword\">FOREIGN</span> KEY (dep_id) <span class=\"keyword\">REFERENCES</span> dept(did) <span class=\"comment\">-- 外键，关联部门表(部门表的主键)</span></span><br><span class=\"line\">    );</span><br><span class=\"line\">\t<span class=\"comment\">-- 添加部门数据</span></span><br><span class=\"line\">\t<span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> dept (dNAME) <span class=\"keyword\">VALUES</span> (<span class=\"string\">&#x27;研发部&#x27;</span>),(<span class=\"string\">&#x27;市场部&#x27;</span>),(<span class=\"string\">&#x27;财务部&#x27;</span>),(<span class=\"string\">&#x27;销售部&#x27;</span>);</span><br><span class=\"line\">\t<span class=\"comment\">-- 添加员工数据</span></span><br><span class=\"line\">\t<span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> emp(NAME,gender,salary,join_date,dep_id) <span class=\"keyword\">VALUES</span></span><br><span class=\"line\">\t(<span class=\"string\">&#x27;孙悟空&#x27;</span>,<span class=\"string\">&#x27;男&#x27;</span>,<span class=\"number\">7200</span>,<span class=\"string\">&#x27;2013-02-24&#x27;</span>,<span class=\"number\">1</span>),</span><br><span class=\"line\">\t(<span class=\"string\">&#x27;猪八戒&#x27;</span>,<span class=\"string\">&#x27;男&#x27;</span>,<span class=\"number\">3600</span>,<span class=\"string\">&#x27;2010-12-02&#x27;</span>,<span class=\"number\">2</span>),</span><br><span class=\"line\">\t(<span class=\"string\">&#x27;唐僧&#x27;</span>,<span class=\"string\">&#x27;男&#x27;</span>,<span class=\"number\">9000</span>,<span class=\"string\">&#x27;2008-08-08&#x27;</span>,<span class=\"number\">2</span>),</span><br><span class=\"line\">\t(<span class=\"string\">&#x27;白骨精&#x27;</span>,<span class=\"string\">&#x27;女&#x27;</span>,<span class=\"number\">5000</span>,<span class=\"string\">&#x27;2015-10-07&#x27;</span>,<span class=\"number\">3</span>),</span><br><span class=\"line\">\t(<span class=\"string\">&#x27;蜘蛛精&#x27;</span>,<span class=\"string\">&#x27;女&#x27;</span>,<span class=\"number\">4500</span>,<span class=\"string\">&#x27;2011-03-14&#x27;</span>,<span class=\"number\">1</span>),</span><br><span class=\"line\">\t(<span class=\"string\">&#x27;小白龙&#x27;</span>,<span class=\"string\">&#x27;男&#x27;</span>,<span class=\"number\">2500</span>,<span class=\"string\">&#x27;2011-02-14&#x27;</span>,<span class=\"keyword\">null</span>);\t</span><br></pre></td></tr></table></figure>\n\n<p>执行下面的多表查询语句</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> emp , dept;  <span class=\"comment\">-- 从emp和dept表中查询所有的字段数据</span></span><br></pre></td></tr></table></figure>\n\n<p>结果如下：</p>\n<p>从上面的结果我们看到有一些无效的数据，如 <code>孙悟空</code> 这个员工属于1号部门，但也同时关联的2、3、4号部门。所以我们要通过限制员工表中的 <code>dep_id</code> 字段的值和部门表 <code>did</code> 字段的值相等来消除这些无效的数据，</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> emp , dept <span class=\"keyword\">where</span> emp.dep_id <span class=\"operator\">=</span> dept.did;</span><br></pre></td></tr></table></figure>\n\n<p>执行后结果如下：</p>\n<p>上面语句就是连接查询，那么多表查询都有哪些呢？</p>\n<ul>\n<li><p>连接查询 </p>\n<ul>\n<li>内连接查询 ：相当于查询AB交集数据</li>\n<li>外连接查询<ul>\n<li>左外连接查询 ：相当于查询A表所有数据和交集部门数据</li>\n<li>右外连接查询 ： 相当于查询B表所有数据和交集部分数据</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>子查询</p>\n</li>\n</ul>\n<h3 id=\"3-1-内连接查询\"><a href=\"#3-1-内连接查询\" class=\"headerlink\" title=\"3.1  内连接查询\"></a>3.1  内连接查询</h3><ul>\n<li>语法</li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 隐式内连接</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> 字段列表 <span class=\"keyword\">FROM</span> 表<span class=\"number\">1</span>,表<span class=\"number\">2</span>… <span class=\"keyword\">WHERE</span> 条件;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 显示内连接</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> 字段列表 <span class=\"keyword\">FROM</span> 表<span class=\"number\">1</span> [<span class=\"keyword\">INNER</span>] <span class=\"keyword\">JOIN</span> 表<span class=\"number\">2</span> <span class=\"keyword\">ON</span> 条件;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>内连接相当于查询 A B 交集数据</p>\n</blockquote>\n<ul>\n<li><p>案例</p>\n<ul>\n<li><p>隐式内连接</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">\t<span class=\"operator\">*</span></span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">\temp,</span><br><span class=\"line\">\tdept</span><br><span class=\"line\"><span class=\"keyword\">WHERE</span></span><br><span class=\"line\">\temp.dep_id <span class=\"operator\">=</span> dept.did;</span><br></pre></td></tr></table></figure>\n\n<p>执行上述语句结果如下：</p>\n</li>\n<li><p>查询 emp的 name， gender，dept表的dname</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">\temp. NAME,</span><br><span class=\"line\">\temp.gender,</span><br><span class=\"line\">\tdept.dname</span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">\temp,</span><br><span class=\"line\">\tdept</span><br><span class=\"line\"><span class=\"keyword\">WHERE</span></span><br><span class=\"line\">\temp.dep_id <span class=\"operator\">=</span> dept.did;</span><br></pre></td></tr></table></figure>\n\n<p>执行语句结果如下：</p>\n<p>上面语句中使用表名指定字段所属有点麻烦，sql也支持给表指别名，上述语句可以改进为</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">\tt1. NAME,</span><br><span class=\"line\">\tt1.gender,</span><br><span class=\"line\">\tt2.dname</span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">\temp t1,</span><br><span class=\"line\">\tdept t2</span><br><span class=\"line\"><span class=\"keyword\">WHERE</span></span><br><span class=\"line\">\tt1.dep_id <span class=\"operator\">=</span> t2.did;</span><br></pre></td></tr></table></figure></li>\n<li><p>显式内连接</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> emp <span class=\"keyword\">inner</span> <span class=\"keyword\">join</span> dept <span class=\"keyword\">on</span> emp.dep_id <span class=\"operator\">=</span> dept.did;</span><br><span class=\"line\"><span class=\"comment\">-- 上面语句中的inner可以省略，可以书写为如下语句</span></span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> emp  <span class=\"keyword\">join</span> dept <span class=\"keyword\">on</span> emp.dep_id <span class=\"operator\">=</span> dept.did;</span><br></pre></td></tr></table></figure>\n\n<p>执行结果如下：</p>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"3-2-外连接查询\"><a href=\"#3-2-外连接查询\" class=\"headerlink\" title=\"3.2  外连接查询\"></a>3.2  外连接查询</h3><ul>\n<li><p>语法</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 左外连接</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> 字段列表 <span class=\"keyword\">FROM</span> 表<span class=\"number\">1</span> <span class=\"keyword\">LEFT</span> [<span class=\"keyword\">OUTER</span>] <span class=\"keyword\">JOIN</span> 表<span class=\"number\">2</span> <span class=\"keyword\">ON</span> 条件;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 右外连接</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> 字段列表 <span class=\"keyword\">FROM</span> 表<span class=\"number\">1</span> <span class=\"keyword\">RIGHT</span> [<span class=\"keyword\">OUTER</span>] <span class=\"keyword\">JOIN</span> 表<span class=\"number\">2</span> <span class=\"keyword\">ON</span> 条件;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>左外连接：相当于查询A表所有数据和交集部分数据</p>\n<p>右外连接：相当于查询B表所有数据和交集部分数据</p>\n</blockquote>\n</li>\n<li><p>案例</p>\n<ul>\n<li><p>查询emp表所有数据和对应的部门信息（左外连接）</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> emp <span class=\"keyword\">left</span> <span class=\"keyword\">join</span> dept <span class=\"keyword\">on</span> emp.dep_id <span class=\"operator\">=</span> dept.did;</span><br></pre></td></tr></table></figure>\n\n<p>执行语句结果如下：</p>\n<p>结果显示查询到了左表（emp）中所有的数据及两张表能关联的数据。</p>\n</li>\n<li><p>查询dept表所有数据和对应的员工信息（右外连接）</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> emp <span class=\"keyword\">right</span> <span class=\"keyword\">join</span> dept <span class=\"keyword\">on</span> emp.dep_id <span class=\"operator\">=</span> dept.did;</span><br></pre></td></tr></table></figure>\n\n<p>执行语句结果如下：</p>\n<p>结果显示查询到了右表（dept）中所有的数据及两张表能关联的数据。</p>\n<p>要查询出部门表中所有的数据，也可以通过左外连接实现，只需要将两个表的位置进行互换：</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> dept <span class=\"keyword\">left</span> <span class=\"keyword\">join</span> emp <span class=\"keyword\">on</span> emp.dep_id <span class=\"operator\">=</span> dept.did;</span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"3-3-子查询\"><a href=\"#3-3-子查询\" class=\"headerlink\" title=\"3.3  子查询\"></a>3.3  子查询</h3><ul>\n<li><p>概念</p>\n<p>==查询中嵌套查询，称嵌套查询为子查询。==</p>\n<p>什么是查询中嵌套查询呢？我们通过一个例子来看：</p>\n<p><strong>需求：查询工资高于猪八戒的员工信息。</strong></p>\n<p>来实现这个需求，我们就可以通过二步实现，第一步：先查询出来 猪八戒的工资</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> salary <span class=\"keyword\">from</span> emp <span class=\"keyword\">where</span> name <span class=\"operator\">=</span> <span class=\"string\">&#x27;猪八戒&#x27;</span></span><br></pre></td></tr></table></figure>\n\n<p> 第二步：查询工资高于猪八戒的员工信息</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> emp <span class=\"keyword\">where</span> salary <span class=\"operator\">&gt;</span> <span class=\"number\">3600</span>;</span><br></pre></td></tr></table></figure>\n\n<p>第二步中的3600可以通过第一步的sql查询出来，所以将3600用第一步的sql语句进行替换</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> emp <span class=\"keyword\">where</span> salary <span class=\"operator\">&gt;</span> (<span class=\"keyword\">select</span> salary <span class=\"keyword\">from</span> emp <span class=\"keyword\">where</span> name <span class=\"operator\">=</span> <span class=\"string\">&#x27;猪八戒&#x27;</span>);</span><br></pre></td></tr></table></figure>\n\n<p>这就是查询语句中嵌套查询语句。</p>\n</li>\n<li><p>子查询根据查询结果不同，作用不同</p>\n<ul>\n<li>子查询语句结果是单行单列，子查询语句作为条件值，使用 =  !=  &gt;  &lt;  等进行条件判断</li>\n<li>子查询语句结果是多行单列，子查询语句作为条件值，使用 in 等关键字进行条件判断</li>\n<li>子查询语句结果是多行多列，子查询语句作为虚拟表</li>\n</ul>\n</li>\n<li><p>案例</p>\n<ul>\n<li><p>查询 ‘财务部’ 和 ‘市场部’ 所有的员工信息</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 查询 &#x27;财务部&#x27; 或者 &#x27;市场部&#x27; 所有的员工的部门did</span></span><br><span class=\"line\"><span class=\"keyword\">select</span> did <span class=\"keyword\">from</span> dept <span class=\"keyword\">where</span> dname <span class=\"operator\">=</span> <span class=\"string\">&#x27;财务部&#x27;</span> <span class=\"keyword\">or</span> dname <span class=\"operator\">=</span> <span class=\"string\">&#x27;市场部&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> emp <span class=\"keyword\">where</span> dep_id <span class=\"keyword\">in</span> (<span class=\"keyword\">select</span> did <span class=\"keyword\">from</span> dept <span class=\"keyword\">where</span> dname <span class=\"operator\">=</span> <span class=\"string\">&#x27;财务部&#x27;</span> <span class=\"keyword\">or</span> dname <span class=\"operator\">=</span> <span class=\"string\">&#x27;市场部&#x27;</span>);</span><br></pre></td></tr></table></figure></li>\n<li><p>查询入职日期是 ‘2011-11-11’ 之后的员工信息和部门信息</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 查询入职日期是 &#x27;2011-11-11&#x27; 之后的员工信息</span></span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> emp <span class=\"keyword\">where</span> join_date <span class=\"operator\">&gt;</span> <span class=\"string\">&#x27;2011-11-11&#x27;</span> ;</span><br><span class=\"line\"><span class=\"comment\">-- 将上面语句的结果作为虚拟表和dept表进行内连接查询</span></span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> (<span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> emp <span class=\"keyword\">where</span> join_date <span class=\"operator\">&gt;</span> <span class=\"string\">&#x27;2011-11-11&#x27;</span> ) t1, dept <span class=\"keyword\">where</span> t1.dep_id <span class=\"operator\">=</span> dept.did;</span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"3-4-案例\"><a href=\"#3-4-案例\" class=\"headerlink\" title=\"3.4  案例\"></a>3.4  案例</h3><ul>\n<li>环境准备：</li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">DROP</span> <span class=\"keyword\">TABLE</span> IF <span class=\"keyword\">EXISTS</span> emp;</span><br><span class=\"line\"><span class=\"keyword\">DROP</span> <span class=\"keyword\">TABLE</span> IF <span class=\"keyword\">EXISTS</span> dept;</span><br><span class=\"line\"><span class=\"keyword\">DROP</span> <span class=\"keyword\">TABLE</span> IF <span class=\"keyword\">EXISTS</span> job;</span><br><span class=\"line\"><span class=\"keyword\">DROP</span> <span class=\"keyword\">TABLE</span> IF <span class=\"keyword\">EXISTS</span> salarygrade;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 部门表</span></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> dept (</span><br><span class=\"line\">  did <span class=\"type\">INT</span> <span class=\"keyword\">PRIMARY</span> KEY <span class=\"keyword\">PRIMARY</span> KEY, <span class=\"comment\">-- 部门id</span></span><br><span class=\"line\">  dname <span class=\"type\">VARCHAR</span>(<span class=\"number\">50</span>), <span class=\"comment\">-- 部门名称</span></span><br><span class=\"line\">  loc <span class=\"type\">VARCHAR</span>(<span class=\"number\">50</span>) <span class=\"comment\">-- 部门所在地</span></span><br><span class=\"line\">);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 职务表，职务名称，职务描述</span></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> job (</span><br><span class=\"line\">  id <span class=\"type\">INT</span> <span class=\"keyword\">PRIMARY</span> KEY,</span><br><span class=\"line\">  jname <span class=\"type\">VARCHAR</span>(<span class=\"number\">20</span>),</span><br><span class=\"line\">  description <span class=\"type\">VARCHAR</span>(<span class=\"number\">50</span>)</span><br><span class=\"line\">);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 员工表</span></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> emp (</span><br><span class=\"line\">  id <span class=\"type\">INT</span> <span class=\"keyword\">PRIMARY</span> KEY, <span class=\"comment\">-- 员工id</span></span><br><span class=\"line\">  ename <span class=\"type\">VARCHAR</span>(<span class=\"number\">50</span>), <span class=\"comment\">-- 员工姓名</span></span><br><span class=\"line\">  job_id <span class=\"type\">INT</span>, <span class=\"comment\">-- 职务id</span></span><br><span class=\"line\">  mgr <span class=\"type\">INT</span> , <span class=\"comment\">-- 上级领导</span></span><br><span class=\"line\">  joindate <span class=\"type\">DATE</span>, <span class=\"comment\">-- 入职日期</span></span><br><span class=\"line\">  salary <span class=\"type\">DECIMAL</span>(<span class=\"number\">7</span>,<span class=\"number\">2</span>), <span class=\"comment\">-- 工资</span></span><br><span class=\"line\">  bonus <span class=\"type\">DECIMAL</span>(<span class=\"number\">7</span>,<span class=\"number\">2</span>), <span class=\"comment\">-- 奖金</span></span><br><span class=\"line\">  dept_id <span class=\"type\">INT</span>, <span class=\"comment\">-- 所在部门编号</span></span><br><span class=\"line\">  <span class=\"keyword\">CONSTRAINT</span> emp_jobid_ref_job_id_fk <span class=\"keyword\">FOREIGN</span> KEY (job_id) <span class=\"keyword\">REFERENCES</span> job (id),</span><br><span class=\"line\">  <span class=\"keyword\">CONSTRAINT</span> emp_deptid_ref_dept_id_fk <span class=\"keyword\">FOREIGN</span> KEY (dept_id) <span class=\"keyword\">REFERENCES</span> dept (id)</span><br><span class=\"line\">);</span><br><span class=\"line\"><span class=\"comment\">-- 工资等级表</span></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> salarygrade (</span><br><span class=\"line\">  grade <span class=\"type\">INT</span> <span class=\"keyword\">PRIMARY</span> KEY,   <span class=\"comment\">-- 级别</span></span><br><span class=\"line\">  losalary <span class=\"type\">INT</span>,  <span class=\"comment\">-- 最低工资</span></span><br><span class=\"line\">  hisalary <span class=\"type\">INT</span> <span class=\"comment\">-- 最高工资</span></span><br><span class=\"line\">);</span><br><span class=\"line\">\t\t\t\t</span><br><span class=\"line\"><span class=\"comment\">-- 添加4个部门</span></span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> dept(did,dname,loc) <span class=\"keyword\">VALUES</span> </span><br><span class=\"line\">(<span class=\"number\">10</span>,<span class=\"string\">&#x27;教研部&#x27;</span>,<span class=\"string\">&#x27;北京&#x27;</span>),</span><br><span class=\"line\">(<span class=\"number\">20</span>,<span class=\"string\">&#x27;学工部&#x27;</span>,<span class=\"string\">&#x27;上海&#x27;</span>),</span><br><span class=\"line\">(<span class=\"number\">30</span>,<span class=\"string\">&#x27;销售部&#x27;</span>,<span class=\"string\">&#x27;广州&#x27;</span>),</span><br><span class=\"line\">(<span class=\"number\">40</span>,<span class=\"string\">&#x27;财务部&#x27;</span>,<span class=\"string\">&#x27;深圳&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 添加4个职务</span></span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> job (id, jname, description) <span class=\"keyword\">VALUES</span></span><br><span class=\"line\">(<span class=\"number\">1</span>, <span class=\"string\">&#x27;董事长&#x27;</span>, <span class=\"string\">&#x27;管理整个公司，接单&#x27;</span>),</span><br><span class=\"line\">(<span class=\"number\">2</span>, <span class=\"string\">&#x27;经理&#x27;</span>, <span class=\"string\">&#x27;管理部门员工&#x27;</span>),</span><br><span class=\"line\">(<span class=\"number\">3</span>, <span class=\"string\">&#x27;销售员&#x27;</span>, <span class=\"string\">&#x27;向客人推销产品&#x27;</span>),</span><br><span class=\"line\">(<span class=\"number\">4</span>, <span class=\"string\">&#x27;文员&#x27;</span>, <span class=\"string\">&#x27;使用办公软件&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 添加员工</span></span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> emp(id,ename,job_id,mgr,joindate,salary,bonus,dept_id) <span class=\"keyword\">VALUES</span> </span><br><span class=\"line\">(<span class=\"number\">1001</span>,<span class=\"string\">&#x27;孙悟空&#x27;</span>,<span class=\"number\">4</span>,<span class=\"number\">1004</span>,<span class=\"string\">&#x27;2000-12-17&#x27;</span>,<span class=\"string\">&#x27;8000.00&#x27;</span>,<span class=\"keyword\">NULL</span>,<span class=\"number\">20</span>),</span><br><span class=\"line\">(<span class=\"number\">1002</span>,<span class=\"string\">&#x27;卢俊义&#x27;</span>,<span class=\"number\">3</span>,<span class=\"number\">1006</span>,<span class=\"string\">&#x27;2001-02-20&#x27;</span>,<span class=\"string\">&#x27;16000.00&#x27;</span>,<span class=\"string\">&#x27;3000.00&#x27;</span>,<span class=\"number\">30</span>),</span><br><span class=\"line\">(<span class=\"number\">1003</span>,<span class=\"string\">&#x27;林冲&#x27;</span>,<span class=\"number\">3</span>,<span class=\"number\">1006</span>,<span class=\"string\">&#x27;2001-02-22&#x27;</span>,<span class=\"string\">&#x27;12500.00&#x27;</span>,<span class=\"string\">&#x27;5000.00&#x27;</span>,<span class=\"number\">30</span>),</span><br><span class=\"line\">(<span class=\"number\">1004</span>,<span class=\"string\">&#x27;唐僧&#x27;</span>,<span class=\"number\">2</span>,<span class=\"number\">1009</span>,<span class=\"string\">&#x27;2001-04-02&#x27;</span>,<span class=\"string\">&#x27;29750.00&#x27;</span>,<span class=\"keyword\">NULL</span>,<span class=\"number\">20</span>),</span><br><span class=\"line\">(<span class=\"number\">1005</span>,<span class=\"string\">&#x27;李逵&#x27;</span>,<span class=\"number\">4</span>,<span class=\"number\">1006</span>,<span class=\"string\">&#x27;2001-09-28&#x27;</span>,<span class=\"string\">&#x27;12500.00&#x27;</span>,<span class=\"string\">&#x27;14000.00&#x27;</span>,<span class=\"number\">30</span>),</span><br><span class=\"line\">(<span class=\"number\">1006</span>,<span class=\"string\">&#x27;宋江&#x27;</span>,<span class=\"number\">2</span>,<span class=\"number\">1009</span>,<span class=\"string\">&#x27;2001-05-01&#x27;</span>,<span class=\"string\">&#x27;28500.00&#x27;</span>,<span class=\"keyword\">NULL</span>,<span class=\"number\">30</span>),</span><br><span class=\"line\">(<span class=\"number\">1007</span>,<span class=\"string\">&#x27;刘备&#x27;</span>,<span class=\"number\">2</span>,<span class=\"number\">1009</span>,<span class=\"string\">&#x27;2001-09-01&#x27;</span>,<span class=\"string\">&#x27;24500.00&#x27;</span>,<span class=\"keyword\">NULL</span>,<span class=\"number\">10</span>),</span><br><span class=\"line\">(<span class=\"number\">1008</span>,<span class=\"string\">&#x27;猪八戒&#x27;</span>,<span class=\"number\">4</span>,<span class=\"number\">1004</span>,<span class=\"string\">&#x27;2007-04-19&#x27;</span>,<span class=\"string\">&#x27;30000.00&#x27;</span>,<span class=\"keyword\">NULL</span>,<span class=\"number\">20</span>),</span><br><span class=\"line\">(<span class=\"number\">1009</span>,<span class=\"string\">&#x27;罗贯中&#x27;</span>,<span class=\"number\">1</span>,<span class=\"keyword\">NULL</span>,<span class=\"string\">&#x27;2001-11-17&#x27;</span>,<span class=\"string\">&#x27;50000.00&#x27;</span>,<span class=\"keyword\">NULL</span>,<span class=\"number\">10</span>),</span><br><span class=\"line\">(<span class=\"number\">1010</span>,<span class=\"string\">&#x27;吴用&#x27;</span>,<span class=\"number\">3</span>,<span class=\"number\">1006</span>,<span class=\"string\">&#x27;2001-09-08&#x27;</span>,<span class=\"string\">&#x27;15000.00&#x27;</span>,<span class=\"string\">&#x27;0.00&#x27;</span>,<span class=\"number\">30</span>),</span><br><span class=\"line\">(<span class=\"number\">1011</span>,<span class=\"string\">&#x27;沙僧&#x27;</span>,<span class=\"number\">4</span>,<span class=\"number\">1004</span>,<span class=\"string\">&#x27;2007-05-23&#x27;</span>,<span class=\"string\">&#x27;11000.00&#x27;</span>,<span class=\"keyword\">NULL</span>,<span class=\"number\">20</span>),</span><br><span class=\"line\">(<span class=\"number\">1012</span>,<span class=\"string\">&#x27;李逵&#x27;</span>,<span class=\"number\">4</span>,<span class=\"number\">1006</span>,<span class=\"string\">&#x27;2001-12-03&#x27;</span>,<span class=\"string\">&#x27;9500.00&#x27;</span>,<span class=\"keyword\">NULL</span>,<span class=\"number\">30</span>),</span><br><span class=\"line\">(<span class=\"number\">1013</span>,<span class=\"string\">&#x27;小白龙&#x27;</span>,<span class=\"number\">4</span>,<span class=\"number\">1004</span>,<span class=\"string\">&#x27;2001-12-03&#x27;</span>,<span class=\"string\">&#x27;30000.00&#x27;</span>,<span class=\"keyword\">NULL</span>,<span class=\"number\">20</span>),</span><br><span class=\"line\">(<span class=\"number\">1014</span>,<span class=\"string\">&#x27;关羽&#x27;</span>,<span class=\"number\">4</span>,<span class=\"number\">1007</span>,<span class=\"string\">&#x27;2002-01-23&#x27;</span>,<span class=\"string\">&#x27;13000.00&#x27;</span>,<span class=\"keyword\">NULL</span>,<span class=\"number\">10</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 添加5个工资等级</span></span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> salarygrade(grade,losalary,hisalary) <span class=\"keyword\">VALUES</span> </span><br><span class=\"line\">(<span class=\"number\">1</span>,<span class=\"number\">7000</span>,<span class=\"number\">12000</span>),</span><br><span class=\"line\">(<span class=\"number\">2</span>,<span class=\"number\">12010</span>,<span class=\"number\">14000</span>),</span><br><span class=\"line\">(<span class=\"number\">3</span>,<span class=\"number\">14010</span>,<span class=\"number\">20000</span>),</span><br><span class=\"line\">(<span class=\"number\">4</span>,<span class=\"number\">20010</span>,<span class=\"number\">30000</span>),</span><br><span class=\"line\">(<span class=\"number\">5</span>,<span class=\"number\">30010</span>,<span class=\"number\">99990</span>);</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>需求</p>\n<ol>\n<li><p>查询所有员工信息。查询员工编号，员工姓名，工资，职务名称，职务描述</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">\t分析：</span></span><br><span class=\"line\"><span class=\"comment\">\t\t1. 员工编号，员工姓名，工资 信息在emp 员工表中</span></span><br><span class=\"line\"><span class=\"comment\">\t\t2. 职务名称，职务描述 信息在 job 职务表中</span></span><br><span class=\"line\"><span class=\"comment\">\t\t3. job 职务表 和 emp 员工表 是 一对多的关系 emp.job_id = job.id</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\"><span class=\"comment\">-- 方式一 ：隐式内连接</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">\temp.id,</span><br><span class=\"line\">\temp.ename,</span><br><span class=\"line\">\temp.salary,</span><br><span class=\"line\">\tjob.jname,</span><br><span class=\"line\">\tjob.description</span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">\temp,</span><br><span class=\"line\">\tjob</span><br><span class=\"line\"><span class=\"keyword\">WHERE</span></span><br><span class=\"line\">\temp.job_id <span class=\"operator\">=</span> job.id;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 方式二 ：显式内连接</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">\temp.id,</span><br><span class=\"line\">\temp.ename,</span><br><span class=\"line\">\temp.salary,</span><br><span class=\"line\">\tjob.jname,</span><br><span class=\"line\">\tjob.description</span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">\temp</span><br><span class=\"line\"><span class=\"keyword\">INNER</span> <span class=\"keyword\">JOIN</span> job <span class=\"keyword\">ON</span> emp.job_id <span class=\"operator\">=</span> job.id;</span><br></pre></td></tr></table></figure></li>\n<li><p>查询员工编号，员工姓名，工资，职务名称，职务描述，部门名称，部门位置</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">\t分析：</span></span><br><span class=\"line\"><span class=\"comment\">\t\t1. 员工编号，员工姓名，工资 信息在emp 员工表中</span></span><br><span class=\"line\"><span class=\"comment\">\t\t2. 职务名称，职务描述 信息在 job 职务表中</span></span><br><span class=\"line\"><span class=\"comment\">\t\t3. job 职务表 和 emp 员工表 是 一对多的关系 emp.job_id = job.id</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">\t\t4. 部门名称，部门位置 来自于 部门表 dept</span></span><br><span class=\"line\"><span class=\"comment\">\t\t5. dept 和 emp 一对多关系 dept.id = emp.dept_id</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 方式一 ：隐式内连接</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">\temp.id,</span><br><span class=\"line\">\temp.ename,</span><br><span class=\"line\">\temp.salary,</span><br><span class=\"line\">\tjob.jname,</span><br><span class=\"line\">\tjob.description,</span><br><span class=\"line\">\tdept.dname,</span><br><span class=\"line\">\tdept.loc</span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">\temp,</span><br><span class=\"line\">\tjob,</span><br><span class=\"line\">\tdept</span><br><span class=\"line\"><span class=\"keyword\">WHERE</span></span><br><span class=\"line\">\temp.job_id <span class=\"operator\">=</span> job.id</span><br><span class=\"line\">\t<span class=\"keyword\">and</span> dept.id <span class=\"operator\">=</span> emp.dept_id</span><br><span class=\"line\">;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 方式二 ：显式内连接</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">\temp.id,</span><br><span class=\"line\">\temp.ename,</span><br><span class=\"line\">\temp.salary,</span><br><span class=\"line\">\tjob.jname,</span><br><span class=\"line\">\tjob.description,</span><br><span class=\"line\">\tdept.dname,</span><br><span class=\"line\">\tdept.loc</span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">\temp</span><br><span class=\"line\"><span class=\"keyword\">INNER</span> <span class=\"keyword\">JOIN</span> job <span class=\"keyword\">ON</span> emp.job_id <span class=\"operator\">=</span> job.id</span><br><span class=\"line\"><span class=\"keyword\">INNER</span> <span class=\"keyword\">JOIN</span> dept <span class=\"keyword\">ON</span> dept.id <span class=\"operator\">=</span> emp.dept_id</span><br></pre></td></tr></table></figure></li>\n<li><p>查询员工姓名，工资，工资等级</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">\t分析：</span></span><br><span class=\"line\"><span class=\"comment\">\t\t1. 员工姓名，工资 信息在emp 员工表中</span></span><br><span class=\"line\"><span class=\"comment\">\t\t2. 工资等级 信息在 salarygrade 工资等级表中</span></span><br><span class=\"line\"><span class=\"comment\">\t\t3. emp.salary &gt;= salarygrade.losalary  and emp.salary &lt;= salarygrade.hisalary</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">\temp.ename,</span><br><span class=\"line\">\temp.salary,</span><br><span class=\"line\">\tt2.<span class=\"operator\">*</span></span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">\temp,</span><br><span class=\"line\">\tsalarygrade t2</span><br><span class=\"line\"><span class=\"keyword\">WHERE</span></span><br><span class=\"line\">\temp.salary <span class=\"operator\">&gt;=</span> t2.losalary</span><br><span class=\"line\"><span class=\"keyword\">AND</span> emp.salary <span class=\"operator\">&lt;=</span> t2.hisalary</span><br></pre></td></tr></table></figure></li>\n<li><p>查询员工姓名，工资，职务名称，职务描述，部门名称，部门位置，工资等级</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">\t分析：</span></span><br><span class=\"line\"><span class=\"comment\">\t\t1. 员工编号，员工姓名，工资 信息在emp 员工表中</span></span><br><span class=\"line\"><span class=\"comment\">\t\t2. 职务名称，职务描述 信息在 job 职务表中</span></span><br><span class=\"line\"><span class=\"comment\">\t\t3. job 职务表 和 emp 员工表 是 一对多的关系 emp.job_id = job.id</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">\t\t4. 部门名称，部门位置 来自于 部门表 dept</span></span><br><span class=\"line\"><span class=\"comment\">\t\t5. dept 和 emp 一对多关系 dept.id = emp.dept_id</span></span><br><span class=\"line\"><span class=\"comment\">\t\t6. 工资等级 信息在 salarygrade 工资等级表中</span></span><br><span class=\"line\"><span class=\"comment\">\t\t7. emp.salary &gt;= salarygrade.losalary  and emp.salary &lt;= salarygrade.hisalary</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">\temp.id,</span><br><span class=\"line\">\temp.ename,</span><br><span class=\"line\">\temp.salary,</span><br><span class=\"line\">\tjob.jname,</span><br><span class=\"line\">\tjob.description,</span><br><span class=\"line\">\tdept.dname,</span><br><span class=\"line\">\tdept.loc,</span><br><span class=\"line\">\tt2.grade</span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">\temp</span><br><span class=\"line\"><span class=\"keyword\">INNER</span> <span class=\"keyword\">JOIN</span> job <span class=\"keyword\">ON</span> emp.job_id <span class=\"operator\">=</span> job.id</span><br><span class=\"line\"><span class=\"keyword\">INNER</span> <span class=\"keyword\">JOIN</span> dept <span class=\"keyword\">ON</span> dept.id <span class=\"operator\">=</span> emp.dept_id</span><br><span class=\"line\"><span class=\"keyword\">INNER</span> <span class=\"keyword\">JOIN</span> salarygrade t2 <span class=\"keyword\">ON</span> emp.salary <span class=\"keyword\">BETWEEN</span> t2.losalary <span class=\"keyword\">and</span> t2.hisalary;</span><br></pre></td></tr></table></figure></li>\n<li><p>查询出部门编号、部门名称、部门位置、部门人数</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">\t分析：</span></span><br><span class=\"line\"><span class=\"comment\">\t\t1. 部门编号、部门名称、部门位置 来自于部门 dept 表</span></span><br><span class=\"line\"><span class=\"comment\">\t\t2. 部门人数: 在emp表中 按照dept_id 进行分组，然后count(*)统计数量</span></span><br><span class=\"line\"><span class=\"comment\">\t\t3. 使用子查询，让部门表和分组后的表进行内连接</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\"><span class=\"comment\">-- 根据部门id分组查询每一个部门id和员工数</span></span><br><span class=\"line\"><span class=\"keyword\">select</span> dept_id, <span class=\"built_in\">count</span>(<span class=\"operator\">*</span>) <span class=\"keyword\">from</span> emp <span class=\"keyword\">group</span> <span class=\"keyword\">by</span> dept_id;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">\tdept.id,</span><br><span class=\"line\">\tdept.dname,</span><br><span class=\"line\">\tdept.loc,</span><br><span class=\"line\">\tt1.count</span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">\tdept,</span><br><span class=\"line\">\t(</span><br><span class=\"line\">\t\t<span class=\"keyword\">SELECT</span></span><br><span class=\"line\">\t\t\tdept_id,</span><br><span class=\"line\">\t\t\t<span class=\"built_in\">count</span>(<span class=\"operator\">*</span>) count</span><br><span class=\"line\">\t\t<span class=\"keyword\">FROM</span></span><br><span class=\"line\">\t\t\temp</span><br><span class=\"line\">\t\t<span class=\"keyword\">GROUP</span> <span class=\"keyword\">BY</span></span><br><span class=\"line\">\t\t\tdept_id</span><br><span class=\"line\">\t) t1</span><br><span class=\"line\"><span class=\"keyword\">WHERE</span></span><br><span class=\"line\">\tdept.id <span class=\"operator\">=</span> t1.dept_id</span><br></pre></td></tr></table></figure></li>\n</ol>\n</li>\n</ul>\n<h2 id=\"4，事务\"><a href=\"#4，事务\" class=\"headerlink\" title=\"4，事务\"></a>4，事务</h2><h3 id=\"4-1-概述\"><a href=\"#4-1-概述\" class=\"headerlink\" title=\"4.1  概述\"></a>4.1  概述</h3><blockquote>\n<p>数据库的事务（Transaction）是一种机制、一个操作序列，包含了==一组数据库操作命令==。</p>\n<p>事务把所有的命令作为一个整体一起向系统提交或撤销操作请求，即这一组数据库命令==要么同时成功，要么同时失败==。</p>\n<p>事务是一个不可分割的工作逻辑单元。</p>\n</blockquote>\n<p>这些概念不好理解，接下来举例说明，如下图有一张表</p>\n<p>张三和李四账户中各有100块钱，现李四需要转换500块钱给张三，具体的转账操作为</p>\n<ul>\n<li>第一步：查询李四账户余额</li>\n<li>第二步：从李四账户金额 -500</li>\n<li>第三步：给张三账户金额 +500</li>\n</ul>\n<p>现在假设在转账过程中第二步完成后出现了异常第三步没有执行，就会造成李四账户金额少了500，而张三金额并没有多500；这样的系统是有问题的。如果解决呢？使用事务可以解决上述问题</p>\n<p>从上图可以看到在转账前开启事务，如果出现了异常回滚事务，三步正常执行就提交事务，这样就可以完美解决问题。</p>\n<h3 id=\"4-2-语法\"><a href=\"#4-2-语法\" class=\"headerlink\" title=\"4.2  语法\"></a>4.2  语法</h3><ul>\n<li><p>开启事务</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">START</span> TRANSACTION;</span><br><span class=\"line\">或者  </span><br><span class=\"line\"><span class=\"keyword\">BEGIN</span>;</span><br></pre></td></tr></table></figure></li>\n<li><p>提交事务</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">commit</span>;</span><br></pre></td></tr></table></figure></li>\n<li><p>回滚事务</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">rollback</span>;</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h3 id=\"4-3-代码验证\"><a href=\"#4-3-代码验证\" class=\"headerlink\" title=\"4.3  代码验证\"></a>4.3  代码验证</h3><ul>\n<li><p>环境准备</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">DROP</span> <span class=\"keyword\">TABLE</span> IF <span class=\"keyword\">EXISTS</span> account;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 创建账户表</span></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> account(</span><br><span class=\"line\">\tid <span class=\"type\">int</span> <span class=\"keyword\">PRIMARY</span> KEY auto_increment,</span><br><span class=\"line\">\tname <span class=\"type\">varchar</span>(<span class=\"number\">10</span>),</span><br><span class=\"line\">\tmoney <span class=\"keyword\">double</span>(<span class=\"number\">10</span>,<span class=\"number\">2</span>)</span><br><span class=\"line\">);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 添加数据</span></span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> account(name,money) <span class=\"keyword\">values</span>(<span class=\"string\">&#x27;张三&#x27;</span>,<span class=\"number\">1000</span>),(<span class=\"string\">&#x27;李四&#x27;</span>,<span class=\"number\">1000</span>);</span><br></pre></td></tr></table></figure></li>\n<li><p>不加事务演示问题</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 转账操作</span></span><br><span class=\"line\"><span class=\"comment\">-- 1. 查询李四账户金额是否大于500</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 2. 李四账户 -500</span></span><br><span class=\"line\"><span class=\"keyword\">UPDATE</span> account <span class=\"keyword\">set</span> money <span class=\"operator\">=</span> money <span class=\"operator\">-</span> <span class=\"number\">500</span> <span class=\"keyword\">where</span> name <span class=\"operator\">=</span> <span class=\"string\">&#x27;李四&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">出现异常了...  <span class=\"comment\">-- 此处不是注释，在整体执行时会出问题，后面的sql则不执行</span></span><br><span class=\"line\"><span class=\"comment\">-- 3. 张三账户 +500</span></span><br><span class=\"line\"><span class=\"keyword\">UPDATE</span> account <span class=\"keyword\">set</span> money <span class=\"operator\">=</span> money <span class=\"operator\">+</span> <span class=\"number\">500</span> <span class=\"keyword\">where</span> name <span class=\"operator\">=</span> <span class=\"string\">&#x27;张三&#x27;</span>;</span><br></pre></td></tr></table></figure>\n\n<p>整体执行结果肯定会出问题，我们查询账户表中数据，发现李四账户少了500。</p>\n</li>\n<li><p>添加事务sql如下：</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 开启事务</span></span><br><span class=\"line\"><span class=\"keyword\">BEGIN</span>;</span><br><span class=\"line\"><span class=\"comment\">-- 转账操作</span></span><br><span class=\"line\"><span class=\"comment\">-- 1. 查询李四账户金额是否大于500</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 2. 李四账户 -500</span></span><br><span class=\"line\"><span class=\"keyword\">UPDATE</span> account <span class=\"keyword\">set</span> money <span class=\"operator\">=</span> money <span class=\"operator\">-</span> <span class=\"number\">500</span> <span class=\"keyword\">where</span> name <span class=\"operator\">=</span> <span class=\"string\">&#x27;李四&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">出现异常了...  <span class=\"comment\">-- 此处不是注释，在整体执行时会出问题，后面的sql则不执行</span></span><br><span class=\"line\"><span class=\"comment\">-- 3. 张三账户 +500</span></span><br><span class=\"line\"><span class=\"keyword\">UPDATE</span> account <span class=\"keyword\">set</span> money <span class=\"operator\">=</span> money <span class=\"operator\">+</span> <span class=\"number\">500</span> <span class=\"keyword\">where</span> name <span class=\"operator\">=</span> <span class=\"string\">&#x27;张三&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 提交事务</span></span><br><span class=\"line\"><span class=\"keyword\">COMMIT</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 回滚事务</span></span><br><span class=\"line\"><span class=\"keyword\">ROLLBACK</span>;</span><br></pre></td></tr></table></figure>\n\n<p>上面sql中的执行成功进选择执行提交事务，而出现问题则执行回滚事务的语句。以后我们肯定不可能这样操作，而是在java中进行操作，在java中可以抓取异常，没出现异常提交事务，出现异常回滚事务。</p>\n</li>\n</ul>\n<h3 id=\"4-4-事务的四大特征\"><a href=\"#4-4-事务的四大特征\" class=\"headerlink\" title=\"4.4  事务的四大特征\"></a>4.4  事务的四大特征</h3><ul>\n<li><p>原子性（Atomicity）: 事务是不可分割的最小操作单位，要么同时成功，要么同时失败</p>\n</li>\n<li><p>一致性（Consistency） :事务完成时，必须使所有的数据都保持一致状态</p>\n</li>\n<li><p>隔离性（Isolation） :多个事务之间，操作的可见性</p>\n</li>\n<li><p>持久性（Durability） :事务一旦提交或回滚，它对数据库中的数据的改变就是永久的</p>\n</li>\n</ul>\n<blockquote>\n<p>==说明：==</p>\n<p>mysql中事务是自动提交的。</p>\n<p>也就是说我们不添加事务执行sql语句，语句执行完毕会自动的提交事务。</p>\n<p>可以通过下面语句查询默认提交方式：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SELECT @<span class=\"meta\">@autocommit</span>;</span><br></pre></td></tr></table></figure>\n\n<p>查询到的结果是1 则表示自动提交，结果是0表示手动提交。当然也可以通过下面语句修改提交方式</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">set</span> @<span class=\"variable\">@autocommit</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>;</span><br></pre></td></tr></table></figure>\n</blockquote>\n","site":{"data":{"link":[{"class_name":"友情链接","class_desc":"那些人，那些事","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]},{"class_name":"网站","class_desc":"值得推荐的网站","link_list":[{"name":"Youtube","link":"https://www.youtube.com/","avatar":"https://i.loli.net/2020/05/14/9ZkGg8v3azHJfM1.png","descr":"视频网站"},{"name":"Weibo","link":"https://www.weibo.com/","avatar":"https://i.loli.net/2020/05/14/TLJBum386vcnI1P.png","descr":"中国最大社交分享平台"},{"name":"Twitter","link":"https://twitter.com/","avatar":"https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png","descr":"社交分享平台"}]}]}},"cover":"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7","excerpt":"","more":"<h2 id=\"MySQL基础\"><a href=\"#MySQL基础\" class=\"headerlink\" title=\"MySQL基础\"></a>MySQL基础</h2><blockquote>\n<p> – 笔记来自B站黑马程序员的javaweb课程</p>\n</blockquote>\n<p><strong>今日目标：</strong></p>\n<blockquote>\n<ul>\n<li>完成MySQL的安装及登陆基本操作</li>\n<li>能通过SQL对数据库进行CRUD</li>\n<li>能通过SQL对表进行CRUD</li>\n<li>能通过SQL对数据进行CRUD</li>\n</ul>\n</blockquote>\n<h2 id=\"1，数据库相关概念\"><a href=\"#1，数据库相关概念\" class=\"headerlink\" title=\"1，数据库相关概念\"></a>1，数据库相关概念</h2><p>以前我们做系统，数据持久化的存储采用的是文件存储。存储到文件中可以达到系统关闭数据不会丢失的效果，当然文件存储也有它的弊端。</p>\n<p>假设在文件中存储以下的数据：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">姓名\t年龄\t性别\t住址</span><br><span class=\"line\">张三\t23\t男\t北京西三旗</span><br><span class=\"line\">李四\t24\t女\t北京西二旗</span><br><span class=\"line\">王五\t25\t男\t西安软件新城</span><br></pre></td></tr></table></figure>\n\n<p>现要修改李四这条数据的性别数据改为男，我们现学习的IO技术可以通过将所有的数据读取到内存中，然后进行修改再存到该文件中。通过这种方式操作存在很大问题，现在只有三条数据，如果文件中存储1T的数据，那么就会发现内存根本就存储不了。</p>\n<p>现需要既能持久化存储数据，也要能避免上述问题的技术使用在我们的系统中。数据库就是这样的一门技术。</p>\n<h3 id=\"1-1-数据库\"><a href=\"#1-1-数据库\" class=\"headerlink\" title=\"1.1  数据库\"></a>1.1  数据库</h3><ul>\n<li><p>存储和管理数据的仓库，数据是有组织的进行存储。</p>\n</li>\n<li><p>数据库英文名是 DataBase，简称DB。</p>\n</li>\n</ul>\n<p>数据库就是将数据存储在硬盘上，可以达到持久化存储的效果。那又是如何解决上述问题的？使用数据库管理系统。</p>\n<h3 id=\"1-2-数据库管理系统\"><a href=\"#1-2-数据库管理系统\" class=\"headerlink\" title=\"1.2  数据库管理系统\"></a>1.2  数据库管理系统</h3><ul>\n<li>管理数据库的大型软件</li>\n<li>英文：DataBase Management System，简称 DBMS</li>\n</ul>\n<p>在电脑上安装了数据库管理系统后，就可以通过数据库管理系统创建数据库来存储数据，也可以通过该系统对数据库中的数据进行数据的增删改查相关的操作。我们平时说的MySQL数据库其实是MySQL数据库管理系统。</p>\n<p>通过上面的描述，大家应该已经知道了 <code>数据库管理系统</code> 和 <code>数据库</code> 的关系。那么有有哪些常见的数据库管理系统呢？</p>\n<h3 id=\"1-3-常见的数据库管理系统\"><a href=\"#1-3-常见的数据库管理系统\" class=\"headerlink\" title=\"1.3  常见的数据库管理系统\"></a>1.3  常见的数据库管理系统</h3><p>接下来对上面列举的数据库管理系统进行简单的介绍：</p>\n<ul>\n<li>Oracle：收费的大型数据库，Oracle 公司的产品</li>\n<li>MySQL： 开源免费的中小型数据库。后来 Sun公司收购了 MySQL，而 Sun 公司又被 Oracle 收购</li>\n<li>SQL Server：MicroSoft 公司收费的中型的数据库。C#、.net 等语言常使用</li>\n<li>PostgreSQL：开源免费中小型的数据库</li>\n<li>DB2：IBM 公司的大型收费数据库产品</li>\n<li>SQLite：嵌入式的微型数据库。如：作为 Android 内置数据库</li>\n<li>MariaDB：开源免费中小型的数据库</li>\n</ul>\n<p>我们课程上学习的是MySQL数据库管理系统，PostgreSQL在一些公司也有使用，此时大家肯定会想以后在公司中如果使用我们没有学习过程的PostgreSQL数据库管理系统怎么办？这点大家大可不必担心，如下图所示：</p>\n<p>我们可以通过数据库管理系统操作数据库，对数据库中的数据进行增删改查操作，而怎么样让用户跟数据库管理系统打交道呢？就可以通过一门编程语言（SQL）来实现。</p>\n<h3 id=\"1-4-SQL\"><a href=\"#1-4-SQL\" class=\"headerlink\" title=\"1.4  SQL\"></a>1.4  SQL</h3><ul>\n<li>英文：Structured Query Language，简称 SQL，结构化查询语言</li>\n<li>操作关系型数据库的编程语言</li>\n<li>定义操作所有关系型数据库的统一标准，可以使用SQL操作所有的关系型数据库管理系统，以后工作中如果使用到了其他的数据库管理系统，也同样的使用SQL来操作。</li>\n</ul>\n<h2 id=\"2，MySQL\"><a href=\"#2，MySQL\" class=\"headerlink\" title=\"2，MySQL\"></a>2，MySQL</h2><h3 id=\"2-1-MySQL安装\"><a href=\"#2-1-MySQL安装\" class=\"headerlink\" title=\"2.1  MySQL安装\"></a>2.1  MySQL安装</h3><blockquote>\n<p><strong>安装环境:Win10 64位</strong><br><strong>软件版本:MySQL 5.7.24 解压版</strong></p>\n</blockquote>\n<h4 id=\"2-1-1-下载\"><a href=\"#2-1-1-下载\" class=\"headerlink\" title=\"2.1.1  下载\"></a>2.1.1  下载</h4><p><a href=\"https://downloads.mysql.com/archives/community/\">https://downloads.mysql.com/archives/community/</a></p>\n<p>点开上面的链接就能看到如下界面：</p>\n<p>选择选择和自己<strong>系统位数</strong>相对应的版本点击右边的<code>Download</code>，此时会进到另一个页面，同样在接近页面底部的地方找到如下图所示的位置：</p>\n<p>不用理会上面的登录和注册按钮，直接点击 <code>No thanks, just start my download.</code> 就可以下载。</p>\n<h4 id=\"2-1-2-安装-解压\"><a href=\"#2-1-2-安装-解压\" class=\"headerlink\" title=\"2.1.2  安装(解压)\"></a>2.1.2  安装(解压)</h4><p>下载完成后我们得到的是一个压缩包，将其解压，我们就可以得到MySQL 5.7.24的软件本体了(就是一个文件夹)，我们可以把它放在你想安装的位置。</p>\n<h3 id=\"2-2-MySQL卸载\"><a href=\"#2-2-MySQL卸载\" class=\"headerlink\" title=\"2.2  MySQL卸载\"></a>2.2  MySQL卸载</h3><p>如果你想卸载MySQL，也很简单。</p>\n<p>右键开始菜单，选择<code>命令提示符(管理员)</code>，打开黑框。</p>\n<ol>\n<li>敲入<code>net stop mysql</code>，回车。</li>\n</ol>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">net stop mysql</span><br></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li>再敲入<code>mysqld -remove mysql</code>，回车。</li>\n</ol>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysqld -remove mysql</span><br></pre></td></tr></table></figure>\n\n<ol start=\"3\">\n<li>最后删除MySQL目录及相关的环境变量。</li>\n</ol>\n<p><strong>至此，MySQL卸载完成！</strong></p>\n<h3 id=\"2-3-MySQL配置\"><a href=\"#2-3-MySQL配置\" class=\"headerlink\" title=\"2.3  MySQL配置\"></a>2.3  MySQL配置</h3><h4 id=\"2-3-1-添加环境变量\"><a href=\"#2-3-1-添加环境变量\" class=\"headerlink\" title=\"2.3.1  添加环境变量\"></a>2.3.1  添加环境变量</h4><blockquote>\n<p>环境变量里面有很多选项，这里我们只用到<code>Path</code>这个参数。为什么在初始化的开始要添加环境变量呢？<br>在黑框(即CMD)中输入一个可执行程序的名字，Windows会先在环境变量中的<code>Path</code>所指的路径中寻找一遍，如果找到了就直接执行，没找到就在当前工作目录找，如果还没找到，就报错。我们添加环境变量的目的就是能够在任意一个黑框直接调用MySQL中的相关程序而不用总是修改工作目录，大大简化了操作。</p>\n</blockquote>\n<p>右键<code>此电脑</code>→<code>属性</code>，点击<code>高级系统设置</code></p>\n<p>点击<code>环境变量</code></p>\n<p>在<code>系统变量</code>中新建MYSQL_HOME</p>\n<p>在<code>系统变量</code>中找到并<strong>双击</strong><code>Path</code></p>\n<p>点击<code>新建</code></p>\n<p>最后点击确定。</p>\n<p><strong>如何验证是否添加成功？</strong></p>\n<p>右键开始菜单(就是屏幕左下角)，选择<code>命令提示符(管理员)</code>，打开黑框，敲入<code>mysql</code>，回车。<br>如果提示<code>Can&#39;t connect to MySQL server on &#39;localhost&#39;</code>则证明添加成功；<br>如果提示<code>mysql不是内部或外部命令，也不是可运行的程序或批处理文件</code>则表示添加添加失败，请重新检查步骤并重试。</p>\n<h4 id=\"2-3-2-新建配置文件\"><a href=\"#2-3-2-新建配置文件\" class=\"headerlink\" title=\"2.3.2  新建配置文件\"></a>2.3.2  新建配置文件</h4><p>新建一个文本文件，内容如下：</p>\n<figure class=\"highlight properties\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">[mysql]</span></span><br><span class=\"line\"><span class=\"attr\">default-character-set</span>=<span class=\"string\">utf8</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">[mysqld]</span></span><br><span class=\"line\"><span class=\"attr\">character-set-server</span>=<span class=\"string\">utf8</span></span><br><span class=\"line\"><span class=\"attr\">default-storage-engine</span>=<span class=\"string\">INNODB</span></span><br><span class=\"line\"><span class=\"attr\">sql_mode</span>=<span class=\"string\">STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION</span></span><br></pre></td></tr></table></figure>\n\n<p>把上面的文本文件另存为，在保存类型里选<code>所有文件 (*.*)</code>，文件名叫<code>my.ini</code>，存放的路径为MySQL的<code>根目录</code>(例如我的是<code>D:\\software\\mysql-5.7.24-winx64</code>,根据自己的MySQL目录位置修改)。</p>\n<p>上面代码意思就是配置数据库的默认编码集为utf-8和默认存储引擎为INNODB。</p>\n<h4 id=\"2-3-3-初始化MySQL\"><a href=\"#2-3-3-初始化MySQL\" class=\"headerlink\" title=\"2.3.3  初始化MySQL\"></a>2.3.3  初始化MySQL</h4><p>在刚才的黑框中敲入<code>mysqld --initialize-insecure</code>，回车，稍微等待一会，如果出现没有出现报错信息(如下图)则证明data目录初始化没有问题，此时再查看MySQL目录下已经有data目录生成。</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysqld --initialize-insecure</span><br></pre></td></tr></table></figure>\n\n\n\n<p>tips：如果出现如下错误</p>\n<p>是由于权限不足导致的，去<code>C:\\Windows\\System32</code> 下以管理员方式运行 cmd.exe</p>\n<p><img src=\"H:\\BaiDuWangPan\\JavaWeb\\day01-MySQL基础\\ppt\\assets\\image-20201109140001186.png\" alt=\"image-20201109140001186\"></p>\n<h4 id=\"2-3-4-注册MySQL服务\"><a href=\"#2-3-4-注册MySQL服务\" class=\"headerlink\" title=\"2.3.4  注册MySQL服务\"></a>2.3.4  注册MySQL服务</h4><p>在黑框里敲入<code>mysqld -install</code>，回车。</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysqld -install</span><br></pre></td></tr></table></figure>\n\n<p>现在你的计算机上已经安装好了MySQL服务了。</p>\n<p>MySQL服务器</p>\n<h4 id=\"2-3-5-启动MySQL服务\"><a href=\"#2-3-5-启动MySQL服务\" class=\"headerlink\" title=\"2.3.5  启动MySQL服务\"></a>2.3.5  启动MySQL服务</h4><p>在黑框里敲入<code>net start mysql</code>，回车。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">net start mysql  <span class=\"comment\">// 启动mysql服务</span></span><br><span class=\"line\">    </span><br><span class=\"line\">net stop mysql  <span class=\"comment\">// 停止mysql服务</span></span><br></pre></td></tr></table></figure>\n\n\n\n<h4 id=\"2-3-6-修改默认账户密码\"><a href=\"#2-3-6-修改默认账户密码\" class=\"headerlink\" title=\"2.3.6  修改默认账户密码\"></a>2.3.6  修改默认账户密码</h4><p>在黑框里敲入<code>mysqladmin -u root password 1234</code>，这里的<code>1234</code>就是指默认管理员(即root账户)的密码，可以自行修改成你喜欢的。</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysqladmin -u root password 1234</span><br></pre></td></tr></table></figure>\n\n<p><strong>至此，MySQL 5.7 解压版安装完毕！</strong></p>\n<h3 id=\"2-4-MySQL登陆和退出\"><a href=\"#2-4-MySQL登陆和退出\" class=\"headerlink\" title=\"2.4  MySQL登陆和退出\"></a>2.4  MySQL登陆和退出</h3><h4 id=\"2-4-1-登陆\"><a href=\"#2-4-1-登陆\" class=\"headerlink\" title=\"2.4.1  登陆\"></a>2.4.1  登陆</h4><p>右键开始菜单，选择<code>命令提示符</code>，打开黑框。<br>在黑框中输入，<code>mysql -uroot -p1234</code>，回车，出现下图且左下角为<code>mysql&gt;</code>，则登录成功。</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql -uroot -p1234</span><br></pre></td></tr></table></figure>\n\n<p><strong>到这里你就可以开始你的MySQL之旅了！</strong></p>\n<p>登陆参数：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql -u用户名 -p密码 -h要连接的mysql服务器的ip地址(默认127.0.0.1) -P端口号(默认3306)</span><br></pre></td></tr></table></figure>\n\n\n\n<h4 id=\"2-4-2-退出\"><a href=\"#2-4-2-退出\" class=\"headerlink\" title=\"2.4.2  退出\"></a>2.4.2  退出</h4><p>退出mysql：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">exit</span><br><span class=\"line\">quit</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"2-5-MySQL数据模型\"><a href=\"#2-5-MySQL数据模型\" class=\"headerlink\" title=\"2.5  MySQL数据模型\"></a>2.5  MySQL数据模型</h3><p><strong>关系型数据库：</strong></p>\n<blockquote>\n<p>关系型数据库是建立在关系模型基础上的数据库，简单说，关系型数据库是由多张能互相连接的 二维表 组成的数据库</p>\n</blockquote>\n<p>如下图，<code>订单信息表</code> 和 <code>客户信息表</code> 都是有行有列二维表我们将这样的称为关系型数据库。</p>\n<p>接下来看关系型数据库的优点：</p>\n<ul>\n<li>都是使用表结构，格式一致，易于维护。</li>\n<li>使用通用的 SQL 语言操作，使用方便，可用于复杂查询。<ul>\n<li>关系型数据库都可以通过SQL进行操作，所以使用方便。</li>\n<li>复杂查询。现在需要查询001号订单数据，我们可以看到该订单是1号客户的订单，而1号订单是李聪这个客户。以后也可以在一张表中进行统计分析等操作。</li>\n</ul>\n</li>\n<li>数据存储在磁盘中，安全。</li>\n</ul>\n<p><strong>数据模型：</strong></p>\n<p>如上图，我们通过客户端可以通过数据库管理系统创建数据库，在数据库中创建表，在表中添加数据。创建的每一个数据库对应到磁盘上都是一个文件夹。比如可以通过SQL语句创建一个数据库（数据库名称为db1），语句如下。该语句咱们后面会学习。</p>\n<p>我们可以在数据库安装目录下的data目录下看到多了一个 <code>db1</code> 的文件夹。所以，<strong>在MySQL中一个数据库对应到磁盘上的一个文件夹。</strong></p>\n<p>而一个数据库下可以创建多张表，我们到MySQL中自带的mysql数据库的文件夹目录下：</p>\n<p>而上图中右边的 <code>db.frm</code> 是表文件，<code>db.MYD</code> 是数据文件，通过这两个文件就可以查询到数据展示成二维表的效果。</p>\n<p><strong>小结：</strong></p>\n<ul>\n<li>MySQL中可以创建多个数据库，每个数据库对应到磁盘上的一个文件夹</li>\n<li>在每个数据库中可以创建多个表，每张都对应到磁盘上一个 frm 文件</li>\n<li>每张表可以存储多条数据，数据会被存储到磁盘中  MYD 文件中</li>\n</ul>\n<h2 id=\"3，SQL概述\"><a href=\"#3，SQL概述\" class=\"headerlink\" title=\"3，SQL概述\"></a>3，SQL概述</h2><p>了解了数据模型后，接下来我们就学习SQL语句，通过SQL语句对数据库、表、数据进行增删改查操作。 </p>\n<h3 id=\"3-1-SQL简介\"><a href=\"#3-1-SQL简介\" class=\"headerlink\" title=\"3.1  SQL简介\"></a>3.1  SQL简介</h3><ul>\n<li>英文：Structured Query Language，简称 SQL</li>\n<li>结构化查询语言，一门操作关系型数据库的编程语言</li>\n<li>定义操作所有关系型数据库的统一标准</li>\n<li>对于同一个需求，每一种数据库操作的方式可能会存在一些不一样的地方，我们称为“方言”</li>\n</ul>\n<h3 id=\"3-2-通用语法\"><a href=\"#3-2-通用语法\" class=\"headerlink\" title=\"3.2  通用语法\"></a>3.2  通用语法</h3><ul>\n<li><p>SQL 语句可以单行或多行书写，以分号结尾。 </p>\n<p>如上，以分号结尾才是一个完整的sql语句。</p>\n</li>\n<li><p>MySQL 数据库的 SQL 语句不区分大小写，关键字建议使用大写。</p>\n<p>同样的一条sql语句写成下图的样子，一样可以运行处结果。</p>\n</li>\n<li><p>注释</p>\n<ul>\n<li><p>单行注释: – 注释内容 或 #注释内容(MySQL 特有)  </p>\n<blockquote>\n<p>注意：使用– 添加单行注释时，–后面一定要加空格，而#没有要求。</p>\n</blockquote>\n</li>\n<li><p>多行注释: /* 注释 */</p>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"3-3-SQL分类\"><a href=\"#3-3-SQL分类\" class=\"headerlink\" title=\"3.3  SQL分类\"></a>3.3  SQL分类</h3><ul>\n<li><p>DDL(Data Definition Language) ： 数据定义语言，用来定义数据库对象：数据库，表，列等</p>\n<p>DDL简单理解就是用来操作数据库，表等</p>\n</li>\n<li><p>DML(Data Manipulation Language) 数据操作语言，用来对数据库中表的数据进行增删改</p>\n<p>DML简单理解就对表中数据进行增删改</p>\n</li>\n<li><p>DQL(Data Query Language) 数据查询语言，用来查询数据库中表的记录(数据)</p>\n<p>DQL简单理解就是对数据进行查询操作。从数据库表中查询到我们想要的数据。</p>\n</li>\n<li><p>DCL(Data Control Language) 数据控制语言，用来定义数据库的访问权限和安全级别，及创建用户</p>\n<p>DML简单理解就是对数据库进行权限控制。比如我让某一个数据库表只能让某一个用户进行操作等。</p>\n</li>\n</ul>\n<blockquote>\n<p>注意： 以后我们最常操作的是 <code>DML</code> 和 <code>DQL</code>  ，因为我们开发中最常操作的就是数据。</p>\n</blockquote>\n<h2 id=\"4，DDL-操作数据库\"><a href=\"#4，DDL-操作数据库\" class=\"headerlink\" title=\"4，DDL:操作数据库\"></a>4，DDL:操作数据库</h2><p>我们先来学习DDL来操作数据库。而操作数据库主要就是对数据库的增删查操作。</p>\n<h3 id=\"4-1-查询\"><a href=\"#4-1-查询\" class=\"headerlink\" title=\"4.1  查询\"></a>4.1  查询</h3><p>查询所有的数据库</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SHOW</span> DATABASES;</span><br></pre></td></tr></table></figure>\n\n<p>运行上面语句效果如下：</p>\n<p>上述查询到的是的这些数据库是mysql安装好自带的数据库，我们以后不要操作这些数据库。</p>\n<h3 id=\"4-2-创建数据库\"><a href=\"#4-2-创建数据库\" class=\"headerlink\" title=\"4.2  创建数据库\"></a>4.2  创建数据库</h3><ul>\n<li><strong>创建数据库</strong>：</li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">CREATE</span> DATABASE 数据库名称;</span><br></pre></td></tr></table></figure>\n\n<p>运行语句效果如下：</p>\n<p>而在创建数据库的时候，我并不知道db1数据库有没有创建，直接再次创建名为db1的数据库就会出现错误。</p>\n<p>为了避免上面的错误，在创建数据库的时候先做判断，如果不存在再创建。</p>\n<ul>\n<li><strong>创建数据库(判断，如果不存在则创建)</strong></li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">CREATE</span> DATABASE IF <span class=\"keyword\">NOT</span> <span class=\"keyword\">EXISTS</span> 数据库名称;</span><br></pre></td></tr></table></figure>\n\n<p>运行语句效果如下：</p>\n<p>从上面的效果可以看到虽然db1数据库已经存在，再创建db1也没有报错，而创建db2数据库则创建成功。</p>\n<h3 id=\"4-3-删除数据库\"><a href=\"#4-3-删除数据库\" class=\"headerlink\" title=\"4.3  删除数据库\"></a>4.3  删除数据库</h3><ul>\n<li><strong>删除数据库</strong></li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">DROP</span> DATABASE 数据库名称;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><strong>删除数据库(判断，如果存在则删除)</strong></li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">DROP</span> DATABASE IF <span class=\"keyword\">EXISTS</span> 数据库名称;</span><br></pre></td></tr></table></figure>\n\n<p>运行语句效果如下：</p>\n<h3 id=\"4-4-使用数据库\"><a href=\"#4-4-使用数据库\" class=\"headerlink\" title=\"4.4  使用数据库\"></a>4.4  使用数据库</h3><p>数据库创建好了，要在数据库中创建表，得先明确在哪儿个数据库中操作，此时就需要使用数据库。</p>\n<ul>\n<li><strong>使用数据库</strong></li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">USE 数据库名称;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><strong>查看当前使用的数据库</strong></li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> DATABASE();</span><br></pre></td></tr></table></figure>\n\n<p>运行语句效果如下：</p>\n<h2 id=\"5，DDL-操作表\"><a href=\"#5，DDL-操作表\" class=\"headerlink\" title=\"5，DDL:操作表\"></a>5，DDL:操作表</h2><p>操作表也就是对表进行增（Create）删（Retrieve）改（Update）查（Delete）。</p>\n<h3 id=\"5-1-查询表\"><a href=\"#5-1-查询表\" class=\"headerlink\" title=\"5.1  查询表\"></a>5.1  查询表</h3><ul>\n<li><strong>查询当前数据库下所有表名称</strong></li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SHOW</span> TABLES;</span><br></pre></td></tr></table></figure>\n\n<p>我们创建的数据库中没有任何表，因此我们进入mysql自带的mysql数据库，执行上述语句查看</p>\n<ul>\n<li><strong>查询表结构</strong></li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">DESC</span> 表名称;</span><br></pre></td></tr></table></figure>\n\n<p>查看mysql数据库中func表的结构，运行语句如下：</p>\n<h3 id=\"5-2-创建表\"><a href=\"#5-2-创建表\" class=\"headerlink\" title=\"5.2  创建表\"></a>5.2  创建表</h3><ul>\n<li><strong>创建表</strong></li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> 表名 (</span><br><span class=\"line\">\t字段名<span class=\"number\">1</span>  数据类型<span class=\"number\">1</span>,</span><br><span class=\"line\">\t字段名<span class=\"number\">2</span>  数据类型<span class=\"number\">2</span>,</span><br><span class=\"line\">\t…</span><br><span class=\"line\">\t字段名n  数据类型n</span><br><span class=\"line\">);</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>注意：最后一行末尾，不能加逗号</p>\n</blockquote>\n<p>知道了创建表的语句，那么我们创建创建如下结构的表</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">table</span> tb_user (</span><br><span class=\"line\">\tid <span class=\"type\">int</span>,</span><br><span class=\"line\">    username <span class=\"type\">varchar</span>(<span class=\"number\">20</span>),</span><br><span class=\"line\">    password <span class=\"type\">varchar</span>(<span class=\"number\">32</span>)</span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n\n<p>运行语句如下：</p>\n<h3 id=\"5-3-数据类型\"><a href=\"#5-3-数据类型\" class=\"headerlink\" title=\"5.3  数据类型\"></a>5.3  数据类型</h3><p>MySQL 支持多种类型，可以分为三类：</p>\n<ul>\n<li><p>数值</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tinyint : 小整数型，占一个字节</span><br><span class=\"line\"><span class=\"type\">int</span>\t： 大整数类型，占四个字节</span><br><span class=\"line\">\teg ： age <span class=\"type\">int</span></span><br><span class=\"line\"><span class=\"keyword\">double</span> ： 浮点类型</span><br><span class=\"line\">\t使用格式： 字段名 <span class=\"keyword\">double</span>(总长度,小数点后保留的位数)</span><br><span class=\"line\">\teg ： score <span class=\"keyword\">double</span>(<span class=\"number\">5</span>,<span class=\"number\">2</span>)   </span><br></pre></td></tr></table></figure></li>\n<li><p>日期</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">date</span> ： 日期值。只包含年月日</span><br><span class=\"line\">\teg ：birthday <span class=\"type\">date</span> ： </span><br><span class=\"line\">datetime ： 混合日期和时间值。包含年月日时分秒</span><br></pre></td></tr></table></figure></li>\n<li><p>字符串</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">char</span> ： 定长字符串。</span><br><span class=\"line\">\t优点：存储性能高</span><br><span class=\"line\">\t缺点：浪费空间</span><br><span class=\"line\">\teg ： name <span class=\"type\">char</span>(<span class=\"number\">10</span>)  如果存储的数据字符个数不足<span class=\"number\">10</span>个，也会占<span class=\"number\">10</span>个的空间</span><br><span class=\"line\"><span class=\"type\">varchar</span> ： 变长字符串。</span><br><span class=\"line\">\t优点：节约空间</span><br><span class=\"line\">\t缺点：存储性能底</span><br><span class=\"line\">\teg ： name <span class=\"type\">varchar</span>(<span class=\"number\">10</span>) 如果存储的数据字符个数不足<span class=\"number\">10</span>个，那就数据字符个数是几就占几个的空间\t</span><br></pre></td></tr></table></figure></li>\n</ul>\n<blockquote>\n<p>注意：其他类型参考资料中的《MySQL数据类型].xlsx》</p>\n</blockquote>\n<p><strong>案例：</strong></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">需求：设计一张学生表，请注重数据类型、长度的合理性</span><br><span class=\"line\">\t1. 编号</span><br><span class=\"line\">\t2. 姓名，姓名最长不超过10个汉字</span><br><span class=\"line\">\t3. 性别，因为取值只有两种可能，因此最多一个汉字</span><br><span class=\"line\">\t4. 生日，取值为年月日</span><br><span class=\"line\">\t5. 入学成绩，小数点后保留两位</span><br><span class=\"line\">\t6. 邮件地址，最大长度不超过 64</span><br><span class=\"line\">\t7. 家庭联系电话，不一定是手机号码，可能会出现 - 等字符</span><br><span class=\"line\">\t8. 学生状态（用数字表示，正常、休学、毕业...）</span><br></pre></td></tr></table></figure>\n\n<p>语句设计如下：</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">table</span> student (</span><br><span class=\"line\">\tid <span class=\"type\">int</span>,</span><br><span class=\"line\">    name <span class=\"type\">varchar</span>(<span class=\"number\">10</span>),</span><br><span class=\"line\">    gender <span class=\"type\">char</span>(<span class=\"number\">1</span>),</span><br><span class=\"line\">    birthday <span class=\"type\">date</span>,</span><br><span class=\"line\">    score <span class=\"keyword\">double</span>(<span class=\"number\">5</span>,<span class=\"number\">2</span>),</span><br><span class=\"line\">    email <span class=\"type\">varchar</span>(<span class=\"number\">15</span>),</span><br><span class=\"line\">    tel <span class=\"type\">varchar</span>(<span class=\"number\">15</span>),</span><br><span class=\"line\">    status tinyint</span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"5-4-删除表\"><a href=\"#5-4-删除表\" class=\"headerlink\" title=\"5.4  删除表\"></a>5.4  删除表</h3><ul>\n<li><strong>删除表</strong></li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">DROP</span> <span class=\"keyword\">TABLE</span> 表名;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><strong>删除表时判断表是否存在</strong></li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">DROP</span> <span class=\"keyword\">TABLE</span> IF <span class=\"keyword\">EXISTS</span> 表名;</span><br></pre></td></tr></table></figure>\n\n<p>运行语句效果如下：</p>\n<h3 id=\"5-5-修改表\"><a href=\"#5-5-修改表\" class=\"headerlink\" title=\"5.5  修改表\"></a>5.5  修改表</h3><ul>\n<li><strong>修改表名</strong></li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">TABLE</span> 表名 RENAME <span class=\"keyword\">TO</span> 新的表名;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 将表名student修改为stu</span></span><br><span class=\"line\"><span class=\"keyword\">alter</span> <span class=\"keyword\">table</span> student rename <span class=\"keyword\">to</span> stu;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><strong>添加一列</strong></li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">TABLE</span> 表名 <span class=\"keyword\">ADD</span> 列名 数据类型;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 给stu表添加一列address，该字段类型是varchar(50)</span></span><br><span class=\"line\"><span class=\"keyword\">alter</span> <span class=\"keyword\">table</span> stu <span class=\"keyword\">add</span> address <span class=\"type\">varchar</span>(<span class=\"number\">50</span>);</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><strong>修改数据类型</strong></li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">TABLE</span> 表名 MODIFY 列名 新数据类型;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 将stu表中的address字段的类型改为 char(50)</span></span><br><span class=\"line\"><span class=\"keyword\">alter</span> <span class=\"keyword\">table</span> stu modify address <span class=\"type\">char</span>(<span class=\"number\">50</span>);</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><strong>修改列名和数据类型</strong></li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">TABLE</span> 表名 CHANGE 列名 新列名 新数据类型;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 将stu表中的address字段名改为 addr，类型改为varchar(50)</span></span><br><span class=\"line\"><span class=\"keyword\">alter</span> <span class=\"keyword\">table</span> stu change address addr <span class=\"type\">varchar</span>(<span class=\"number\">50</span>);</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><strong>删除列</strong></li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">TABLE</span> 表名 <span class=\"keyword\">DROP</span> 列名;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 将stu表中的addr字段 删除</span></span><br><span class=\"line\"><span class=\"keyword\">alter</span> <span class=\"keyword\">table</span> stu <span class=\"keyword\">drop</span> addr;</span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"6，navicat使用\"><a href=\"#6，navicat使用\" class=\"headerlink\" title=\"6，navicat使用\"></a>6，navicat使用</h2><p>通过上面的学习，我们发现在命令行中写sql语句特别不方便，尤其是编写创建表的语句，我们只能在记事本上写好后直接复制到命令行进行执行。那么有没有刚好的工具提供给我们进行使用呢？ 有。</p>\n<h3 id=\"6-1-navicat概述\"><a href=\"#6-1-navicat概述\" class=\"headerlink\" title=\"6.1  navicat概述\"></a>6.1  navicat概述</h3><ul>\n<li>Navicat for MySQL 是管理和开发 MySQL 或 MariaDB 的理想解决方案。</li>\n<li>这套全面的前端工具为数据库管理、开发和维护提供了一款直观而强大的图形界面。</li>\n<li>官网： <a href=\"http://www.navicat.com.cn/\">http://www.navicat.com.cn</a> </li>\n</ul>\n<h3 id=\"6-2-navicat安装\"><a href=\"#6-2-navicat安装\" class=\"headerlink\" title=\"6.2  navicat安装\"></a>6.2  navicat安装</h3><p>参考 : 资料\\navicat安装包\\navicat_mysql_x86\\navicat安装步骤.md</p>\n<h3 id=\"6-3-navicat使用\"><a href=\"#6-3-navicat使用\" class=\"headerlink\" title=\"6.3  navicat使用\"></a>6.3  navicat使用</h3><h4 id=\"6-3-1-建立和mysql服务的连接\"><a href=\"#6-3-1-建立和mysql服务的连接\" class=\"headerlink\" title=\"6.3.1  建立和mysql服务的连接\"></a>6.3.1  建立和mysql服务的连接</h4><p>第一步： 点击连接，选择MySQL</p>\n<p>第二步：填写连接数据库必要的信息</p>\n<p>以上操作没有问题就会出现如下图所示界面：</p>\n<h4 id=\"6-3-2-操作\"><a href=\"#6-3-2-操作\" class=\"headerlink\" title=\"6.3.2  操作\"></a>6.3.2  操作</h4><p>连接成功后就能看到如下图界面：</p>\n<ul>\n<li><strong>修改表结构</strong></li>\n</ul>\n<p>通过下图操作修改表结构：</p>\n<p>点击了设计表后即出现如下图所示界面，在图中红框中直接修改字段名，类型等信息：</p>\n<ul>\n<li><strong>编写SQL语句并执行</strong></li>\n</ul>\n<p>按照如下图所示进行操作即可书写SQL语句并执行sql语句。</p>\n<h2 id=\"7，DML\"><a href=\"#7，DML\" class=\"headerlink\" title=\"7，DML\"></a>7，DML</h2><p>DML主要是对数据进行增（insert）删（delete）改（update）操作。</p>\n<h3 id=\"7-1-添加数据\"><a href=\"#7-1-添加数据\" class=\"headerlink\" title=\"7.1  添加数据\"></a>7.1  添加数据</h3><ul>\n<li><strong>给指定列添加数据</strong></li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> 表名(列名<span class=\"number\">1</span>,列名<span class=\"number\">2</span>,…) <span class=\"keyword\">VALUES</span>(值<span class=\"number\">1</span>,值<span class=\"number\">2</span>,…);</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><strong>给全部列添加数据</strong></li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> 表名 <span class=\"keyword\">VALUES</span>(值<span class=\"number\">1</span>,值<span class=\"number\">2</span>,…);</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><strong>批量添加数据</strong></li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> 表名(列名<span class=\"number\">1</span>,列名<span class=\"number\">2</span>,…) <span class=\"keyword\">VALUES</span>(值<span class=\"number\">1</span>,值<span class=\"number\">2</span>,…),(值<span class=\"number\">1</span>,值<span class=\"number\">2</span>,…),(值<span class=\"number\">1</span>,值<span class=\"number\">2</span>,…)…;</span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> 表名 <span class=\"keyword\">VALUES</span>(值<span class=\"number\">1</span>,值<span class=\"number\">2</span>,…),(值<span class=\"number\">1</span>,值<span class=\"number\">2</span>,…),(值<span class=\"number\">1</span>,值<span class=\"number\">2</span>,…)…;</span><br></pre></td></tr></table></figure>\n\n\n\n<ul>\n<li><strong>练习</strong></li>\n</ul>\n<p>为了演示以下的增删改操作是否操作成功，故先将查询所有数据的语句介绍给大家：</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> stu;</span><br></pre></td></tr></table></figure>\n\n\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 给指定列添加数据</span></span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> stu (id, NAME) <span class=\"keyword\">VALUES</span> (<span class=\"number\">1</span>, <span class=\"string\">&#x27;张三&#x27;</span>);</span><br><span class=\"line\"><span class=\"comment\">-- 给所有列添加数据，列名的列表可以省略的</span></span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> stu (id,NAME,sex,birthday,score,email,tel,STATUS) <span class=\"keyword\">VALUES</span> (<span class=\"number\">2</span>,<span class=\"string\">&#x27;李四&#x27;</span>,<span class=\"string\">&#x27;男&#x27;</span>,<span class=\"string\">&#x27;1999-11-11&#x27;</span>,<span class=\"number\">88.88</span>,<span class=\"string\">&#x27;lisi@itcast.cn&#x27;</span>,<span class=\"string\">&#x27;13888888888&#x27;</span>,<span class=\"number\">1</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> stu <span class=\"keyword\">VALUES</span> (<span class=\"number\">2</span>,<span class=\"string\">&#x27;李四&#x27;</span>,<span class=\"string\">&#x27;男&#x27;</span>,<span class=\"string\">&#x27;1999-11-11&#x27;</span>,<span class=\"number\">88.88</span>,<span class=\"string\">&#x27;lisi@itcast.cn&#x27;</span>,<span class=\"string\">&#x27;13888888888&#x27;</span>,<span class=\"number\">1</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 批量添加数据</span></span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> stu <span class=\"keyword\">VALUES</span> </span><br><span class=\"line\">\t(<span class=\"number\">2</span>,<span class=\"string\">&#x27;李四&#x27;</span>,<span class=\"string\">&#x27;男&#x27;</span>,<span class=\"string\">&#x27;1999-11-11&#x27;</span>,<span class=\"number\">88.88</span>,<span class=\"string\">&#x27;lisi@itcast.cn&#x27;</span>,<span class=\"string\">&#x27;13888888888&#x27;</span>,<span class=\"number\">1</span>),</span><br><span class=\"line\">\t(<span class=\"number\">2</span>,<span class=\"string\">&#x27;李四&#x27;</span>,<span class=\"string\">&#x27;男&#x27;</span>,<span class=\"string\">&#x27;1999-11-11&#x27;</span>,<span class=\"number\">88.88</span>,<span class=\"string\">&#x27;lisi@itcast.cn&#x27;</span>,<span class=\"string\">&#x27;13888888888&#x27;</span>,<span class=\"number\">1</span>),</span><br><span class=\"line\">\t(<span class=\"number\">2</span>,<span class=\"string\">&#x27;李四&#x27;</span>,<span class=\"string\">&#x27;男&#x27;</span>,<span class=\"string\">&#x27;1999-11-11&#x27;</span>,<span class=\"number\">88.88</span>,<span class=\"string\">&#x27;lisi@itcast.cn&#x27;</span>,<span class=\"string\">&#x27;13888888888&#x27;</span>,<span class=\"number\">1</span>);</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"7-2-修改数据\"><a href=\"#7-2-修改数据\" class=\"headerlink\" title=\"7.2  修改数据\"></a>7.2  修改数据</h3><ul>\n<li><strong>修改表数据</strong></li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">UPDATE</span> 表名 <span class=\"keyword\">SET</span> 列名<span class=\"number\">1</span><span class=\"operator\">=</span>值<span class=\"number\">1</span>,列名<span class=\"number\">2</span><span class=\"operator\">=</span>值<span class=\"number\">2</span>,… [<span class=\"keyword\">WHERE</span> 条件] ;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>注意：</p>\n<ol>\n<li>修改语句中如果不加条件，则将所有数据都修改！</li>\n<li>像上面的语句中的中括号，表示在写sql语句中可以省略这部分</li>\n</ol>\n</blockquote>\n<ul>\n<li><p><strong>练习</strong></p>\n<ul>\n<li><p>将张三的性别改为女</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">update</span> stu <span class=\"keyword\">set</span> sex <span class=\"operator\">=</span> <span class=\"string\">&#x27;女&#x27;</span> <span class=\"keyword\">where</span> name <span class=\"operator\">=</span> <span class=\"string\">&#x27;张三&#x27;</span>;</span><br></pre></td></tr></table></figure></li>\n<li><p>将张三的生日改为 1999-12-12 分数改为99.99</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">update</span> stu <span class=\"keyword\">set</span> birthday <span class=\"operator\">=</span> <span class=\"string\">&#x27;1999-12-12&#x27;</span>, score <span class=\"operator\">=</span> <span class=\"number\">99.99</span> <span class=\"keyword\">where</span> name <span class=\"operator\">=</span> <span class=\"string\">&#x27;张三&#x27;</span>;</span><br></pre></td></tr></table></figure></li>\n<li><p>注意：如果update语句没有加where条件，则会将表中所有数据全部修改！</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">update</span> stu <span class=\"keyword\">set</span> sex <span class=\"operator\">=</span> <span class=\"string\">&#x27;女&#x27;</span>;</span><br></pre></td></tr></table></figure>\n\n<p>上面语句的执行完后查询到的结果是：</p>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"7-3-删除数据\"><a href=\"#7-3-删除数据\" class=\"headerlink\" title=\"7.3  删除数据\"></a>7.3  删除数据</h3><ul>\n<li><strong>删除数据</strong></li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">DELETE</span> <span class=\"keyword\">FROM</span> 表名 [<span class=\"keyword\">WHERE</span> 条件] ;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><strong>练习</strong></li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 删除张三记录</span></span><br><span class=\"line\"><span class=\"keyword\">delete</span> <span class=\"keyword\">from</span> stu <span class=\"keyword\">where</span> name <span class=\"operator\">=</span> <span class=\"string\">&#x27;张三&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 删除stu表中所有的数据</span></span><br><span class=\"line\"><span class=\"keyword\">delete</span> <span class=\"keyword\">from</span> stu;</span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"8，DQL\"><a href=\"#8，DQL\" class=\"headerlink\" title=\"8，DQL\"></a>8，DQL</h2><p>下面是黑马程序员展示试题库数据的页面</p>\n<p>页面上展示的数据肯定是在数据库中的试题库表中进行存储，而我们需要将数据库中的数据查询出来并展示在页面给用户看。上图中的是最基本的查询效果，那么数据库其实是很多的，不可能在将所有的数据在一页进行全部展示，而页面上会有分页展示的效果，如下：</p>\n<p><img src=\"H:\\BaiDuWangPan\\JavaWeb\\day01-MySQL基础\\ppt\\assets\\image-20210722220139174.png\" alt=\"image-20210722220139174\"></p>\n<p>当然上图中的难度字段当我们点击也可以实现排序查询操作。从这个例子我们就可以看出，对于数据库的查询时灵活多变的，需要根据具体的需求来实现，而数据库查询操作也是最重要的操作，所以此部分需要大家重点掌握。</p>\n<p>接下来我们先介绍查询的完整语法：</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> </span><br><span class=\"line\">    字段列表</span><br><span class=\"line\"><span class=\"keyword\">FROM</span> </span><br><span class=\"line\">    表名列表 </span><br><span class=\"line\"><span class=\"keyword\">WHERE</span> </span><br><span class=\"line\">    条件列表</span><br><span class=\"line\"><span class=\"keyword\">GROUP</span> <span class=\"keyword\">BY</span></span><br><span class=\"line\">    分组字段</span><br><span class=\"line\"><span class=\"keyword\">HAVING</span></span><br><span class=\"line\">    分组后条件</span><br><span class=\"line\"><span class=\"keyword\">ORDER</span> <span class=\"keyword\">BY</span></span><br><span class=\"line\">    排序字段</span><br><span class=\"line\">LIMIT</span><br><span class=\"line\">    分页限定</span><br></pre></td></tr></table></figure>\n\n<p>为了给大家演示查询的语句，我们需要先准备表及一些数据：</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 删除stu表</span></span><br><span class=\"line\"><span class=\"keyword\">drop</span> <span class=\"keyword\">table</span> if <span class=\"keyword\">exists</span> stu;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 创建stu表</span></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> stu (</span><br><span class=\"line\"> id <span class=\"type\">int</span>, <span class=\"comment\">-- 编号</span></span><br><span class=\"line\"> name <span class=\"type\">varchar</span>(<span class=\"number\">20</span>), <span class=\"comment\">-- 姓名</span></span><br><span class=\"line\"> age <span class=\"type\">int</span>, <span class=\"comment\">-- 年龄</span></span><br><span class=\"line\"> sex <span class=\"type\">varchar</span>(<span class=\"number\">5</span>), <span class=\"comment\">-- 性别</span></span><br><span class=\"line\"> address <span class=\"type\">varchar</span>(<span class=\"number\">100</span>), <span class=\"comment\">-- 地址</span></span><br><span class=\"line\"> math <span class=\"keyword\">double</span>(<span class=\"number\">5</span>,<span class=\"number\">2</span>), <span class=\"comment\">-- 数学成绩</span></span><br><span class=\"line\"> english <span class=\"keyword\">double</span>(<span class=\"number\">5</span>,<span class=\"number\">2</span>), <span class=\"comment\">-- 英语成绩</span></span><br><span class=\"line\"> hire_date <span class=\"type\">date</span> <span class=\"comment\">-- 入学时间</span></span><br><span class=\"line\">);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 添加数据</span></span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> stu(id,NAME,age,sex,address,math,english,hire_date) </span><br><span class=\"line\"><span class=\"keyword\">VALUES</span> </span><br><span class=\"line\">(<span class=\"number\">1</span>,<span class=\"string\">&#x27;马运&#x27;</span>,<span class=\"number\">55</span>,<span class=\"string\">&#x27;男&#x27;</span>,<span class=\"string\">&#x27;杭州&#x27;</span>,<span class=\"number\">66</span>,<span class=\"number\">78</span>,<span class=\"string\">&#x27;1995-09-01&#x27;</span>),</span><br><span class=\"line\">(<span class=\"number\">2</span>,<span class=\"string\">&#x27;马花疼&#x27;</span>,<span class=\"number\">45</span>,<span class=\"string\">&#x27;女&#x27;</span>,<span class=\"string\">&#x27;深圳&#x27;</span>,<span class=\"number\">98</span>,<span class=\"number\">87</span>,<span class=\"string\">&#x27;1998-09-01&#x27;</span>),</span><br><span class=\"line\">(<span class=\"number\">3</span>,<span class=\"string\">&#x27;马斯克&#x27;</span>,<span class=\"number\">55</span>,<span class=\"string\">&#x27;男&#x27;</span>,<span class=\"string\">&#x27;香港&#x27;</span>,<span class=\"number\">56</span>,<span class=\"number\">77</span>,<span class=\"string\">&#x27;1999-09-02&#x27;</span>),</span><br><span class=\"line\">(<span class=\"number\">4</span>,<span class=\"string\">&#x27;柳白&#x27;</span>,<span class=\"number\">20</span>,<span class=\"string\">&#x27;女&#x27;</span>,<span class=\"string\">&#x27;湖南&#x27;</span>,<span class=\"number\">76</span>,<span class=\"number\">65</span>,<span class=\"string\">&#x27;1997-09-05&#x27;</span>),</span><br><span class=\"line\">(<span class=\"number\">5</span>,<span class=\"string\">&#x27;柳青&#x27;</span>,<span class=\"number\">20</span>,<span class=\"string\">&#x27;男&#x27;</span>,<span class=\"string\">&#x27;湖南&#x27;</span>,<span class=\"number\">86</span>,<span class=\"keyword\">NULL</span>,<span class=\"string\">&#x27;1998-09-01&#x27;</span>),</span><br><span class=\"line\">(<span class=\"number\">6</span>,<span class=\"string\">&#x27;刘德花&#x27;</span>,<span class=\"number\">57</span>,<span class=\"string\">&#x27;男&#x27;</span>,<span class=\"string\">&#x27;香港&#x27;</span>,<span class=\"number\">99</span>,<span class=\"number\">99</span>,<span class=\"string\">&#x27;1998-09-01&#x27;</span>),</span><br><span class=\"line\">(<span class=\"number\">7</span>,<span class=\"string\">&#x27;张学右&#x27;</span>,<span class=\"number\">22</span>,<span class=\"string\">&#x27;女&#x27;</span>,<span class=\"string\">&#x27;香港&#x27;</span>,<span class=\"number\">99</span>,<span class=\"number\">99</span>,<span class=\"string\">&#x27;1998-09-01&#x27;</span>),</span><br><span class=\"line\">(<span class=\"number\">8</span>,<span class=\"string\">&#x27;德玛西亚&#x27;</span>,<span class=\"number\">18</span>,<span class=\"string\">&#x27;男&#x27;</span>,<span class=\"string\">&#x27;南京&#x27;</span>,<span class=\"number\">56</span>,<span class=\"number\">65</span>,<span class=\"string\">&#x27;1994-09-02&#x27;</span>);</span><br></pre></td></tr></table></figure>\n\n<p>接下来咱们从最基本的查询语句开始学起。</p>\n<h3 id=\"8-1-基础查询\"><a href=\"#8-1-基础查询\" class=\"headerlink\" title=\"8.1  基础查询\"></a>8.1  基础查询</h3><h4 id=\"8-1-1-语法\"><a href=\"#8-1-1-语法\" class=\"headerlink\" title=\"8.1.1  语法\"></a>8.1.1  语法</h4><ul>\n<li><strong>查询多个字段</strong></li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> 字段列表 <span class=\"keyword\">FROM</span> 表名;</span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> <span class=\"operator\">*</span> <span class=\"keyword\">FROM</span> 表名; <span class=\"comment\">-- 查询所有数据</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><strong>去除重复记录</strong></li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> <span class=\"keyword\">DISTINCT</span> 字段列表 <span class=\"keyword\">FROM</span> 表名;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><strong>起别名</strong></li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">AS</span>: <span class=\"keyword\">AS</span> 也可以省略</span><br></pre></td></tr></table></figure>\n\n\n\n<h4 id=\"8-1-2-练习\"><a href=\"#8-1-2-练习\" class=\"headerlink\" title=\"8.1.2  练习\"></a>8.1.2  练习</h4><ul>\n<li><p>查询name、age两列</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> name,age <span class=\"keyword\">from</span> stu;</span><br></pre></td></tr></table></figure></li>\n<li><p>查询所有列的数据，列名的列表可以使用*替代</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> stu;</span><br></pre></td></tr></table></figure>\n\n<p>上面语句中的*不建议大家使用，因为在这写*不方便我们阅读sql语句。我们写字段列表的话，可以添加注释对每一个字段进行说明</p>\n<p>而在上课期间为了简约课程的时间，老师很多地方都会写*。</p>\n</li>\n<li><p>查询地址信息</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> address <span class=\"keyword\">from</span> stu;</span><br></pre></td></tr></table></figure>\n\n<p>执行上面语句结果如下：</p>\n<p>从上面的结果我们可以看到有重复的数据，我们也可以使用 <code>distinct</code> 关键字去重重复数据。</p>\n</li>\n<li><p>去除重复记录</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"keyword\">distinct</span> address <span class=\"keyword\">from</span> stu;</span><br></pre></td></tr></table></figure></li>\n<li><p>查询姓名、数学成绩、英语成绩。并通过as给math和english起别名（as关键字可以省略）</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> name,math <span class=\"keyword\">as</span> 数学成绩,english <span class=\"keyword\">as</span> 英文成绩 <span class=\"keyword\">from</span> stu;</span><br><span class=\"line\"><span class=\"keyword\">select</span> name,math 数学成绩,english 英文成绩 <span class=\"keyword\">from</span> stu;</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h3 id=\"8-2-条件查询\"><a href=\"#8-2-条件查询\" class=\"headerlink\" title=\"8.2  条件查询\"></a>8.2  条件查询</h3><h4 id=\"8-2-1-语法\"><a href=\"#8-2-1-语法\" class=\"headerlink\" title=\"8.2.1  语法\"></a>8.2.1  语法</h4><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> 字段列表 <span class=\"keyword\">FROM</span> 表名 <span class=\"keyword\">WHERE</span> 条件列表;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><strong>条件</strong></li>\n</ul>\n<p>条件列表可以使用以下运算符</p>\n<h4 id=\"8-2-2-条件查询练习\"><a href=\"#8-2-2-条件查询练习\" class=\"headerlink\" title=\"8.2.2  条件查询练习\"></a>8.2.2  条件查询练习</h4><ul>\n<li><p>查询年龄大于20岁的学员信息</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> stu <span class=\"keyword\">where</span> age <span class=\"operator\">&gt;</span> <span class=\"number\">20</span>;</span><br></pre></td></tr></table></figure></li>\n<li><p>查询年龄大于等于20岁的学员信息</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> stu <span class=\"keyword\">where</span> age <span class=\"operator\">&gt;=</span> <span class=\"number\">20</span>;</span><br></pre></td></tr></table></figure></li>\n<li><p>查询年龄大于等于20岁 并且 年龄 小于等于 30岁 的学员信息</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> stu <span class=\"keyword\">where</span> age <span class=\"operator\">&gt;=</span> <span class=\"number\">20</span> <span class=\"operator\">&amp;&amp;</span>  age <span class=\"operator\">&lt;=</span> <span class=\"number\">30</span>;</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> stu <span class=\"keyword\">where</span> age <span class=\"operator\">&gt;=</span> <span class=\"number\">20</span> <span class=\"keyword\">and</span>  age <span class=\"operator\">&lt;=</span> <span class=\"number\">30</span>;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>上面语句中 &amp;&amp;  和  and  都表示并且的意思。建议使用 and 。</p>\n<p>也可以使用  between … and 来实现上面需求</p>\n</blockquote>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> stu <span class=\"keyword\">where</span> age <span class=\"keyword\">BETWEEN</span> <span class=\"number\">20</span> <span class=\"keyword\">and</span> <span class=\"number\">30</span>;</span><br></pre></td></tr></table></figure></li>\n<li><p>查询入学日期在’1998-09-01’ 到 ‘1999-09-01’  之间的学员信息</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> stu <span class=\"keyword\">where</span> hire_date <span class=\"keyword\">BETWEEN</span> <span class=\"string\">&#x27;1998-09-01&#x27;</span> <span class=\"keyword\">and</span> <span class=\"string\">&#x27;1999-09-01&#x27;</span>;</span><br></pre></td></tr></table></figure></li>\n<li><p>查询年龄等于18岁的学员信息</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> stu <span class=\"keyword\">where</span> age <span class=\"operator\">=</span> <span class=\"number\">18</span>;</span><br></pre></td></tr></table></figure></li>\n<li><p>查询年龄不等于18岁的学员信息</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> stu <span class=\"keyword\">where</span> age <span class=\"operator\">!=</span> <span class=\"number\">18</span>;</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> stu <span class=\"keyword\">where</span> age <span class=\"operator\">&lt;&gt;</span> <span class=\"number\">18</span>;</span><br></pre></td></tr></table></figure></li>\n<li><p>查询年龄等于18岁 或者 年龄等于20岁 或者 年龄等于22岁的学员信息</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> stu <span class=\"keyword\">where</span> age <span class=\"operator\">=</span> <span class=\"number\">18</span> <span class=\"keyword\">or</span> age <span class=\"operator\">=</span> <span class=\"number\">20</span> <span class=\"keyword\">or</span> age <span class=\"operator\">=</span> <span class=\"number\">22</span>;</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> stu <span class=\"keyword\">where</span> age <span class=\"keyword\">in</span> (<span class=\"number\">18</span>,<span class=\"number\">20</span> ,<span class=\"number\">22</span>);</span><br></pre></td></tr></table></figure></li>\n<li><p>查询英语成绩为 null的学员信息</p>\n<p>null值的比较不能使用 =  或者 != 。需要使用 is  或者 is not</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> stu <span class=\"keyword\">where</span> english <span class=\"operator\">=</span> <span class=\"keyword\">null</span>; <span class=\"comment\">-- 这个语句是不行的</span></span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> stu <span class=\"keyword\">where</span> english <span class=\"keyword\">is</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> stu <span class=\"keyword\">where</span> english <span class=\"keyword\">is</span> <span class=\"keyword\">not</span> <span class=\"keyword\">null</span>;</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h4 id=\"8-2-3-模糊查询练习\"><a href=\"#8-2-3-模糊查询练习\" class=\"headerlink\" title=\"8.2.3  模糊查询练习\"></a>8.2.3  模糊查询练习</h4><blockquote>\n<p>模糊查询使用like关键字，可以使用通配符进行占位:</p>\n<p>（1）_ : 代表单个任意字符</p>\n<p>（2）% : 代表任意个数字符</p>\n</blockquote>\n<ul>\n<li><p>查询姓’马’的学员信息</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> stu <span class=\"keyword\">where</span> name <span class=\"keyword\">like</span> <span class=\"string\">&#x27;马%&#x27;</span>;</span><br></pre></td></tr></table></figure></li>\n<li><p>查询第二个字是’花’的学员信息  </p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> stu <span class=\"keyword\">where</span> name <span class=\"keyword\">like</span> <span class=\"string\">&#x27;_花%&#x27;</span>;</span><br></pre></td></tr></table></figure></li>\n<li><p>查询名字中包含 ‘德’ 的学员信息</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> stu <span class=\"keyword\">where</span> name <span class=\"keyword\">like</span> <span class=\"string\">&#x27;%德%&#x27;</span>;</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h3 id=\"8-3-排序查询\"><a href=\"#8-3-排序查询\" class=\"headerlink\" title=\"8.3  排序查询\"></a>8.3  排序查询</h3><h4 id=\"8-3-1-语法\"><a href=\"#8-3-1-语法\" class=\"headerlink\" title=\"8.3.1  语法\"></a>8.3.1  语法</h4><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> 字段列表 <span class=\"keyword\">FROM</span> 表名 <span class=\"keyword\">ORDER</span> <span class=\"keyword\">BY</span> 排序字段名<span class=\"number\">1</span> [排序方式<span class=\"number\">1</span>],排序字段名<span class=\"number\">2</span> [排序方式<span class=\"number\">2</span>] …;</span><br></pre></td></tr></table></figure>\n\n<p>上述语句中的排序方式有两种，分别是：</p>\n<ul>\n<li>ASC ： 升序排列 <strong>（默认值）</strong></li>\n<li>DESC ： 降序排列</li>\n</ul>\n<blockquote>\n<p>注意：如果有多个排序条件，当前边的条件值一样时，才会根据第二条件进行排序</p>\n</blockquote>\n<h4 id=\"8-3-2-练习\"><a href=\"#8-3-2-练习\" class=\"headerlink\" title=\"8.3.2  练习\"></a>8.3.2  练习</h4><ul>\n<li><p>查询学生信息，按照年龄升序排列 </p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> stu <span class=\"keyword\">order</span> <span class=\"keyword\">by</span> age ;</span><br></pre></td></tr></table></figure></li>\n<li><p>查询学生信息，按照数学成绩降序排列</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> stu <span class=\"keyword\">order</span> <span class=\"keyword\">by</span> math <span class=\"keyword\">desc</span> ;</span><br></pre></td></tr></table></figure></li>\n<li><p>查询学生信息，按照数学成绩降序排列，如果数学成绩一样，再按照英语成绩升序排列</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> stu <span class=\"keyword\">order</span> <span class=\"keyword\">by</span> math <span class=\"keyword\">desc</span> , english <span class=\"keyword\">asc</span> ;</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h3 id=\"8-4-聚合函数\"><a href=\"#8-4-聚合函数\" class=\"headerlink\" title=\"8.4  聚合函数\"></a>8.4  聚合函数</h3><h4 id=\"8-4-1-概念\"><a href=\"#8-4-1-概念\" class=\"headerlink\" title=\"8.4.1  概念\"></a>8.4.1  概念</h4><p> ==将一列数据作为一个整体，进行纵向计算。==</p>\n<p>如何理解呢？假设有如下表</p>\n<p>现有一需求让我们求表中所有数据的数学成绩的总和。这就是对math字段进行纵向求和。</p>\n<h4 id=\"8-4-2-聚合函数分类\"><a href=\"#8-4-2-聚合函数分类\" class=\"headerlink\" title=\"8.4.2  聚合函数分类\"></a>8.4.2  聚合函数分类</h4><table>\n<thead>\n<tr>\n<th>函数名</th>\n<th>功能</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>count(列名)</td>\n<td>统计数量（一般选用不为null的列）</td>\n</tr>\n<tr>\n<td>max(列名)</td>\n<td>最大值</td>\n</tr>\n<tr>\n<td>min(列名)</td>\n<td>最小值</td>\n</tr>\n<tr>\n<td>sum(列名)</td>\n<td>求和</td>\n</tr>\n<tr>\n<td>avg(列名)</td>\n<td>平均值</td>\n</tr>\n</tbody></table>\n<h4 id=\"8-4-3-聚合函数语法\"><a href=\"#8-4-3-聚合函数语法\" class=\"headerlink\" title=\"8.4.3  聚合函数语法\"></a>8.4.3  聚合函数语法</h4><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> 聚合函数名(列名) <span class=\"keyword\">FROM</span> 表;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>注意：null 值不参与所有聚合函数运算</p>\n</blockquote>\n<h4 id=\"8-4-4-练习\"><a href=\"#8-4-4-练习\" class=\"headerlink\" title=\"8.4.4  练习\"></a>8.4.4  练习</h4><ul>\n<li><p>统计班级一共有多少个学生</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"built_in\">count</span>(id) <span class=\"keyword\">from</span> stu;</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"built_in\">count</span>(english) <span class=\"keyword\">from</span> stu;</span><br></pre></td></tr></table></figure>\n\n<p>上面语句根据某个字段进行统计，如果该字段某一行的值为null的话，将不会被统计。所以可以在count(*) 来实现。* 表示所有字段数据，一行中也不可能所有的数据都为null，所以建议使用 count(*)</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"built_in\">count</span>(<span class=\"operator\">*</span>) <span class=\"keyword\">from</span> stu;</span><br></pre></td></tr></table></figure></li>\n<li><p>查询数学成绩的最高分</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"built_in\">max</span>(math) <span class=\"keyword\">from</span> stu;</span><br></pre></td></tr></table></figure></li>\n<li><p>查询数学成绩的最低分</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"built_in\">min</span>(math) <span class=\"keyword\">from</span> stu;</span><br></pre></td></tr></table></figure></li>\n<li><p>查询数学成绩的总分</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"built_in\">sum</span>(math) <span class=\"keyword\">from</span> stu;</span><br></pre></td></tr></table></figure></li>\n<li><p>查询数学成绩的平均分</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"built_in\">avg</span>(math) <span class=\"keyword\">from</span> stu;</span><br></pre></td></tr></table></figure></li>\n<li><p>查询英语成绩的最低分</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"built_in\">min</span>(english) <span class=\"keyword\">from</span> stu;</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h3 id=\"8-5-分组查询\"><a href=\"#8-5-分组查询\" class=\"headerlink\" title=\"8.5  分组查询\"></a>8.5  分组查询</h3><h4 id=\"8-5-1-语法\"><a href=\"#8-5-1-语法\" class=\"headerlink\" title=\"8.5.1  语法\"></a>8.5.1  语法</h4><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> 字段列表 <span class=\"keyword\">FROM</span> 表名 [<span class=\"keyword\">WHERE</span> 分组前条件限定] <span class=\"keyword\">GROUP</span> <span class=\"keyword\">BY</span> 分组字段名 [<span class=\"keyword\">HAVING</span> 分组后条件过滤];</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>注意：分组之后，查询的字段为聚合函数和分组字段，查询其他字段无任何意义</p>\n</blockquote>\n<h4 id=\"8-5-2-练习\"><a href=\"#8-5-2-练习\" class=\"headerlink\" title=\"8.5.2  练习\"></a>8.5.2  练习</h4><ul>\n<li><p>查询男同学和女同学各自的数学平均分</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> sex, <span class=\"built_in\">avg</span>(math) <span class=\"keyword\">from</span> stu <span class=\"keyword\">group</span> <span class=\"keyword\">by</span> sex;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>注意：分组之后，查询的字段为聚合函数和分组字段，查询其他字段无任何意义</p>\n</blockquote>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> name, sex, <span class=\"built_in\">avg</span>(math) <span class=\"keyword\">from</span> stu <span class=\"keyword\">group</span> <span class=\"keyword\">by</span> sex;  <span class=\"comment\">-- 这里查询name字段就没有任何意义</span></span><br></pre></td></tr></table></figure></li>\n<li><p>查询男同学和女同学各自的数学平均分，以及各自人数</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> sex, <span class=\"built_in\">avg</span>(math),<span class=\"built_in\">count</span>(<span class=\"operator\">*</span>) <span class=\"keyword\">from</span> stu <span class=\"keyword\">group</span> <span class=\"keyword\">by</span> sex;</span><br></pre></td></tr></table></figure></li>\n<li><p>查询男同学和女同学各自的数学平均分，以及各自人数，要求：分数低于70分的不参与分组</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> sex, <span class=\"built_in\">avg</span>(math),<span class=\"built_in\">count</span>(<span class=\"operator\">*</span>) <span class=\"keyword\">from</span> stu <span class=\"keyword\">where</span> math <span class=\"operator\">&gt;</span> <span class=\"number\">70</span> <span class=\"keyword\">group</span> <span class=\"keyword\">by</span> sex;</span><br></pre></td></tr></table></figure></li>\n<li><p>查询男同学和女同学各自的数学平均分，以及各自人数，要求：分数低于70分的不参与分组，分组之后人数大于2个的</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> sex, <span class=\"built_in\">avg</span>(math),<span class=\"built_in\">count</span>(<span class=\"operator\">*</span>) <span class=\"keyword\">from</span> stu <span class=\"keyword\">where</span> math <span class=\"operator\">&gt;</span> <span class=\"number\">70</span> <span class=\"keyword\">group</span> <span class=\"keyword\">by</span> sex <span class=\"keyword\">having</span> <span class=\"built_in\">count</span>(<span class=\"operator\">*</span>)  <span class=\"operator\">&gt;</span> <span class=\"number\">2</span>;</span><br></pre></td></tr></table></figure></li>\n</ul>\n<p><strong>where 和 having 区别：</strong></p>\n<ul>\n<li><p>执行时机不一样：where 是分组之前进行限定，不满足where条件，则不参与分组，而having是分组之后对结果进行过滤。</p>\n</li>\n<li><p>可判断的条件不一样：where 不能对聚合函数进行判断，having 可以。</p>\n</li>\n</ul>\n<h3 id=\"8-6-分页查询\"><a href=\"#8-6-分页查询\" class=\"headerlink\" title=\"8.6  分页查询\"></a>8.6  分页查询</h3><p>如下图所示，大家在很多网站都见过类似的效果，如京东、百度、淘宝等。分页查询是将数据一页一页的展示给用户看，用户也可以通过点击查看下一页的数据。</p>\n<p>接下来我们先说分页查询的语法。</p>\n<h4 id=\"8-6-1-语法\"><a href=\"#8-6-1-语法\" class=\"headerlink\" title=\"8.6.1  语法\"></a>8.6.1  语法</h4><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> 字段列表 <span class=\"keyword\">FROM</span> 表名 LIMIT  起始索引 , 查询条目数;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>注意： 上述语句中的起始索引是从0开始</p>\n</blockquote>\n<h4 id=\"8-6-2-练习\"><a href=\"#8-6-2-练习\" class=\"headerlink\" title=\"8.6.2  练习\"></a>8.6.2  练习</h4><ul>\n<li><p>从0开始查询，查询3条数据</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> stu limit <span class=\"number\">0</span> , <span class=\"number\">3</span>;</span><br></pre></td></tr></table></figure></li>\n<li><p>每页显示3条数据，查询第1页数据</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> stu limit <span class=\"number\">0</span> , <span class=\"number\">3</span>;</span><br></pre></td></tr></table></figure></li>\n<li><p>每页显示3条数据，查询第2页数据</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> stu limit <span class=\"number\">3</span> , <span class=\"number\">3</span>;</span><br></pre></td></tr></table></figure></li>\n<li><p>每页显示3条数据，查询第3页数据</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> stu limit <span class=\"number\">6</span> , <span class=\"number\">3</span>;</span><br></pre></td></tr></table></figure></li>\n</ul>\n<p>从上面的练习推导出起始索引计算公式：</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">起始索引 <span class=\"operator\">=</span> (当前页码 <span class=\"operator\">-</span> <span class=\"number\">1</span>) <span class=\"operator\">*</span> 每页显示的条数</span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"mysql高级\"><a href=\"#mysql高级\" class=\"headerlink\" title=\"mysql高级\"></a>mysql高级</h2><p><strong>今日目标</strong></p>\n<blockquote>\n<ul>\n<li><p>掌握约束的使用</p>\n</li>\n<li><p>掌握表关系及建表原则</p>\n</li>\n<li><p>重点掌握多表查询操作</p>\n</li>\n<li><p>掌握事务操作</p>\n</li>\n</ul>\n</blockquote>\n<h2 id=\"1，约束\"><a href=\"#1，约束\" class=\"headerlink\" title=\"1，约束\"></a>1，约束</h2><p>上面表中可以看到表中数据存在一些问题：</p>\n<ul>\n<li><p>id 列一般是用标示数据的唯一性的，而上述表中的id为1的有三条数据，并且 <code>马花疼</code> 没有id进行标示</p>\n</li>\n<li><p><code>柳白</code> 这条数据的age列的数据是3000，而人也不可能活到3000岁</p>\n</li>\n<li><p><code>马运</code>  这条数据的math数学成绩是-5，而数学学得再不好也不可能出现负分</p>\n</li>\n<li><p><code>柳青</code> 这条数据的english列（英文成绩）值为null，而成绩即使没考也得是0分</p>\n</li>\n</ul>\n<p>针对上述数据问题，我们就可以从数据库层面在添加数据的时候进行限制，这个就是约束。</p>\n<h3 id=\"1-1-概念\"><a href=\"#1-1-概念\" class=\"headerlink\" title=\"1.1  概念\"></a>1.1  概念</h3><ul>\n<li><p>约束是作用于表中列上的规则，用于限制加入表的数据</p>\n<p>例如：我们可以给id列加约束，让其值不能重复，不能为null值。</p>\n</li>\n<li><p>约束的存在保证了数据库中数据的正确性、有效性和完整性</p>\n<p>添加约束可以在添加数据的时候就限制不正确的数据，年龄是3000，数学成绩是-5分这样无效的数据，继而保障数据的完整性。</p>\n</li>\n</ul>\n<h3 id=\"1-2-分类\"><a href=\"#1-2-分类\" class=\"headerlink\" title=\"1.2  分类\"></a>1.2  分类</h3><ul>\n<li><p><strong>非空约束： 关键字是 NOT NULL</strong></p>\n<p>保证列中所有的数据不能有null值。</p>\n<p>例如：id列在添加 <code>马花疼</code> 这条数据时就不能添加成功。</p>\n</li>\n<li><p><strong>唯一约束：关键字是  UNIQUE</strong></p>\n<p>保证列中所有数据各不相同。</p>\n<p>例如：id列中三条数据的值都是1，这样的数据在添加时是绝对不允许的。</p>\n</li>\n<li><p><strong>主键约束： 关键字是  PRIMARY KEY</strong></p>\n<p>主键是一行数据的唯一标识，要求非空且唯一。一般我们都会给没张表添加一个主键列用来唯一标识数据。</p>\n<p>例如：上图表中id就可以作为主键，来标识每条数据。那么这样就要求数据中id的值不能重复，不能为null值。</p>\n</li>\n<li><p><strong>检查约束： 关键字是  CHECK</strong> </p>\n<p>保证列中的值满足某一条件。</p>\n<p>例如：我们可以给age列添加一个范围，最低年龄可以设置为1，最大年龄就可以设置为300，这样的数据才更合理些。</p>\n<blockquote>\n<p>注意：MySQL不支持检查约束。</p>\n<p>这样是不是就没办法保证年龄在指定的范围内了？从数据库层面不能保证，以后可以在java代码中进行限制，一样也可以实现要求。</p>\n</blockquote>\n</li>\n<li><p><strong>默认约束： 关键字是   DEFAULT</strong></p>\n<p>保存数据时，未指定值则采用默认值。</p>\n<p>例如：我们在给english列添加该约束，指定默认值是0，这样在添加数据时没有指定具体值时就会采用默认给定的0。</p>\n</li>\n<li><p><strong>外键约束： 关键字是  FOREIGN KEY</strong></p>\n<p>外键用来让两个表的数据之间建立链接，保证数据的一致性和完整性。</p>\n<p>外键约束现在可能还不太好理解，后面我们会重点进行讲解。</p>\n</li>\n</ul>\n<h3 id=\"1-3-非空约束\"><a href=\"#1-3-非空约束\" class=\"headerlink\" title=\"1.3  非空约束\"></a>1.3  非空约束</h3><ul>\n<li><p>概念</p>\n<p>非空约束用于保证列中所有数据不能有NULL值</p>\n</li>\n<li><p>语法</p>\n<ul>\n<li><p>添加约束</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 创建表时添加非空约束</span></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> 表名(</span><br><span class=\"line\">   列名 数据类型 <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span>,</span><br><span class=\"line\">   …</span><br><span class=\"line\">); </span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 建完表后添加非空约束</span></span><br><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">TABLE</span> 表名 MODIFY 字段名 数据类型 <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span>;</span><br></pre></td></tr></table></figure></li>\n<li><p>删除约束</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">TABLE</span> 表名 MODIFY 字段名 数据类型;</span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"1-4-唯一约束\"><a href=\"#1-4-唯一约束\" class=\"headerlink\" title=\"1.4  唯一约束\"></a>1.4  唯一约束</h3><ul>\n<li><p>概念</p>\n<p>唯一约束用于保证列中所有数据各不相同</p>\n</li>\n<li><p>语法</p>\n<ul>\n<li><p>添加约束</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 创建表时添加唯一约束</span></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> 表名(</span><br><span class=\"line\">   列名 数据类型 <span class=\"keyword\">UNIQUE</span> [AUTO_INCREMENT],</span><br><span class=\"line\">   <span class=\"comment\">-- AUTO_INCREMENT: 当不指定值时自动增长</span></span><br><span class=\"line\">   …</span><br><span class=\"line\">); </span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> 表名(</span><br><span class=\"line\">   列名 数据类型,</span><br><span class=\"line\">   …</span><br><span class=\"line\">   [<span class=\"keyword\">CONSTRAINT</span>] [约束名称] <span class=\"keyword\">UNIQUE</span>(列名)</span><br><span class=\"line\">); </span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 建完表后添加唯一约束</span></span><br><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">TABLE</span> 表名 MODIFY 字段名 数据类型 <span class=\"keyword\">UNIQUE</span>;</span><br></pre></td></tr></table></figure></li>\n<li><p>删除约束</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">TABLE</span> 表名 <span class=\"keyword\">DROP</span> INDEX 字段名;</span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"1-5-主键约束\"><a href=\"#1-5-主键约束\" class=\"headerlink\" title=\"1.5  主键约束\"></a>1.5  主键约束</h3><ul>\n<li><p>概念</p>\n<p>主键是一行数据的唯一标识，要求非空且唯一</p>\n<p>一张表只能有一个主键</p>\n</li>\n<li><p>语法</p>\n<ul>\n<li><p>添加约束</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 创建表时添加主键约束</span></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> 表名(</span><br><span class=\"line\">   列名 数据类型 <span class=\"keyword\">PRIMARY</span> KEY [AUTO_INCREMENT],</span><br><span class=\"line\">   …</span><br><span class=\"line\">); </span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> 表名(</span><br><span class=\"line\">   列名 数据类型,</span><br><span class=\"line\">   [<span class=\"keyword\">CONSTRAINT</span>] [约束名称] <span class=\"keyword\">PRIMARY</span> KEY(列名)</span><br><span class=\"line\">); </span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 建完表后添加主键约束</span></span><br><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">TABLE</span> 表名 <span class=\"keyword\">ADD</span> <span class=\"keyword\">PRIMARY</span> KEY(字段名);</span><br></pre></td></tr></table></figure></li>\n<li><p>删除约束</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">TABLE</span> 表名 <span class=\"keyword\">DROP</span> <span class=\"keyword\">PRIMARY</span> KEY;</span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"1-6-默认约束\"><a href=\"#1-6-默认约束\" class=\"headerlink\" title=\"1.6  默认约束\"></a>1.6  默认约束</h3><ul>\n<li><p>概念</p>\n<p>保存数据时，未指定值则采用默认值</p>\n</li>\n<li><p>语法</p>\n<ul>\n<li><p>添加约束</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 创建表时添加默认约束</span></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> 表名(</span><br><span class=\"line\">   列名 数据类型 <span class=\"keyword\">DEFAULT</span> 默认值,</span><br><span class=\"line\">   …</span><br><span class=\"line\">); </span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 建完表后添加默认约束</span></span><br><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">TABLE</span> 表名 <span class=\"keyword\">ALTER</span> 列名 <span class=\"keyword\">SET</span> <span class=\"keyword\">DEFAULT</span> 默认值;</span><br></pre></td></tr></table></figure></li>\n<li><p>删除约束</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">TABLE</span> 表名 <span class=\"keyword\">ALTER</span> 列名 <span class=\"keyword\">DROP</span> <span class=\"keyword\">DEFAULT</span>;</span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"1-7-约束练习\"><a href=\"#1-7-约束练习\" class=\"headerlink\" title=\"1.7  约束练习\"></a>1.7  约束练习</h3><p><strong>根据需求，为表添加合适的约束</strong></p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 员工表</span></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> emp (</span><br><span class=\"line\">\tid <span class=\"type\">INT</span>,  <span class=\"comment\">-- 员工id，主键且自增长</span></span><br><span class=\"line\">    ename <span class=\"type\">VARCHAR</span>(<span class=\"number\">50</span>), <span class=\"comment\">-- 员工姓名，非空且唯一</span></span><br><span class=\"line\">    joindate <span class=\"type\">DATE</span>,  <span class=\"comment\">-- 入职日期，非空</span></span><br><span class=\"line\">    salary <span class=\"keyword\">DOUBLE</span>(<span class=\"number\">7</span>,<span class=\"number\">2</span>),  <span class=\"comment\">-- 工资，非空</span></span><br><span class=\"line\">    bonus <span class=\"keyword\">DOUBLE</span>(<span class=\"number\">7</span>,<span class=\"number\">2</span>)  <span class=\"comment\">-- 奖金，如果没有将近默认为0</span></span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n\n<p>上面一定给出了具体的要求，我们可以根据要求创建这张表，并为每一列添加对应的约束。建表语句如下：</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">DROP</span> <span class=\"keyword\">TABLE</span> IF <span class=\"keyword\">EXISTS</span> emp;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 员工表</span></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> emp (</span><br><span class=\"line\">  id <span class=\"type\">INT</span> <span class=\"keyword\">PRIMARY</span> KEY, <span class=\"comment\">-- 员工id，主键且自增长</span></span><br><span class=\"line\">  ename <span class=\"type\">VARCHAR</span>(<span class=\"number\">50</span>) <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span> <span class=\"keyword\">UNIQUE</span>, <span class=\"comment\">-- 员工姓名，非空并且唯一</span></span><br><span class=\"line\">  joindate <span class=\"type\">DATE</span> <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span> , <span class=\"comment\">-- 入职日期，非空</span></span><br><span class=\"line\">  salary <span class=\"keyword\">DOUBLE</span>(<span class=\"number\">7</span>,<span class=\"number\">2</span>) <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span> , <span class=\"comment\">-- 工资，非空</span></span><br><span class=\"line\">  bonus <span class=\"keyword\">DOUBLE</span>(<span class=\"number\">7</span>,<span class=\"number\">2</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"number\">0</span> <span class=\"comment\">-- 奖金，如果没有奖金默认为0</span></span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n\n<p>通过上面语句可以创建带有约束的 <code>emp</code> 表，约束能不能发挥作用呢。接下来我们一一进行验证，先添加一条没有问题的数据</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> emp(id,ename,joindate,salary,bonus) <span class=\"keyword\">values</span>(<span class=\"number\">1</span>,<span class=\"string\">&#x27;张三&#x27;</span>,<span class=\"string\">&#x27;1999-11-11&#x27;</span>,<span class=\"number\">8800</span>,<span class=\"number\">5000</span>);</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><strong>验证主键约束，非空且唯一</strong></li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> emp(id,ename,joindate,salary,bonus) <span class=\"keyword\">values</span>(<span class=\"keyword\">null</span>,<span class=\"string\">&#x27;张三&#x27;</span>,<span class=\"string\">&#x27;1999-11-11&#x27;</span>,<span class=\"number\">8800</span>,<span class=\"number\">5000</span>);</span><br></pre></td></tr></table></figure>\n\n<p>执行结果如下：</p>\n<p>从上面的结果可以看到，字段 <code>id</code> 不能为null。那我们重新添加一条数据，如下：</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> emp(id,ename,joindate,salary,bonus) <span class=\"keyword\">values</span>(<span class=\"number\">1</span>,<span class=\"string\">&#x27;张三&#x27;</span>,<span class=\"string\">&#x27;1999-11-11&#x27;</span>,<span class=\"number\">8800</span>,<span class=\"number\">5000</span>);</span><br></pre></td></tr></table></figure>\n\n<p>执行结果如下：</p>\n<p>从上面结果可以看到，1这个值重复了。所以主键约束是用来限制数据非空且唯一的。那我们再添加一条符合要求的数据</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> emp(id,ename,joindate,salary,bonus) <span class=\"keyword\">values</span>(<span class=\"number\">2</span>,<span class=\"string\">&#x27;李四&#x27;</span>,<span class=\"string\">&#x27;1999-11-11&#x27;</span>,<span class=\"number\">8800</span>,<span class=\"number\">5000</span>);</span><br></pre></td></tr></table></figure>\n\n<p>执行结果如下：</p>\n<ul>\n<li><strong>验证非空约束</strong></li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> emp(id,ename,joindate,salary,bonus) <span class=\"keyword\">values</span>(<span class=\"number\">3</span>,<span class=\"keyword\">null</span>,<span class=\"string\">&#x27;1999-11-11&#x27;</span>,<span class=\"number\">8800</span>,<span class=\"number\">5000</span>);</span><br></pre></td></tr></table></figure>\n\n<p>执行结果如下：</p>\n<p>从上面结果可以看到，<code>ename</code> 字段的非空约束生效了。</p>\n<ul>\n<li><strong>验证唯一约束</strong></li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> emp(id,ename,joindate,salary,bonus) <span class=\"keyword\">values</span>(<span class=\"number\">3</span>,<span class=\"string\">&#x27;李四&#x27;</span>,<span class=\"string\">&#x27;1999-11-11&#x27;</span>,<span class=\"number\">8800</span>,<span class=\"number\">5000</span>);</span><br></pre></td></tr></table></figure>\n\n<p>执行结果如下：</p>\n<p>从上面结果可以看到，<code>ename</code> 字段的唯一约束生效了。</p>\n<ul>\n<li><strong>验证默认约束</strong></li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> emp(id,ename,joindate,salary) <span class=\"keyword\">values</span>(<span class=\"number\">3</span>,<span class=\"string\">&#x27;王五&#x27;</span>,<span class=\"string\">&#x27;1999-11-11&#x27;</span>,<span class=\"number\">8800</span>);</span><br></pre></td></tr></table></figure>\n\n<p>执行完上面语句后查询表中数据，如下图可以看到王五这条数据的bonus列就有了默认值0。</p>\n<p>==注意：默认约束只有在不给值时才会采用默认值。如果给了null，那值就是null值。==</p>\n<p>如下：</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> emp(id,ename,joindate,salary,bonus) <span class=\"keyword\">values</span>(<span class=\"number\">4</span>,<span class=\"string\">&#x27;赵六&#x27;</span>,<span class=\"string\">&#x27;1999-11-11&#x27;</span>,<span class=\"number\">8800</span>,<span class=\"keyword\">null</span>);</span><br></pre></td></tr></table></figure>\n\n<p>执行完上面语句后查询表中数据，如下图可以看到赵六这条数据的bonus列的值是null。</p>\n<ul>\n<li><strong>验证自动增长： auto_increment  当列是数字类型 并且唯一约束</strong></li>\n</ul>\n<p>重新创建 <code>emp</code> 表，并给id列添加自动增长</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 员工表</span></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> emp (</span><br><span class=\"line\">  id <span class=\"type\">INT</span> <span class=\"keyword\">PRIMARY</span> KEY auto_increment, <span class=\"comment\">-- 员工id，主键且自增长</span></span><br><span class=\"line\">  ename <span class=\"type\">VARCHAR</span>(<span class=\"number\">50</span>) <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span> <span class=\"keyword\">UNIQUE</span>, <span class=\"comment\">-- 员工姓名，非空并且唯一</span></span><br><span class=\"line\">  joindate <span class=\"type\">DATE</span> <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span> , <span class=\"comment\">-- 入职日期，非空</span></span><br><span class=\"line\">  salary <span class=\"keyword\">DOUBLE</span>(<span class=\"number\">7</span>,<span class=\"number\">2</span>) <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span> , <span class=\"comment\">-- 工资，非空</span></span><br><span class=\"line\">  bonus <span class=\"keyword\">DOUBLE</span>(<span class=\"number\">7</span>,<span class=\"number\">2</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"number\">0</span> <span class=\"comment\">-- 奖金，如果没有奖金默认为0</span></span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n\n<p>接下来给emp添加数据，分别验证不给id列添加值以及给id列添加null值，id列的值会不会自动增长：</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> emp(ename,joindate,salary,bonus) <span class=\"keyword\">values</span>(<span class=\"string\">&#x27;赵六&#x27;</span>,<span class=\"string\">&#x27;1999-11-11&#x27;</span>,<span class=\"number\">8800</span>,<span class=\"keyword\">null</span>);</span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> emp(id,ename,joindate,salary,bonus) <span class=\"keyword\">values</span>(<span class=\"keyword\">null</span>,<span class=\"string\">&#x27;赵六2&#x27;</span>,<span class=\"string\">&#x27;1999-11-11&#x27;</span>,<span class=\"number\">8800</span>,<span class=\"keyword\">null</span>);</span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> emp(id,ename,joindate,salary,bonus) <span class=\"keyword\">values</span>(<span class=\"keyword\">null</span>,<span class=\"string\">&#x27;赵六3&#x27;</span>,<span class=\"string\">&#x27;1999-11-11&#x27;</span>,<span class=\"number\">8800</span>,<span class=\"keyword\">null</span>);</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"1-8-外键约束\"><a href=\"#1-8-外键约束\" class=\"headerlink\" title=\"1.8  外键约束\"></a>1.8  外键约束</h3><h4 id=\"1-8-1-概述\"><a href=\"#1-8-1-概述\" class=\"headerlink\" title=\"1.8.1  概述\"></a>1.8.1  概述</h4><p>外键用来让两个表的数据之间建立链接，保证数据的一致性和完整性。</p>\n<p>如何理解上面的概念呢？如下图有两张表，员工表和部门表：</p>\n<p>员工表中的dep_id字段是部门表的id字段关联，也就是说1号学生张三属于1号部门研发部的员工。现在我要删除1号部门，就会出现错误的数据（员工表中属于1号部门的数据）。而我们上面说的两张表的关系只是我们认为它们有关系，此时需要通过外键让这两张表产生数据库层面的关系，这样你要删除部门表中的1号部门的数据将无法删除。</p>\n<h4 id=\"1-8-2-语法\"><a href=\"#1-8-2-语法\" class=\"headerlink\" title=\"1.8.2  语法\"></a>1.8.2  语法</h4><ul>\n<li>添加外键约束</li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 创建表时添加外键约束</span></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> 表名(</span><br><span class=\"line\">   列名 数据类型,</span><br><span class=\"line\">   …</span><br><span class=\"line\">   [<span class=\"keyword\">CONSTRAINT</span>] [外键名称] <span class=\"keyword\">FOREIGN</span> KEY(外键列名) <span class=\"keyword\">REFERENCES</span> 主表(主表列名) </span><br><span class=\"line\">); </span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 建完表后添加外键约束</span></span><br><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">TABLE</span> 表名 <span class=\"keyword\">ADD</span> <span class=\"keyword\">CONSTRAINT</span> 外键名称 <span class=\"keyword\">FOREIGN</span> KEY (外键字段名称) <span class=\"keyword\">REFERENCES</span> 主表名称(主表列名称);</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>删除外键约束</li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">TABLE</span> 表名 <span class=\"keyword\">DROP</span> <span class=\"keyword\">FOREIGN</span> KEY 外键名称;</span><br></pre></td></tr></table></figure>\n\n\n\n<h4 id=\"1-8-3-练习\"><a href=\"#1-8-3-练习\" class=\"headerlink\" title=\"1.8.3  练习\"></a>1.8.3  练习</h4><p>根据上述语法创建员工表和部门表，并添加上外键约束：</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 删除表</span></span><br><span class=\"line\"><span class=\"keyword\">DROP</span> <span class=\"keyword\">TABLE</span> IF <span class=\"keyword\">EXISTS</span> emp;</span><br><span class=\"line\"><span class=\"keyword\">DROP</span> <span class=\"keyword\">TABLE</span> IF <span class=\"keyword\">EXISTS</span> dept;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 部门表</span></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> dept(</span><br><span class=\"line\">\tid <span class=\"type\">int</span> <span class=\"keyword\">primary</span> key auto_increment,</span><br><span class=\"line\">\tdep_name <span class=\"type\">varchar</span>(<span class=\"number\">20</span>),</span><br><span class=\"line\">\taddr <span class=\"type\">varchar</span>(<span class=\"number\">20</span>)</span><br><span class=\"line\">);</span><br><span class=\"line\"><span class=\"comment\">-- 员工表 </span></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> emp(</span><br><span class=\"line\">\tid <span class=\"type\">int</span> <span class=\"keyword\">primary</span> key auto_increment,</span><br><span class=\"line\">\tname <span class=\"type\">varchar</span>(<span class=\"number\">20</span>),</span><br><span class=\"line\">\tage <span class=\"type\">int</span>,</span><br><span class=\"line\">\tdep_id <span class=\"type\">int</span>,</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">-- 添加外键 dep_id,关联 dept 表的id主键</span></span><br><span class=\"line\">\t<span class=\"keyword\">CONSTRAINT</span> fk_emp_dept <span class=\"keyword\">FOREIGN</span> KEY(dep_id) <span class=\"keyword\">REFERENCES</span> dept(id)\t</span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n\n<p>添加数据</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 添加 2 个部门</span></span><br><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> dept(dep_name,addr) <span class=\"keyword\">values</span></span><br><span class=\"line\">(<span class=\"string\">&#x27;研发部&#x27;</span>,<span class=\"string\">&#x27;广州&#x27;</span>),(<span class=\"string\">&#x27;销售部&#x27;</span>, <span class=\"string\">&#x27;深圳&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 添加员工,dep_id 表示员工所在的部门</span></span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> emp (NAME, age, dep_id) <span class=\"keyword\">VALUES</span> </span><br><span class=\"line\">(<span class=\"string\">&#x27;张三&#x27;</span>, <span class=\"number\">20</span>, <span class=\"number\">1</span>),</span><br><span class=\"line\">(<span class=\"string\">&#x27;李四&#x27;</span>, <span class=\"number\">20</span>, <span class=\"number\">1</span>),</span><br><span class=\"line\">(<span class=\"string\">&#x27;王五&#x27;</span>, <span class=\"number\">20</span>, <span class=\"number\">1</span>),</span><br><span class=\"line\">(<span class=\"string\">&#x27;赵六&#x27;</span>, <span class=\"number\">20</span>, <span class=\"number\">2</span>),</span><br><span class=\"line\">(<span class=\"string\">&#x27;孙七&#x27;</span>, <span class=\"number\">22</span>, <span class=\"number\">2</span>),</span><br><span class=\"line\">(<span class=\"string\">&#x27;周八&#x27;</span>, <span class=\"number\">18</span>, <span class=\"number\">2</span>);</span><br></pre></td></tr></table></figure>\n\n<p>此时删除 <code>研发部</code> 这条数据，会发现无法删除。</p>\n<p>删除外键</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">alter</span> <span class=\"keyword\">table</span> emp <span class=\"keyword\">drop</span> <span class=\"keyword\">FOREIGN</span> key fk_emp_dept;</span><br></pre></td></tr></table></figure>\n\n<p>重新添加外键</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">alter</span> <span class=\"keyword\">table</span> emp <span class=\"keyword\">add</span> <span class=\"keyword\">CONSTRAINT</span> fk_emp_dept <span class=\"keyword\">FOREIGN</span> key(dep_id) <span class=\"keyword\">REFERENCES</span> dept(id);</span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"2，数据库设计\"><a href=\"#2，数据库设计\" class=\"headerlink\" title=\"2，数据库设计\"></a>2，数据库设计</h2><h3 id=\"2-1-数据库设计简介\"><a href=\"#2-1-数据库设计简介\" class=\"headerlink\" title=\"2.1  数据库设计简介\"></a>2.1  数据库设计简介</h3><ul>\n<li><p>软件的研发步骤</p>\n</li>\n<li><p>数据库设计概念</p>\n<ul>\n<li>数据库设计就是根据业务系统的具体需求，结合我们所选用的DBMS，为这个业务系统构造出最优的数据存储模型。</li>\n<li>建立数据库中的==表结构==以及==表与表之间的关联关系==的过程。</li>\n<li>有哪些表？表里有哪些字段？表和表之间有什么关系？</li>\n</ul>\n</li>\n<li><p>数据库设计的步骤</p>\n<ul>\n<li><p>需求分析（数据是什么? 数据具有哪些属性? 数据与属性的特点是什么）</p>\n</li>\n<li><p>逻辑分析（通过ER图对数据库进行逻辑建模，不需要考虑我们所选用的数据库管理系统）</p>\n<p>如下图就是ER(Entity/Relation)图：</p>\n</li>\n<li><p>物理设计（根据数据库自身的特点把逻辑设计转换为物理设计）</p>\n</li>\n<li><p>维护设计（1.对新的需求进行建表；2.表优化）</p>\n</li>\n</ul>\n</li>\n<li><p>表关系</p>\n<ul>\n<li><p>一对一</p>\n<ul>\n<li>如：用户 和 用户详情</li>\n<li>一对一关系多用于表拆分，将一个实体中经常使用的字段放一张表，不经常使用的字段放另一张表，用于提升查询性能</li>\n</ul>\n<p>上图左边是用户的详细信息，而我们真正在展示用户信息时最长用的则是上图右边红框所示，所以我们会将详细信息查分成两周那个表。</p>\n</li>\n<li><p>一对多</p>\n<ul>\n<li><p>如：部门 和 员工</p>\n</li>\n<li><p>一个部门对应多个员工，一个员工对应一个部门。如下图：</p>\n</li>\n</ul>\n</li>\n<li><p>多对多</p>\n<ul>\n<li><p>如：商品 和 订单</p>\n</li>\n<li><p>一个商品对应多个订单，一个订单包含多个商品。如下图：</p>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"2-2-表关系-一对多\"><a href=\"#2-2-表关系-一对多\" class=\"headerlink\" title=\"2.2  表关系(一对多)\"></a>2.2  表关系(一对多)</h3><ul>\n<li><p>一对多</p>\n<ul>\n<li>如：部门 和 员工</li>\n<li>一个部门对应多个员工，一个员工对应一个部门。</li>\n</ul>\n</li>\n<li><p>实现方式</p>\n<p>==在多的一方建立外键，指向一的一方的主键==</p>\n</li>\n<li><p>案例</p>\n<p>我们还是以 <code>员工表</code> 和 <code>部门表</code> 举例:</p>\n<p>经过分析发现，员工表属于多的一方，而部门表属于一的一方，此时我们会在员工表中添加一列（dep_id），指向于部门表的主键（id）：</p>\n<p>建表语句如下：</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 删除表</span></span><br><span class=\"line\"><span class=\"keyword\">DROP</span> <span class=\"keyword\">TABLE</span> IF <span class=\"keyword\">EXISTS</span> tb_emp;</span><br><span class=\"line\"><span class=\"keyword\">DROP</span> <span class=\"keyword\">TABLE</span> IF <span class=\"keyword\">EXISTS</span> tb_dept;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 部门表</span></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> tb_dept(</span><br><span class=\"line\">\tid <span class=\"type\">int</span> <span class=\"keyword\">primary</span> key auto_increment,</span><br><span class=\"line\">\tdep_name <span class=\"type\">varchar</span>(<span class=\"number\">20</span>),</span><br><span class=\"line\">\taddr <span class=\"type\">varchar</span>(<span class=\"number\">20</span>)</span><br><span class=\"line\">);</span><br><span class=\"line\"><span class=\"comment\">-- 员工表 </span></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> tb_emp(</span><br><span class=\"line\">\tid <span class=\"type\">int</span> <span class=\"keyword\">primary</span> key auto_increment,</span><br><span class=\"line\">\tname <span class=\"type\">varchar</span>(<span class=\"number\">20</span>),</span><br><span class=\"line\">\tage <span class=\"type\">int</span>,</span><br><span class=\"line\">\tdep_id <span class=\"type\">int</span>,</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">-- 添加外键 dep_id,关联 dept 表的id主键</span></span><br><span class=\"line\">\t<span class=\"keyword\">CONSTRAINT</span> fk_emp_dept <span class=\"keyword\">FOREIGN</span> KEY(dep_id) <span class=\"keyword\">REFERENCES</span> tb_dept(id)\t</span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n\n<p>查看表结构模型图：</p>\n</li>\n</ul>\n<h3 id=\"2-3-表关系-多对多\"><a href=\"#2-3-表关系-多对多\" class=\"headerlink\" title=\"2.3  表关系(多对多)\"></a>2.3  表关系(多对多)</h3><ul>\n<li><p>多对多</p>\n<ul>\n<li>如：商品 和 订单</li>\n<li>一个商品对应多个订单，一个订单包含多个商品</li>\n</ul>\n</li>\n<li><p>实现方式</p>\n<p>==建立第三张中间表，中间表至少包含两个外键，分别关联两方主键==</p>\n</li>\n<li><p>案例</p>\n<p>我们以 <code>订单表</code> 和 <code>商品表</code> 举例：</p>\n<p>经过分析发现，订单表和商品表都属于多的一方，此时需要创建一个中间表，在中间表中添加订单表的外键和商品表的外键指向两张表的主键：</p>\n<p>建表语句如下：</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 删除表</span></span><br><span class=\"line\"><span class=\"keyword\">DROP</span> <span class=\"keyword\">TABLE</span> IF <span class=\"keyword\">EXISTS</span> tb_order_goods;</span><br><span class=\"line\"><span class=\"keyword\">DROP</span> <span class=\"keyword\">TABLE</span> IF <span class=\"keyword\">EXISTS</span> tb_order;</span><br><span class=\"line\"><span class=\"keyword\">DROP</span> <span class=\"keyword\">TABLE</span> IF <span class=\"keyword\">EXISTS</span> tb_goods;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 订单表</span></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> tb_order(</span><br><span class=\"line\">\tid <span class=\"type\">int</span> <span class=\"keyword\">primary</span> key auto_increment,</span><br><span class=\"line\">\tpayment <span class=\"keyword\">double</span>(<span class=\"number\">10</span>,<span class=\"number\">2</span>),</span><br><span class=\"line\">\tpayment_type TINYINT,</span><br><span class=\"line\">\tstatus TINYINT</span><br><span class=\"line\">);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 商品表</span></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> tb_goods(</span><br><span class=\"line\">\tid <span class=\"type\">int</span> <span class=\"keyword\">primary</span> key auto_increment,</span><br><span class=\"line\">\ttitle <span class=\"type\">varchar</span>(<span class=\"number\">100</span>),</span><br><span class=\"line\">\tprice <span class=\"keyword\">double</span>(<span class=\"number\">10</span>,<span class=\"number\">2</span>)</span><br><span class=\"line\">);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 订单商品中间表</span></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> tb_order_goods(</span><br><span class=\"line\">\tid <span class=\"type\">int</span> <span class=\"keyword\">primary</span> key auto_increment,</span><br><span class=\"line\">\torder_id <span class=\"type\">int</span>,</span><br><span class=\"line\">\tgoods_id <span class=\"type\">int</span>,</span><br><span class=\"line\">\tcount <span class=\"type\">int</span></span><br><span class=\"line\">);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 建完表后，添加外键</span></span><br><span class=\"line\"><span class=\"keyword\">alter</span> <span class=\"keyword\">table</span> tb_order_goods <span class=\"keyword\">add</span> <span class=\"keyword\">CONSTRAINT</span> fk_order_id <span class=\"keyword\">FOREIGN</span> key(order_id) <span class=\"keyword\">REFERENCES</span> tb_order(id);</span><br><span class=\"line\"><span class=\"keyword\">alter</span> <span class=\"keyword\">table</span> tb_order_goods <span class=\"keyword\">add</span> <span class=\"keyword\">CONSTRAINT</span> fk_goods_id <span class=\"keyword\">FOREIGN</span> key(goods_id) <span class=\"keyword\">REFERENCES</span> tb_goods(id);</span><br></pre></td></tr></table></figure>\n\n<p>查看表结构模型图：</p>\n</li>\n</ul>\n<h3 id=\"2-4-表关系-一对一\"><a href=\"#2-4-表关系-一对一\" class=\"headerlink\" title=\"2.4  表关系(一对一)\"></a>2.4  表关系(一对一)</h3><ul>\n<li><p>一对一</p>\n<ul>\n<li>如：用户 和 用户详情</li>\n<li>一对一关系多用于表拆分，将一个实体中经常使用的字段放一张表，不经常使用的字段放另一张表，用于提升查询性能</li>\n</ul>\n</li>\n<li><p>实现方式</p>\n<p>==在任意一方加入外键，关联另一方主键，并且设置外键为唯一(UNIQUE)==</p>\n</li>\n<li><p>案例</p>\n<p>我们以 <code>用户表</code> 举例：</p>\n<p>而在真正使用过程中发现 id、photo、nickname、age、gender 字段比较常用，此时就可以将这张表查分成两张表。</p>\n</li>\n</ul>\n<p>​    </p>\n<p>​    建表语句如下：</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">table</span> tb_user_desc (</span><br><span class=\"line\">\tid <span class=\"type\">int</span> <span class=\"keyword\">primary</span> key auto_increment,</span><br><span class=\"line\">\tcity <span class=\"type\">varchar</span>(<span class=\"number\">20</span>),</span><br><span class=\"line\">\tedu <span class=\"type\">varchar</span>(<span class=\"number\">10</span>),</span><br><span class=\"line\">\tincome <span class=\"type\">int</span>,</span><br><span class=\"line\">\tstatus <span class=\"type\">char</span>(<span class=\"number\">2</span>),</span><br><span class=\"line\">\tdes <span class=\"type\">varchar</span>(<span class=\"number\">100</span>)</span><br><span class=\"line\">);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">table</span> tb_user (</span><br><span class=\"line\">\tid <span class=\"type\">int</span> <span class=\"keyword\">primary</span> key auto_increment,</span><br><span class=\"line\">\tphoto <span class=\"type\">varchar</span>(<span class=\"number\">100</span>),</span><br><span class=\"line\">\tnickname <span class=\"type\">varchar</span>(<span class=\"number\">50</span>),</span><br><span class=\"line\">\tage <span class=\"type\">int</span>,</span><br><span class=\"line\">\tgender <span class=\"type\">char</span>(<span class=\"number\">1</span>),</span><br><span class=\"line\">\tdesc_id <span class=\"type\">int</span> <span class=\"keyword\">unique</span>,</span><br><span class=\"line\">\t<span class=\"comment\">-- 添加外键</span></span><br><span class=\"line\">\t<span class=\"keyword\">CONSTRAINT</span> fk_user_desc <span class=\"keyword\">FOREIGN</span> KEY(desc_id) <span class=\"keyword\">REFERENCES</span> tb_user_desc(id)\t</span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"3，多表查询\"><a href=\"#3，多表查询\" class=\"headerlink\" title=\"3，多表查询\"></a>3，多表查询</h2><p>多表查询顾名思义就是从多张表中一次性的查询出我们想要的数据。我们通过具体的sql给他们演示，先准备环境</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">DROP</span> <span class=\"keyword\">TABLE</span> IF <span class=\"keyword\">EXISTS</span> emp;</span><br><span class=\"line\"><span class=\"keyword\">DROP</span> <span class=\"keyword\">TABLE</span> IF <span class=\"keyword\">EXISTS</span> dept;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"># 创建部门表</span><br><span class=\"line\">\t<span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> dept(</span><br><span class=\"line\">        did <span class=\"type\">INT</span> <span class=\"keyword\">PRIMARY</span> KEY AUTO_INCREMENT,</span><br><span class=\"line\">        dname <span class=\"type\">VARCHAR</span>(<span class=\"number\">20</span>)</span><br><span class=\"line\">    );</span><br><span class=\"line\"></span><br><span class=\"line\">\t# 创建员工表</span><br><span class=\"line\">\t<span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> emp (</span><br><span class=\"line\">        id <span class=\"type\">INT</span> <span class=\"keyword\">PRIMARY</span> KEY AUTO_INCREMENT,</span><br><span class=\"line\">        NAME <span class=\"type\">VARCHAR</span>(<span class=\"number\">10</span>),</span><br><span class=\"line\">        gender <span class=\"type\">CHAR</span>(<span class=\"number\">1</span>), <span class=\"comment\">-- 性别</span></span><br><span class=\"line\">        salary <span class=\"keyword\">DOUBLE</span>, <span class=\"comment\">-- 工资</span></span><br><span class=\"line\">        join_date <span class=\"type\">DATE</span>, <span class=\"comment\">-- 入职日期</span></span><br><span class=\"line\">        dep_id <span class=\"type\">INT</span>,</span><br><span class=\"line\">        <span class=\"keyword\">FOREIGN</span> KEY (dep_id) <span class=\"keyword\">REFERENCES</span> dept(did) <span class=\"comment\">-- 外键，关联部门表(部门表的主键)</span></span><br><span class=\"line\">    );</span><br><span class=\"line\">\t<span class=\"comment\">-- 添加部门数据</span></span><br><span class=\"line\">\t<span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> dept (dNAME) <span class=\"keyword\">VALUES</span> (<span class=\"string\">&#x27;研发部&#x27;</span>),(<span class=\"string\">&#x27;市场部&#x27;</span>),(<span class=\"string\">&#x27;财务部&#x27;</span>),(<span class=\"string\">&#x27;销售部&#x27;</span>);</span><br><span class=\"line\">\t<span class=\"comment\">-- 添加员工数据</span></span><br><span class=\"line\">\t<span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> emp(NAME,gender,salary,join_date,dep_id) <span class=\"keyword\">VALUES</span></span><br><span class=\"line\">\t(<span class=\"string\">&#x27;孙悟空&#x27;</span>,<span class=\"string\">&#x27;男&#x27;</span>,<span class=\"number\">7200</span>,<span class=\"string\">&#x27;2013-02-24&#x27;</span>,<span class=\"number\">1</span>),</span><br><span class=\"line\">\t(<span class=\"string\">&#x27;猪八戒&#x27;</span>,<span class=\"string\">&#x27;男&#x27;</span>,<span class=\"number\">3600</span>,<span class=\"string\">&#x27;2010-12-02&#x27;</span>,<span class=\"number\">2</span>),</span><br><span class=\"line\">\t(<span class=\"string\">&#x27;唐僧&#x27;</span>,<span class=\"string\">&#x27;男&#x27;</span>,<span class=\"number\">9000</span>,<span class=\"string\">&#x27;2008-08-08&#x27;</span>,<span class=\"number\">2</span>),</span><br><span class=\"line\">\t(<span class=\"string\">&#x27;白骨精&#x27;</span>,<span class=\"string\">&#x27;女&#x27;</span>,<span class=\"number\">5000</span>,<span class=\"string\">&#x27;2015-10-07&#x27;</span>,<span class=\"number\">3</span>),</span><br><span class=\"line\">\t(<span class=\"string\">&#x27;蜘蛛精&#x27;</span>,<span class=\"string\">&#x27;女&#x27;</span>,<span class=\"number\">4500</span>,<span class=\"string\">&#x27;2011-03-14&#x27;</span>,<span class=\"number\">1</span>),</span><br><span class=\"line\">\t(<span class=\"string\">&#x27;小白龙&#x27;</span>,<span class=\"string\">&#x27;男&#x27;</span>,<span class=\"number\">2500</span>,<span class=\"string\">&#x27;2011-02-14&#x27;</span>,<span class=\"keyword\">null</span>);\t</span><br></pre></td></tr></table></figure>\n\n<p>执行下面的多表查询语句</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> emp , dept;  <span class=\"comment\">-- 从emp和dept表中查询所有的字段数据</span></span><br></pre></td></tr></table></figure>\n\n<p>结果如下：</p>\n<p>从上面的结果我们看到有一些无效的数据，如 <code>孙悟空</code> 这个员工属于1号部门，但也同时关联的2、3、4号部门。所以我们要通过限制员工表中的 <code>dep_id</code> 字段的值和部门表 <code>did</code> 字段的值相等来消除这些无效的数据，</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> emp , dept <span class=\"keyword\">where</span> emp.dep_id <span class=\"operator\">=</span> dept.did;</span><br></pre></td></tr></table></figure>\n\n<p>执行后结果如下：</p>\n<p>上面语句就是连接查询，那么多表查询都有哪些呢？</p>\n<ul>\n<li><p>连接查询 </p>\n<ul>\n<li>内连接查询 ：相当于查询AB交集数据</li>\n<li>外连接查询<ul>\n<li>左外连接查询 ：相当于查询A表所有数据和交集部门数据</li>\n<li>右外连接查询 ： 相当于查询B表所有数据和交集部分数据</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>子查询</p>\n</li>\n</ul>\n<h3 id=\"3-1-内连接查询\"><a href=\"#3-1-内连接查询\" class=\"headerlink\" title=\"3.1  内连接查询\"></a>3.1  内连接查询</h3><ul>\n<li>语法</li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 隐式内连接</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> 字段列表 <span class=\"keyword\">FROM</span> 表<span class=\"number\">1</span>,表<span class=\"number\">2</span>… <span class=\"keyword\">WHERE</span> 条件;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 显示内连接</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> 字段列表 <span class=\"keyword\">FROM</span> 表<span class=\"number\">1</span> [<span class=\"keyword\">INNER</span>] <span class=\"keyword\">JOIN</span> 表<span class=\"number\">2</span> <span class=\"keyword\">ON</span> 条件;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>内连接相当于查询 A B 交集数据</p>\n</blockquote>\n<ul>\n<li><p>案例</p>\n<ul>\n<li><p>隐式内连接</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">\t<span class=\"operator\">*</span></span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">\temp,</span><br><span class=\"line\">\tdept</span><br><span class=\"line\"><span class=\"keyword\">WHERE</span></span><br><span class=\"line\">\temp.dep_id <span class=\"operator\">=</span> dept.did;</span><br></pre></td></tr></table></figure>\n\n<p>执行上述语句结果如下：</p>\n</li>\n<li><p>查询 emp的 name， gender，dept表的dname</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">\temp. NAME,</span><br><span class=\"line\">\temp.gender,</span><br><span class=\"line\">\tdept.dname</span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">\temp,</span><br><span class=\"line\">\tdept</span><br><span class=\"line\"><span class=\"keyword\">WHERE</span></span><br><span class=\"line\">\temp.dep_id <span class=\"operator\">=</span> dept.did;</span><br></pre></td></tr></table></figure>\n\n<p>执行语句结果如下：</p>\n<p>上面语句中使用表名指定字段所属有点麻烦，sql也支持给表指别名，上述语句可以改进为</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">\tt1. NAME,</span><br><span class=\"line\">\tt1.gender,</span><br><span class=\"line\">\tt2.dname</span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">\temp t1,</span><br><span class=\"line\">\tdept t2</span><br><span class=\"line\"><span class=\"keyword\">WHERE</span></span><br><span class=\"line\">\tt1.dep_id <span class=\"operator\">=</span> t2.did;</span><br></pre></td></tr></table></figure></li>\n<li><p>显式内连接</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> emp <span class=\"keyword\">inner</span> <span class=\"keyword\">join</span> dept <span class=\"keyword\">on</span> emp.dep_id <span class=\"operator\">=</span> dept.did;</span><br><span class=\"line\"><span class=\"comment\">-- 上面语句中的inner可以省略，可以书写为如下语句</span></span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> emp  <span class=\"keyword\">join</span> dept <span class=\"keyword\">on</span> emp.dep_id <span class=\"operator\">=</span> dept.did;</span><br></pre></td></tr></table></figure>\n\n<p>执行结果如下：</p>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"3-2-外连接查询\"><a href=\"#3-2-外连接查询\" class=\"headerlink\" title=\"3.2  外连接查询\"></a>3.2  外连接查询</h3><ul>\n<li><p>语法</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 左外连接</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> 字段列表 <span class=\"keyword\">FROM</span> 表<span class=\"number\">1</span> <span class=\"keyword\">LEFT</span> [<span class=\"keyword\">OUTER</span>] <span class=\"keyword\">JOIN</span> 表<span class=\"number\">2</span> <span class=\"keyword\">ON</span> 条件;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 右外连接</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> 字段列表 <span class=\"keyword\">FROM</span> 表<span class=\"number\">1</span> <span class=\"keyword\">RIGHT</span> [<span class=\"keyword\">OUTER</span>] <span class=\"keyword\">JOIN</span> 表<span class=\"number\">2</span> <span class=\"keyword\">ON</span> 条件;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>左外连接：相当于查询A表所有数据和交集部分数据</p>\n<p>右外连接：相当于查询B表所有数据和交集部分数据</p>\n</blockquote>\n</li>\n<li><p>案例</p>\n<ul>\n<li><p>查询emp表所有数据和对应的部门信息（左外连接）</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> emp <span class=\"keyword\">left</span> <span class=\"keyword\">join</span> dept <span class=\"keyword\">on</span> emp.dep_id <span class=\"operator\">=</span> dept.did;</span><br></pre></td></tr></table></figure>\n\n<p>执行语句结果如下：</p>\n<p>结果显示查询到了左表（emp）中所有的数据及两张表能关联的数据。</p>\n</li>\n<li><p>查询dept表所有数据和对应的员工信息（右外连接）</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> emp <span class=\"keyword\">right</span> <span class=\"keyword\">join</span> dept <span class=\"keyword\">on</span> emp.dep_id <span class=\"operator\">=</span> dept.did;</span><br></pre></td></tr></table></figure>\n\n<p>执行语句结果如下：</p>\n<p>结果显示查询到了右表（dept）中所有的数据及两张表能关联的数据。</p>\n<p>要查询出部门表中所有的数据，也可以通过左外连接实现，只需要将两个表的位置进行互换：</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> dept <span class=\"keyword\">left</span> <span class=\"keyword\">join</span> emp <span class=\"keyword\">on</span> emp.dep_id <span class=\"operator\">=</span> dept.did;</span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"3-3-子查询\"><a href=\"#3-3-子查询\" class=\"headerlink\" title=\"3.3  子查询\"></a>3.3  子查询</h3><ul>\n<li><p>概念</p>\n<p>==查询中嵌套查询，称嵌套查询为子查询。==</p>\n<p>什么是查询中嵌套查询呢？我们通过一个例子来看：</p>\n<p><strong>需求：查询工资高于猪八戒的员工信息。</strong></p>\n<p>来实现这个需求，我们就可以通过二步实现，第一步：先查询出来 猪八戒的工资</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> salary <span class=\"keyword\">from</span> emp <span class=\"keyword\">where</span> name <span class=\"operator\">=</span> <span class=\"string\">&#x27;猪八戒&#x27;</span></span><br></pre></td></tr></table></figure>\n\n<p> 第二步：查询工资高于猪八戒的员工信息</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> emp <span class=\"keyword\">where</span> salary <span class=\"operator\">&gt;</span> <span class=\"number\">3600</span>;</span><br></pre></td></tr></table></figure>\n\n<p>第二步中的3600可以通过第一步的sql查询出来，所以将3600用第一步的sql语句进行替换</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> emp <span class=\"keyword\">where</span> salary <span class=\"operator\">&gt;</span> (<span class=\"keyword\">select</span> salary <span class=\"keyword\">from</span> emp <span class=\"keyword\">where</span> name <span class=\"operator\">=</span> <span class=\"string\">&#x27;猪八戒&#x27;</span>);</span><br></pre></td></tr></table></figure>\n\n<p>这就是查询语句中嵌套查询语句。</p>\n</li>\n<li><p>子查询根据查询结果不同，作用不同</p>\n<ul>\n<li>子查询语句结果是单行单列，子查询语句作为条件值，使用 =  !=  &gt;  &lt;  等进行条件判断</li>\n<li>子查询语句结果是多行单列，子查询语句作为条件值，使用 in 等关键字进行条件判断</li>\n<li>子查询语句结果是多行多列，子查询语句作为虚拟表</li>\n</ul>\n</li>\n<li><p>案例</p>\n<ul>\n<li><p>查询 ‘财务部’ 和 ‘市场部’ 所有的员工信息</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 查询 &#x27;财务部&#x27; 或者 &#x27;市场部&#x27; 所有的员工的部门did</span></span><br><span class=\"line\"><span class=\"keyword\">select</span> did <span class=\"keyword\">from</span> dept <span class=\"keyword\">where</span> dname <span class=\"operator\">=</span> <span class=\"string\">&#x27;财务部&#x27;</span> <span class=\"keyword\">or</span> dname <span class=\"operator\">=</span> <span class=\"string\">&#x27;市场部&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> emp <span class=\"keyword\">where</span> dep_id <span class=\"keyword\">in</span> (<span class=\"keyword\">select</span> did <span class=\"keyword\">from</span> dept <span class=\"keyword\">where</span> dname <span class=\"operator\">=</span> <span class=\"string\">&#x27;财务部&#x27;</span> <span class=\"keyword\">or</span> dname <span class=\"operator\">=</span> <span class=\"string\">&#x27;市场部&#x27;</span>);</span><br></pre></td></tr></table></figure></li>\n<li><p>查询入职日期是 ‘2011-11-11’ 之后的员工信息和部门信息</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 查询入职日期是 &#x27;2011-11-11&#x27; 之后的员工信息</span></span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> emp <span class=\"keyword\">where</span> join_date <span class=\"operator\">&gt;</span> <span class=\"string\">&#x27;2011-11-11&#x27;</span> ;</span><br><span class=\"line\"><span class=\"comment\">-- 将上面语句的结果作为虚拟表和dept表进行内连接查询</span></span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> (<span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> emp <span class=\"keyword\">where</span> join_date <span class=\"operator\">&gt;</span> <span class=\"string\">&#x27;2011-11-11&#x27;</span> ) t1, dept <span class=\"keyword\">where</span> t1.dep_id <span class=\"operator\">=</span> dept.did;</span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"3-4-案例\"><a href=\"#3-4-案例\" class=\"headerlink\" title=\"3.4  案例\"></a>3.4  案例</h3><ul>\n<li>环境准备：</li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">DROP</span> <span class=\"keyword\">TABLE</span> IF <span class=\"keyword\">EXISTS</span> emp;</span><br><span class=\"line\"><span class=\"keyword\">DROP</span> <span class=\"keyword\">TABLE</span> IF <span class=\"keyword\">EXISTS</span> dept;</span><br><span class=\"line\"><span class=\"keyword\">DROP</span> <span class=\"keyword\">TABLE</span> IF <span class=\"keyword\">EXISTS</span> job;</span><br><span class=\"line\"><span class=\"keyword\">DROP</span> <span class=\"keyword\">TABLE</span> IF <span class=\"keyword\">EXISTS</span> salarygrade;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 部门表</span></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> dept (</span><br><span class=\"line\">  did <span class=\"type\">INT</span> <span class=\"keyword\">PRIMARY</span> KEY <span class=\"keyword\">PRIMARY</span> KEY, <span class=\"comment\">-- 部门id</span></span><br><span class=\"line\">  dname <span class=\"type\">VARCHAR</span>(<span class=\"number\">50</span>), <span class=\"comment\">-- 部门名称</span></span><br><span class=\"line\">  loc <span class=\"type\">VARCHAR</span>(<span class=\"number\">50</span>) <span class=\"comment\">-- 部门所在地</span></span><br><span class=\"line\">);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 职务表，职务名称，职务描述</span></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> job (</span><br><span class=\"line\">  id <span class=\"type\">INT</span> <span class=\"keyword\">PRIMARY</span> KEY,</span><br><span class=\"line\">  jname <span class=\"type\">VARCHAR</span>(<span class=\"number\">20</span>),</span><br><span class=\"line\">  description <span class=\"type\">VARCHAR</span>(<span class=\"number\">50</span>)</span><br><span class=\"line\">);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 员工表</span></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> emp (</span><br><span class=\"line\">  id <span class=\"type\">INT</span> <span class=\"keyword\">PRIMARY</span> KEY, <span class=\"comment\">-- 员工id</span></span><br><span class=\"line\">  ename <span class=\"type\">VARCHAR</span>(<span class=\"number\">50</span>), <span class=\"comment\">-- 员工姓名</span></span><br><span class=\"line\">  job_id <span class=\"type\">INT</span>, <span class=\"comment\">-- 职务id</span></span><br><span class=\"line\">  mgr <span class=\"type\">INT</span> , <span class=\"comment\">-- 上级领导</span></span><br><span class=\"line\">  joindate <span class=\"type\">DATE</span>, <span class=\"comment\">-- 入职日期</span></span><br><span class=\"line\">  salary <span class=\"type\">DECIMAL</span>(<span class=\"number\">7</span>,<span class=\"number\">2</span>), <span class=\"comment\">-- 工资</span></span><br><span class=\"line\">  bonus <span class=\"type\">DECIMAL</span>(<span class=\"number\">7</span>,<span class=\"number\">2</span>), <span class=\"comment\">-- 奖金</span></span><br><span class=\"line\">  dept_id <span class=\"type\">INT</span>, <span class=\"comment\">-- 所在部门编号</span></span><br><span class=\"line\">  <span class=\"keyword\">CONSTRAINT</span> emp_jobid_ref_job_id_fk <span class=\"keyword\">FOREIGN</span> KEY (job_id) <span class=\"keyword\">REFERENCES</span> job (id),</span><br><span class=\"line\">  <span class=\"keyword\">CONSTRAINT</span> emp_deptid_ref_dept_id_fk <span class=\"keyword\">FOREIGN</span> KEY (dept_id) <span class=\"keyword\">REFERENCES</span> dept (id)</span><br><span class=\"line\">);</span><br><span class=\"line\"><span class=\"comment\">-- 工资等级表</span></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> salarygrade (</span><br><span class=\"line\">  grade <span class=\"type\">INT</span> <span class=\"keyword\">PRIMARY</span> KEY,   <span class=\"comment\">-- 级别</span></span><br><span class=\"line\">  losalary <span class=\"type\">INT</span>,  <span class=\"comment\">-- 最低工资</span></span><br><span class=\"line\">  hisalary <span class=\"type\">INT</span> <span class=\"comment\">-- 最高工资</span></span><br><span class=\"line\">);</span><br><span class=\"line\">\t\t\t\t</span><br><span class=\"line\"><span class=\"comment\">-- 添加4个部门</span></span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> dept(did,dname,loc) <span class=\"keyword\">VALUES</span> </span><br><span class=\"line\">(<span class=\"number\">10</span>,<span class=\"string\">&#x27;教研部&#x27;</span>,<span class=\"string\">&#x27;北京&#x27;</span>),</span><br><span class=\"line\">(<span class=\"number\">20</span>,<span class=\"string\">&#x27;学工部&#x27;</span>,<span class=\"string\">&#x27;上海&#x27;</span>),</span><br><span class=\"line\">(<span class=\"number\">30</span>,<span class=\"string\">&#x27;销售部&#x27;</span>,<span class=\"string\">&#x27;广州&#x27;</span>),</span><br><span class=\"line\">(<span class=\"number\">40</span>,<span class=\"string\">&#x27;财务部&#x27;</span>,<span class=\"string\">&#x27;深圳&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 添加4个职务</span></span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> job (id, jname, description) <span class=\"keyword\">VALUES</span></span><br><span class=\"line\">(<span class=\"number\">1</span>, <span class=\"string\">&#x27;董事长&#x27;</span>, <span class=\"string\">&#x27;管理整个公司，接单&#x27;</span>),</span><br><span class=\"line\">(<span class=\"number\">2</span>, <span class=\"string\">&#x27;经理&#x27;</span>, <span class=\"string\">&#x27;管理部门员工&#x27;</span>),</span><br><span class=\"line\">(<span class=\"number\">3</span>, <span class=\"string\">&#x27;销售员&#x27;</span>, <span class=\"string\">&#x27;向客人推销产品&#x27;</span>),</span><br><span class=\"line\">(<span class=\"number\">4</span>, <span class=\"string\">&#x27;文员&#x27;</span>, <span class=\"string\">&#x27;使用办公软件&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 添加员工</span></span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> emp(id,ename,job_id,mgr,joindate,salary,bonus,dept_id) <span class=\"keyword\">VALUES</span> </span><br><span class=\"line\">(<span class=\"number\">1001</span>,<span class=\"string\">&#x27;孙悟空&#x27;</span>,<span class=\"number\">4</span>,<span class=\"number\">1004</span>,<span class=\"string\">&#x27;2000-12-17&#x27;</span>,<span class=\"string\">&#x27;8000.00&#x27;</span>,<span class=\"keyword\">NULL</span>,<span class=\"number\">20</span>),</span><br><span class=\"line\">(<span class=\"number\">1002</span>,<span class=\"string\">&#x27;卢俊义&#x27;</span>,<span class=\"number\">3</span>,<span class=\"number\">1006</span>,<span class=\"string\">&#x27;2001-02-20&#x27;</span>,<span class=\"string\">&#x27;16000.00&#x27;</span>,<span class=\"string\">&#x27;3000.00&#x27;</span>,<span class=\"number\">30</span>),</span><br><span class=\"line\">(<span class=\"number\">1003</span>,<span class=\"string\">&#x27;林冲&#x27;</span>,<span class=\"number\">3</span>,<span class=\"number\">1006</span>,<span class=\"string\">&#x27;2001-02-22&#x27;</span>,<span class=\"string\">&#x27;12500.00&#x27;</span>,<span class=\"string\">&#x27;5000.00&#x27;</span>,<span class=\"number\">30</span>),</span><br><span class=\"line\">(<span class=\"number\">1004</span>,<span class=\"string\">&#x27;唐僧&#x27;</span>,<span class=\"number\">2</span>,<span class=\"number\">1009</span>,<span class=\"string\">&#x27;2001-04-02&#x27;</span>,<span class=\"string\">&#x27;29750.00&#x27;</span>,<span class=\"keyword\">NULL</span>,<span class=\"number\">20</span>),</span><br><span class=\"line\">(<span class=\"number\">1005</span>,<span class=\"string\">&#x27;李逵&#x27;</span>,<span class=\"number\">4</span>,<span class=\"number\">1006</span>,<span class=\"string\">&#x27;2001-09-28&#x27;</span>,<span class=\"string\">&#x27;12500.00&#x27;</span>,<span class=\"string\">&#x27;14000.00&#x27;</span>,<span class=\"number\">30</span>),</span><br><span class=\"line\">(<span class=\"number\">1006</span>,<span class=\"string\">&#x27;宋江&#x27;</span>,<span class=\"number\">2</span>,<span class=\"number\">1009</span>,<span class=\"string\">&#x27;2001-05-01&#x27;</span>,<span class=\"string\">&#x27;28500.00&#x27;</span>,<span class=\"keyword\">NULL</span>,<span class=\"number\">30</span>),</span><br><span class=\"line\">(<span class=\"number\">1007</span>,<span class=\"string\">&#x27;刘备&#x27;</span>,<span class=\"number\">2</span>,<span class=\"number\">1009</span>,<span class=\"string\">&#x27;2001-09-01&#x27;</span>,<span class=\"string\">&#x27;24500.00&#x27;</span>,<span class=\"keyword\">NULL</span>,<span class=\"number\">10</span>),</span><br><span class=\"line\">(<span class=\"number\">1008</span>,<span class=\"string\">&#x27;猪八戒&#x27;</span>,<span class=\"number\">4</span>,<span class=\"number\">1004</span>,<span class=\"string\">&#x27;2007-04-19&#x27;</span>,<span class=\"string\">&#x27;30000.00&#x27;</span>,<span class=\"keyword\">NULL</span>,<span class=\"number\">20</span>),</span><br><span class=\"line\">(<span class=\"number\">1009</span>,<span class=\"string\">&#x27;罗贯中&#x27;</span>,<span class=\"number\">1</span>,<span class=\"keyword\">NULL</span>,<span class=\"string\">&#x27;2001-11-17&#x27;</span>,<span class=\"string\">&#x27;50000.00&#x27;</span>,<span class=\"keyword\">NULL</span>,<span class=\"number\">10</span>),</span><br><span class=\"line\">(<span class=\"number\">1010</span>,<span class=\"string\">&#x27;吴用&#x27;</span>,<span class=\"number\">3</span>,<span class=\"number\">1006</span>,<span class=\"string\">&#x27;2001-09-08&#x27;</span>,<span class=\"string\">&#x27;15000.00&#x27;</span>,<span class=\"string\">&#x27;0.00&#x27;</span>,<span class=\"number\">30</span>),</span><br><span class=\"line\">(<span class=\"number\">1011</span>,<span class=\"string\">&#x27;沙僧&#x27;</span>,<span class=\"number\">4</span>,<span class=\"number\">1004</span>,<span class=\"string\">&#x27;2007-05-23&#x27;</span>,<span class=\"string\">&#x27;11000.00&#x27;</span>,<span class=\"keyword\">NULL</span>,<span class=\"number\">20</span>),</span><br><span class=\"line\">(<span class=\"number\">1012</span>,<span class=\"string\">&#x27;李逵&#x27;</span>,<span class=\"number\">4</span>,<span class=\"number\">1006</span>,<span class=\"string\">&#x27;2001-12-03&#x27;</span>,<span class=\"string\">&#x27;9500.00&#x27;</span>,<span class=\"keyword\">NULL</span>,<span class=\"number\">30</span>),</span><br><span class=\"line\">(<span class=\"number\">1013</span>,<span class=\"string\">&#x27;小白龙&#x27;</span>,<span class=\"number\">4</span>,<span class=\"number\">1004</span>,<span class=\"string\">&#x27;2001-12-03&#x27;</span>,<span class=\"string\">&#x27;30000.00&#x27;</span>,<span class=\"keyword\">NULL</span>,<span class=\"number\">20</span>),</span><br><span class=\"line\">(<span class=\"number\">1014</span>,<span class=\"string\">&#x27;关羽&#x27;</span>,<span class=\"number\">4</span>,<span class=\"number\">1007</span>,<span class=\"string\">&#x27;2002-01-23&#x27;</span>,<span class=\"string\">&#x27;13000.00&#x27;</span>,<span class=\"keyword\">NULL</span>,<span class=\"number\">10</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 添加5个工资等级</span></span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> salarygrade(grade,losalary,hisalary) <span class=\"keyword\">VALUES</span> </span><br><span class=\"line\">(<span class=\"number\">1</span>,<span class=\"number\">7000</span>,<span class=\"number\">12000</span>),</span><br><span class=\"line\">(<span class=\"number\">2</span>,<span class=\"number\">12010</span>,<span class=\"number\">14000</span>),</span><br><span class=\"line\">(<span class=\"number\">3</span>,<span class=\"number\">14010</span>,<span class=\"number\">20000</span>),</span><br><span class=\"line\">(<span class=\"number\">4</span>,<span class=\"number\">20010</span>,<span class=\"number\">30000</span>),</span><br><span class=\"line\">(<span class=\"number\">5</span>,<span class=\"number\">30010</span>,<span class=\"number\">99990</span>);</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>需求</p>\n<ol>\n<li><p>查询所有员工信息。查询员工编号，员工姓名，工资，职务名称，职务描述</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">\t分析：</span></span><br><span class=\"line\"><span class=\"comment\">\t\t1. 员工编号，员工姓名，工资 信息在emp 员工表中</span></span><br><span class=\"line\"><span class=\"comment\">\t\t2. 职务名称，职务描述 信息在 job 职务表中</span></span><br><span class=\"line\"><span class=\"comment\">\t\t3. job 职务表 和 emp 员工表 是 一对多的关系 emp.job_id = job.id</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\"><span class=\"comment\">-- 方式一 ：隐式内连接</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">\temp.id,</span><br><span class=\"line\">\temp.ename,</span><br><span class=\"line\">\temp.salary,</span><br><span class=\"line\">\tjob.jname,</span><br><span class=\"line\">\tjob.description</span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">\temp,</span><br><span class=\"line\">\tjob</span><br><span class=\"line\"><span class=\"keyword\">WHERE</span></span><br><span class=\"line\">\temp.job_id <span class=\"operator\">=</span> job.id;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 方式二 ：显式内连接</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">\temp.id,</span><br><span class=\"line\">\temp.ename,</span><br><span class=\"line\">\temp.salary,</span><br><span class=\"line\">\tjob.jname,</span><br><span class=\"line\">\tjob.description</span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">\temp</span><br><span class=\"line\"><span class=\"keyword\">INNER</span> <span class=\"keyword\">JOIN</span> job <span class=\"keyword\">ON</span> emp.job_id <span class=\"operator\">=</span> job.id;</span><br></pre></td></tr></table></figure></li>\n<li><p>查询员工编号，员工姓名，工资，职务名称，职务描述，部门名称，部门位置</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">\t分析：</span></span><br><span class=\"line\"><span class=\"comment\">\t\t1. 员工编号，员工姓名，工资 信息在emp 员工表中</span></span><br><span class=\"line\"><span class=\"comment\">\t\t2. 职务名称，职务描述 信息在 job 职务表中</span></span><br><span class=\"line\"><span class=\"comment\">\t\t3. job 职务表 和 emp 员工表 是 一对多的关系 emp.job_id = job.id</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">\t\t4. 部门名称，部门位置 来自于 部门表 dept</span></span><br><span class=\"line\"><span class=\"comment\">\t\t5. dept 和 emp 一对多关系 dept.id = emp.dept_id</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 方式一 ：隐式内连接</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">\temp.id,</span><br><span class=\"line\">\temp.ename,</span><br><span class=\"line\">\temp.salary,</span><br><span class=\"line\">\tjob.jname,</span><br><span class=\"line\">\tjob.description,</span><br><span class=\"line\">\tdept.dname,</span><br><span class=\"line\">\tdept.loc</span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">\temp,</span><br><span class=\"line\">\tjob,</span><br><span class=\"line\">\tdept</span><br><span class=\"line\"><span class=\"keyword\">WHERE</span></span><br><span class=\"line\">\temp.job_id <span class=\"operator\">=</span> job.id</span><br><span class=\"line\">\t<span class=\"keyword\">and</span> dept.id <span class=\"operator\">=</span> emp.dept_id</span><br><span class=\"line\">;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 方式二 ：显式内连接</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">\temp.id,</span><br><span class=\"line\">\temp.ename,</span><br><span class=\"line\">\temp.salary,</span><br><span class=\"line\">\tjob.jname,</span><br><span class=\"line\">\tjob.description,</span><br><span class=\"line\">\tdept.dname,</span><br><span class=\"line\">\tdept.loc</span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">\temp</span><br><span class=\"line\"><span class=\"keyword\">INNER</span> <span class=\"keyword\">JOIN</span> job <span class=\"keyword\">ON</span> emp.job_id <span class=\"operator\">=</span> job.id</span><br><span class=\"line\"><span class=\"keyword\">INNER</span> <span class=\"keyword\">JOIN</span> dept <span class=\"keyword\">ON</span> dept.id <span class=\"operator\">=</span> emp.dept_id</span><br></pre></td></tr></table></figure></li>\n<li><p>查询员工姓名，工资，工资等级</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">\t分析：</span></span><br><span class=\"line\"><span class=\"comment\">\t\t1. 员工姓名，工资 信息在emp 员工表中</span></span><br><span class=\"line\"><span class=\"comment\">\t\t2. 工资等级 信息在 salarygrade 工资等级表中</span></span><br><span class=\"line\"><span class=\"comment\">\t\t3. emp.salary &gt;= salarygrade.losalary  and emp.salary &lt;= salarygrade.hisalary</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">\temp.ename,</span><br><span class=\"line\">\temp.salary,</span><br><span class=\"line\">\tt2.<span class=\"operator\">*</span></span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">\temp,</span><br><span class=\"line\">\tsalarygrade t2</span><br><span class=\"line\"><span class=\"keyword\">WHERE</span></span><br><span class=\"line\">\temp.salary <span class=\"operator\">&gt;=</span> t2.losalary</span><br><span class=\"line\"><span class=\"keyword\">AND</span> emp.salary <span class=\"operator\">&lt;=</span> t2.hisalary</span><br></pre></td></tr></table></figure></li>\n<li><p>查询员工姓名，工资，职务名称，职务描述，部门名称，部门位置，工资等级</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">\t分析：</span></span><br><span class=\"line\"><span class=\"comment\">\t\t1. 员工编号，员工姓名，工资 信息在emp 员工表中</span></span><br><span class=\"line\"><span class=\"comment\">\t\t2. 职务名称，职务描述 信息在 job 职务表中</span></span><br><span class=\"line\"><span class=\"comment\">\t\t3. job 职务表 和 emp 员工表 是 一对多的关系 emp.job_id = job.id</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">\t\t4. 部门名称，部门位置 来自于 部门表 dept</span></span><br><span class=\"line\"><span class=\"comment\">\t\t5. dept 和 emp 一对多关系 dept.id = emp.dept_id</span></span><br><span class=\"line\"><span class=\"comment\">\t\t6. 工资等级 信息在 salarygrade 工资等级表中</span></span><br><span class=\"line\"><span class=\"comment\">\t\t7. emp.salary &gt;= salarygrade.losalary  and emp.salary &lt;= salarygrade.hisalary</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">\temp.id,</span><br><span class=\"line\">\temp.ename,</span><br><span class=\"line\">\temp.salary,</span><br><span class=\"line\">\tjob.jname,</span><br><span class=\"line\">\tjob.description,</span><br><span class=\"line\">\tdept.dname,</span><br><span class=\"line\">\tdept.loc,</span><br><span class=\"line\">\tt2.grade</span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">\temp</span><br><span class=\"line\"><span class=\"keyword\">INNER</span> <span class=\"keyword\">JOIN</span> job <span class=\"keyword\">ON</span> emp.job_id <span class=\"operator\">=</span> job.id</span><br><span class=\"line\"><span class=\"keyword\">INNER</span> <span class=\"keyword\">JOIN</span> dept <span class=\"keyword\">ON</span> dept.id <span class=\"operator\">=</span> emp.dept_id</span><br><span class=\"line\"><span class=\"keyword\">INNER</span> <span class=\"keyword\">JOIN</span> salarygrade t2 <span class=\"keyword\">ON</span> emp.salary <span class=\"keyword\">BETWEEN</span> t2.losalary <span class=\"keyword\">and</span> t2.hisalary;</span><br></pre></td></tr></table></figure></li>\n<li><p>查询出部门编号、部门名称、部门位置、部门人数</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">\t分析：</span></span><br><span class=\"line\"><span class=\"comment\">\t\t1. 部门编号、部门名称、部门位置 来自于部门 dept 表</span></span><br><span class=\"line\"><span class=\"comment\">\t\t2. 部门人数: 在emp表中 按照dept_id 进行分组，然后count(*)统计数量</span></span><br><span class=\"line\"><span class=\"comment\">\t\t3. 使用子查询，让部门表和分组后的表进行内连接</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\"><span class=\"comment\">-- 根据部门id分组查询每一个部门id和员工数</span></span><br><span class=\"line\"><span class=\"keyword\">select</span> dept_id, <span class=\"built_in\">count</span>(<span class=\"operator\">*</span>) <span class=\"keyword\">from</span> emp <span class=\"keyword\">group</span> <span class=\"keyword\">by</span> dept_id;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">\tdept.id,</span><br><span class=\"line\">\tdept.dname,</span><br><span class=\"line\">\tdept.loc,</span><br><span class=\"line\">\tt1.count</span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">\tdept,</span><br><span class=\"line\">\t(</span><br><span class=\"line\">\t\t<span class=\"keyword\">SELECT</span></span><br><span class=\"line\">\t\t\tdept_id,</span><br><span class=\"line\">\t\t\t<span class=\"built_in\">count</span>(<span class=\"operator\">*</span>) count</span><br><span class=\"line\">\t\t<span class=\"keyword\">FROM</span></span><br><span class=\"line\">\t\t\temp</span><br><span class=\"line\">\t\t<span class=\"keyword\">GROUP</span> <span class=\"keyword\">BY</span></span><br><span class=\"line\">\t\t\tdept_id</span><br><span class=\"line\">\t) t1</span><br><span class=\"line\"><span class=\"keyword\">WHERE</span></span><br><span class=\"line\">\tdept.id <span class=\"operator\">=</span> t1.dept_id</span><br></pre></td></tr></table></figure></li>\n</ol>\n</li>\n</ul>\n<h2 id=\"4，事务\"><a href=\"#4，事务\" class=\"headerlink\" title=\"4，事务\"></a>4，事务</h2><h3 id=\"4-1-概述\"><a href=\"#4-1-概述\" class=\"headerlink\" title=\"4.1  概述\"></a>4.1  概述</h3><blockquote>\n<p>数据库的事务（Transaction）是一种机制、一个操作序列，包含了==一组数据库操作命令==。</p>\n<p>事务把所有的命令作为一个整体一起向系统提交或撤销操作请求，即这一组数据库命令==要么同时成功，要么同时失败==。</p>\n<p>事务是一个不可分割的工作逻辑单元。</p>\n</blockquote>\n<p>这些概念不好理解，接下来举例说明，如下图有一张表</p>\n<p>张三和李四账户中各有100块钱，现李四需要转换500块钱给张三，具体的转账操作为</p>\n<ul>\n<li>第一步：查询李四账户余额</li>\n<li>第二步：从李四账户金额 -500</li>\n<li>第三步：给张三账户金额 +500</li>\n</ul>\n<p>现在假设在转账过程中第二步完成后出现了异常第三步没有执行，就会造成李四账户金额少了500，而张三金额并没有多500；这样的系统是有问题的。如果解决呢？使用事务可以解决上述问题</p>\n<p>从上图可以看到在转账前开启事务，如果出现了异常回滚事务，三步正常执行就提交事务，这样就可以完美解决问题。</p>\n<h3 id=\"4-2-语法\"><a href=\"#4-2-语法\" class=\"headerlink\" title=\"4.2  语法\"></a>4.2  语法</h3><ul>\n<li><p>开启事务</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">START</span> TRANSACTION;</span><br><span class=\"line\">或者  </span><br><span class=\"line\"><span class=\"keyword\">BEGIN</span>;</span><br></pre></td></tr></table></figure></li>\n<li><p>提交事务</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">commit</span>;</span><br></pre></td></tr></table></figure></li>\n<li><p>回滚事务</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">rollback</span>;</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h3 id=\"4-3-代码验证\"><a href=\"#4-3-代码验证\" class=\"headerlink\" title=\"4.3  代码验证\"></a>4.3  代码验证</h3><ul>\n<li><p>环境准备</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">DROP</span> <span class=\"keyword\">TABLE</span> IF <span class=\"keyword\">EXISTS</span> account;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 创建账户表</span></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> account(</span><br><span class=\"line\">\tid <span class=\"type\">int</span> <span class=\"keyword\">PRIMARY</span> KEY auto_increment,</span><br><span class=\"line\">\tname <span class=\"type\">varchar</span>(<span class=\"number\">10</span>),</span><br><span class=\"line\">\tmoney <span class=\"keyword\">double</span>(<span class=\"number\">10</span>,<span class=\"number\">2</span>)</span><br><span class=\"line\">);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 添加数据</span></span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> account(name,money) <span class=\"keyword\">values</span>(<span class=\"string\">&#x27;张三&#x27;</span>,<span class=\"number\">1000</span>),(<span class=\"string\">&#x27;李四&#x27;</span>,<span class=\"number\">1000</span>);</span><br></pre></td></tr></table></figure></li>\n<li><p>不加事务演示问题</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 转账操作</span></span><br><span class=\"line\"><span class=\"comment\">-- 1. 查询李四账户金额是否大于500</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 2. 李四账户 -500</span></span><br><span class=\"line\"><span class=\"keyword\">UPDATE</span> account <span class=\"keyword\">set</span> money <span class=\"operator\">=</span> money <span class=\"operator\">-</span> <span class=\"number\">500</span> <span class=\"keyword\">where</span> name <span class=\"operator\">=</span> <span class=\"string\">&#x27;李四&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">出现异常了...  <span class=\"comment\">-- 此处不是注释，在整体执行时会出问题，后面的sql则不执行</span></span><br><span class=\"line\"><span class=\"comment\">-- 3. 张三账户 +500</span></span><br><span class=\"line\"><span class=\"keyword\">UPDATE</span> account <span class=\"keyword\">set</span> money <span class=\"operator\">=</span> money <span class=\"operator\">+</span> <span class=\"number\">500</span> <span class=\"keyword\">where</span> name <span class=\"operator\">=</span> <span class=\"string\">&#x27;张三&#x27;</span>;</span><br></pre></td></tr></table></figure>\n\n<p>整体执行结果肯定会出问题，我们查询账户表中数据，发现李四账户少了500。</p>\n</li>\n<li><p>添加事务sql如下：</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 开启事务</span></span><br><span class=\"line\"><span class=\"keyword\">BEGIN</span>;</span><br><span class=\"line\"><span class=\"comment\">-- 转账操作</span></span><br><span class=\"line\"><span class=\"comment\">-- 1. 查询李四账户金额是否大于500</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 2. 李四账户 -500</span></span><br><span class=\"line\"><span class=\"keyword\">UPDATE</span> account <span class=\"keyword\">set</span> money <span class=\"operator\">=</span> money <span class=\"operator\">-</span> <span class=\"number\">500</span> <span class=\"keyword\">where</span> name <span class=\"operator\">=</span> <span class=\"string\">&#x27;李四&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">出现异常了...  <span class=\"comment\">-- 此处不是注释，在整体执行时会出问题，后面的sql则不执行</span></span><br><span class=\"line\"><span class=\"comment\">-- 3. 张三账户 +500</span></span><br><span class=\"line\"><span class=\"keyword\">UPDATE</span> account <span class=\"keyword\">set</span> money <span class=\"operator\">=</span> money <span class=\"operator\">+</span> <span class=\"number\">500</span> <span class=\"keyword\">where</span> name <span class=\"operator\">=</span> <span class=\"string\">&#x27;张三&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 提交事务</span></span><br><span class=\"line\"><span class=\"keyword\">COMMIT</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 回滚事务</span></span><br><span class=\"line\"><span class=\"keyword\">ROLLBACK</span>;</span><br></pre></td></tr></table></figure>\n\n<p>上面sql中的执行成功进选择执行提交事务，而出现问题则执行回滚事务的语句。以后我们肯定不可能这样操作，而是在java中进行操作，在java中可以抓取异常，没出现异常提交事务，出现异常回滚事务。</p>\n</li>\n</ul>\n<h3 id=\"4-4-事务的四大特征\"><a href=\"#4-4-事务的四大特征\" class=\"headerlink\" title=\"4.4  事务的四大特征\"></a>4.4  事务的四大特征</h3><ul>\n<li><p>原子性（Atomicity）: 事务是不可分割的最小操作单位，要么同时成功，要么同时失败</p>\n</li>\n<li><p>一致性（Consistency） :事务完成时，必须使所有的数据都保持一致状态</p>\n</li>\n<li><p>隔离性（Isolation） :多个事务之间，操作的可见性</p>\n</li>\n<li><p>持久性（Durability） :事务一旦提交或回滚，它对数据库中的数据的改变就是永久的</p>\n</li>\n</ul>\n<blockquote>\n<p>==说明：==</p>\n<p>mysql中事务是自动提交的。</p>\n<p>也就是说我们不添加事务执行sql语句，语句执行完毕会自动的提交事务。</p>\n<p>可以通过下面语句查询默认提交方式：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SELECT @<span class=\"meta\">@autocommit</span>;</span><br></pre></td></tr></table></figure>\n\n<p>查询到的结果是1 则表示自动提交，结果是0表示手动提交。当然也可以通过下面语句修改提交方式</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">set</span> @<span class=\"variable\">@autocommit</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>;</span><br></pre></td></tr></table></figure>\n</blockquote>\n"},{"title":"数据结构","date":"2022-10-06T01:51:21.545Z","_content":"<p style=\"font-size: 150px;text-align:center;color:blue;font-backgrountd:255,255,255\">数据结构</p>\n\n[TOC]\n\n## 第一章 绪论\n\n### 1.数据结构的基本概念\n\n#### 1.基本概念和术语\n\n​\t1.数据 \n\n​\t\t信息的载体,是描述客观事物属性的数,字符及所有能被计算机识别和处理的符号的集合\n\n​\t2.数据元素 \n\n​\t\t数据的基本单位,由数据项组成,不可分割的最小单位\n\n​\t3.数据对象 \n\n​\t\t具有相同性质的数据元素的集合,数据的一个子集\n\n​\t4.数据类型 \n\n​\t\t一个值的集合和定义在集合上的一组操作的总称\n\n​\t\t\t原子类型  值不可再分\n\n​\t\t\t结构类型  值可以再分\n\n​\t\t\t抽象数据类型\n\n5.抽象数据类型\n\n​\t1.定义: 一个数学模型和定义在模型上的一组操作\n\n​\t2.特点: 定义仅取决于它的一组逻辑特性,与在计算机内部如何表示和实现无关\n\n​\t3.表示: (数据对象,数据关系,基本操作集)\n\n6.数据结构\n\n​\t1.结构: 数据元素之间的相互关系\n\n​\t2.定义: 相互之间存在一种或多种特定关系的数据元素的集合\n\n​\t3.内容: 逻辑结构,存储结构,数据的运算\n\n​\t\t逻辑结构: 一个算法的设计\n\n​\t\t存储结构: 一个算法的实现\n\n#### 2.数据结构三要素\n\n1.数据的==逻辑结构==\n\n​\t1.定义: 数据元素之间的逻辑关系,与存储无关,独立于计算机\n\n​\t2.分类\n\n- ​\t\t线性结构\n\n​\t\t\t1、线性表    一对一\n\n- ​\t\t非线性结构\n\n​\t\t\t1、集合   同属一个集合\n\n​\t\t\t2、树    一对多\n\n​\t\t\t3、图/网状    多对多\n\n2.数据的==存储结构==\n\n​\t1.定义: 数据结构在计算机中的表示(又称映像/物理结构)\n\n​\t2.包括: 数据元素的表示和关系的表示\n\n​\t3.分类\n\n- ​\t==顺序存储==\n\n  ​\t\t优点: 随机存取,元素占用最少存储空间\n\n  ​\t\t缺点: 只能使用相邻的一整块存储单元,产生较多的外部碎片\n\n- ​\t==链式存储==\n\n  ​\t\t优点: 不会出现碎片现象\n\n  ​\t\t缺点: 存储指针占用额外的存储空间; 只能顺序存取\n\n- ​\t==索引存储==\n\n  ​\t\t定义: 建立附加的索引表,每项称为索引项(关键字,地址)\n\n  ​\t\t优点: 检索速度快\n\n  ​\t\t缺点: 占用较多存储空间; 增加和删除数据要修改索引表,花费较多时间\n\n- ​\t==散列存储==\n\n  ​\t\t定义: 根据元素的关键字直接计算出该元素的存储地址(Hash存储)\n\n  ​\t\t优点: 检索,增加和删除结点都很快\n\n  ​\t\t缺点: 若散列函数不好,出现元素存储单元冲突,会增加时间和空间的开销\n\n3.数据的运算\n\n​\t1.运算的定义: 针对逻辑结构,指出运算的功能\n\n​\t2.运算的实现: 针对存储结构,指出运算的具体操作步骤\n\n#### 题目总结\n\n==易错：==\n\n​\t\t1.属于逻辑结构  有序表\n\n​\t\t2.循环队列是用顺序表表示的队列,是数据结构,不是抽象数据结构\n\n​\t\t3.不同结点的存储空间可以不连续,但结点内的存储空间必须连续\n\n​\t\t4.两种不同的数据结构,逻辑结构和物理结构可以完全相同,但数据的运算不同\n\n### 2.算法和算法评价\n\n#### 1.算法的基本概念\n\n1.定义: 对特定问题求解步骤的描述,指令的有限序列\n\n2.==特性==\n\n​\t1.有穷性\n\n​\t2.确定性\n\n​\t3.可行性\n\n​\t4.输入\n\n​\t5.输出\n\n3.==好的算法==\n\n​\t1.正确性\n\n​\t2.可读性\n\n​\t3.健壮性\n\n​\t4.效率与低存储量需求\n\n#### 2.算法效率的度量\n\n1.时间复杂度O(n) \n\n​\t定义: 衡量算法随着问题规模增大,算法执行时间增长的快慢\n\n2.空间复杂度S(n)\n\n​\t1.定义: 衡量算法随着问题规模增大,算法所需空间增长的快慢\n\n​\t2.算法原地工作: 算法所需要的辅助空间为常数,即O(1)\n\n#### 题目总结\n\n1、==易错==\n\n​\t1.将长度为m,n的两个升序链表,合并为m+n的降序链表(取较小元素,头插法)\n\n​\t2.时间复杂度计算\n\n​\t\t1.sum += ++i;  O(n^1/2)   第k次: sum = 1+2+3+...+k ≥n\n\n​\t\t2、2.i=i*2  O(log₂n)\n\n​\t\t3.递归算法\t\n\n - 1.T(n)=2T(n/2)+n (n>1) (n=1时: T(n)=1) O(nlog₂n）\n - 2.设n=2^k,先根据递归条件,找到T(2^k)的通式,再转化为n,即得到时间复杂度\n\n​\t3.同一个算法,实现的语言的级别越高级,执行效率越低\n\n\n\n---\n\n\n\n## 第二章 线性表\n\n\n\n### 1.线性表的定义和基本操作\n\n#### 1.线性表的定义\n\n​\t1.定义: 相同数据类型的有限序列\n\n​\t2.注意: 线性表是逻辑结构,顺序表和链表指存储结构\n\n#### 2.线性表的基本操作\n\n​\t1.注意: & 表示C++中的引用,若传入指针型变量且在函数体内要进行改变,要用到指针变量的引用(C中用指针的指针也可以)\n\n​\t2.主要操作\n\n### 2.线性表的顺序表示\n\n#### 1.顺序表的定义\n\n1.顺序表需要三个部分\n\n- ==存储空间的起始位置==\n- ==顺序表最大存储空间==\n- ==顺序表当前的长度==\n\n2.==静态分配==\n\n```c\n#define MaxSize 50 \t\t\t//定义线性表的最大长度\ntypedef struct {\n\tElemType data[MaxSize]; //顺序表的元素\n\tint length;\t\t\t\t//顺序表的当前元素\n}SqList;\t\t\t\t\t//顺序表的类型定义\n\n```\n\n\n\n3.==动态分配==\n\n```c\n#define InitSize 10 \t\t//顺序表的初始长度\ntypedef struct{\n    ElemType *data;\t\t\t//指示动态分配数组的指针\n    int MaxSize;\t\t\t//顺序表的最大容量\n    int length;\t\t\t\t//顺序表的当前长度\n}SqList;\t\t\t\t\t//顺序表的类型定义（动态分配方式）\n```\n\n\n\n4.动态分配语句\n\n​\tC语言: ==L.data=(ElemType*)malloc(sizeof(ElemType)*InitSize);==\n\n​\tC++: ==L.data=new ElemType[InitSize];==\n\n5.注意: 动态分配不是链式存储,同样属于顺序存储结构,物理结构没有变化:随机存取方式,只是分配的空间大小可以在运行时决定\n\n6.特点: 随机访问,存储密度高,插入和删除需要移动大量元素\n\n#### 2.顺序表上基本操作的实现\n\n##### 1.==插入操作 O(n)==\n\n```c\nbool ListInsert(SqList &L, int i, ElemType e){\n\tif (i < 1 || i > L.length + 1) \t\t\t\t//判断i的范围是否有效\n\t\treturn false;\n\tif (L.length >= MaxSize) \t\t\t\t\t//当前存储空间已满，不能插入\n\t\treturn false;\n\tfor (int j = L.length; j >= i; j -- )\t\t//将第i个元素及之后的元素后移\n\t\tL.data[j] = L.data[j - 1];\n\tL.data[i - 1] = e;\t\t\t\t\t\t\t//在位置i处放入e\n\tL.length ++ ;\t\t\t\t\t\t\t\t//线性表长度加1\n\treturn true;\n}\n```\n\n\n\n##### 2.==删除操作 O(n)==\n\n```c\nbool ListDelete(SqList &L, int i, ElemType &e){\n\tif (i < 1 || i > L.length)\t\t\t\t\t//判断i的范围是否有效\n\t\treturn false;\n\te = L.data[i - 1];\t\t\t\t\t\t\t//将被删除的元素赋值给e\n\tfor (int j = i; j < L.length; j ++ )\t\t//将第i个位置后的元素前移\n\t\tL.data[j - 1] = L.data[j];\n\tL.length -- ;\t\t\t\t\t\t\t\t//线性表长度减1\n\treturn true;\n}\n```\n\n\n\n##### 3.==按值查找(顺序查找) O(n)==\n\n```c\nint LocateElem(SqList L, ElemType e) {\n\tint i;\n\tfor (int i = 0; i < L.length; i ++ )\n\t\tif (L.data[i] == e) \n\t\t\treturn i + 1;\t\t\t\t//下标伟i的元素值等于e，返回其位序i + 1；\n\treturn 0;\t\t\t\t\t\t\t//退出循环，说明查找失败\n}\n```\n\n##### 4、==初始化顺序表==\n\n```\nvoid InitList(Sqlist &L) {\n\tfor (int i = 0; i < MaxSize; i ++ )\n\t\tL.data[i] = 0;\t\t\t\t\t//所有数据元素设置为默认初始值\n\tL.length = 0;\t\t\t\t\t\t//顺序表初始长度为0\n}\n```\n\n\n\n#### 题目总结\n\n==1、易错==\n\n​\t1.线性表必须是有限序列\n\n​\t2.在顺序表的第i个位置插入一个数,i的合法取值: 1≤i≤n+1 在第n+1个位置插入相当于在表尾追加\n\n==2、算法==\n\n**1.将顺序表的所有元素逆序**\n\n<font color=\"blue\"> 算法思想：扫描顺序表L的前班部分元素，对于元素L.date[ i ] (0 <= L.length / 2），将其与后半部分的对应元素L.data[L.length - i - 1]进行交换 </font>\n\n```c\nvoid Reverse(SqList &L){\n    ElemType temp;\t\t\t\t\t\t\t\t\t//辅助变量\n    for (int i = 0; i < L.length / 2; i ++ ){\n        temp = L.data[i];\t\t\t\t\t\t\t//交换L.data[i]与L.data[L.length - i - 1];\n        L.data[i] = L.data[L.length - i - 1];\n        L.data[L.length - i - 1] = temp;\n    }\n}\n```\n\n\n\n**2.顺序表(非有序)删除所有值为x的数据元素**\n\n<font color=\"blue\">用k记录顺序表L中不等于x的元素个数（既需要保存的元素个数），扫描时将不等于x的元素移动到下标k的位置，并更新k值。扫描结束后修改L的长度</font>\n\n```c\nvoid del_x_l(SqList &L, Elemtype x){\n\tint k = 0, i;\t\t\t\t\t\t\t//记录值不等于x的元素个数\n\tfor (int i = 0; i < L.length; i ++ )\n\t\tif (L.data[i] != x){\n\t\t\tL.data[k] = L.data[i];\n\t\t\tk ++ ;\t\t\t\t\t\t\t//不等于x的元素增1\n\t\t\t}\n\t\tL.length = k;\t\t\t\t\t\t//顺序表L的长度等于k\n}\n```\n\n\n\n**3.有序顺序表删除给定值s与t之间的所有元素**\n\n```c\nbool Del_S_t2(SqList &L, ElemType s, ElemType t){\n\t//删除有序顺序表L中值在给定值s到t之间的所有元素\n\tint i, j;\n\tif (s >= t || L.length == 0)\n\t\treturn false;\n\tfOr (i = 0; i < L.length && L.data[i] < s; i ++ );\t//寻找值大于等于s的第一个元素\n\tif (i >= L.length)\t\n\t\treturn false;\t\t\t\t\t\t\t\t\t//所有元素值均小于s，返回\n\tfor (j = i; j < L.length && L.data[j] <= t; j ++ )\t//寻找值大于t的第一个元素\n\tfor (;j < L.length; i ++ , j ++ )\n\t\tL.data[i] = L.data[j];\t\t\t\t\t\t\t//前移，填补被删元素位置\n\tL.length = i;\n\treturn true;\n}\n```\n\n\n\n**4.有序表删除所有其值重复的元素**\n\n```c\nbool  Delete_Same(SeqList &L){\n\tif (L.length == 0)\n\t\treturn false;\n\tint i, j;\t\t\t\t\t\t\t\t\t\t\t//i存储第一个不相同的元素，j为工作指针\n\tfor (int i = 0, j = 1; j < L.length; j ++ )\n\t\tif (L.data[i] != L.data[j])\t\t\t\t\t\t//查找下一个与上个元素值不同的元素\n\t\t\tL.data[++ i] = L.data[j];\t\t\t\t\t//找到后，将元素前移\n\tL.length = i + 1;\n\treturn true;\n}\n```\n\n\n\n**5.将两个有序表合并为一个有序表,由函数返回结果**\n\n```c\nbool Merge(SeqList A, SeqList B, SeqList &c){\n\t//将有序顺序表A与B合并为一个新的有序顺序表C\n\tif (A.length + B.length > C.maxSize)\t\t\t\t//大于顺序表的最大长度\n\t\treturn fasle;\n\tint i = 0, j = 0, k = 0;\n\twhile(i < A.length && J < B.length){\t\t\t\t//循环，两两比较，小者存入结构表\n\t\tif (A.data[i] < B.data[i])\n\t\t\tC.data[k ++ ] = A.data[i ++ ];\n\t\telse \n\t\t\tC.data[k ++ ] = B.data[j ++ ];\n\t}\n\twhile(i < A.length)\t\t\t\t\t\t\t\t\t//还剩下一个没有比较完的顺序表\n\t\tC.data[k ++ ] = A.data[i ++ ];\n\twhile(j < B.length)\n\t\tC.data[k ++ ] = B.data[j ++ ];\n\tC.length = k;\n\treturn true;\n}\n```\n\n\n\n### 3.线性表的链式表示\n\n#### 1.单链表的定义\n\n1.结点类型的描述\n\n2.特点: 浪费空间,非随机存取\n\n3.头指针和头结点区别\n\n​\t\t1.不管带不带头结点,头指针始终指向链表的第一个结点\n\n​\t\t2.头结点是带头结点的链表中的第一个结点,通常不存储信息\n\n4.引入头结点的优点\n\n​\t\t1.在链表第一个位置上的操作和其他位置上的一致\n\n​\t\t2.无论链表是否为空,头指针都指向头结点的非空指针,空表和非空表处理一致\t\n\n**单链表定义**\n\n```c\ntypedef struct LNode{\t\t\t//定义单链表结点类型\n\tElemType data;\t\t\t\t//数据域\n\tstruct LNode *next;\t\t\t//指针域\n}LNode, *LinkList;\n```\n\n\n\n#### 2.单链表上基本操作的实现\n\n1.头插法建立链表\n\n```c\nLinkList List_HeadInsert(LinkList &L){\t\t\t//逆向建立单链表\n\tLNode *s; int x;\n\tL = (LinkList)malloc(sizeof(LNode));\t\t//创建头结点\n\tL.next = NULL;\t\t\t\t\t\t\t\t//初始化为空链表\n\tscanf(\"%d\", &x);\t\t\t\t\t\t\t//输入结点的值\n\twhile(x != 9999){\t\t\t\t\t\t\t//输入9999表示结束\n\t\ts = (LNode *)malloc(sizeof(LNode));\t\t//创建新结点\n\t\ts->data = x;\n\t\ts->next = L->next;\n\t\tL->next = s;\t\t\t\t\t\t\t//将新的结点插入表中，L为头指针\n\t\tscanf(\"%d\", &x);\n\t}\n\treturn L;\n}\n```\n\n\n\n2.尾插法建立链表\n\n```\n```\n\n\n\n3.按序号查找结点值\n\n4.按值查找表结点\n\n5.插入结点操作\n\n​\t\t前插操作: 先找到前一个结点,时间复杂度为O(n)\n\n​\t\t扩展: 将前插操作转化为后插操作,然后交换两个结点的数据,时间复杂度为O(1)\n\n6.删除结点操作\n\n​\t\t先找到前驱节点,再删除结点,O(n\n\n​\t\t扩展: 先和后继结点交换数据,再删除后继结点,O(1)\n\n7.求表长操作\n\n​\t\t计算数据结点的个数\n\n#### 3.双链表\n\n​\t1.双链表中结点类型的描述\n\n​\t2.插入操作\n\n​\t3.删除操作\n\n#### 4.循环链表\n\n1.==循环单链表==\n\n​\t\t1.判空条件: 头结点的指针是否指向头指针\n\n​\t\t2.对单链表在表头和表尾操作时: 不设头指针仅设尾指针,效率更高\n\n2.==循环双链表==\n\n​\t\t判空条件: 头结点的prior域和next域都指向头指针\n\n#### 5.静态链表\n\n1.定义: 用数组描述链式存储结构,也有数据域和指针域.指针是结点的相对地址(数组下标),又称游标\n\n2.形式\n\n3.结束标志: next==-1\n\n4.注意\n\n​\t\t1.和顺序表一样,也要预先分配一块连续的内存空间\n\n​\t\t2.插入和删除只需要修改指针,不需要移动元素\n\n​\t\t3.在不支持指针的高级语言(Basic)中很巧妙\n\n#### 6.顺序表和链表的==比较==\n\n1.存取方式\n\n​\t\t顺序表可顺序存取,可随机存取. 链表只能从表头顺序存取\n\n2.逻辑结构与物理结构\n\n3.查找,插入和删除\n\n​\t\t1.按值查找\n\n​\t\t\t无序时,都为O(n)\n\n​\t\t\t有序时,顺序表可以折半查找,O(log₂n)\n\n​\t\t2.按序号查找 \n\n​\t\t\t顺序表为O(1),链表为O(n)\n\n4.空间分配\n\n5.怎样选取存储结构\n\n​\t\t1.基于存储的考虑\n\n​\t\t\t难以估计长度和存储规模时用链表,但链表的存储密度较低\n\n​\t\t2.基于运算的考虑\n\n​\t\t\t经常做按序号访问数据元素用顺序表\n\n​\t\t3.基于环境的考虑\n\n​\t\t\t顺序表容易实现,链表基于指针\n\n​\t\t\t较稳定选顺序表,动态性较强选链表\n\n#### 题目总结\n\n1、==易错==\t\n\n1.链式存储结构比顺序存储结构更方便地表示各种逻辑结构\n\n2.顺序存储不只能用于存储线性结构,还能存储图和树的结构(满二叉树)\n\n3.静态链表需要分配较大的连续空间,插入和删除不需要移动元素\n\n4.若用单链表表示队列,应选用带尾指针的循环链表\n\n5.给定一维数组,建立一个有序单链表的最低时间为O(nlog₂n) \n\n​\t\t\t先对数组进行排序,再构造单链表\n\n6.链表常用操作为在最后一个元素之后插入,删除第一个元素,最节省时间的是\n\n​\t\t\t1.不带头结点且有尾指针的单循环链表\n\n​\t\t\t2.即使是双链表,只要不带尾指针,都要找到尾结点,时间为O(n)\n\n### 注意点\n\n#### \t1.插入结点时: 先对插入结点的后继结点操作,再对原结点进行操作\n\n## 第三章 栈和队列\n\n\n\n## 第四章 树和二叉树\n\n## 第五章 图\n\n## 第六章 查找\n\n## 第七章 排序","source":"_posts/数据结构.md","raw":"---\ntitle: 数据结构\ndate: \ntags:\n\t- 数据结构\ncategories:\n\t- [数据结构]\n---\n<p style=\"font-size: 150px;text-align:center;color:blue;font-backgrountd:255,255,255\">数据结构</p>\n\n[TOC]\n\n## 第一章 绪论\n\n### 1.数据结构的基本概念\n\n#### 1.基本概念和术语\n\n​\t1.数据 \n\n​\t\t信息的载体,是描述客观事物属性的数,字符及所有能被计算机识别和处理的符号的集合\n\n​\t2.数据元素 \n\n​\t\t数据的基本单位,由数据项组成,不可分割的最小单位\n\n​\t3.数据对象 \n\n​\t\t具有相同性质的数据元素的集合,数据的一个子集\n\n​\t4.数据类型 \n\n​\t\t一个值的集合和定义在集合上的一组操作的总称\n\n​\t\t\t原子类型  值不可再分\n\n​\t\t\t结构类型  值可以再分\n\n​\t\t\t抽象数据类型\n\n5.抽象数据类型\n\n​\t1.定义: 一个数学模型和定义在模型上的一组操作\n\n​\t2.特点: 定义仅取决于它的一组逻辑特性,与在计算机内部如何表示和实现无关\n\n​\t3.表示: (数据对象,数据关系,基本操作集)\n\n6.数据结构\n\n​\t1.结构: 数据元素之间的相互关系\n\n​\t2.定义: 相互之间存在一种或多种特定关系的数据元素的集合\n\n​\t3.内容: 逻辑结构,存储结构,数据的运算\n\n​\t\t逻辑结构: 一个算法的设计\n\n​\t\t存储结构: 一个算法的实现\n\n#### 2.数据结构三要素\n\n1.数据的==逻辑结构==\n\n​\t1.定义: 数据元素之间的逻辑关系,与存储无关,独立于计算机\n\n​\t2.分类\n\n- ​\t\t线性结构\n\n​\t\t\t1、线性表    一对一\n\n- ​\t\t非线性结构\n\n​\t\t\t1、集合   同属一个集合\n\n​\t\t\t2、树    一对多\n\n​\t\t\t3、图/网状    多对多\n\n2.数据的==存储结构==\n\n​\t1.定义: 数据结构在计算机中的表示(又称映像/物理结构)\n\n​\t2.包括: 数据元素的表示和关系的表示\n\n​\t3.分类\n\n- ​\t==顺序存储==\n\n  ​\t\t优点: 随机存取,元素占用最少存储空间\n\n  ​\t\t缺点: 只能使用相邻的一整块存储单元,产生较多的外部碎片\n\n- ​\t==链式存储==\n\n  ​\t\t优点: 不会出现碎片现象\n\n  ​\t\t缺点: 存储指针占用额外的存储空间; 只能顺序存取\n\n- ​\t==索引存储==\n\n  ​\t\t定义: 建立附加的索引表,每项称为索引项(关键字,地址)\n\n  ​\t\t优点: 检索速度快\n\n  ​\t\t缺点: 占用较多存储空间; 增加和删除数据要修改索引表,花费较多时间\n\n- ​\t==散列存储==\n\n  ​\t\t定义: 根据元素的关键字直接计算出该元素的存储地址(Hash存储)\n\n  ​\t\t优点: 检索,增加和删除结点都很快\n\n  ​\t\t缺点: 若散列函数不好,出现元素存储单元冲突,会增加时间和空间的开销\n\n3.数据的运算\n\n​\t1.运算的定义: 针对逻辑结构,指出运算的功能\n\n​\t2.运算的实现: 针对存储结构,指出运算的具体操作步骤\n\n#### 题目总结\n\n==易错：==\n\n​\t\t1.属于逻辑结构  有序表\n\n​\t\t2.循环队列是用顺序表表示的队列,是数据结构,不是抽象数据结构\n\n​\t\t3.不同结点的存储空间可以不连续,但结点内的存储空间必须连续\n\n​\t\t4.两种不同的数据结构,逻辑结构和物理结构可以完全相同,但数据的运算不同\n\n### 2.算法和算法评价\n\n#### 1.算法的基本概念\n\n1.定义: 对特定问题求解步骤的描述,指令的有限序列\n\n2.==特性==\n\n​\t1.有穷性\n\n​\t2.确定性\n\n​\t3.可行性\n\n​\t4.输入\n\n​\t5.输出\n\n3.==好的算法==\n\n​\t1.正确性\n\n​\t2.可读性\n\n​\t3.健壮性\n\n​\t4.效率与低存储量需求\n\n#### 2.算法效率的度量\n\n1.时间复杂度O(n) \n\n​\t定义: 衡量算法随着问题规模增大,算法执行时间增长的快慢\n\n2.空间复杂度S(n)\n\n​\t1.定义: 衡量算法随着问题规模增大,算法所需空间增长的快慢\n\n​\t2.算法原地工作: 算法所需要的辅助空间为常数,即O(1)\n\n#### 题目总结\n\n1、==易错==\n\n​\t1.将长度为m,n的两个升序链表,合并为m+n的降序链表(取较小元素,头插法)\n\n​\t2.时间复杂度计算\n\n​\t\t1.sum += ++i;  O(n^1/2)   第k次: sum = 1+2+3+...+k ≥n\n\n​\t\t2、2.i=i*2  O(log₂n)\n\n​\t\t3.递归算法\t\n\n - 1.T(n)=2T(n/2)+n (n>1) (n=1时: T(n)=1) O(nlog₂n）\n - 2.设n=2^k,先根据递归条件,找到T(2^k)的通式,再转化为n,即得到时间复杂度\n\n​\t3.同一个算法,实现的语言的级别越高级,执行效率越低\n\n\n\n---\n\n\n\n## 第二章 线性表\n\n\n\n### 1.线性表的定义和基本操作\n\n#### 1.线性表的定义\n\n​\t1.定义: 相同数据类型的有限序列\n\n​\t2.注意: 线性表是逻辑结构,顺序表和链表指存储结构\n\n#### 2.线性表的基本操作\n\n​\t1.注意: & 表示C++中的引用,若传入指针型变量且在函数体内要进行改变,要用到指针变量的引用(C中用指针的指针也可以)\n\n​\t2.主要操作\n\n### 2.线性表的顺序表示\n\n#### 1.顺序表的定义\n\n1.顺序表需要三个部分\n\n- ==存储空间的起始位置==\n- ==顺序表最大存储空间==\n- ==顺序表当前的长度==\n\n2.==静态分配==\n\n```c\n#define MaxSize 50 \t\t\t//定义线性表的最大长度\ntypedef struct {\n\tElemType data[MaxSize]; //顺序表的元素\n\tint length;\t\t\t\t//顺序表的当前元素\n}SqList;\t\t\t\t\t//顺序表的类型定义\n\n```\n\n\n\n3.==动态分配==\n\n```c\n#define InitSize 10 \t\t//顺序表的初始长度\ntypedef struct{\n    ElemType *data;\t\t\t//指示动态分配数组的指针\n    int MaxSize;\t\t\t//顺序表的最大容量\n    int length;\t\t\t\t//顺序表的当前长度\n}SqList;\t\t\t\t\t//顺序表的类型定义（动态分配方式）\n```\n\n\n\n4.动态分配语句\n\n​\tC语言: ==L.data=(ElemType*)malloc(sizeof(ElemType)*InitSize);==\n\n​\tC++: ==L.data=new ElemType[InitSize];==\n\n5.注意: 动态分配不是链式存储,同样属于顺序存储结构,物理结构没有变化:随机存取方式,只是分配的空间大小可以在运行时决定\n\n6.特点: 随机访问,存储密度高,插入和删除需要移动大量元素\n\n#### 2.顺序表上基本操作的实现\n\n##### 1.==插入操作 O(n)==\n\n```c\nbool ListInsert(SqList &L, int i, ElemType e){\n\tif (i < 1 || i > L.length + 1) \t\t\t\t//判断i的范围是否有效\n\t\treturn false;\n\tif (L.length >= MaxSize) \t\t\t\t\t//当前存储空间已满，不能插入\n\t\treturn false;\n\tfor (int j = L.length; j >= i; j -- )\t\t//将第i个元素及之后的元素后移\n\t\tL.data[j] = L.data[j - 1];\n\tL.data[i - 1] = e;\t\t\t\t\t\t\t//在位置i处放入e\n\tL.length ++ ;\t\t\t\t\t\t\t\t//线性表长度加1\n\treturn true;\n}\n```\n\n\n\n##### 2.==删除操作 O(n)==\n\n```c\nbool ListDelete(SqList &L, int i, ElemType &e){\n\tif (i < 1 || i > L.length)\t\t\t\t\t//判断i的范围是否有效\n\t\treturn false;\n\te = L.data[i - 1];\t\t\t\t\t\t\t//将被删除的元素赋值给e\n\tfor (int j = i; j < L.length; j ++ )\t\t//将第i个位置后的元素前移\n\t\tL.data[j - 1] = L.data[j];\n\tL.length -- ;\t\t\t\t\t\t\t\t//线性表长度减1\n\treturn true;\n}\n```\n\n\n\n##### 3.==按值查找(顺序查找) O(n)==\n\n```c\nint LocateElem(SqList L, ElemType e) {\n\tint i;\n\tfor (int i = 0; i < L.length; i ++ )\n\t\tif (L.data[i] == e) \n\t\t\treturn i + 1;\t\t\t\t//下标伟i的元素值等于e，返回其位序i + 1；\n\treturn 0;\t\t\t\t\t\t\t//退出循环，说明查找失败\n}\n```\n\n##### 4、==初始化顺序表==\n\n```\nvoid InitList(Sqlist &L) {\n\tfor (int i = 0; i < MaxSize; i ++ )\n\t\tL.data[i] = 0;\t\t\t\t\t//所有数据元素设置为默认初始值\n\tL.length = 0;\t\t\t\t\t\t//顺序表初始长度为0\n}\n```\n\n\n\n#### 题目总结\n\n==1、易错==\n\n​\t1.线性表必须是有限序列\n\n​\t2.在顺序表的第i个位置插入一个数,i的合法取值: 1≤i≤n+1 在第n+1个位置插入相当于在表尾追加\n\n==2、算法==\n\n**1.将顺序表的所有元素逆序**\n\n<font color=\"blue\"> 算法思想：扫描顺序表L的前班部分元素，对于元素L.date[ i ] (0 <= L.length / 2），将其与后半部分的对应元素L.data[L.length - i - 1]进行交换 </font>\n\n```c\nvoid Reverse(SqList &L){\n    ElemType temp;\t\t\t\t\t\t\t\t\t//辅助变量\n    for (int i = 0; i < L.length / 2; i ++ ){\n        temp = L.data[i];\t\t\t\t\t\t\t//交换L.data[i]与L.data[L.length - i - 1];\n        L.data[i] = L.data[L.length - i - 1];\n        L.data[L.length - i - 1] = temp;\n    }\n}\n```\n\n\n\n**2.顺序表(非有序)删除所有值为x的数据元素**\n\n<font color=\"blue\">用k记录顺序表L中不等于x的元素个数（既需要保存的元素个数），扫描时将不等于x的元素移动到下标k的位置，并更新k值。扫描结束后修改L的长度</font>\n\n```c\nvoid del_x_l(SqList &L, Elemtype x){\n\tint k = 0, i;\t\t\t\t\t\t\t//记录值不等于x的元素个数\n\tfor (int i = 0; i < L.length; i ++ )\n\t\tif (L.data[i] != x){\n\t\t\tL.data[k] = L.data[i];\n\t\t\tk ++ ;\t\t\t\t\t\t\t//不等于x的元素增1\n\t\t\t}\n\t\tL.length = k;\t\t\t\t\t\t//顺序表L的长度等于k\n}\n```\n\n\n\n**3.有序顺序表删除给定值s与t之间的所有元素**\n\n```c\nbool Del_S_t2(SqList &L, ElemType s, ElemType t){\n\t//删除有序顺序表L中值在给定值s到t之间的所有元素\n\tint i, j;\n\tif (s >= t || L.length == 0)\n\t\treturn false;\n\tfOr (i = 0; i < L.length && L.data[i] < s; i ++ );\t//寻找值大于等于s的第一个元素\n\tif (i >= L.length)\t\n\t\treturn false;\t\t\t\t\t\t\t\t\t//所有元素值均小于s，返回\n\tfor (j = i; j < L.length && L.data[j] <= t; j ++ )\t//寻找值大于t的第一个元素\n\tfor (;j < L.length; i ++ , j ++ )\n\t\tL.data[i] = L.data[j];\t\t\t\t\t\t\t//前移，填补被删元素位置\n\tL.length = i;\n\treturn true;\n}\n```\n\n\n\n**4.有序表删除所有其值重复的元素**\n\n```c\nbool  Delete_Same(SeqList &L){\n\tif (L.length == 0)\n\t\treturn false;\n\tint i, j;\t\t\t\t\t\t\t\t\t\t\t//i存储第一个不相同的元素，j为工作指针\n\tfor (int i = 0, j = 1; j < L.length; j ++ )\n\t\tif (L.data[i] != L.data[j])\t\t\t\t\t\t//查找下一个与上个元素值不同的元素\n\t\t\tL.data[++ i] = L.data[j];\t\t\t\t\t//找到后，将元素前移\n\tL.length = i + 1;\n\treturn true;\n}\n```\n\n\n\n**5.将两个有序表合并为一个有序表,由函数返回结果**\n\n```c\nbool Merge(SeqList A, SeqList B, SeqList &c){\n\t//将有序顺序表A与B合并为一个新的有序顺序表C\n\tif (A.length + B.length > C.maxSize)\t\t\t\t//大于顺序表的最大长度\n\t\treturn fasle;\n\tint i = 0, j = 0, k = 0;\n\twhile(i < A.length && J < B.length){\t\t\t\t//循环，两两比较，小者存入结构表\n\t\tif (A.data[i] < B.data[i])\n\t\t\tC.data[k ++ ] = A.data[i ++ ];\n\t\telse \n\t\t\tC.data[k ++ ] = B.data[j ++ ];\n\t}\n\twhile(i < A.length)\t\t\t\t\t\t\t\t\t//还剩下一个没有比较完的顺序表\n\t\tC.data[k ++ ] = A.data[i ++ ];\n\twhile(j < B.length)\n\t\tC.data[k ++ ] = B.data[j ++ ];\n\tC.length = k;\n\treturn true;\n}\n```\n\n\n\n### 3.线性表的链式表示\n\n#### 1.单链表的定义\n\n1.结点类型的描述\n\n2.特点: 浪费空间,非随机存取\n\n3.头指针和头结点区别\n\n​\t\t1.不管带不带头结点,头指针始终指向链表的第一个结点\n\n​\t\t2.头结点是带头结点的链表中的第一个结点,通常不存储信息\n\n4.引入头结点的优点\n\n​\t\t1.在链表第一个位置上的操作和其他位置上的一致\n\n​\t\t2.无论链表是否为空,头指针都指向头结点的非空指针,空表和非空表处理一致\t\n\n**单链表定义**\n\n```c\ntypedef struct LNode{\t\t\t//定义单链表结点类型\n\tElemType data;\t\t\t\t//数据域\n\tstruct LNode *next;\t\t\t//指针域\n}LNode, *LinkList;\n```\n\n\n\n#### 2.单链表上基本操作的实现\n\n1.头插法建立链表\n\n```c\nLinkList List_HeadInsert(LinkList &L){\t\t\t//逆向建立单链表\n\tLNode *s; int x;\n\tL = (LinkList)malloc(sizeof(LNode));\t\t//创建头结点\n\tL.next = NULL;\t\t\t\t\t\t\t\t//初始化为空链表\n\tscanf(\"%d\", &x);\t\t\t\t\t\t\t//输入结点的值\n\twhile(x != 9999){\t\t\t\t\t\t\t//输入9999表示结束\n\t\ts = (LNode *)malloc(sizeof(LNode));\t\t//创建新结点\n\t\ts->data = x;\n\t\ts->next = L->next;\n\t\tL->next = s;\t\t\t\t\t\t\t//将新的结点插入表中，L为头指针\n\t\tscanf(\"%d\", &x);\n\t}\n\treturn L;\n}\n```\n\n\n\n2.尾插法建立链表\n\n```\n```\n\n\n\n3.按序号查找结点值\n\n4.按值查找表结点\n\n5.插入结点操作\n\n​\t\t前插操作: 先找到前一个结点,时间复杂度为O(n)\n\n​\t\t扩展: 将前插操作转化为后插操作,然后交换两个结点的数据,时间复杂度为O(1)\n\n6.删除结点操作\n\n​\t\t先找到前驱节点,再删除结点,O(n\n\n​\t\t扩展: 先和后继结点交换数据,再删除后继结点,O(1)\n\n7.求表长操作\n\n​\t\t计算数据结点的个数\n\n#### 3.双链表\n\n​\t1.双链表中结点类型的描述\n\n​\t2.插入操作\n\n​\t3.删除操作\n\n#### 4.循环链表\n\n1.==循环单链表==\n\n​\t\t1.判空条件: 头结点的指针是否指向头指针\n\n​\t\t2.对单链表在表头和表尾操作时: 不设头指针仅设尾指针,效率更高\n\n2.==循环双链表==\n\n​\t\t判空条件: 头结点的prior域和next域都指向头指针\n\n#### 5.静态链表\n\n1.定义: 用数组描述链式存储结构,也有数据域和指针域.指针是结点的相对地址(数组下标),又称游标\n\n2.形式\n\n3.结束标志: next==-1\n\n4.注意\n\n​\t\t1.和顺序表一样,也要预先分配一块连续的内存空间\n\n​\t\t2.插入和删除只需要修改指针,不需要移动元素\n\n​\t\t3.在不支持指针的高级语言(Basic)中很巧妙\n\n#### 6.顺序表和链表的==比较==\n\n1.存取方式\n\n​\t\t顺序表可顺序存取,可随机存取. 链表只能从表头顺序存取\n\n2.逻辑结构与物理结构\n\n3.查找,插入和删除\n\n​\t\t1.按值查找\n\n​\t\t\t无序时,都为O(n)\n\n​\t\t\t有序时,顺序表可以折半查找,O(log₂n)\n\n​\t\t2.按序号查找 \n\n​\t\t\t顺序表为O(1),链表为O(n)\n\n4.空间分配\n\n5.怎样选取存储结构\n\n​\t\t1.基于存储的考虑\n\n​\t\t\t难以估计长度和存储规模时用链表,但链表的存储密度较低\n\n​\t\t2.基于运算的考虑\n\n​\t\t\t经常做按序号访问数据元素用顺序表\n\n​\t\t3.基于环境的考虑\n\n​\t\t\t顺序表容易实现,链表基于指针\n\n​\t\t\t较稳定选顺序表,动态性较强选链表\n\n#### 题目总结\n\n1、==易错==\t\n\n1.链式存储结构比顺序存储结构更方便地表示各种逻辑结构\n\n2.顺序存储不只能用于存储线性结构,还能存储图和树的结构(满二叉树)\n\n3.静态链表需要分配较大的连续空间,插入和删除不需要移动元素\n\n4.若用单链表表示队列,应选用带尾指针的循环链表\n\n5.给定一维数组,建立一个有序单链表的最低时间为O(nlog₂n) \n\n​\t\t\t先对数组进行排序,再构造单链表\n\n6.链表常用操作为在最后一个元素之后插入,删除第一个元素,最节省时间的是\n\n​\t\t\t1.不带头结点且有尾指针的单循环链表\n\n​\t\t\t2.即使是双链表,只要不带尾指针,都要找到尾结点,时间为O(n)\n\n### 注意点\n\n#### \t1.插入结点时: 先对插入结点的后继结点操作,再对原结点进行操作\n\n## 第三章 栈和队列\n\n\n\n## 第四章 树和二叉树\n\n## 第五章 图\n\n## 第六章 查找\n\n## 第七章 排序","slug":"数据结构","published":1,"updated":"2022-11-19T06:42:56.997Z","comments":1,"layout":"post","photos":[],"link":"","_id":"claryulc8000e5ojr9vsvbcof","content":"<p style=\"font-size: 150px;text-align:center;color:blue;font-backgrountd:255,255,255\">数据结构</p>\n\n<p>[TOC]</p>\n<h2 id=\"第一章-绪论\"><a href=\"#第一章-绪论\" class=\"headerlink\" title=\"第一章 绪论\"></a>第一章 绪论</h2><h3 id=\"1-数据结构的基本概念\"><a href=\"#1-数据结构的基本概念\" class=\"headerlink\" title=\"1.数据结构的基本概念\"></a>1.数据结构的基本概念</h3><h4 id=\"1-基本概念和术语\"><a href=\"#1-基本概念和术语\" class=\"headerlink\" title=\"1.基本概念和术语\"></a>1.基本概念和术语</h4><p>​    1.数据 </p>\n<p>​        信息的载体,是描述客观事物属性的数,字符及所有能被计算机识别和处理的符号的集合</p>\n<p>​    2.数据元素 </p>\n<p>​        数据的基本单位,由数据项组成,不可分割的最小单位</p>\n<p>​    3.数据对象 </p>\n<p>​        具有相同性质的数据元素的集合,数据的一个子集</p>\n<p>​    4.数据类型 </p>\n<p>​        一个值的集合和定义在集合上的一组操作的总称</p>\n<p>​            原子类型  值不可再分</p>\n<p>​            结构类型  值可以再分</p>\n<p>​            抽象数据类型</p>\n<p>5.抽象数据类型</p>\n<p>​    1.定义: 一个数学模型和定义在模型上的一组操作</p>\n<p>​    2.特点: 定义仅取决于它的一组逻辑特性,与在计算机内部如何表示和实现无关</p>\n<p>​    3.表示: (数据对象,数据关系,基本操作集)</p>\n<p>6.数据结构</p>\n<p>​    1.结构: 数据元素之间的相互关系</p>\n<p>​    2.定义: 相互之间存在一种或多种特定关系的数据元素的集合</p>\n<p>​    3.内容: 逻辑结构,存储结构,数据的运算</p>\n<p>​        逻辑结构: 一个算法的设计</p>\n<p>​        存储结构: 一个算法的实现</p>\n<h4 id=\"2-数据结构三要素\"><a href=\"#2-数据结构三要素\" class=\"headerlink\" title=\"2.数据结构三要素\"></a>2.数据结构三要素</h4><p>1.数据的==逻辑结构==</p>\n<p>​    1.定义: 数据元素之间的逻辑关系,与存储无关,独立于计算机</p>\n<p>​    2.分类</p>\n<ul>\n<li>​        线性结构</li>\n</ul>\n<p>​            1、线性表    一对一</p>\n<ul>\n<li>​        非线性结构</li>\n</ul>\n<p>​            1、集合   同属一个集合</p>\n<p>​            2、树    一对多</p>\n<p>​            3、图/网状    多对多</p>\n<p>2.数据的==存储结构==</p>\n<p>​    1.定义: 数据结构在计算机中的表示(又称映像/物理结构)</p>\n<p>​    2.包括: 数据元素的表示和关系的表示</p>\n<p>​    3.分类</p>\n<ul>\n<li><p>​    ==顺序存储==</p>\n<p>​        优点: 随机存取,元素占用最少存储空间</p>\n<p>​        缺点: 只能使用相邻的一整块存储单元,产生较多的外部碎片</p>\n</li>\n<li><p>​    ==链式存储==</p>\n<p>​        优点: 不会出现碎片现象</p>\n<p>​        缺点: 存储指针占用额外的存储空间; 只能顺序存取</p>\n</li>\n<li><p>​    ==索引存储==</p>\n<p>​        定义: 建立附加的索引表,每项称为索引项(关键字,地址)</p>\n<p>​        优点: 检索速度快</p>\n<p>​        缺点: 占用较多存储空间; 增加和删除数据要修改索引表,花费较多时间</p>\n</li>\n<li><p>​    ==散列存储==</p>\n<p>​        定义: 根据元素的关键字直接计算出该元素的存储地址(Hash存储)</p>\n<p>​        优点: 检索,增加和删除结点都很快</p>\n<p>​        缺点: 若散列函数不好,出现元素存储单元冲突,会增加时间和空间的开销</p>\n</li>\n</ul>\n<p>3.数据的运算</p>\n<p>​    1.运算的定义: 针对逻辑结构,指出运算的功能</p>\n<p>​    2.运算的实现: 针对存储结构,指出运算的具体操作步骤</p>\n<h4 id=\"题目总结\"><a href=\"#题目总结\" class=\"headerlink\" title=\"题目总结\"></a>题目总结</h4><p>==易错：==</p>\n<p>​        1.属于逻辑结构  有序表</p>\n<p>​        2.循环队列是用顺序表表示的队列,是数据结构,不是抽象数据结构</p>\n<p>​        3.不同结点的存储空间可以不连续,但结点内的存储空间必须连续</p>\n<p>​        4.两种不同的数据结构,逻辑结构和物理结构可以完全相同,但数据的运算不同</p>\n<h3 id=\"2-算法和算法评价\"><a href=\"#2-算法和算法评价\" class=\"headerlink\" title=\"2.算法和算法评价\"></a>2.算法和算法评价</h3><h4 id=\"1-算法的基本概念\"><a href=\"#1-算法的基本概念\" class=\"headerlink\" title=\"1.算法的基本概念\"></a>1.算法的基本概念</h4><p>1.定义: 对特定问题求解步骤的描述,指令的有限序列</p>\n<p>2.==特性==</p>\n<p>​    1.有穷性</p>\n<p>​    2.确定性</p>\n<p>​    3.可行性</p>\n<p>​    4.输入</p>\n<p>​    5.输出</p>\n<p>3.==好的算法==</p>\n<p>​    1.正确性</p>\n<p>​    2.可读性</p>\n<p>​    3.健壮性</p>\n<p>​    4.效率与低存储量需求</p>\n<h4 id=\"2-算法效率的度量\"><a href=\"#2-算法效率的度量\" class=\"headerlink\" title=\"2.算法效率的度量\"></a>2.算法效率的度量</h4><p>1.时间复杂度O(n) </p>\n<p>​    定义: 衡量算法随着问题规模增大,算法执行时间增长的快慢</p>\n<p>2.空间复杂度S(n)</p>\n<p>​    1.定义: 衡量算法随着问题规模增大,算法所需空间增长的快慢</p>\n<p>​    2.算法原地工作: 算法所需要的辅助空间为常数,即O(1)</p>\n<h4 id=\"题目总结-1\"><a href=\"#题目总结-1\" class=\"headerlink\" title=\"题目总结\"></a>题目总结</h4><p>1、==易错==</p>\n<p>​    1.将长度为m,n的两个升序链表,合并为m+n的降序链表(取较小元素,头插法)</p>\n<p>​    2.时间复杂度计算</p>\n<p>​        1.sum += ++i;  O(n^1/2)   第k次: sum = 1+2+3+…+k ≥n</p>\n<p>​        2、2.i=i*2  O(log₂n)</p>\n<p>​        3.递归算法    </p>\n<ul>\n<li>1.T(n)=2T(n/2)+n (n&gt;1) (n=1时: T(n)=1) O(nlog₂n）</li>\n<li>2.设n=2^k,先根据递归条件,找到T(2^k)的通式,再转化为n,即得到时间复杂度</li>\n</ul>\n<p>​    3.同一个算法,实现的语言的级别越高级,执行效率越低</p>\n<hr>\n<h2 id=\"第二章-线性表\"><a href=\"#第二章-线性表\" class=\"headerlink\" title=\"第二章 线性表\"></a>第二章 线性表</h2><h3 id=\"1-线性表的定义和基本操作\"><a href=\"#1-线性表的定义和基本操作\" class=\"headerlink\" title=\"1.线性表的定义和基本操作\"></a>1.线性表的定义和基本操作</h3><h4 id=\"1-线性表的定义\"><a href=\"#1-线性表的定义\" class=\"headerlink\" title=\"1.线性表的定义\"></a>1.线性表的定义</h4><p>​    1.定义: 相同数据类型的有限序列</p>\n<p>​    2.注意: 线性表是逻辑结构,顺序表和链表指存储结构</p>\n<h4 id=\"2-线性表的基本操作\"><a href=\"#2-线性表的基本操作\" class=\"headerlink\" title=\"2.线性表的基本操作\"></a>2.线性表的基本操作</h4><p>​    1.注意: &amp; 表示C++中的引用,若传入指针型变量且在函数体内要进行改变,要用到指针变量的引用(C中用指针的指针也可以)</p>\n<p>​    2.主要操作</p>\n<h3 id=\"2-线性表的顺序表示\"><a href=\"#2-线性表的顺序表示\" class=\"headerlink\" title=\"2.线性表的顺序表示\"></a>2.线性表的顺序表示</h3><h4 id=\"1-顺序表的定义\"><a href=\"#1-顺序表的定义\" class=\"headerlink\" title=\"1.顺序表的定义\"></a>1.顺序表的定义</h4><p>1.顺序表需要三个部分</p>\n<ul>\n<li>==存储空间的起始位置==</li>\n<li>==顺序表最大存储空间==</li>\n<li>==顺序表当前的长度==</li>\n</ul>\n<p>2.==静态分配==</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">define</span> MaxSize 50 \t\t\t<span class=\"comment\">//定义线性表的最大长度</span></span></span><br><span class=\"line\"><span class=\"keyword\">typedef</span> <span class=\"class\"><span class=\"keyword\">struct</span> &#123;</span></span><br><span class=\"line\">\tElemType data[MaxSize]; <span class=\"comment\">//顺序表的元素</span></span><br><span class=\"line\">\t<span class=\"type\">int</span> length;\t\t\t\t<span class=\"comment\">//顺序表的当前元素</span></span><br><span class=\"line\">&#125;SqList;\t\t\t\t\t<span class=\"comment\">//顺序表的类型定义</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n\n\n<p>3.==动态分配==</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">define</span> InitSize 10 \t\t<span class=\"comment\">//顺序表的初始长度</span></span></span><br><span class=\"line\"><span class=\"keyword\">typedef</span> <span class=\"class\"><span class=\"keyword\">struct</span>&#123;</span></span><br><span class=\"line\">    ElemType *data;\t\t\t<span class=\"comment\">//指示动态分配数组的指针</span></span><br><span class=\"line\">    <span class=\"type\">int</span> MaxSize;\t\t\t<span class=\"comment\">//顺序表的最大容量</span></span><br><span class=\"line\">    <span class=\"type\">int</span> length;\t\t\t\t<span class=\"comment\">//顺序表的当前长度</span></span><br><span class=\"line\">&#125;SqList;\t\t\t\t\t<span class=\"comment\">//顺序表的类型定义（动态分配方式）</span></span><br></pre></td></tr></table></figure>\n\n\n\n<p>4.动态分配语句</p>\n<p>​    C语言: ==L.data=(ElemType*)malloc(sizeof(ElemType)*InitSize);==</p>\n<p>​    C++: ==L.data=new ElemType[InitSize];==</p>\n<p>5.注意: 动态分配不是链式存储,同样属于顺序存储结构,物理结构没有变化:随机存取方式,只是分配的空间大小可以在运行时决定</p>\n<p>6.特点: 随机访问,存储密度高,插入和删除需要移动大量元素</p>\n<h4 id=\"2-顺序表上基本操作的实现\"><a href=\"#2-顺序表上基本操作的实现\" class=\"headerlink\" title=\"2.顺序表上基本操作的实现\"></a>2.顺序表上基本操作的实现</h4><h5 id=\"1-插入操作-O-n\"><a href=\"#1-插入操作-O-n\" class=\"headerlink\" title=\"1.==插入操作 O(n)==\"></a>1.==插入操作 O(n)==</h5><figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">bool</span> <span class=\"title function_\">ListInsert</span><span class=\"params\">(SqList &amp;L, <span class=\"type\">int</span> i, ElemType e)</span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (i &lt; <span class=\"number\">1</span> || i &gt; L.length + <span class=\"number\">1</span>) \t\t\t\t<span class=\"comment\">//判断i的范围是否有效</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (L.length &gt;= MaxSize) \t\t\t\t\t<span class=\"comment\">//当前存储空间已满，不能插入</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">for</span> (<span class=\"type\">int</span> j = L.length; j &gt;= i; j -- )\t\t<span class=\"comment\">//将第i个元素及之后的元素后移</span></span><br><span class=\"line\">\t\tL.data[j] = L.data[j - <span class=\"number\">1</span>];</span><br><span class=\"line\">\tL.data[i - <span class=\"number\">1</span>] = e;\t\t\t\t\t\t\t<span class=\"comment\">//在位置i处放入e</span></span><br><span class=\"line\">\tL.length ++ ;\t\t\t\t\t\t\t\t<span class=\"comment\">//线性表长度加1</span></span><br><span class=\"line\">\t<span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<h5 id=\"2-删除操作-O-n\"><a href=\"#2-删除操作-O-n\" class=\"headerlink\" title=\"2.==删除操作 O(n)==\"></a>2.==删除操作 O(n)==</h5><figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">bool</span> <span class=\"title function_\">ListDelete</span><span class=\"params\">(SqList &amp;L, <span class=\"type\">int</span> i, ElemType &amp;e)</span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (i &lt; <span class=\"number\">1</span> || i &gt; L.length)\t\t\t\t\t<span class=\"comment\">//判断i的范围是否有效</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">\te = L.data[i - <span class=\"number\">1</span>];\t\t\t\t\t\t\t<span class=\"comment\">//将被删除的元素赋值给e</span></span><br><span class=\"line\">\t<span class=\"keyword\">for</span> (<span class=\"type\">int</span> j = i; j &lt; L.length; j ++ )\t\t<span class=\"comment\">//将第i个位置后的元素前移</span></span><br><span class=\"line\">\t\tL.data[j - <span class=\"number\">1</span>] = L.data[j];</span><br><span class=\"line\">\tL.length -- ;\t\t\t\t\t\t\t\t<span class=\"comment\">//线性表长度减1</span></span><br><span class=\"line\">\t<span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<h5 id=\"3-按值查找-顺序查找-O-n\"><a href=\"#3-按值查找-顺序查找-O-n\" class=\"headerlink\" title=\"3.==按值查找(顺序查找) O(n)==\"></a>3.==按值查找(顺序查找) O(n)==</h5><figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">int</span> <span class=\"title function_\">LocateElem</span><span class=\"params\">(SqList L, ElemType e)</span> &#123;</span><br><span class=\"line\">\t<span class=\"type\">int</span> i;</span><br><span class=\"line\">\t<span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; L.length; i ++ )</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> (L.data[i] == e) </span><br><span class=\"line\">\t\t\t<span class=\"keyword\">return</span> i + <span class=\"number\">1</span>;\t\t\t\t<span class=\"comment\">//下标伟i的元素值等于e，返回其位序i + 1；</span></span><br><span class=\"line\">\t<span class=\"keyword\">return</span> <span class=\"number\">0</span>;\t\t\t\t\t\t\t<span class=\"comment\">//退出循环，说明查找失败</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"4、-初始化顺序表\"><a href=\"#4、-初始化顺序表\" class=\"headerlink\" title=\"4、==初始化顺序表==\"></a>4、==初始化顺序表==</h5><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">void InitList(Sqlist &amp;L) &#123;</span><br><span class=\"line\">\tfor (int i = 0; i &lt; MaxSize; i ++ )</span><br><span class=\"line\">\t\tL.data[i] = 0;\t\t\t\t\t//所有数据元素设置为默认初始值</span><br><span class=\"line\">\tL.length = 0;\t\t\t\t\t\t//顺序表初始长度为0</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<h4 id=\"题目总结-2\"><a href=\"#题目总结-2\" class=\"headerlink\" title=\"题目总结\"></a>题目总结</h4><p>==1、易错==</p>\n<p>​    1.线性表必须是有限序列</p>\n<p>​    2.在顺序表的第i个位置插入一个数,i的合法取值: 1≤i≤n+1 在第n+1个位置插入相当于在表尾追加</p>\n<p>==2、算法==</p>\n<p><strong>1.将顺序表的所有元素逆序</strong></p>\n<p><font color=\"blue\"> 算法思想：扫描顺序表L的前班部分元素，对于元素L.date[ i ] (0 &lt;= L.length / 2），将其与后半部分的对应元素L.data[L.length - i - 1]进行交换 </font></p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">Reverse</span><span class=\"params\">(SqList &amp;L)</span>&#123;</span><br><span class=\"line\">    ElemType temp;\t\t\t\t\t\t\t\t\t<span class=\"comment\">//辅助变量</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; L.length / <span class=\"number\">2</span>; i ++ )&#123;</span><br><span class=\"line\">        temp = L.data[i];\t\t\t\t\t\t\t<span class=\"comment\">//交换L.data[i]与L.data[L.length - i - 1];</span></span><br><span class=\"line\">        L.data[i] = L.data[L.length - i - <span class=\"number\">1</span>];</span><br><span class=\"line\">        L.data[L.length - i - <span class=\"number\">1</span>] = temp;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<p><strong>2.顺序表(非有序)删除所有值为x的数据元素</strong></p>\n<p><font color=\"blue\">用k记录顺序表L中不等于x的元素个数（既需要保存的元素个数），扫描时将不等于x的元素移动到下标k的位置，并更新k值。扫描结束后修改L的长度</font></p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">del_x_l</span><span class=\"params\">(SqList &amp;L, Elemtype x)</span>&#123;</span><br><span class=\"line\">\t<span class=\"type\">int</span> k = <span class=\"number\">0</span>, i;\t\t\t\t\t\t\t<span class=\"comment\">//记录值不等于x的元素个数</span></span><br><span class=\"line\">\t<span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; L.length; i ++ )</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> (L.data[i] != x)&#123;</span><br><span class=\"line\">\t\t\tL.data[k] = L.data[i];</span><br><span class=\"line\">\t\t\tk ++ ;\t\t\t\t\t\t\t<span class=\"comment\">//不等于x的元素增1</span></span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\tL.length = k;\t\t\t\t\t\t<span class=\"comment\">//顺序表L的长度等于k</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<p><strong>3.有序顺序表删除给定值s与t之间的所有元素</strong></p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">bool</span> <span class=\"title function_\">Del_S_t2</span><span class=\"params\">(SqList &amp;L, ElemType s, ElemType t)</span>&#123;</span><br><span class=\"line\">\t<span class=\"comment\">//删除有序顺序表L中值在给定值s到t之间的所有元素</span></span><br><span class=\"line\">\t<span class=\"type\">int</span> i, j;</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (s &gt;= t || L.length == <span class=\"number\">0</span>)</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">\tfOr (i = <span class=\"number\">0</span>; i &lt; L.length &amp;&amp; L.data[i] &lt; s; i ++ );\t<span class=\"comment\">//寻找值大于等于s的第一个元素</span></span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (i &gt;= L.length)\t</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> <span class=\"literal\">false</span>;\t\t\t\t\t\t\t\t\t<span class=\"comment\">//所有元素值均小于s，返回</span></span><br><span class=\"line\">\t<span class=\"keyword\">for</span> (j = i; j &lt; L.length &amp;&amp; L.data[j] &lt;= t; j ++ )\t<span class=\"comment\">//寻找值大于t的第一个元素</span></span><br><span class=\"line\">\t<span class=\"keyword\">for</span> (;j &lt; L.length; i ++ , j ++ )</span><br><span class=\"line\">\t\tL.data[i] = L.data[j];\t\t\t\t\t\t\t<span class=\"comment\">//前移，填补被删元素位置</span></span><br><span class=\"line\">\tL.length = i;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<p><strong>4.有序表删除所有其值重复的元素</strong></p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">bool</span>  <span class=\"title function_\">Delete_Same</span><span class=\"params\">(SeqList &amp;L)</span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (L.length == <span class=\"number\">0</span>)</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">\t<span class=\"type\">int</span> i, j;\t\t\t\t\t\t\t\t\t\t\t<span class=\"comment\">//i存储第一个不相同的元素，j为工作指针</span></span><br><span class=\"line\">\t<span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>, j = <span class=\"number\">1</span>; j &lt; L.length; j ++ )</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> (L.data[i] != L.data[j])\t\t\t\t\t\t<span class=\"comment\">//查找下一个与上个元素值不同的元素</span></span><br><span class=\"line\">\t\t\tL.data[++ i] = L.data[j];\t\t\t\t\t<span class=\"comment\">//找到后，将元素前移</span></span><br><span class=\"line\">\tL.length = i + <span class=\"number\">1</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<p><strong>5.将两个有序表合并为一个有序表,由函数返回结果</strong></p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">bool</span> <span class=\"title function_\">Merge</span><span class=\"params\">(SeqList A, SeqList B, SeqList &amp;c)</span>&#123;</span><br><span class=\"line\">\t<span class=\"comment\">//将有序顺序表A与B合并为一个新的有序顺序表C</span></span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (A.length + B.length &gt; C.maxSize)\t\t\t\t<span class=\"comment\">//大于顺序表的最大长度</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> fasle;</span><br><span class=\"line\">\t<span class=\"type\">int</span> i = <span class=\"number\">0</span>, j = <span class=\"number\">0</span>, k = <span class=\"number\">0</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">while</span>(i &lt; A.length &amp;&amp; J &lt; B.length)&#123;\t\t\t\t<span class=\"comment\">//循环，两两比较，小者存入结构表</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> (A.data[i] &lt; B.data[i])</span><br><span class=\"line\">\t\t\tC.data[k ++ ] = A.data[i ++ ];</span><br><span class=\"line\">\t\t<span class=\"keyword\">else</span> </span><br><span class=\"line\">\t\t\tC.data[k ++ ] = B.data[j ++ ];</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"keyword\">while</span>(i &lt; A.length)\t\t\t\t\t\t\t\t\t<span class=\"comment\">//还剩下一个没有比较完的顺序表</span></span><br><span class=\"line\">\t\tC.data[k ++ ] = A.data[i ++ ];</span><br><span class=\"line\">\t<span class=\"keyword\">while</span>(j &lt; B.length)</span><br><span class=\"line\">\t\tC.data[k ++ ] = B.data[j ++ ];</span><br><span class=\"line\">\tC.length = k;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"3-线性表的链式表示\"><a href=\"#3-线性表的链式表示\" class=\"headerlink\" title=\"3.线性表的链式表示\"></a>3.线性表的链式表示</h3><h4 id=\"1-单链表的定义\"><a href=\"#1-单链表的定义\" class=\"headerlink\" title=\"1.单链表的定义\"></a>1.单链表的定义</h4><p>1.结点类型的描述</p>\n<p>2.特点: 浪费空间,非随机存取</p>\n<p>3.头指针和头结点区别</p>\n<p>​        1.不管带不带头结点,头指针始终指向链表的第一个结点</p>\n<p>​        2.头结点是带头结点的链表中的第一个结点,通常不存储信息</p>\n<p>4.引入头结点的优点</p>\n<p>​        1.在链表第一个位置上的操作和其他位置上的一致</p>\n<p>​        2.无论链表是否为空,头指针都指向头结点的非空指针,空表和非空表处理一致    </p>\n<p><strong>单链表定义</strong></p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">typedef</span> <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">LNode</span>&#123;</span>\t\t\t<span class=\"comment\">//定义单链表结点类型</span></span><br><span class=\"line\">\tElemType data;\t\t\t\t<span class=\"comment\">//数据域</span></span><br><span class=\"line\">\t<span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">LNode</span> *<span class=\"title\">next</span>;</span>\t\t\t<span class=\"comment\">//指针域</span></span><br><span class=\"line\">&#125;LNode, *LinkList;</span><br></pre></td></tr></table></figure>\n\n\n\n<h4 id=\"2-单链表上基本操作的实现\"><a href=\"#2-单链表上基本操作的实现\" class=\"headerlink\" title=\"2.单链表上基本操作的实现\"></a>2.单链表上基本操作的实现</h4><p>1.头插法建立链表</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">LinkList <span class=\"title function_\">List_HeadInsert</span><span class=\"params\">(LinkList &amp;L)</span>&#123;\t\t\t<span class=\"comment\">//逆向建立单链表</span></span><br><span class=\"line\">\tLNode *s; <span class=\"type\">int</span> x;</span><br><span class=\"line\">\tL = (LinkList)<span class=\"built_in\">malloc</span>(<span class=\"keyword\">sizeof</span>(LNode));\t\t<span class=\"comment\">//创建头结点</span></span><br><span class=\"line\">\tL.next = <span class=\"literal\">NULL</span>;\t\t\t\t\t\t\t\t<span class=\"comment\">//初始化为空链表</span></span><br><span class=\"line\">\t<span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>, &amp;x);\t\t\t\t\t\t\t<span class=\"comment\">//输入结点的值</span></span><br><span class=\"line\">\t<span class=\"keyword\">while</span>(x != <span class=\"number\">9999</span>)&#123;\t\t\t\t\t\t\t<span class=\"comment\">//输入9999表示结束</span></span><br><span class=\"line\">\t\ts = (LNode *)<span class=\"built_in\">malloc</span>(<span class=\"keyword\">sizeof</span>(LNode));\t\t<span class=\"comment\">//创建新结点</span></span><br><span class=\"line\">\t\ts-&gt;data = x;</span><br><span class=\"line\">\t\ts-&gt;next = L-&gt;next;</span><br><span class=\"line\">\t\tL-&gt;next = s;\t\t\t\t\t\t\t<span class=\"comment\">//将新的结点插入表中，L为头指针</span></span><br><span class=\"line\">\t\t<span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>, &amp;x);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> L;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<p>2.尾插法建立链表</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n\n\n<p>3.按序号查找结点值</p>\n<p>4.按值查找表结点</p>\n<p>5.插入结点操作</p>\n<p>​        前插操作: 先找到前一个结点,时间复杂度为O(n)</p>\n<p>​        扩展: 将前插操作转化为后插操作,然后交换两个结点的数据,时间复杂度为O(1)</p>\n<p>6.删除结点操作</p>\n<p>​        先找到前驱节点,再删除结点,O(n</p>\n<p>​        扩展: 先和后继结点交换数据,再删除后继结点,O(1)</p>\n<p>7.求表长操作</p>\n<p>​        计算数据结点的个数</p>\n<h4 id=\"3-双链表\"><a href=\"#3-双链表\" class=\"headerlink\" title=\"3.双链表\"></a>3.双链表</h4><p>​    1.双链表中结点类型的描述</p>\n<p>​    2.插入操作</p>\n<p>​    3.删除操作</p>\n<h4 id=\"4-循环链表\"><a href=\"#4-循环链表\" class=\"headerlink\" title=\"4.循环链表\"></a>4.循环链表</h4><p>1.==循环单链表==</p>\n<p>​        1.判空条件: 头结点的指针是否指向头指针</p>\n<p>​        2.对单链表在表头和表尾操作时: 不设头指针仅设尾指针,效率更高</p>\n<p>2.==循环双链表==</p>\n<p>​        判空条件: 头结点的prior域和next域都指向头指针</p>\n<h4 id=\"5-静态链表\"><a href=\"#5-静态链表\" class=\"headerlink\" title=\"5.静态链表\"></a>5.静态链表</h4><p>1.定义: 用数组描述链式存储结构,也有数据域和指针域.指针是结点的相对地址(数组下标),又称游标</p>\n<p>2.形式</p>\n<p>3.结束标志: next==-1</p>\n<p>4.注意</p>\n<p>​        1.和顺序表一样,也要预先分配一块连续的内存空间</p>\n<p>​        2.插入和删除只需要修改指针,不需要移动元素</p>\n<p>​        3.在不支持指针的高级语言(Basic)中很巧妙</p>\n<h4 id=\"6-顺序表和链表的-比较\"><a href=\"#6-顺序表和链表的-比较\" class=\"headerlink\" title=\"6.顺序表和链表的==比较==\"></a>6.顺序表和链表的==比较==</h4><p>1.存取方式</p>\n<p>​        顺序表可顺序存取,可随机存取. 链表只能从表头顺序存取</p>\n<p>2.逻辑结构与物理结构</p>\n<p>3.查找,插入和删除</p>\n<p>​        1.按值查找</p>\n<p>​            无序时,都为O(n)</p>\n<p>​            有序时,顺序表可以折半查找,O(log₂n)</p>\n<p>​        2.按序号查找 </p>\n<p>​            顺序表为O(1),链表为O(n)</p>\n<p>4.空间分配</p>\n<p>5.怎样选取存储结构</p>\n<p>​        1.基于存储的考虑</p>\n<p>​            难以估计长度和存储规模时用链表,但链表的存储密度较低</p>\n<p>​        2.基于运算的考虑</p>\n<p>​            经常做按序号访问数据元素用顺序表</p>\n<p>​        3.基于环境的考虑</p>\n<p>​            顺序表容易实现,链表基于指针</p>\n<p>​            较稳定选顺序表,动态性较强选链表</p>\n<h4 id=\"题目总结-3\"><a href=\"#题目总结-3\" class=\"headerlink\" title=\"题目总结\"></a>题目总结</h4><p>1、==易错==    </p>\n<p>1.链式存储结构比顺序存储结构更方便地表示各种逻辑结构</p>\n<p>2.顺序存储不只能用于存储线性结构,还能存储图和树的结构(满二叉树)</p>\n<p>3.静态链表需要分配较大的连续空间,插入和删除不需要移动元素</p>\n<p>4.若用单链表表示队列,应选用带尾指针的循环链表</p>\n<p>5.给定一维数组,建立一个有序单链表的最低时间为O(nlog₂n) </p>\n<p>​            先对数组进行排序,再构造单链表</p>\n<p>6.链表常用操作为在最后一个元素之后插入,删除第一个元素,最节省时间的是</p>\n<p>​            1.不带头结点且有尾指针的单循环链表</p>\n<p>​            2.即使是双链表,只要不带尾指针,都要找到尾结点,时间为O(n)</p>\n<h3 id=\"注意点\"><a href=\"#注意点\" class=\"headerlink\" title=\"注意点\"></a>注意点</h3><h4 id=\"1-插入结点时-先对插入结点的后继结点操作-再对原结点进行操作\"><a href=\"#1-插入结点时-先对插入结点的后继结点操作-再对原结点进行操作\" class=\"headerlink\" title=\"1.插入结点时: 先对插入结点的后继结点操作,再对原结点进行操作\"></a>1.插入结点时: 先对插入结点的后继结点操作,再对原结点进行操作</h4><h2 id=\"第三章-栈和队列\"><a href=\"#第三章-栈和队列\" class=\"headerlink\" title=\"第三章 栈和队列\"></a>第三章 栈和队列</h2><h2 id=\"第四章-树和二叉树\"><a href=\"#第四章-树和二叉树\" class=\"headerlink\" title=\"第四章 树和二叉树\"></a>第四章 树和二叉树</h2><h2 id=\"第五章-图\"><a href=\"#第五章-图\" class=\"headerlink\" title=\"第五章 图\"></a>第五章 图</h2><h2 id=\"第六章-查找\"><a href=\"#第六章-查找\" class=\"headerlink\" title=\"第六章 查找\"></a>第六章 查找</h2><h2 id=\"第七章-排序\"><a href=\"#第七章-排序\" class=\"headerlink\" title=\"第七章 排序\"></a>第七章 排序</h2>","site":{"data":{"link":[{"class_name":"友情链接","class_desc":"那些人，那些事","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]},{"class_name":"网站","class_desc":"值得推荐的网站","link_list":[{"name":"Youtube","link":"https://www.youtube.com/","avatar":"https://i.loli.net/2020/05/14/9ZkGg8v3azHJfM1.png","descr":"视频网站"},{"name":"Weibo","link":"https://www.weibo.com/","avatar":"https://i.loli.net/2020/05/14/TLJBum386vcnI1P.png","descr":"中国最大社交分享平台"},{"name":"Twitter","link":"https://twitter.com/","avatar":"https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png","descr":"社交分享平台"}]}]}},"cover":"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7","excerpt":"","more":"<p style=\"font-size: 150px;text-align:center;color:blue;font-backgrountd:255,255,255\">数据结构</p>\n\n<p>[TOC]</p>\n<h2 id=\"第一章-绪论\"><a href=\"#第一章-绪论\" class=\"headerlink\" title=\"第一章 绪论\"></a>第一章 绪论</h2><h3 id=\"1-数据结构的基本概念\"><a href=\"#1-数据结构的基本概念\" class=\"headerlink\" title=\"1.数据结构的基本概念\"></a>1.数据结构的基本概念</h3><h4 id=\"1-基本概念和术语\"><a href=\"#1-基本概念和术语\" class=\"headerlink\" title=\"1.基本概念和术语\"></a>1.基本概念和术语</h4><p>​    1.数据 </p>\n<p>​        信息的载体,是描述客观事物属性的数,字符及所有能被计算机识别和处理的符号的集合</p>\n<p>​    2.数据元素 </p>\n<p>​        数据的基本单位,由数据项组成,不可分割的最小单位</p>\n<p>​    3.数据对象 </p>\n<p>​        具有相同性质的数据元素的集合,数据的一个子集</p>\n<p>​    4.数据类型 </p>\n<p>​        一个值的集合和定义在集合上的一组操作的总称</p>\n<p>​            原子类型  值不可再分</p>\n<p>​            结构类型  值可以再分</p>\n<p>​            抽象数据类型</p>\n<p>5.抽象数据类型</p>\n<p>​    1.定义: 一个数学模型和定义在模型上的一组操作</p>\n<p>​    2.特点: 定义仅取决于它的一组逻辑特性,与在计算机内部如何表示和实现无关</p>\n<p>​    3.表示: (数据对象,数据关系,基本操作集)</p>\n<p>6.数据结构</p>\n<p>​    1.结构: 数据元素之间的相互关系</p>\n<p>​    2.定义: 相互之间存在一种或多种特定关系的数据元素的集合</p>\n<p>​    3.内容: 逻辑结构,存储结构,数据的运算</p>\n<p>​        逻辑结构: 一个算法的设计</p>\n<p>​        存储结构: 一个算法的实现</p>\n<h4 id=\"2-数据结构三要素\"><a href=\"#2-数据结构三要素\" class=\"headerlink\" title=\"2.数据结构三要素\"></a>2.数据结构三要素</h4><p>1.数据的==逻辑结构==</p>\n<p>​    1.定义: 数据元素之间的逻辑关系,与存储无关,独立于计算机</p>\n<p>​    2.分类</p>\n<ul>\n<li>​        线性结构</li>\n</ul>\n<p>​            1、线性表    一对一</p>\n<ul>\n<li>​        非线性结构</li>\n</ul>\n<p>​            1、集合   同属一个集合</p>\n<p>​            2、树    一对多</p>\n<p>​            3、图/网状    多对多</p>\n<p>2.数据的==存储结构==</p>\n<p>​    1.定义: 数据结构在计算机中的表示(又称映像/物理结构)</p>\n<p>​    2.包括: 数据元素的表示和关系的表示</p>\n<p>​    3.分类</p>\n<ul>\n<li><p>​    ==顺序存储==</p>\n<p>​        优点: 随机存取,元素占用最少存储空间</p>\n<p>​        缺点: 只能使用相邻的一整块存储单元,产生较多的外部碎片</p>\n</li>\n<li><p>​    ==链式存储==</p>\n<p>​        优点: 不会出现碎片现象</p>\n<p>​        缺点: 存储指针占用额外的存储空间; 只能顺序存取</p>\n</li>\n<li><p>​    ==索引存储==</p>\n<p>​        定义: 建立附加的索引表,每项称为索引项(关键字,地址)</p>\n<p>​        优点: 检索速度快</p>\n<p>​        缺点: 占用较多存储空间; 增加和删除数据要修改索引表,花费较多时间</p>\n</li>\n<li><p>​    ==散列存储==</p>\n<p>​        定义: 根据元素的关键字直接计算出该元素的存储地址(Hash存储)</p>\n<p>​        优点: 检索,增加和删除结点都很快</p>\n<p>​        缺点: 若散列函数不好,出现元素存储单元冲突,会增加时间和空间的开销</p>\n</li>\n</ul>\n<p>3.数据的运算</p>\n<p>​    1.运算的定义: 针对逻辑结构,指出运算的功能</p>\n<p>​    2.运算的实现: 针对存储结构,指出运算的具体操作步骤</p>\n<h4 id=\"题目总结\"><a href=\"#题目总结\" class=\"headerlink\" title=\"题目总结\"></a>题目总结</h4><p>==易错：==</p>\n<p>​        1.属于逻辑结构  有序表</p>\n<p>​        2.循环队列是用顺序表表示的队列,是数据结构,不是抽象数据结构</p>\n<p>​        3.不同结点的存储空间可以不连续,但结点内的存储空间必须连续</p>\n<p>​        4.两种不同的数据结构,逻辑结构和物理结构可以完全相同,但数据的运算不同</p>\n<h3 id=\"2-算法和算法评价\"><a href=\"#2-算法和算法评价\" class=\"headerlink\" title=\"2.算法和算法评价\"></a>2.算法和算法评价</h3><h4 id=\"1-算法的基本概念\"><a href=\"#1-算法的基本概念\" class=\"headerlink\" title=\"1.算法的基本概念\"></a>1.算法的基本概念</h4><p>1.定义: 对特定问题求解步骤的描述,指令的有限序列</p>\n<p>2.==特性==</p>\n<p>​    1.有穷性</p>\n<p>​    2.确定性</p>\n<p>​    3.可行性</p>\n<p>​    4.输入</p>\n<p>​    5.输出</p>\n<p>3.==好的算法==</p>\n<p>​    1.正确性</p>\n<p>​    2.可读性</p>\n<p>​    3.健壮性</p>\n<p>​    4.效率与低存储量需求</p>\n<h4 id=\"2-算法效率的度量\"><a href=\"#2-算法效率的度量\" class=\"headerlink\" title=\"2.算法效率的度量\"></a>2.算法效率的度量</h4><p>1.时间复杂度O(n) </p>\n<p>​    定义: 衡量算法随着问题规模增大,算法执行时间增长的快慢</p>\n<p>2.空间复杂度S(n)</p>\n<p>​    1.定义: 衡量算法随着问题规模增大,算法所需空间增长的快慢</p>\n<p>​    2.算法原地工作: 算法所需要的辅助空间为常数,即O(1)</p>\n<h4 id=\"题目总结-1\"><a href=\"#题目总结-1\" class=\"headerlink\" title=\"题目总结\"></a>题目总结</h4><p>1、==易错==</p>\n<p>​    1.将长度为m,n的两个升序链表,合并为m+n的降序链表(取较小元素,头插法)</p>\n<p>​    2.时间复杂度计算</p>\n<p>​        1.sum += ++i;  O(n^1/2)   第k次: sum = 1+2+3+…+k ≥n</p>\n<p>​        2、2.i=i*2  O(log₂n)</p>\n<p>​        3.递归算法    </p>\n<ul>\n<li>1.T(n)=2T(n/2)+n (n&gt;1) (n=1时: T(n)=1) O(nlog₂n）</li>\n<li>2.设n=2^k,先根据递归条件,找到T(2^k)的通式,再转化为n,即得到时间复杂度</li>\n</ul>\n<p>​    3.同一个算法,实现的语言的级别越高级,执行效率越低</p>\n<hr>\n<h2 id=\"第二章-线性表\"><a href=\"#第二章-线性表\" class=\"headerlink\" title=\"第二章 线性表\"></a>第二章 线性表</h2><h3 id=\"1-线性表的定义和基本操作\"><a href=\"#1-线性表的定义和基本操作\" class=\"headerlink\" title=\"1.线性表的定义和基本操作\"></a>1.线性表的定义和基本操作</h3><h4 id=\"1-线性表的定义\"><a href=\"#1-线性表的定义\" class=\"headerlink\" title=\"1.线性表的定义\"></a>1.线性表的定义</h4><p>​    1.定义: 相同数据类型的有限序列</p>\n<p>​    2.注意: 线性表是逻辑结构,顺序表和链表指存储结构</p>\n<h4 id=\"2-线性表的基本操作\"><a href=\"#2-线性表的基本操作\" class=\"headerlink\" title=\"2.线性表的基本操作\"></a>2.线性表的基本操作</h4><p>​    1.注意: &amp; 表示C++中的引用,若传入指针型变量且在函数体内要进行改变,要用到指针变量的引用(C中用指针的指针也可以)</p>\n<p>​    2.主要操作</p>\n<h3 id=\"2-线性表的顺序表示\"><a href=\"#2-线性表的顺序表示\" class=\"headerlink\" title=\"2.线性表的顺序表示\"></a>2.线性表的顺序表示</h3><h4 id=\"1-顺序表的定义\"><a href=\"#1-顺序表的定义\" class=\"headerlink\" title=\"1.顺序表的定义\"></a>1.顺序表的定义</h4><p>1.顺序表需要三个部分</p>\n<ul>\n<li>==存储空间的起始位置==</li>\n<li>==顺序表最大存储空间==</li>\n<li>==顺序表当前的长度==</li>\n</ul>\n<p>2.==静态分配==</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">define</span> MaxSize 50 \t\t\t<span class=\"comment\">//定义线性表的最大长度</span></span></span><br><span class=\"line\"><span class=\"keyword\">typedef</span> <span class=\"class\"><span class=\"keyword\">struct</span> &#123;</span></span><br><span class=\"line\">\tElemType data[MaxSize]; <span class=\"comment\">//顺序表的元素</span></span><br><span class=\"line\">\t<span class=\"type\">int</span> length;\t\t\t\t<span class=\"comment\">//顺序表的当前元素</span></span><br><span class=\"line\">&#125;SqList;\t\t\t\t\t<span class=\"comment\">//顺序表的类型定义</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n\n\n<p>3.==动态分配==</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">define</span> InitSize 10 \t\t<span class=\"comment\">//顺序表的初始长度</span></span></span><br><span class=\"line\"><span class=\"keyword\">typedef</span> <span class=\"class\"><span class=\"keyword\">struct</span>&#123;</span></span><br><span class=\"line\">    ElemType *data;\t\t\t<span class=\"comment\">//指示动态分配数组的指针</span></span><br><span class=\"line\">    <span class=\"type\">int</span> MaxSize;\t\t\t<span class=\"comment\">//顺序表的最大容量</span></span><br><span class=\"line\">    <span class=\"type\">int</span> length;\t\t\t\t<span class=\"comment\">//顺序表的当前长度</span></span><br><span class=\"line\">&#125;SqList;\t\t\t\t\t<span class=\"comment\">//顺序表的类型定义（动态分配方式）</span></span><br></pre></td></tr></table></figure>\n\n\n\n<p>4.动态分配语句</p>\n<p>​    C语言: ==L.data=(ElemType*)malloc(sizeof(ElemType)*InitSize);==</p>\n<p>​    C++: ==L.data=new ElemType[InitSize];==</p>\n<p>5.注意: 动态分配不是链式存储,同样属于顺序存储结构,物理结构没有变化:随机存取方式,只是分配的空间大小可以在运行时决定</p>\n<p>6.特点: 随机访问,存储密度高,插入和删除需要移动大量元素</p>\n<h4 id=\"2-顺序表上基本操作的实现\"><a href=\"#2-顺序表上基本操作的实现\" class=\"headerlink\" title=\"2.顺序表上基本操作的实现\"></a>2.顺序表上基本操作的实现</h4><h5 id=\"1-插入操作-O-n\"><a href=\"#1-插入操作-O-n\" class=\"headerlink\" title=\"1.==插入操作 O(n)==\"></a>1.==插入操作 O(n)==</h5><figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">bool</span> <span class=\"title function_\">ListInsert</span><span class=\"params\">(SqList &amp;L, <span class=\"type\">int</span> i, ElemType e)</span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (i &lt; <span class=\"number\">1</span> || i &gt; L.length + <span class=\"number\">1</span>) \t\t\t\t<span class=\"comment\">//判断i的范围是否有效</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (L.length &gt;= MaxSize) \t\t\t\t\t<span class=\"comment\">//当前存储空间已满，不能插入</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">for</span> (<span class=\"type\">int</span> j = L.length; j &gt;= i; j -- )\t\t<span class=\"comment\">//将第i个元素及之后的元素后移</span></span><br><span class=\"line\">\t\tL.data[j] = L.data[j - <span class=\"number\">1</span>];</span><br><span class=\"line\">\tL.data[i - <span class=\"number\">1</span>] = e;\t\t\t\t\t\t\t<span class=\"comment\">//在位置i处放入e</span></span><br><span class=\"line\">\tL.length ++ ;\t\t\t\t\t\t\t\t<span class=\"comment\">//线性表长度加1</span></span><br><span class=\"line\">\t<span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<h5 id=\"2-删除操作-O-n\"><a href=\"#2-删除操作-O-n\" class=\"headerlink\" title=\"2.==删除操作 O(n)==\"></a>2.==删除操作 O(n)==</h5><figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">bool</span> <span class=\"title function_\">ListDelete</span><span class=\"params\">(SqList &amp;L, <span class=\"type\">int</span> i, ElemType &amp;e)</span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (i &lt; <span class=\"number\">1</span> || i &gt; L.length)\t\t\t\t\t<span class=\"comment\">//判断i的范围是否有效</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">\te = L.data[i - <span class=\"number\">1</span>];\t\t\t\t\t\t\t<span class=\"comment\">//将被删除的元素赋值给e</span></span><br><span class=\"line\">\t<span class=\"keyword\">for</span> (<span class=\"type\">int</span> j = i; j &lt; L.length; j ++ )\t\t<span class=\"comment\">//将第i个位置后的元素前移</span></span><br><span class=\"line\">\t\tL.data[j - <span class=\"number\">1</span>] = L.data[j];</span><br><span class=\"line\">\tL.length -- ;\t\t\t\t\t\t\t\t<span class=\"comment\">//线性表长度减1</span></span><br><span class=\"line\">\t<span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<h5 id=\"3-按值查找-顺序查找-O-n\"><a href=\"#3-按值查找-顺序查找-O-n\" class=\"headerlink\" title=\"3.==按值查找(顺序查找) O(n)==\"></a>3.==按值查找(顺序查找) O(n)==</h5><figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">int</span> <span class=\"title function_\">LocateElem</span><span class=\"params\">(SqList L, ElemType e)</span> &#123;</span><br><span class=\"line\">\t<span class=\"type\">int</span> i;</span><br><span class=\"line\">\t<span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; L.length; i ++ )</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> (L.data[i] == e) </span><br><span class=\"line\">\t\t\t<span class=\"keyword\">return</span> i + <span class=\"number\">1</span>;\t\t\t\t<span class=\"comment\">//下标伟i的元素值等于e，返回其位序i + 1；</span></span><br><span class=\"line\">\t<span class=\"keyword\">return</span> <span class=\"number\">0</span>;\t\t\t\t\t\t\t<span class=\"comment\">//退出循环，说明查找失败</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"4、-初始化顺序表\"><a href=\"#4、-初始化顺序表\" class=\"headerlink\" title=\"4、==初始化顺序表==\"></a>4、==初始化顺序表==</h5><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">void InitList(Sqlist &amp;L) &#123;</span><br><span class=\"line\">\tfor (int i = 0; i &lt; MaxSize; i ++ )</span><br><span class=\"line\">\t\tL.data[i] = 0;\t\t\t\t\t//所有数据元素设置为默认初始值</span><br><span class=\"line\">\tL.length = 0;\t\t\t\t\t\t//顺序表初始长度为0</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<h4 id=\"题目总结-2\"><a href=\"#题目总结-2\" class=\"headerlink\" title=\"题目总结\"></a>题目总结</h4><p>==1、易错==</p>\n<p>​    1.线性表必须是有限序列</p>\n<p>​    2.在顺序表的第i个位置插入一个数,i的合法取值: 1≤i≤n+1 在第n+1个位置插入相当于在表尾追加</p>\n<p>==2、算法==</p>\n<p><strong>1.将顺序表的所有元素逆序</strong></p>\n<p><font color=\"blue\"> 算法思想：扫描顺序表L的前班部分元素，对于元素L.date[ i ] (0 &lt;= L.length / 2），将其与后半部分的对应元素L.data[L.length - i - 1]进行交换 </font></p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">Reverse</span><span class=\"params\">(SqList &amp;L)</span>&#123;</span><br><span class=\"line\">    ElemType temp;\t\t\t\t\t\t\t\t\t<span class=\"comment\">//辅助变量</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; L.length / <span class=\"number\">2</span>; i ++ )&#123;</span><br><span class=\"line\">        temp = L.data[i];\t\t\t\t\t\t\t<span class=\"comment\">//交换L.data[i]与L.data[L.length - i - 1];</span></span><br><span class=\"line\">        L.data[i] = L.data[L.length - i - <span class=\"number\">1</span>];</span><br><span class=\"line\">        L.data[L.length - i - <span class=\"number\">1</span>] = temp;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<p><strong>2.顺序表(非有序)删除所有值为x的数据元素</strong></p>\n<p><font color=\"blue\">用k记录顺序表L中不等于x的元素个数（既需要保存的元素个数），扫描时将不等于x的元素移动到下标k的位置，并更新k值。扫描结束后修改L的长度</font></p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">del_x_l</span><span class=\"params\">(SqList &amp;L, Elemtype x)</span>&#123;</span><br><span class=\"line\">\t<span class=\"type\">int</span> k = <span class=\"number\">0</span>, i;\t\t\t\t\t\t\t<span class=\"comment\">//记录值不等于x的元素个数</span></span><br><span class=\"line\">\t<span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; L.length; i ++ )</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> (L.data[i] != x)&#123;</span><br><span class=\"line\">\t\t\tL.data[k] = L.data[i];</span><br><span class=\"line\">\t\t\tk ++ ;\t\t\t\t\t\t\t<span class=\"comment\">//不等于x的元素增1</span></span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\tL.length = k;\t\t\t\t\t\t<span class=\"comment\">//顺序表L的长度等于k</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<p><strong>3.有序顺序表删除给定值s与t之间的所有元素</strong></p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">bool</span> <span class=\"title function_\">Del_S_t2</span><span class=\"params\">(SqList &amp;L, ElemType s, ElemType t)</span>&#123;</span><br><span class=\"line\">\t<span class=\"comment\">//删除有序顺序表L中值在给定值s到t之间的所有元素</span></span><br><span class=\"line\">\t<span class=\"type\">int</span> i, j;</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (s &gt;= t || L.length == <span class=\"number\">0</span>)</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">\tfOr (i = <span class=\"number\">0</span>; i &lt; L.length &amp;&amp; L.data[i] &lt; s; i ++ );\t<span class=\"comment\">//寻找值大于等于s的第一个元素</span></span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (i &gt;= L.length)\t</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> <span class=\"literal\">false</span>;\t\t\t\t\t\t\t\t\t<span class=\"comment\">//所有元素值均小于s，返回</span></span><br><span class=\"line\">\t<span class=\"keyword\">for</span> (j = i; j &lt; L.length &amp;&amp; L.data[j] &lt;= t; j ++ )\t<span class=\"comment\">//寻找值大于t的第一个元素</span></span><br><span class=\"line\">\t<span class=\"keyword\">for</span> (;j &lt; L.length; i ++ , j ++ )</span><br><span class=\"line\">\t\tL.data[i] = L.data[j];\t\t\t\t\t\t\t<span class=\"comment\">//前移，填补被删元素位置</span></span><br><span class=\"line\">\tL.length = i;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<p><strong>4.有序表删除所有其值重复的元素</strong></p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">bool</span>  <span class=\"title function_\">Delete_Same</span><span class=\"params\">(SeqList &amp;L)</span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (L.length == <span class=\"number\">0</span>)</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">\t<span class=\"type\">int</span> i, j;\t\t\t\t\t\t\t\t\t\t\t<span class=\"comment\">//i存储第一个不相同的元素，j为工作指针</span></span><br><span class=\"line\">\t<span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>, j = <span class=\"number\">1</span>; j &lt; L.length; j ++ )</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> (L.data[i] != L.data[j])\t\t\t\t\t\t<span class=\"comment\">//查找下一个与上个元素值不同的元素</span></span><br><span class=\"line\">\t\t\tL.data[++ i] = L.data[j];\t\t\t\t\t<span class=\"comment\">//找到后，将元素前移</span></span><br><span class=\"line\">\tL.length = i + <span class=\"number\">1</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<p><strong>5.将两个有序表合并为一个有序表,由函数返回结果</strong></p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">bool</span> <span class=\"title function_\">Merge</span><span class=\"params\">(SeqList A, SeqList B, SeqList &amp;c)</span>&#123;</span><br><span class=\"line\">\t<span class=\"comment\">//将有序顺序表A与B合并为一个新的有序顺序表C</span></span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (A.length + B.length &gt; C.maxSize)\t\t\t\t<span class=\"comment\">//大于顺序表的最大长度</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> fasle;</span><br><span class=\"line\">\t<span class=\"type\">int</span> i = <span class=\"number\">0</span>, j = <span class=\"number\">0</span>, k = <span class=\"number\">0</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">while</span>(i &lt; A.length &amp;&amp; J &lt; B.length)&#123;\t\t\t\t<span class=\"comment\">//循环，两两比较，小者存入结构表</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> (A.data[i] &lt; B.data[i])</span><br><span class=\"line\">\t\t\tC.data[k ++ ] = A.data[i ++ ];</span><br><span class=\"line\">\t\t<span class=\"keyword\">else</span> </span><br><span class=\"line\">\t\t\tC.data[k ++ ] = B.data[j ++ ];</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"keyword\">while</span>(i &lt; A.length)\t\t\t\t\t\t\t\t\t<span class=\"comment\">//还剩下一个没有比较完的顺序表</span></span><br><span class=\"line\">\t\tC.data[k ++ ] = A.data[i ++ ];</span><br><span class=\"line\">\t<span class=\"keyword\">while</span>(j &lt; B.length)</span><br><span class=\"line\">\t\tC.data[k ++ ] = B.data[j ++ ];</span><br><span class=\"line\">\tC.length = k;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"3-线性表的链式表示\"><a href=\"#3-线性表的链式表示\" class=\"headerlink\" title=\"3.线性表的链式表示\"></a>3.线性表的链式表示</h3><h4 id=\"1-单链表的定义\"><a href=\"#1-单链表的定义\" class=\"headerlink\" title=\"1.单链表的定义\"></a>1.单链表的定义</h4><p>1.结点类型的描述</p>\n<p>2.特点: 浪费空间,非随机存取</p>\n<p>3.头指针和头结点区别</p>\n<p>​        1.不管带不带头结点,头指针始终指向链表的第一个结点</p>\n<p>​        2.头结点是带头结点的链表中的第一个结点,通常不存储信息</p>\n<p>4.引入头结点的优点</p>\n<p>​        1.在链表第一个位置上的操作和其他位置上的一致</p>\n<p>​        2.无论链表是否为空,头指针都指向头结点的非空指针,空表和非空表处理一致    </p>\n<p><strong>单链表定义</strong></p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">typedef</span> <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">LNode</span>&#123;</span>\t\t\t<span class=\"comment\">//定义单链表结点类型</span></span><br><span class=\"line\">\tElemType data;\t\t\t\t<span class=\"comment\">//数据域</span></span><br><span class=\"line\">\t<span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">LNode</span> *<span class=\"title\">next</span>;</span>\t\t\t<span class=\"comment\">//指针域</span></span><br><span class=\"line\">&#125;LNode, *LinkList;</span><br></pre></td></tr></table></figure>\n\n\n\n<h4 id=\"2-单链表上基本操作的实现\"><a href=\"#2-单链表上基本操作的实现\" class=\"headerlink\" title=\"2.单链表上基本操作的实现\"></a>2.单链表上基本操作的实现</h4><p>1.头插法建立链表</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">LinkList <span class=\"title function_\">List_HeadInsert</span><span class=\"params\">(LinkList &amp;L)</span>&#123;\t\t\t<span class=\"comment\">//逆向建立单链表</span></span><br><span class=\"line\">\tLNode *s; <span class=\"type\">int</span> x;</span><br><span class=\"line\">\tL = (LinkList)<span class=\"built_in\">malloc</span>(<span class=\"keyword\">sizeof</span>(LNode));\t\t<span class=\"comment\">//创建头结点</span></span><br><span class=\"line\">\tL.next = <span class=\"literal\">NULL</span>;\t\t\t\t\t\t\t\t<span class=\"comment\">//初始化为空链表</span></span><br><span class=\"line\">\t<span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>, &amp;x);\t\t\t\t\t\t\t<span class=\"comment\">//输入结点的值</span></span><br><span class=\"line\">\t<span class=\"keyword\">while</span>(x != <span class=\"number\">9999</span>)&#123;\t\t\t\t\t\t\t<span class=\"comment\">//输入9999表示结束</span></span><br><span class=\"line\">\t\ts = (LNode *)<span class=\"built_in\">malloc</span>(<span class=\"keyword\">sizeof</span>(LNode));\t\t<span class=\"comment\">//创建新结点</span></span><br><span class=\"line\">\t\ts-&gt;data = x;</span><br><span class=\"line\">\t\ts-&gt;next = L-&gt;next;</span><br><span class=\"line\">\t\tL-&gt;next = s;\t\t\t\t\t\t\t<span class=\"comment\">//将新的结点插入表中，L为头指针</span></span><br><span class=\"line\">\t\t<span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>, &amp;x);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> L;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<p>2.尾插法建立链表</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n\n\n<p>3.按序号查找结点值</p>\n<p>4.按值查找表结点</p>\n<p>5.插入结点操作</p>\n<p>​        前插操作: 先找到前一个结点,时间复杂度为O(n)</p>\n<p>​        扩展: 将前插操作转化为后插操作,然后交换两个结点的数据,时间复杂度为O(1)</p>\n<p>6.删除结点操作</p>\n<p>​        先找到前驱节点,再删除结点,O(n</p>\n<p>​        扩展: 先和后继结点交换数据,再删除后继结点,O(1)</p>\n<p>7.求表长操作</p>\n<p>​        计算数据结点的个数</p>\n<h4 id=\"3-双链表\"><a href=\"#3-双链表\" class=\"headerlink\" title=\"3.双链表\"></a>3.双链表</h4><p>​    1.双链表中结点类型的描述</p>\n<p>​    2.插入操作</p>\n<p>​    3.删除操作</p>\n<h4 id=\"4-循环链表\"><a href=\"#4-循环链表\" class=\"headerlink\" title=\"4.循环链表\"></a>4.循环链表</h4><p>1.==循环单链表==</p>\n<p>​        1.判空条件: 头结点的指针是否指向头指针</p>\n<p>​        2.对单链表在表头和表尾操作时: 不设头指针仅设尾指针,效率更高</p>\n<p>2.==循环双链表==</p>\n<p>​        判空条件: 头结点的prior域和next域都指向头指针</p>\n<h4 id=\"5-静态链表\"><a href=\"#5-静态链表\" class=\"headerlink\" title=\"5.静态链表\"></a>5.静态链表</h4><p>1.定义: 用数组描述链式存储结构,也有数据域和指针域.指针是结点的相对地址(数组下标),又称游标</p>\n<p>2.形式</p>\n<p>3.结束标志: next==-1</p>\n<p>4.注意</p>\n<p>​        1.和顺序表一样,也要预先分配一块连续的内存空间</p>\n<p>​        2.插入和删除只需要修改指针,不需要移动元素</p>\n<p>​        3.在不支持指针的高级语言(Basic)中很巧妙</p>\n<h4 id=\"6-顺序表和链表的-比较\"><a href=\"#6-顺序表和链表的-比较\" class=\"headerlink\" title=\"6.顺序表和链表的==比较==\"></a>6.顺序表和链表的==比较==</h4><p>1.存取方式</p>\n<p>​        顺序表可顺序存取,可随机存取. 链表只能从表头顺序存取</p>\n<p>2.逻辑结构与物理结构</p>\n<p>3.查找,插入和删除</p>\n<p>​        1.按值查找</p>\n<p>​            无序时,都为O(n)</p>\n<p>​            有序时,顺序表可以折半查找,O(log₂n)</p>\n<p>​        2.按序号查找 </p>\n<p>​            顺序表为O(1),链表为O(n)</p>\n<p>4.空间分配</p>\n<p>5.怎样选取存储结构</p>\n<p>​        1.基于存储的考虑</p>\n<p>​            难以估计长度和存储规模时用链表,但链表的存储密度较低</p>\n<p>​        2.基于运算的考虑</p>\n<p>​            经常做按序号访问数据元素用顺序表</p>\n<p>​        3.基于环境的考虑</p>\n<p>​            顺序表容易实现,链表基于指针</p>\n<p>​            较稳定选顺序表,动态性较强选链表</p>\n<h4 id=\"题目总结-3\"><a href=\"#题目总结-3\" class=\"headerlink\" title=\"题目总结\"></a>题目总结</h4><p>1、==易错==    </p>\n<p>1.链式存储结构比顺序存储结构更方便地表示各种逻辑结构</p>\n<p>2.顺序存储不只能用于存储线性结构,还能存储图和树的结构(满二叉树)</p>\n<p>3.静态链表需要分配较大的连续空间,插入和删除不需要移动元素</p>\n<p>4.若用单链表表示队列,应选用带尾指针的循环链表</p>\n<p>5.给定一维数组,建立一个有序单链表的最低时间为O(nlog₂n) </p>\n<p>​            先对数组进行排序,再构造单链表</p>\n<p>6.链表常用操作为在最后一个元素之后插入,删除第一个元素,最节省时间的是</p>\n<p>​            1.不带头结点且有尾指针的单循环链表</p>\n<p>​            2.即使是双链表,只要不带尾指针,都要找到尾结点,时间为O(n)</p>\n<h3 id=\"注意点\"><a href=\"#注意点\" class=\"headerlink\" title=\"注意点\"></a>注意点</h3><h4 id=\"1-插入结点时-先对插入结点的后继结点操作-再对原结点进行操作\"><a href=\"#1-插入结点时-先对插入结点的后继结点操作-再对原结点进行操作\" class=\"headerlink\" title=\"1.插入结点时: 先对插入结点的后继结点操作,再对原结点进行操作\"></a>1.插入结点时: 先对插入结点的后继结点操作,再对原结点进行操作</h4><h2 id=\"第三章-栈和队列\"><a href=\"#第三章-栈和队列\" class=\"headerlink\" title=\"第三章 栈和队列\"></a>第三章 栈和队列</h2><h2 id=\"第四章-树和二叉树\"><a href=\"#第四章-树和二叉树\" class=\"headerlink\" title=\"第四章 树和二叉树\"></a>第四章 树和二叉树</h2><h2 id=\"第五章-图\"><a href=\"#第五章-图\" class=\"headerlink\" title=\"第五章 图\"></a>第五章 图</h2><h2 id=\"第六章-查找\"><a href=\"#第六章-查找\" class=\"headerlink\" title=\"第六章 查找\"></a>第六章 查找</h2><h2 id=\"第七章-排序\"><a href=\"#第七章-排序\" class=\"headerlink\" title=\"第七章 排序\"></a>第七章 排序</h2>"},{"title":"微服务技术栈","date":"2022-10-06T01:52:14.714Z","_content":"\n\n\n<span style=\"text-align:center;font-size:50px;background-color:orange\">基础篇</span>\n\n**本篇微服务技术栈参考：** https://www.xn2001.com/archives/663.html\n\n# 认识微服务\n\n## 单体架构\n\n**单体架构：** 将业务的所有功能集中在一个项目中开发，打成一个包部署。\n\n![单体架构](/img/单体架构.png)\n\n**优点：** 架构简单，部署成本低\n\n**缺点：** 耦合度高（维护困难，升级困难）\n\n## 分布式架构\n\n**分布式架构：** 根据业务功能对系统做拆分，每个业务功能模块作为独立项目开发，称为一个服务\n\n![分布式架构](/img/分布式架构.png)\n\n**优点：** 降低服务耦合，有利于服务升级和扩展\n\n**缺点：** 服务调用关系错综复杂\n\n分布式架构虽然降低了服务耦合，但是服务拆分时也有很多问题需要思考：\n\n- 服务拆分的粒度如何界定？\n- 服务之间如何调用？\n- 服务的调用关系如何管理？\n\n**人们需要指定一套行之有效的标准来约束分布式架构。**\n\n## 微服务\n\n**微服务的架构特征：**\n\n- **单一职责：** 微服务拆分粒度更小，每一个服务都对应唯一的业务功能，做到单一职责\n- **自治：** 团队独立、技术独立、数据独立、独立部署和交付\n- **面向服务：** 服务提供统一标准的接口，与语言和技术无关\n- **隔离性强：** 服务调度做和隔离、容错、降级，避免出现级联问题\n\n![微服务](/img/微服务.png)\n\n微服务的上述特性**其实是在给分布式架构指定一个标准**，进一步降低服务之间的耦合度，提供服务的独立性和灵活性。做到高内聚，低耦合。\n\n**因此，可以认为微服务是一种经过良好架构设计的分布式架构方案。**\n\n其中在Java领域最引人注目的就是SpringCloud提供的方案了。[https://spring.io/projects/spring-cloud](https://spring.io/projects/spring-cloud)\n\n\n\n### SpringCloud\n\nSpringCloud是目前国内使用最广泛的微服务架构。官网地址：https://spring.io/projects/spring-cloud\n\nSpringCloud集成了各种微服务功能组件，并基于SpringBoot实现了这些组件的自动装配，从而提供了良好的开箱即用体验。\n\n其中常见的组件包括：\n\n![SpringCloud常用组件](/img/SpringCloud常用组件.png)\n\n另外，SpringCloud底层是依赖于SpringBoot的，并且有版本的兼容关系，如下：\n\n![SpringCloud和SpringBoot的版本兼容关系](/img/SpringCloud和SpringBoot的版本兼容关系.png)\n\n### 内容知识\n\n![需要学习的微服务知识内容](/img/需要学习的微服务知识内容.png)\n\n![技术栈](/img/技术栈.png)\n\n![自动化部署](/img/自动化部署.png)\n\n### 技术栈对比\n\n![技术栈对比](/img/技术栈对比.png)\n\n# 服务拆分\n\n**服务器拆分注意事项**\n\n单一职责：不同微服务，不要重复开发相同业务\n\n数据独立：不要访问其他微服务的数据库\n\n面向服务：将自己的业务暴露为接口，供其他微服务调用\n\n![服务拆分注意事项](/img/服务拆分注意事项.png)\n\ncloude-demo：夫工程，管理依赖\n\n- order-service：订单微服务，负责订单相关业务\n- user-service：用户微服务，负责用户相关业务\n\n要求：\n\n- 订单微服务和用户微服务都必须有**各自的数据库**，相互独立\n- 订单服务和用户服务**都对外暴露Restful的接口\n- 订单服务如果需要查询用户信息，**只能调用用户服务的Restful接口，** 不能查询用户数据库\n\n微服务项目下，打开IDEA的Service，可以很方便地启动。\n\n![Services](/img/Services.png)\n\n启动完成后，访问 http://localhost:8080/order/101\n\n![Services2](/img/Services2.png)\n\n# 远程调用\n\n服务拆分要求：\n\n>订单服务如果需要查询用户信息，**只能调用用户服务的Restful接口**，不能查询用户数据库\n\n因此外卖需要知道Java如何去发送http请求，Spring提供了一个RestTemplate工具，只需要把它创建出来即可。（即注入Bean）\n\n```java\n    @Bean\n    public RestTemplate restTemplate(){\n        return new RestTemplate();\n    }\n```\n\n发送请求，自动序列化为java对象。\n\n```java\n    public Order queryOrderById(Long orderId) {\n        // 1.查询订单\n        Order order = orderMapper.findById(orderId);\n        // 2.利用resttemplate发起http请求，查询用户\n        // 2.1 url路径\n        String url = \"http://localhost:8081/user/\" + order.getUserId();\n        // 2.2 发起http请求，实现远程调用\n        User user = restTemplate.getForObject(url, User.class);\n        // 3.封装user到order\n        order.setUser(user);\n        // 4.返回\n        return order;\n    }\n```\n\n启动完成后，访问：http://localhost:8080/order/101\n\n![启动完成后](/img/Service3.png)\n\n在上面代码的url中，我们可以发现调用服务的地址采用硬编码，这在后续的开发中肯定是不理想的，这就需要**服务注册中心（Eureka）** 来帮我们解决这个事情。\n\n# Eureka\n\n## Eureka注册中心\n\n最广为人知的注册中心就是Eureka，其结构如下：\n![Eureka注册中心](/img/Eureka注册中心.png)\n\n**order-service如何得知user-service实例地址？** \n\n- user-service服务实例启动后，将自己的信息注册到eureka-service（Eureka服务端），也叫**服务注册**\n- eureka-server保存服务名称到服务实例地址列表的映射关系\n- order-service根据服务名称，拉取实例地址列表，这个叫**服务发现**或服务拉取\n\n\n\n**order-service如何从多个user-service实例中选择具体的实例？**\n\norder-service从实例列表中利用**负载均衡算法**选中一个实例地址，向该实例地址发起远程调用\n\n\n\n**order-service如何得知某个user-service实例是否依然健康，是不是已经宕机？**\n\n- user-service会**每隔一段时间（默认30秒）向eureka-server发起请求**，报告自己状态，称为**心跳**\n- 当超过一定时间没有发送心跳时，eureka-server会认为微服务实例故障，将该实例从服务列表中剔除\n- order-service拉取请求时，就能将故障实例排除了\n\n\n\n接下来我们动手实践的步骤包括\n\n![Eureka注册步骤](/img/Eureka注册步骤.png)\n\n## 搭建注册中心\n\n**1、搭建eureka-server**\n\n引入SpringCloud为eureka提供的starter依赖，注意这里是用**server**\n\n```java\n<dependency>\n    <groupId>org.springframework.cloud</groupId>\n    <artifactId>spring-cloud-starter-netflix-eureka-server</artifactId>\n</dependency>\n```\n\n**2、编写启动类**\n\n注意要添加一个<font color=\"red\">@EnableEurekaServer</font>**注解**，开启eureka的**注册中心**功能\n\n```java\npackage com.xn2001.eureka;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.cloud.netflix.eureka.server.EnableEurekaServer;\n\n@SpringBootApplication\n@EnableEurekaServer\npublic class EurekaApplication {\n    public static void main(String[] args) {\n        SpringApplication.run(EurekaApplication.class, args);\n    }\n}\n```\n\n**3、编写配置文件**\n\n编写一个application.yml文件，内容如下：\n\n```java\nserver:\n port: 10086\nspring:\n application:\n  name: eureka-server\neureka:\n client:\n  service-url:\n   defaultZone: http://127.0.0.1::10086/eureka\n```\n\n其中`default-zone`是因为前面配置类开启了注册中心所需要配置的eureka的**地址信息**，因为eureka本事也是一个微服务，这里也要将自己注册起来，当后面eureka**集群**时，这里就可以填写多个，使用“ ；”隔开。\n\n启动完成后，访问 http://localhost:10086/\n\n![Eureka启动成功界面](/img/Eureka启动成功界面.png)\n\n## 服务注册\n\n> 将user-service、order-service都注册到eureka\n\n引入SpringCloud为eureka提供的starter依赖，注意这里是用**client**\n\n```java\n<dependency>\n    <groupId>org.springframework.cloud</groupId>\n    <artifactId>spring-cloud-starter-netflix-eureka-client</artifactId>\n</dependency>\n```\n\n在启动类上添加注解：`@EnableEurekaClient`\n\n在application.yml文件，添加下面的配置：\n\n```java\nspring:\n application:\n  name: userservice\neureka:\n client:\n  service-url:\n   defaultZone: http:127.0.0.1:10086/eureka\n```\n\n3个项目启动后，访问 http://localhost:10086/\n\n![Eureka启动成功界面](/img/Eureka启动成功界面2.png)\n\n这里另外再补充个小技巧，我们可以通过 idea 的多实例启动，来查看 Eureka 的集群效果。\n\n![IDEA多实例调试](/img/IDEA多实例调试.png)\n\n4个项目启动后，访问 http://localhost:10086/\n\n![Eureka4项目启动](/img/Eureka4项目启动.png)\n\n## 服务拉取\n\n> 在order-service中完成服务拉取，然后通过负载均衡挑选一个服务，实践远程调用\n\n下面我们让 order-service 向 eureka-server 拉取 user-service 的信息，实现服务发现。\n\n首先给 `RestTemplate` 这个 Bean 添加一个 `@LoadBalanced` **注解**，用于开启**负载均衡**。（后面会讲）\n\n```java\n@Bean\n@LoadBalanced\npublic RestTemplate restTemplate(){\n    return new RestTemplate();\n}\n```\n\n修改orderService访问的url路径，用**服务名**代替ip、端口\n\n![修改Eureka的url路径](/img/修改Eureka的url路径.png)\n\nspring会自动帮助我们从eureka-server中，根据uservice这个服务名称，获取实例列表后去完成负载均衡。\n\n\n\n# Ribbon\n\n## Ribbon负载均衡\n\n我们添加了`@LoalBalanced`注解，即可实现负载均衡功能，这是什么原理呢？\n\n**SpringCloud底层提供了一个名为Ribbon的组件，来实现负载均衡功能**\n\n![Ribbon负载均衡](/img/Ribbon负载均衡.png)\n\n**1、源码跟踪**\n为什么我们只输入了service名称就可以访问了呢？为什么不需要获取ip和端口，这显然有人帮我们根据service名称，获取到了服务实例的ip和端口，他就是`LoadBalancerInterceptor`，这个类会对RestTemplate的请求进行拦截，然后从Eureka根据服务id获取服务列表，随后根据负载均衡算法得到真实的服务地址信息，替换服务id。\n\n我们进行源码跟踪：\n\n![Interceptor源码跟踪](/img/Interceptor源码跟踪.png)\n\n这里的`intercept()`方法，拦截了用户的HttpRequest请求，然后做了几件事：\n\n- `request.getURL()`：获取请求uri，即http://user-service/user/8\n- `originalUri.getHost()`:获取uri路径的主机名，其实就是服务id`user-service`\n- `this.loadBalancer.execute()`：处理服务id，和用户请求\n\n这里的`this.loadBalancer.execute()`：处理服务id和请求\n\n继续跟人`execute()`方法：\n\n![跟进execute()方法](/img/跟进execute()方法.png)\n\n- `getLoadBalancer(serviceId)`：根据服务id获取\n\n  `IloadBalancer`，而`ILoadBancer`会拿着服务id去eureka中获取服务列表\n\n- `getServer(loadBalancer)`：利用内置的负载均衡算法，从服务列表中选择一个。在图中**可以看到获取了8082端口的服务**\n\n可以看到获取服务时，通过一个`getServer()`方法来做负载均衡：\n\n![getServer负载均衡](/img/getServer负载均衡.png)\n\n我们继续跟入：\n\n![继续跟入](/img/继续跟入.png)\n\n继续跟踪源码 `chooseServer()` 方法，发现这么一段代码：\n\n![跟踪源码 chooseServer()方法](/img/跟踪源码 chooseServer()方法.png)\n\n我们看看这个 `rule` 是谁：\n\n![rule](/img/rule.png)\n\n这里的 rule 默认值是一个 `RoundRobinRule` ，看类的介绍：\n\n![rule默认值](/img/rule默认值.png)\n\n负载均衡默认使用了轮训算法，当然我们也可以自定义。\n\n**2、流程总结**\n\nSpringCloud Ribbon 底层采用了一个拦截器，拦截了 RestTemplate 发出的请求，对地址做了修改。\n\n基本流程如下：\n\n- 拦截我们的 `RestTemplate` 请求 http://userservice/user/1\n- `RibbonLoadBalancerClient` 会从请求url中获取服务名称，也就是 user-service\n- `DynamicServerListLoadBalancer` 根据 user-service 到 eureka 拉取服务列表\n- eureka 返回列表，localhost:8081、localhost:8082\n- `IRule` 利用内置负载均衡规则，从列表中选择一个，例如 localhost:8081\n- `RibbonLoadBalancerClient` 修改请求地址，用 localhost:8081 替代 userservice，得到 http://localhost:8081/user/1，发起真实请求\n\n![robbon流程总结](/img/robbon流程总结.png)\n\n**3、负载均衡策略**\n\n负载均衡的规则都定义在 IRule 接口中，而 IRule 有很多不同的实现类：\n\n![负载均衡策略](/img/负载均衡策略.png)\n\n不同规则的含义如下：\n\n| **内置负载均衡规则类**    | **规则描述**                                                 |\n| :------------------------ | :----------------------------------------------------------- |\n| RoundRobinRule            | 简单轮询服务列表来选择服务器。它是Ribbon默认的负载均衡规则。 |\n| AvailabilityFilteringRule | 对以下两种服务器进行忽略：（1）在默认情况下，这台服务器如果3次连接失败，这台服务器就会被设置为“短路”状态。短路状态将持续30秒，如果再次连接失败，短路的持续时间就会几何级地增加。 （2）并发数过高的服务器。如果一个服务器的并发连接数过高，配置了AvailabilityFilteringRule 规则的客户端也会将其忽略。并发连接数的上限，可以由客户端设置。 |\n| WeightedResponseTimeRule  | 为每一个服务器赋予一个权重值。服务器响应时间越长，这个服务器的权重就越小。这个规则会随机选择服务器，这个权重值会影响服务器的选择。 |\n| **ZoneAvoidanceRule**     | 以区域可用的服务器为基础进行服务器的选择。使用Zone对服务器进行分类，这个Zone可以理解为一个机房、一个机架等。而后再对Zone内的多个服务做轮询。 |\n| BestAvailableRule         | 忽略那些短路的服务器，并选择并发数较低的服务器。             |\n| RandomRule                | 随机选择一个可用的服务器。                                   |\n| RetryRule                 | 重试机制的选择逻辑                                           |\n\n默认的实现就是 `ZoneAvoidanceRule`，**是一种轮询方案**。\n\n**4、自定义策略**\n\n通过定义 IRule 实现可以修改负载均衡规则，有两种方式：\n\n1 代码方式在 order-service 中的 OrderApplication 类中，定义一个新的 IRule：\n\n![自定义策略](/img/自定义策略.png)\n\n2 配置文件方式：在 order-service 的 application.yml 文件中，添加新的配置也可以修改规则：\n\n```java\nuserservice: # 给需要调用的微服务配置负载均衡规则，orderservice服务去调用userservice服务\n  ribbon:\n    NFLoadBalancerRuleClassName: com.netflix.loadbalancer.RandomRule # 负载均衡规则\n```\n\n**注意**：一般用默认的负载均衡规则，不做修改。\n\n**5、饥饿加载**\n\n当我们启动 orderservice，第一次访问时，时间消耗会大很多，这是因为 Ribbon 懒加载的机制。\n\n![/img/第一次访问.png](/img/第一次访问.png)\n\nRibbon 默认是采用懒加载，即第一次访问时才会去创建 LoadBalanceClient，拉取集群地址，所以请求时间会很长。\n\n而饥饿加载则会在项目启动时创建 LoadBalanceClient，降低第一次访问的耗时，通过下面配置开启饥饿加载：\n\n```java\nribbon:\n eager-load:\n  enabled: true\n   clients: userservice # 项目启动时直接去拉取userservice的集群，多个用\",\"隔开\n```\n\n\n\n# Nacos\n\n## Nacos注册中心\n\nSpringCloudAlibaba 推出了一个名为 Nacos 的注册中心，在国外也有大量的使用。\n\n![Nacos注册中心](/img/Nacos注册中心.png)\n\n解压启动Nacos，详细请看[Nacos安装指南](https://www.xn2001.com/archives/661.html)\n\n```makefile\n# 单机启动\nstartup.cmd -m standalone\n```\n\n访问：http://localhost:8848/nacos/\n\n![Nacos启动](/img/Nacos启动.png)\n\n**1、服务注册**\n\n这里上来就直接服务注册，很多东西可能有疑惑，其实 Nacos 本身就是一个 SprintBoot 项目，这点你从启动的控制台打印就可以看出来，所以就不再需要去额外搭建一个像 Eureka 的注册中心。\n\n**引入依赖**\n\n在 cloud-demo 父工程中引入 SpringCloudAlibaba 的依赖：\n\n```java\n<dependency>\n    <groupId>com.alibaba.cloud</groupId>\n    <artifactId>spring-cloud-alibaba-dependencies</artifactId>\n    <version>2.2.6.RELEASE</version>\n    <type>pom</type>\n    <scope>import</scope>\n</dependency>\n```\n\n然后在 user-service 和 order-service 中的pom文件中引入 nacos-discovery 依赖：\n\n```java\n<dependency>\n    <groupId>com.alibaba.cloud</groupId>\n    <artifactId>spring-cloud-starter-alibaba-nacos-discovery</artifactId>\n</dependency>\n```\n\n**配置nacos地址**\n\n在 user-service 和 order-service 的 application.yml 中添加 nacos 地址：\n\n```java\nspring:\n cloud:\n  nacos:\n   server-addr: 127.0.0.1:8848\n```\n\n项目重新启动后，可以看到三个服务都被注册进了 Nacos\n\n![Nacos注册](/img/Nacos注册.png)\n\n浏览器访问：http://localhost:8080/order/101，正常访问，同时负载均衡也正常。\n\n## 分级存储模型\n\n一个**服务**可以有多个**实例**，例如我们的 user-service，可以有:\n\n- 127.0.0.1:8081\n- 127.0.0.1:8082\n- 127.0.0.1:8083\n\n假如这些实例分布于全国各地的不同机房，例如：\n\n- 127.0.0.1:8081，在上海机房\n- 127.0.0.1:8082，在上海机房\n- 127.0.0.1:8083，在杭州机房\n\nNacos就将同一机房内的实例，划分为一个**集群**。\n\n![Nacos集群](/img/Nacos集群.png)\n\n微服务互相访问时，应该尽可能访问同集群实例，因为本地访问速度更快。**当本集群内不可用时，才访问其它集群。**例如：杭州机房内的 order-service 应该优先访问同机房的 user-service。\n\n![微服务集群访问](/img/微服务集群访问.png)\n\n**配置集群**\n\n接下来我们给 user-service **配置集群**\n\n修改 user-service 的 application.yml 文件，添加集群配置：\n\n```java\nspring:\n cloud:\n  nacos:\n   server-addr: localhost:8848\n   discovery:\n    cluster-name: HZ # 集群名称 HZ杭州\n```\n\n重启两个 user-service 实例后，我们再去启动一个上海集群的实例。\n\n```java\n-Dserver.port=8083 -Dspring.cloud.nacos.discovery.cluster-name=SH\n```\n\n![再次启动集群实例](/img/再次启动集群实例.png)\n\n查看 nacos 控制台\n\n![查看nacos控制台](/img/查看nacos控制台.png)\n\n## NacosRule\n\nRibbon的默认实现 `ZoneAvoidanceRule` 并不能实现根据同集群优先来实现负载均衡，我们把规则改成 **NacosRule** 即可。我们是用 orderservice 调用 userservice，所以在 orderservice 配置规则。\n\n```java\n@Bean\npublic IRule iRule(){\n\t//默认为轮询规则，这里自定义为随机规则\n\treturn new NacosRule();\n}\n```\n\n另外，你同样可以使用配置的形式来完成，具体参考上面的 Ribbon 栏目。\n\n```java\nuserservice:\n ribbon:\n  NFLoadBalancerRuleClassName: com.alibaba.cloud.nacos.ribbon.NacosRule #负载均衡规则 \n```\n\n然后，再对 orderservice 配置集群。\n\n```java\nspring:\n cloud:\n  nacos:\n   server-addr: localhost:8848\n   discovery:\n    cluster-name: HZ # 集群名称\n```\n\n现在我启动了四个服务，分别是：\n\n- orderservice - HZ\n- userservice - HZ\n- userservice1 - HZ\n- userservice2 - SH\n\n访问地址：http://localhost:8080/order/101\n\n在访问中我们发现，只有同在一个 HZ 集群下的 userservice、userservice1 会被调用，并且是随机的。\n\n我们试着把 userservice、userservice2 停掉。依旧可以访问。\n\n在 userservice3 控制台可以看到发出了一串的警告，因为 orderservice 本身是在 HZ 集群的，这波 HZ 集群没有了 userservice，就会去别的集群找。\n\n![nacos集群警告](/img/nacos集群警告.png)\n\n## 权重配置\n\n实际部署中会出现这样的场景：\n\n服务器设备性能有差异，部分实例所在机器性能较好，另一些较差，我们希望性能好的机器承担更多的用户请求。但默认情况下 NacosRule 是同集群内随机挑选，不会考虑机器的性能问题。\n\n因此，Nacos 提供了**权重配置来控制访问频率**，0~1 之间，权重越大则访问频率越高，权重修改为 0，则该实例永远不会被访问。\n\n在 Nacos 控制台，找到 user-service 的实例列表，点击编辑，即可修改权重。\n\n![nacos权限配置](/img/nacos权限配置.png)\n\n在弹出的编辑窗口，修改权重\n\n![nacos修改权重](/img/nacos修改权重.png)\n\n另外，在服务升级的时候，有一种较好的方案：我们也可以通过调整权重来进行平滑升级，例如：先把 userservice 权重调节为 0，让用户先流向 userservice2、userservice3，升级 userservice后，再把权重从 0 调到 0.1，让一部分用户先体验，用户体验稳定后就可以往上调权重啦。\n\n## 环境隔离\n\nNacos 提供了 namespace 来实现环境隔离功能。\n\n- Nacos 中可以有多个 namespace\n- namespace 下可以有 group、service 等\n- 不同 namespace 之间**相互隔离**，例如不同 namespace 的服务互相不可见\n\n![环境隔离](/img/环境隔离.png)\n\n**1、创建namespace**\n\n默认情况下，所有 service、data、group 都在同一个 namespace，名为 public(保留空间)：\n\n![创建namespace](/img/创建namespace.png)\n\n我们可以点击页面新增按钮，添加一个 namespace：\n\n![添加namespace](/img/添加namespace.png)\n\n然后，填写表单：\n\n![填写表单](/img/填写表单.png)\n\n就能在页面看到一个新的 namespace：\n\n![新的namespace](/img/新的namespace.png)\n\n**2、配置namespace**\n\n给微服务配置 namespace 只能通过修改配置来实现。\n\n例如，修改 order-service 的 application.yml 文件：\n\n```java\nspring:\n cloud:\n  nacos:\n   server-addr: localhost:8848\n   discovery:\n    cluster-name: HZ\n    namespace: 492a7d5d-237b-46a1-a99a-fa8e98e4b0f9 # 命名空间ID\n```\n\n重启 order-service 后，访问控制台。\n\n**public**\n\n![public](/img/public.png)\n\n**dev**\n\n![dev](/img/dev.png)\n\n此时访问 order-service，因为 namespace 不同，会导致找不到 userservice，控制台会报错：\n\n![控制台报](/img/控制台报错.png)\n\n## 临时实例\n\nNacos 的服务实例分为两种类型：\n\n- **临时实例**：如果实例宕机超过一定时间，会从服务列表剔除，**默认的类型**。\n- 非临时实例：如果实例宕机，不会从服务列表剔除，也可以叫永久实例。\n\n配置一个服务实例为永久实例：\n\n```java\nspring:\n cloud:\n  nacos:\n   discovery:\n    ephemeral: false # 设置为非临时实例\n```\n\n另外，Nacos 集群**默认采用AP方式(可用性)**，当集群中存在非临时实例时，**采用CP模式(一致性)**；而 Eureka 采用AP方式，不可切换。（这里说的是 CAP 原理，后面会写到）\n\n## Nacos配置中心\n\nNacos除了可以做注册中心，同样可以做配置管理来使用。\n\n当微服务部署的实例越来越多，达到数十、数百时，逐个修改微服务配置就会让人抓狂，而且很容易出错。**我们需要一种统一配置管理方案，可以集中管理所有实例的配置。**\n\n![Nacos配置中心](/img/Nacos配置中心.png)\n\n**创建配置**\n\n在 Nacos 控制面板中添加配置文件\n\n![添加配置文件](/img/添加配置文件.png)\n\n然后在弹出的表单中，填写配置信息：\n\n![填写配置信息](/img/填写配置信息.png)\n\n**注意**：项目的核心配置，需要热更新的配置才有放到 nacos 管理的必要。基本不会变更的一些配置(例如数据库连接)还是保存在微服务本地比较好。\n\n**拉取配置**\n\n首先我们需要了解 Nacos 读取配置文件的环节是在哪一步，在没加入 Nacos 配置之前，获取配置是这样：\n\n![获取配置](/img/获取配置.png)\n\n加入 Nacos 配置，它的读取是在 application.yml 之前的：\n\n![加入Nacos配置后](/img/加入Nacos配置后.png)\n\n这时候如果把 nacos 地址放在 application.yml 中，显然是不合适的，**Nacos 就无法根据地址去获取配置了。**\n\n因此，nacos 地址必须放在优先级最高的 bootstrap.yml 文件。\n\n![bootstrap.yml](/img/bootstrapyml.png)\n\n**引入 nacos-config 依赖**\n\n首先，在 user-service 服务中，引入 nacos-config 的客户端依赖：\n\n```java\n<!--nacos配置管理依赖-->\n<dependency>\n    <groupId>com.alibaba.cloud</groupId>\n    <artifactId>spring-cloud-starter-alibaba-nacos-config</artifactId>\n</dependency>\n```\n\n**添加 bootstrap.yml**\n\n然后，在 user-service 中添加一个 bootstrap.yml 文件，内容如下：\n\n```java\nspring:\n  application:\n    name: userservice # 服务名称\n  profiles:\n    active: dev #开发环境，这里是dev \n  cloud:\n    nacos:\n      server-addr: localhost:8848 # Nacos地址\n      config:\n        file-extension: yaml # 文件后缀名\n```\n\n根据 spring.cloud.nacos.server-addr 获取 nacos地址，再根据`${spring.application.name}-${spring.profiles.active}.${spring.cloud.nacos.config.file-extension}`作为文件id，来读取配置。\n\n在这个例子例中，就是去读取 `userservice-dev.yaml`\n\n![nacos配置映射关系](/img/nacos配置映射关系.png)\n\n使用代码来验证是否拉取成功\n\n在 user-service 中的 UserController 中添加业务逻辑，读取 pattern.dateformat 配置并使用：\n\n```java\n@Value(\"${pattern.dateformat}\")\nprivate String dateformat;\n\n@GetMapping(\"now\")\npublic String now(){\n    //格式化时间\n    return LocalDateTime.now().format(DateTimeFormatter.ofPattern(dateformat));\n}\n```\n\n![代码验证](/img/代码验证.png)\n\n启动服务后，访问：http://localhost:8081/user/now\n\n![启动示意图](/img/启动示意图.png)\n\n## 配置共享\n\n其实在服务启动时，nacos 会读取多个配置文件，例如：\n\n- `[spring.application.name]-[spring.profiles.active].yaml`，例如：userservice-dev.yaml\n- `[spring.application.name].yaml`，例如：userservice.yaml\n\n这里的 `[spring.application.name].yaml` 不包含环境，**因此可以被多个环境共享**。\n\n**添加一个环境共享配置**\n\n我们在 nacos 中添加一个 userservice.yaml 文件：\n\n![添加一个环境共享配置](/img/添加一个环境共享配置.png)\n\n**在 user-service 中读取共享配置**\n\n在 user-service 服务中，修改 PatternProperties 类，读取新添加的属性：\n\n![读取新添加的属性](/img/读取新添加的属性.png)\n\n在 user-service 服务中，修改 UserController，添加一个方法：\n\n![添加一个方法](/img/添加一个方法.png)\n\n**运行两个 UserApplication，使用不同的profile**\n\n修改 UserApplication2 这个启动项，改变其profile值：\n\n![使用不同的profile](/img/使用不同的profile.png)\n\n![使用不同的profile2](/img/使用不同的profile2.png)\n\n这样，UserApplication(8081) 使用的 profile 是 dev，UserApplication2(8082) 使用的 profile 是test\n\n启动 UserApplication 和 UserApplication2\n\n访问地址：http://localhost:8081/user/prop，结果：\n\n![使用不同的配置结果](/img/使用不同的配置结果1.png)\n\n访问地址：http://localhost:8082/user/prop，结果：\n\n![使用不同的配置结果](/img/使用不同的配置结果2.png)\n\n可以看出来，不管是 dev，还是 test 环境，都读取到了 envSharedValue 这个属性的值。\n\n上面的都是同一个微服务下，**那么不同微服务之间可以环境共享吗？**\n\n通过下面的两种方式来指定：\n\n- extension-configs\n- shared-configs\n\n```java\nspring: \n  cloud:\n    nacos:\n      config:\n        file-extension: yaml # 文件后缀名\n        extends-configs: # 多微服务间共享的配置列表\n          - dataId: common.yaml # 要共享的配置文件id\n```\n\n```java\nspring: \n  cloud:\n    nacos:\n      config:\n        file-extension: yaml # 文件后缀名\n        shared-configs: # 多微服务间共享的配置列表\n          - dataId: common.yaml # 要共享的配置文件id\n```\n\n**配置优先级**\n\n当 nacos、服务本地同时**出现相同属性时**，优先级有高低之分。\n\n![优先级有高低之分](/img/优先级有高低之分.png)\n\n更细致的配置\n\n![更细致的配置](/img/更细致的配置.png)\n\n## Nacos集群\n\n**架构介绍**\n\n![架构介绍](/img/架构介绍.png)\n\n其中包含 3 个Nacos 节点，然后一个负载均衡器 Nginx 代理 3 个 Nacos，我们计划的 Nacos 集群如下图，MySQL 的主从复制后续再添加。\n\n![计划的Nacos集群](/img/计划的Nacos集群.png)\n\n三个 Nacos 节点的地址\n\n| 节点   | ip            | port |\n| :----- | :------------ | :--- |\n| nacos1 | 192.168.150.1 | 8845 |\n| nacos2 | 192.168.150.1 | 8846 |\n| nacos3 | 192.168.150.1 | 8847 |\n\n## 初始化数据库\n\nNacos 默认数据存储在内嵌数据库 Derby 中，不属于生产可用的数据库。官方推荐的最佳实践是使用带有主从的高可用数据库集群，主从模式的高可用数据库。这里我们以单点的数据库为例。\n\n首先新建一个数据库，命名为 nacos，而后导入下面的 SQL\n\n```mysql\nCREATE TABLE `config_info` (\n  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT 'id',\n  `data_id` varchar(255) NOT NULL COMMENT 'data_id',\n  `group_id` varchar(255) DEFAULT NULL,\n  `content` longtext NOT NULL COMMENT 'content',\n  `md5` varchar(32) DEFAULT NULL COMMENT 'md5',\n  `gmt_create` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',\n  `gmt_modified` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '修改时间',\n  `src_user` text COMMENT 'source user',\n  `src_ip` varchar(50) DEFAULT NULL COMMENT 'source ip',\n  `app_name` varchar(128) DEFAULT NULL,\n  `tenant_id` varchar(128) DEFAULT '' COMMENT '租户字段',\n  `c_desc` varchar(256) DEFAULT NULL,\n  `c_use` varchar(64) DEFAULT NULL,\n  `effect` varchar(64) DEFAULT NULL,\n  `type` varchar(64) DEFAULT NULL,\n  `c_schema` text,\n  PRIMARY KEY (`id`),\n  UNIQUE KEY `uk_configinfo_datagrouptenant` (`data_id`,`group_id`,`tenant_id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT='config_info';\n\n/******************************************/\n/*   数据库全名 = nacos_config   */\n/*   表名称 = config_info_aggr   */\n/******************************************/\nCREATE TABLE `config_info_aggr` (\n  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT 'id',\n  `data_id` varchar(255) NOT NULL COMMENT 'data_id',\n  `group_id` varchar(255) NOT NULL COMMENT 'group_id',\n  `datum_id` varchar(255) NOT NULL COMMENT 'datum_id',\n  `content` longtext NOT NULL COMMENT '内容',\n  `gmt_modified` datetime NOT NULL COMMENT '修改时间',\n  `app_name` varchar(128) DEFAULT NULL,\n  `tenant_id` varchar(128) DEFAULT '' COMMENT '租户字段',\n  PRIMARY KEY (`id`),\n  UNIQUE KEY `uk_configinfoaggr_datagrouptenantdatum` (`data_id`,`group_id`,`tenant_id`,`datum_id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT='增加租户字段';\n\n\n/******************************************/\n/*   数据库全名 = nacos_config   */\n/*   表名称 = config_info_beta   */\n/******************************************/\nCREATE TABLE `config_info_beta` (\n  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT 'id',\n  `data_id` varchar(255) NOT NULL COMMENT 'data_id',\n  `group_id` varchar(128) NOT NULL COMMENT 'group_id',\n  `app_name` varchar(128) DEFAULT NULL COMMENT 'app_name',\n  `content` longtext NOT NULL COMMENT 'content',\n  `beta_ips` varchar(1024) DEFAULT NULL COMMENT 'betaIps',\n  `md5` varchar(32) DEFAULT NULL COMMENT 'md5',\n  `gmt_create` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',\n  `gmt_modified` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '修改时间',\n  `src_user` text COMMENT 'source user',\n  `src_ip` varchar(50) DEFAULT NULL COMMENT 'source ip',\n  `tenant_id` varchar(128) DEFAULT '' COMMENT '租户字段',\n  PRIMARY KEY (`id`),\n  UNIQUE KEY `uk_configinfobeta_datagrouptenant` (`data_id`,`group_id`,`tenant_id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT='config_info_beta';\n\n/******************************************/\n/*   数据库全名 = nacos_config   */\n/*   表名称 = config_info_tag   */\n/******************************************/\nCREATE TABLE `config_info_tag` (\n  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT 'id',\n  `data_id` varchar(255) NOT NULL COMMENT 'data_id',\n  `group_id` varchar(128) NOT NULL COMMENT 'group_id',\n  `tenant_id` varchar(128) DEFAULT '' COMMENT 'tenant_id',\n  `tag_id` varchar(128) NOT NULL COMMENT 'tag_id',\n  `app_name` varchar(128) DEFAULT NULL COMMENT 'app_name',\n  `content` longtext NOT NULL COMMENT 'content',\n  `md5` varchar(32) DEFAULT NULL COMMENT 'md5',\n  `gmt_create` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',\n  `gmt_modified` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '修改时间',\n  `src_user` text COMMENT 'source user',\n  `src_ip` varchar(50) DEFAULT NULL COMMENT 'source ip',\n  PRIMARY KEY (`id`),\n  UNIQUE KEY `uk_configinfotag_datagrouptenanttag` (`data_id`,`group_id`,`tenant_id`,`tag_id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT='config_info_tag';\n\n/******************************************/\n/*   数据库全名 = nacos_config   */\n/*   表名称 = config_tags_relation   */\n/******************************************/\nCREATE TABLE `config_tags_relation` (\n  `id` bigint(20) NOT NULL COMMENT 'id',\n  `tag_name` varchar(128) NOT NULL COMMENT 'tag_name',\n  `tag_type` varchar(64) DEFAULT NULL COMMENT 'tag_type',\n  `data_id` varchar(255) NOT NULL COMMENT 'data_id',\n  `group_id` varchar(128) NOT NULL COMMENT 'group_id',\n  `tenant_id` varchar(128) DEFAULT '' COMMENT 'tenant_id',\n  `nid` bigint(20) NOT NULL AUTO_INCREMENT,\n  PRIMARY KEY (`nid`),\n  UNIQUE KEY `uk_configtagrelation_configidtag` (`id`,`tag_name`,`tag_type`),\n  KEY `idx_tenant_id` (`tenant_id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT='config_tag_relation';\n\n/******************************************/\n/*   数据库全名 = nacos_config   */\n/*   表名称 = group_capacity   */\n/******************************************/\nCREATE TABLE `group_capacity` (\n  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT COMMENT '主键ID',\n  `group_id` varchar(128) NOT NULL DEFAULT '' COMMENT 'Group ID，空字符表示整个集群',\n  `quota` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '配额，0表示使用默认值',\n  `usage` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '使用量',\n  `max_size` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '单个配置大小上限，单位为字节，0表示使用默认值',\n  `max_aggr_count` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '聚合子配置最大个数，，0表示使用默认值',\n  `max_aggr_size` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '单个聚合数据的子配置大小上限，单位为字节，0表示使用默认值',\n  `max_history_count` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '最大变更历史数量',\n  `gmt_create` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',\n  `gmt_modified` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '修改时间',\n  PRIMARY KEY (`id`),\n  UNIQUE KEY `uk_group_id` (`group_id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT='集群、各Group容量信息表';\n\n/******************************************/\n/*   数据库全名 = nacos_config   */\n/*   表名称 = his_config_info   */\n/******************************************/\nCREATE TABLE `his_config_info` (\n  `id` bigint(64) unsigned NOT NULL,\n  `nid` bigint(20) unsigned NOT NULL AUTO_INCREMENT,\n  `data_id` varchar(255) NOT NULL,\n  `group_id` varchar(128) NOT NULL,\n  `app_name` varchar(128) DEFAULT NULL COMMENT 'app_name',\n  `content` longtext NOT NULL,\n  `md5` varchar(32) DEFAULT NULL,\n  `gmt_create` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  `gmt_modified` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  `src_user` text,\n  `src_ip` varchar(50) DEFAULT NULL,\n  `op_type` char(10) DEFAULT NULL,\n  `tenant_id` varchar(128) DEFAULT '' COMMENT '租户字段',\n  PRIMARY KEY (`nid`),\n  KEY `idx_gmt_create` (`gmt_create`),\n  KEY `idx_gmt_modified` (`gmt_modified`),\n  KEY `idx_did` (`data_id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT='多租户改造';\n\n\n/******************************************/\n/*   数据库全名 = nacos_config   */\n/*   表名称 = tenant_capacity   */\n/******************************************/\nCREATE TABLE `tenant_capacity` (\n  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT COMMENT '主键ID',\n  `tenant_id` varchar(128) NOT NULL DEFAULT '' COMMENT 'Tenant ID',\n  `quota` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '配额，0表示使用默认值',\n  `usage` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '使用量',\n  `max_size` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '单个配置大小上限，单位为字节，0表示使用默认值',\n  `max_aggr_count` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '聚合子配置最大个数',\n  `max_aggr_size` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '单个聚合数据的子配置大小上限，单位为字节，0表示使用默认值',\n  `max_history_count` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '最大变更历史数量',\n  `gmt_create` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',\n  `gmt_modified` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '修改时间',\n  PRIMARY KEY (`id`),\n  UNIQUE KEY `uk_tenant_id` (`tenant_id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT='租户容量信息表';\n\n\nCREATE TABLE `tenant_info` (\n  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT 'id',\n  `kp` varchar(128) NOT NULL COMMENT 'kp',\n  `tenant_id` varchar(128) default '' COMMENT 'tenant_id',\n  `tenant_name` varchar(128) default '' COMMENT 'tenant_name',\n  `tenant_desc` varchar(256) DEFAULT NULL COMMENT 'tenant_desc',\n  `create_source` varchar(32) DEFAULT NULL COMMENT 'create_source',\n  `gmt_create` bigint(20) NOT NULL COMMENT '创建时间',\n  `gmt_modified` bigint(20) NOT NULL COMMENT '修改时间',\n  PRIMARY KEY (`id`),\n  UNIQUE KEY `uk_tenant_info_kptenantid` (`kp`,`tenant_id`),\n  KEY `idx_tenant_id` (`tenant_id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT='tenant_info';\n\nCREATE TABLE `users` (\n    `username` varchar(50) NOT NULL PRIMARY KEY,\n    `password` varchar(500) NOT NULL,\n    `enabled` boolean NOT NULL\n);\n\nCREATE TABLE `roles` (\n    `username` varchar(50) NOT NULL,\n    `role` varchar(50) NOT NULL,\n    UNIQUE INDEX `idx_user_role` (`username` ASC, `role` ASC) USING BTREE\n);\n\nCREATE TABLE `permissions` (\n    `role` varchar(50) NOT NULL,\n    `resource` varchar(255) NOT NULL,\n    `action` varchar(8) NOT NULL,\n    UNIQUE INDEX `uk_role_permission` (`role`,`resource`,`action`) USING BTREE\n);\n\nINSERT INTO users (username, password, enabled) VALUES ('nacos', '$2a$10$EuWPZHzz32dJN7jexM34MOeYirDdFAZm2kuWj7VEOJhhZkDrxfvUu', TRUE);\n\nINSERT INTO roles (username, role) VALUES ('nacos', 'ROLE_ADMIN');\n```\n\n**配置Nacos**\n\n进入 nacos 的 conf 目录，修改配置文件 cluster.conf.example，重命名为 cluster.conf\n\n![修改配置文件](/img/修改配置文件.png)\n\n添加内容\n\n```java\n127.0.0.1:8845\n127.0.0.1.8846\n127.0.0.1.8847\n```\n\n然后修改 application.properties 文件，添加数据库配置\n\n```java\nspring.datasource.platform=mysql\ndb.num=1\ndb.url.0=jdbc:mysql://127.0.0.1:3306/nacos?characterEncoding=utf8&connectTimeout=1000&socketTimeout=3000&autoReconnect=true&useUnicode=true&useSSL=false&serverTimezone=UTC\ndb.user.0=root\ndb.password.0=123456\n```\n\n将 nacos 文件夹复制三份，分别命名为：nacos1、nacos2、nacos3\n\n![将nacos文件夹复制三份](/img/将nacos文件夹复制三份.png)\n\n然后分别修改三个文件夹中的 application.properties，\n\nnacos1\n\n```properties\nserver.port=8845\n```\n\nnacos2\n\n```properties\nserver.port=8846\n```\n\nnacos3\n\n```properties\nserver.port=8847\n```\n\n然后分别启动三个 nacos\n\n```\nstartup.cmd\n```\n\n**Nginx反向代理**\n\n修改 nginx 文件夹下的 conf/nginx.conf 文件，配置如下\n\n```nginx\nupstream nacos-cluster {\n    server 127.0.0.1:8845;\n    server 127.0.0.1:8846;\n    server 127.0.0.1:8847;\n}\n\nserver {\n    listen       80;\n    server_name  localhost;\n\n    location /nacos {\n        proxy_pass http://nacos-cluster;\n    }\n}\n```\n\n启动 nginx，在浏览器访问：http://localhost/nacos\n\n在代码中的 application.yml 文件配置改为如下：\n\n```yaml\nspring:\n  cloud:\n    nacos:\n      server-addr: localhost:80 # Nacos地址\n```\n\n实际部署时，需要给做反向代理的 Nginx 服务器设置一个域名，这样后续如果有服务器迁移 Nacos 的客户端也无需更改配置。Nacos 的各个节点应该部署到多个不同服务器，做好容灾和隔离工作。\n\n\n\n# Feign\n\n我们以前利用 RestTemplate 发起远程调用的代码：\n\n![利用RestTemplate发起远程调用](/img/利用RestTemplate发起远程调用.png)\n\n- 代码可读性差，编程体验不统一\n- 参数复杂URL难以维护\n\nFeign 是一个声明式的 http 客户端，官方地址：https://github.com/OpenFeign/feign\n\n其作用就是帮助我们**优雅的实现 http 请求的发送**，解决上面提到的问题。\n\n![feign作用](/img/feign作用.png)\n\n## Feign使用\n\n**引入依赖**\n\n我们在 order-service 引入 feign 依赖：\n\n```xml\n<dependency>\n    <groupId>org.springframework.cloud</groupId>\n    <artifactId>spring-cloud-starter-openfeign</artifactId>\n</dependency>\n```\n\n**添加注解**\n\n在 order-service 启动类添加注解开启 Feign\n\n![注解开启Feign](/img/注解开启Feign.png)\n\n**请求接口**\n\n在 order-service 中新建一个接口，内容如下\n\n```java\npackage com.xn2001.order.client;\n\nimport com.xn2001.order.pojo.User;\nimport org.springframework.cloud.openfeign.FeignClient;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.PathVariable;\n\n@FeignClient(\"userservice\")\npublic interface UserClient {\n    @GetMapping(\"/user/{id}\")\n    User findById(@PathVariable(\"id\") Long id);\n}\n```\n\n`@FeignClient(\"userservice\")`：其中参数填写的是微服务名\n\n`@GetMapping(\"/user/{id}\")`：其中参数填写的是请求路径\n\n这个客户端主要是基于 SpringMVC 的注解 `@GetMapping` 来声明远程调用的信息\n\nFeign 可以帮助我们发送 http 请求，无需自己使用 RestTemplate 来发送了。\n\n**测试**\n\n```java\n@Autowired\nprivate UserClient userClient;\n\npublic Order queryOrderAndUserById(Long orderId) {\n    // 1.查询订单\n    Order order = orderMapper.findById(orderId);\n    // TODO: 2021/8/20 使用feign远程调用\n    User user = userClient.findById(order.getUserId());\n    // 3. 将用户信息封装进订单\n    order.setUser(user);\n    // 4.返回\n    return order;\n}\n```\n\n## 自定义配置\n\nFeign 可以支持很多的自定义配置，如下表所示：\n\n| 类型                   | 作用             | 说明                                                   |\n| :--------------------- | :--------------- | :----------------------------------------------------- |\n| **feign.Logger.Level** | 修改日志级别     | 包含四种不同的级别：NONE、BASIC、HEADERS、FULL         |\n| feign.codec.Decoder    | 响应结果的解析器 | http远程调用的结果做解析，例如解析json字符串为java对象 |\n| feign.codec.Encoder    | 请求参数编码     | 将请求参数编码，便于通过http请求发送                   |\n| feign.Contract         | 支持的注解格式   | 默认是SpringMVC的注解                                  |\n| feign.Retryer          | 失败重试机制     | 请求失败的重试机制，默认是没有，不过会使用Ribbon的重试 |\n\n一般情况下，默认值就能满足我们使用，如果要自定义时，只需要创建自定义的 @Bean 覆盖默认 Bean 即可。下面以日志为例来演示如何自定义配置。\n\n基于配置文件修改 feign 的日志级别可以针对单个服务：\n\n```yaml\nfeign:  \n  client:\n    config: \n      userservice: # 针对某个微服务的配置\n        loggerLevel: FULL #  日志级别 \n```\n\n**也可以针对所有服务**：\n\n```yaml\nfeign:  \n  client:\n    config: \n      default: # 这里用default就是全局配置，如果是写服务名称，则是针对某个微服务的配置\n        loggerLevel: FULL #  日志级别 \n```\n\n而日志的级别分为四种：\n\n- NONE：不记录任何日志信息，这是默认值。\n- BASIC：仅记录请求的方法，URL以及响应状态码和执行时间\n- HEADERS：在BASIC的基础上，额外记录了请求和响应的头信息\n- FULL：记录所有请求和响应的明细，包括头信息、请求体、元数据\n\n也可以基于 **Java 代码**来修改日志级别，先声明一个类，然后声明一个 Logger.Level 的对象\n\n```java\npublic class DefaultFeignConfiguration  {\n    @Bean\n    public Logger.Level feignLogLevel(){\n        return Logger.Level.BASIC; // 日志级别为BASIC\n    }\n}\n```\n\n如果要**全局生效**，将其放到启动类的 `@EnableFeignClients` 这个注解中：\n\n```java\n@EnableFeignClients(defaultConfiguration = DefaultFeignConfiguration .class) \n```\n\n如果是**局部生效**，则把它放到对应的 `@FeignClient` 这个注解中：\n\n```java\n@FeignClient(value = \"userservice\", configuration = DefaultFeignConfiguration .class) \n```\n\n## 性能优化\n\nFeign 底层发起 http 请求，依赖于其它的框架。其底层客户端实现有：\n\n- **URLConnection**：默认实现，不支持连接池\n- **Apache HttpClient** ：支持连接池\n- **OKHttp**：支持连接池\n\n因此提高 Feign 性能的主要手段就是使用**连接池**代替默认的 URLConnection\n\n另外，日志级别应该尽量用 basic/none，可以有效提高性能。\n\n**这里我们用 Apache 的HttpClient来演示连接池。**\n\n在 order-service 的 pom 文件中引入 HttpClient 依赖\n\n```xml\n<!--httpClient的依赖 -->\n<dependency>\n    <groupId>io.github.openfeign</groupId>\n    <artifactId>feign-httpclient</artifactId>\n</dependency>\n```\n\n**配置连接池**\n\n在 order-service 的 application.yml 中添加配置\n\n```yaml\nfeign:\n  client:\n    config:\n      default: # default全局的配置\n        loggerLevel: BASIC # 日志级别，BASIC就是基本的请求和响应信息\n  httpclient:\n    enabled: true # 开启feign对HttpClient的支持\n    max-connections: 200 # 最大的连接数\n    max-connections-per-route: 50 # 每个路径的最大连接数\n```\n\n在 FeignClientFactoryBean 中的 loadBalance 方法中打断点\n\n![loadBalance](/img/loadBalance.png)\n\nDebug 方式启动 order-service 服务，可以看到这里的 client，底层就是 HttpClient\n\n![HttpClient](/img/HttpClient.png)\n\n## 最佳实践\n\n**继承方式**\n\n一样的代码可以通过继承来共享：\n\n1）定义一个 API 接口，利用定义方法，并基于 SpringMVC 注解做声明\n\n2）Feign 客户端、Controller 都集成该接口\n\n![最佳实践](/img/最佳实践.png)\n\n优点\n\n- 简单\n- 实现了代码共享\n\n缺点\n\n- 服务提供方、服务消费方紧耦合\n- 参数列表中的注解映射并不会继承，因此 Controller 中必须再次声明方法、参数列表、注解\n\n**抽取方式**\n\n将 FeignClient 抽取为独立模块，并且把接口有关的 pojo、默认的 Feign 配置都放到这个模块中，提供给所有消费者使用。\n\n例如：将 UserClient、User、Feign 的默认配置都抽取到一个 feign-api 包中，所有微服务引用该依赖包，即可直接使用。\n\n![抽取方式](/img/抽取方式.png)\n\n接下来我们就用该方法在代码中实现\n\n**首先创建一个 module，命名为 feign-api**\n\n![feign-api](/img/feign-api.png)\n\n在 feign-api 中然后引入依赖\n\n```xml\n<dependency>\n    <groupId>org.springframework.cloud</groupId>\n    <artifactId>spring-cloud-starter-openfeign</artifactId>\n</dependency>\n```\n\norder-service中 的 UserClient、User 都复制到 feign-api 项目中\n\n![feign-api修改](/img/feign-api修改.png)\n\n接下来在 order-service 中使用 feign-api\n\n由于我们已经将 UserClient、User 放在 fegin-api 中共享了 ，所以可以删除 order-service 中的 UserClient、User，然后在 order-service 中引入 feign-api\n\n```xml\n<dependency>\n    <groupId>com.xn2001.feign</groupId>\n    <artifactId>feign-api</artifactId>\n    <version>1.0</version>\n</dependency>\n```\n\n**修改注解**\n\n当定义的 FeignClient 不在 SpringBootApplication 的扫描包范围下时，这些 FeignClient 就不能使用。\n\n修改 order-service 启动类上的 `@EnableFeignClients` 注解\n\n```java\n@EnableFeignClients(basePackages = \"com.xn2001.feign.clients\")\n```\n\n# Gateway\n\nSpring Cloud Gateway 是 Spring Cloud 的一个全新项目，该项目是基于 Spring 5.0，Spring Boot 2.0 和 Project Reactor 等响应式编程和事件流技术开发的网关，它旨在为微服务架构提供一种简单有效的统一的 API 路由管理方式。\n\nGateway 网关是我们服务的守门神，**所有微服务的统一入口。**\n\n网关的**核心功能特性**：\n\n- 请求路由\n- 权限控制\n- 限流\n\n![Gateway网关](/img/Gateway网关.png)\n\n**权限控制**：网关作为微服务入口，需要校验用户是是否有请求资格，如果没有则进行拦截。\n\n**路由和负载均衡**：一切请求都必须先经过 gateway，但网关不处理业务，而是根据某种规则，把请求转发到某个微服务，这个过程叫做路由。当然路由的目标服务有多个时，还需要做负载均衡。\n\n**限流**：当请求流量过高时，在网关中按照下流的微服务能够接受的速度来放行请求，避免服务压力过大。\n\n在 SpringCloud 中网关的实现包括两种：\n\n- gateway\n- zuul\n\nZuul 是基于 Servlet 实现，属于阻塞式编程。而 Spring Cloud Gateway 则是基于 Spring5 中提供的WebFlux，属于响应式编程的实现，具备更好的性能。\n\n## 入门使用\n\n1. 创建 SpringBoot 工程 gateway，引入网关依赖\n2. 编写启动类\n3. 编写基础配置和路由规则\n4. 启动网关服务进行测试\n\n```xml\n<!--网关-->\n<dependency>\n    <groupId>org.springframework.cloud</groupId>\n    <artifactId>spring-cloud-starter-gateway</artifactId>\n</dependency>\n<!--nacos服务发现依赖-->\n<dependency>\n    <groupId>com.alibaba.cloud</groupId>\n    <artifactId>spring-cloud-starter-alibaba-nacos-discovery</artifactId>\n</dependency>\n```\n\n创建 application.yml 文件，内容如下：\n\n```yaml\nserver:\n  port: 10010 # 网关端口\nspring:\n  application:\n    name: gateway # 服务名称\n  cloud:\n    nacos:\n      server-addr: localhost:8848 # nacos地址\n    gateway:\n      routes: # 网关路由配置\n        - id: user-service # 路由id，自定义，只要唯一即可\n          # uri: http://127.0.0.1:8081 # 路由的目标地址 http就是固定地址\n          uri: lb://userservice # 路由的目标地址 lb就是负载均衡，后面跟服务名称\n          predicates: # 路由断言，也就是判断请求是否符合路由规则的条件\n            - Path=/user/** # 这个是按照路径匹配，只要以/user/开头就符合要求\n```\n\n我们将符合`Path` 规则的一切请求，都代理到 `uri`参数指定的地址。\n\n上面的例子中，我们将 `/user/**` 开头的请求，代理到 `lb://userservice`，其中 lb 是负载均衡(LoadBalance)，根据服务名拉取服务列表，实现负载均衡。\n\n重启网关，访问 http://localhost:10010/user/1 时，符合 `/user/**` 规则，请求转发到 uri：http://userservice/user/1\n\n![httpuserserviceuser1](/img/httpuserserviceuser1.png)\n\n多个 predicates 的话，要同时满足规则，下文有例子。\n\n## 流程图\n\n![gateway流程图](/img/gateway流程图.png)\n\n路由配置包括：\n\n1. 路由id：路由的唯一标示\n2. 路由目标（uri）：路由的目标地址，http代表固定地址，lb代表根据服务名负载均衡\n3. 路由断言（predicates）：判断路由的规则\n4. 路由过滤器（filters）：对请求或响应做处理\n\n## 断言工厂\n\n我们在配置文件中写的断言规则只是字符串，这些字符串会被 Predicate Factory 读取并处理，转变为路由判断的条件。\n\n例如 `Path=/user/**` 是按照路径匹配，这个规则是由\n\n`org.springframework.cloud.gateway.handler.predicate.PathRoutePredicateFactory` 类来处理的，像这样的断言工厂在 Spring Cloud Gateway 还有十几个\n\n| 名称       | 说明                           | 示例                                                         |\n| :--------- | :----------------------------- | :----------------------------------------------------------- |\n| After      | 是某个时间点后的请求           | - After=2037-01-20T17:42:47.789-07:00[America/Denver]        |\n| Before     | 是某个时间点之前的请求         | - Before=2031-04-13T15:14:47.433+08:00[Asia/Shanghai]        |\n| Between    | 是某两个时间点之前的请求       | - Between=2037-01-20T17:42:47.789-07:00[America/Denver], 2037-01-21T17:42:47.789-07:00[America/Denver] |\n| Cookie     | 请求必须包含某些cookie         | - Cookie=chocolate, ch.p                                     |\n| Header     | 请求必须包含某些header         | - Header=X-Request-Id, \\d+                                   |\n| Host       | 请求必须是访问某个host（域名） | - Host=`**.somehost.org`, `**.anotherhost.org`               |\n| Method     | 请求方式必须是指定方式         | - Method=GET,POST                                            |\n| Path       | 请求路径必须符合指定规则       | - Path=/red/{segment},/blue/**                               |\n| Query      | 请求参数必须包含指定参数       | - Query=name, Jack或者- Query=name                           |\n| RemoteAddr | 请求者的ip必须是指定范围       | - RemoteAddr=192.168.1.1/24                                  |\n| Weight     | 权重处理                       |                                                              |\n\n> 官方文档：https://docs.spring.io/spring-cloud-gateway/docs/current/reference/html/#gateway-request-predicates-factories\n\n一般的，我们只需要掌握 Path，加上官方文档的例子，就可以应对各种工作场景了。\n\n```yaml\npredicates:\n  - Path=/order/**\n  - After=2031-04-13T15:14:47.433+08:00[Asia/Shanghai]\n```\n\n像这样的规则，现在是 2021年8月22日01:32:42，很明显 After 条件不满足，可以不会转发，路由不起作用。\n\n## 过滤器工厂\n\nGatewayFilter 是网关中提供的一种过滤器，可以对进入网关的请求和微服务返回的响应做处理。\n\n![过滤器工厂](/img/过滤器工厂.png)\n\nSpring提供了31种不同的路由过滤器工厂。\n\n> 官方文档：https://docs.spring.io/spring-cloud-gateway/docs/current/reference/html/#gatewayfilter-factories\n\n| **名称**             | **说明**                     |\n| :------------------- | :--------------------------- |\n| AddRequestHeader     | 给当前请求添加一个请求头     |\n| RemoveRequestHeader  | 移除请求中的一个请求头       |\n| AddResponseHeader    | 给响应结果中添加一个响应头   |\n| RemoveResponseHeader | 从响应结果中移除有一个响应头 |\n| RequestRateLimiter   | 限制请求的流量               |\n\n下面我们以 AddRequestHeader 为例：\n\n![AddRequestHeader](/img/AddRequestHeader.png)\n\n**需求**：给所有进入 userservice 的请求添加一个请求头：`sign=xn2001.com is eternal`\n\n只需要修改 gateway 服务的 application.yml文件，添加路由过滤即可。\n\n```yaml\nspring:\n  cloud:\n    gateway:\n      routes: # 网关路由配置\n        - id: user-service # 路由id，自定义，只要唯一即可\n          # uri: http://127.0.0.1:8081 # 路由的目标地址 http就是固定地址\n          uri: lb://userservice # 路由的目标地址 lb就是负载均衡，后面跟服务名称\n          predicates: # 路由断言，也就是判断请求是否符合路由规则的条件\n            - Path=/user/** # 这个是按照路径匹配，只要以/user/开头就符合要求\n          filters:\n            - AddRequestHeader=sign, xn2001.com is eternal # 添加请求头\n```\n\n如何验证，我们修改 userservice 中的一个接口\n\n```java\n@GetMapping(\"/{id}\")\npublic User queryById(@PathVariable(\"id\") Long id, @RequestHeader(value = \"sign\", required = false) String sign) {\n    log.warn(sign);\n    return userService.queryById(id);\n}\n```\n\n重启两个服务，访问：http://localhost:10010/user/1\n\n可以看到控制台打印出了这个请求头\n\n![控制台打印请求头](/img/控制台打印请求头.png)\n\n## 全局过滤器\n\n上面介绍的过滤器工厂，网关提供了 31 种，但每一种过滤器的作用都是固定的。**如果我们希望拦截请求，做自己的业务逻辑则没办法实现**。\n\n全局过滤器的作用也是处理一切进入网关的请求和微服务响应，**与 GatewayFilter 的作用一样**。区别在于 GlobalFilter 的逻辑可以**写代码来自定义规则**；而 GatewayFilter 通过配置定义，处理逻辑是固定的。\n\n**需求**：定义全局过滤器，拦截请求，判断请求的参数是否满足下面条件\n\n- 参数中是否有 authorization\n- authorization 参数值是否为 admin\n\n如果同时满足则放行，否则拦截。\n\n```java\n@Component\npublic class AuthorizeFilter implements GlobalFilter, Ordered {\n\n    // 测试：http://localhost:10010/order/101?authorization=admin\n    @Override\n    public Mono<Void> filter(ServerWebExchange exchange, GatewayFilterChain chain) {\n        // 获取第一个 authorization 参数\n        String authorization = exchange.getRequest().getQueryParams().getFirst(\"authorization\");\n        if (\"admin\".equals(authorization)){\n            // 放行\n            return chain.filter(exchange);\n        }\n        // 设置拦截状态码信息\n        exchange.getResponse().setStatusCode(HttpStatus.UNAUTHORIZED);\n        // 设置拦截\n        return exchange.getResponse().setComplete();\n    }\n\n    // 设置过滤器优先级，值越低优先级越高\n    // 也可以使用 @Order 注解\n    @Override\n    public int getOrder() {\n        return 0;\n    }\n}\n```\n\n## 过滤器顺序\n\n请求进入网关会碰到三类过滤器：DefaultFilter、当前路由的过滤器、GlobalFilter；\n\n请求路由后，会将三者合并到一个过滤器链（集合）中，排序后依次执行每个过滤器.\n\n![过滤器顺序](/img/过滤器顺序.png)\n\n排序的规则是什么呢？\n\n- 每一个过滤器都必须指定一个 int 类型的 order 值，**order 值越小，优先级越高，执行顺序越靠前**。\n- GlobalFilter 通过实现 Ordered 接口，或者使用 @Order 注解来指定 order 值，由我们自己指定。\n- 路由过滤器和 defaultFilter 的 order 由 Spring 指定，默认是按照声明顺序从1递增。\n- 当过滤器的 order 值一样时，**会按照 defaultFilter > 路由过滤器 > GlobalFilter 的顺序执行。**\n\n## 跨域问题\n\n不了解跨域问题的同学可以百度了解一下；在 Gateway 网关中解决跨域问题还是比较方便的。\n\n```yaml\nspring:\n  cloud:\n    gateway:\n      globalcors: # 全局的跨域处理\n        add-to-simple-url-handler-mapping: true # 解决options请求被拦截问题\n        corsConfigurations:\n          '[/**]':\n            allowedOrigins: # 允许哪些网站的跨域请求 allowedOrigins: “*” 允许所有网站\n              - \"http://localhost:8090\"\n            allowedMethods: # 允许的跨域ajax的请求方式\n              - \"GET\"\n              - \"POST\"\n              - \"DELETE\"\n              - \"PUT\"\n              - \"OPTIONS\"\n            allowedHeaders: \"*\" # 允许在请求中携带的头信息\n            allowCredentials: true # 是否允许携带cookie\n            maxAge: 360000 # 这次跨域检测的有效期\n```\n\n# RabbitMQ\n\n# Elasticsearch\n\n<span style=\"text-align:center;font-size:50px;background-color:orange\">高级篇</span>\n\n# JMeter\n\n# Sentinel\n\n# Seata\n","source":"_posts/微服务技术栈.md","raw":"---\ntitle: 微服务技术栈\ndate: \ntags:\n\t- SpringCloud\n\t- Eureka\n\t- Nacos\n\t- Feign\n\t- Gateway\n\t- Docker\n\t- MQ\n\t- RabbitMQ\n\t- SpringAMQP\n\t- ES\n\t- RestClient\n\t- DSL\n\t- Seata\n\t- Redis\n\t- Sentinel\ncategories:\n\t- [微服务技术栈]\n---\n\n\n\n<span style=\"text-align:center;font-size:50px;background-color:orange\">基础篇</span>\n\n**本篇微服务技术栈参考：** https://www.xn2001.com/archives/663.html\n\n# 认识微服务\n\n## 单体架构\n\n**单体架构：** 将业务的所有功能集中在一个项目中开发，打成一个包部署。\n\n![单体架构](/img/单体架构.png)\n\n**优点：** 架构简单，部署成本低\n\n**缺点：** 耦合度高（维护困难，升级困难）\n\n## 分布式架构\n\n**分布式架构：** 根据业务功能对系统做拆分，每个业务功能模块作为独立项目开发，称为一个服务\n\n![分布式架构](/img/分布式架构.png)\n\n**优点：** 降低服务耦合，有利于服务升级和扩展\n\n**缺点：** 服务调用关系错综复杂\n\n分布式架构虽然降低了服务耦合，但是服务拆分时也有很多问题需要思考：\n\n- 服务拆分的粒度如何界定？\n- 服务之间如何调用？\n- 服务的调用关系如何管理？\n\n**人们需要指定一套行之有效的标准来约束分布式架构。**\n\n## 微服务\n\n**微服务的架构特征：**\n\n- **单一职责：** 微服务拆分粒度更小，每一个服务都对应唯一的业务功能，做到单一职责\n- **自治：** 团队独立、技术独立、数据独立、独立部署和交付\n- **面向服务：** 服务提供统一标准的接口，与语言和技术无关\n- **隔离性强：** 服务调度做和隔离、容错、降级，避免出现级联问题\n\n![微服务](/img/微服务.png)\n\n微服务的上述特性**其实是在给分布式架构指定一个标准**，进一步降低服务之间的耦合度，提供服务的独立性和灵活性。做到高内聚，低耦合。\n\n**因此，可以认为微服务是一种经过良好架构设计的分布式架构方案。**\n\n其中在Java领域最引人注目的就是SpringCloud提供的方案了。[https://spring.io/projects/spring-cloud](https://spring.io/projects/spring-cloud)\n\n\n\n### SpringCloud\n\nSpringCloud是目前国内使用最广泛的微服务架构。官网地址：https://spring.io/projects/spring-cloud\n\nSpringCloud集成了各种微服务功能组件，并基于SpringBoot实现了这些组件的自动装配，从而提供了良好的开箱即用体验。\n\n其中常见的组件包括：\n\n![SpringCloud常用组件](/img/SpringCloud常用组件.png)\n\n另外，SpringCloud底层是依赖于SpringBoot的，并且有版本的兼容关系，如下：\n\n![SpringCloud和SpringBoot的版本兼容关系](/img/SpringCloud和SpringBoot的版本兼容关系.png)\n\n### 内容知识\n\n![需要学习的微服务知识内容](/img/需要学习的微服务知识内容.png)\n\n![技术栈](/img/技术栈.png)\n\n![自动化部署](/img/自动化部署.png)\n\n### 技术栈对比\n\n![技术栈对比](/img/技术栈对比.png)\n\n# 服务拆分\n\n**服务器拆分注意事项**\n\n单一职责：不同微服务，不要重复开发相同业务\n\n数据独立：不要访问其他微服务的数据库\n\n面向服务：将自己的业务暴露为接口，供其他微服务调用\n\n![服务拆分注意事项](/img/服务拆分注意事项.png)\n\ncloude-demo：夫工程，管理依赖\n\n- order-service：订单微服务，负责订单相关业务\n- user-service：用户微服务，负责用户相关业务\n\n要求：\n\n- 订单微服务和用户微服务都必须有**各自的数据库**，相互独立\n- 订单服务和用户服务**都对外暴露Restful的接口\n- 订单服务如果需要查询用户信息，**只能调用用户服务的Restful接口，** 不能查询用户数据库\n\n微服务项目下，打开IDEA的Service，可以很方便地启动。\n\n![Services](/img/Services.png)\n\n启动完成后，访问 http://localhost:8080/order/101\n\n![Services2](/img/Services2.png)\n\n# 远程调用\n\n服务拆分要求：\n\n>订单服务如果需要查询用户信息，**只能调用用户服务的Restful接口**，不能查询用户数据库\n\n因此外卖需要知道Java如何去发送http请求，Spring提供了一个RestTemplate工具，只需要把它创建出来即可。（即注入Bean）\n\n```java\n    @Bean\n    public RestTemplate restTemplate(){\n        return new RestTemplate();\n    }\n```\n\n发送请求，自动序列化为java对象。\n\n```java\n    public Order queryOrderById(Long orderId) {\n        // 1.查询订单\n        Order order = orderMapper.findById(orderId);\n        // 2.利用resttemplate发起http请求，查询用户\n        // 2.1 url路径\n        String url = \"http://localhost:8081/user/\" + order.getUserId();\n        // 2.2 发起http请求，实现远程调用\n        User user = restTemplate.getForObject(url, User.class);\n        // 3.封装user到order\n        order.setUser(user);\n        // 4.返回\n        return order;\n    }\n```\n\n启动完成后，访问：http://localhost:8080/order/101\n\n![启动完成后](/img/Service3.png)\n\n在上面代码的url中，我们可以发现调用服务的地址采用硬编码，这在后续的开发中肯定是不理想的，这就需要**服务注册中心（Eureka）** 来帮我们解决这个事情。\n\n# Eureka\n\n## Eureka注册中心\n\n最广为人知的注册中心就是Eureka，其结构如下：\n![Eureka注册中心](/img/Eureka注册中心.png)\n\n**order-service如何得知user-service实例地址？** \n\n- user-service服务实例启动后，将自己的信息注册到eureka-service（Eureka服务端），也叫**服务注册**\n- eureka-server保存服务名称到服务实例地址列表的映射关系\n- order-service根据服务名称，拉取实例地址列表，这个叫**服务发现**或服务拉取\n\n\n\n**order-service如何从多个user-service实例中选择具体的实例？**\n\norder-service从实例列表中利用**负载均衡算法**选中一个实例地址，向该实例地址发起远程调用\n\n\n\n**order-service如何得知某个user-service实例是否依然健康，是不是已经宕机？**\n\n- user-service会**每隔一段时间（默认30秒）向eureka-server发起请求**，报告自己状态，称为**心跳**\n- 当超过一定时间没有发送心跳时，eureka-server会认为微服务实例故障，将该实例从服务列表中剔除\n- order-service拉取请求时，就能将故障实例排除了\n\n\n\n接下来我们动手实践的步骤包括\n\n![Eureka注册步骤](/img/Eureka注册步骤.png)\n\n## 搭建注册中心\n\n**1、搭建eureka-server**\n\n引入SpringCloud为eureka提供的starter依赖，注意这里是用**server**\n\n```java\n<dependency>\n    <groupId>org.springframework.cloud</groupId>\n    <artifactId>spring-cloud-starter-netflix-eureka-server</artifactId>\n</dependency>\n```\n\n**2、编写启动类**\n\n注意要添加一个<font color=\"red\">@EnableEurekaServer</font>**注解**，开启eureka的**注册中心**功能\n\n```java\npackage com.xn2001.eureka;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.cloud.netflix.eureka.server.EnableEurekaServer;\n\n@SpringBootApplication\n@EnableEurekaServer\npublic class EurekaApplication {\n    public static void main(String[] args) {\n        SpringApplication.run(EurekaApplication.class, args);\n    }\n}\n```\n\n**3、编写配置文件**\n\n编写一个application.yml文件，内容如下：\n\n```java\nserver:\n port: 10086\nspring:\n application:\n  name: eureka-server\neureka:\n client:\n  service-url:\n   defaultZone: http://127.0.0.1::10086/eureka\n```\n\n其中`default-zone`是因为前面配置类开启了注册中心所需要配置的eureka的**地址信息**，因为eureka本事也是一个微服务，这里也要将自己注册起来，当后面eureka**集群**时，这里就可以填写多个，使用“ ；”隔开。\n\n启动完成后，访问 http://localhost:10086/\n\n![Eureka启动成功界面](/img/Eureka启动成功界面.png)\n\n## 服务注册\n\n> 将user-service、order-service都注册到eureka\n\n引入SpringCloud为eureka提供的starter依赖，注意这里是用**client**\n\n```java\n<dependency>\n    <groupId>org.springframework.cloud</groupId>\n    <artifactId>spring-cloud-starter-netflix-eureka-client</artifactId>\n</dependency>\n```\n\n在启动类上添加注解：`@EnableEurekaClient`\n\n在application.yml文件，添加下面的配置：\n\n```java\nspring:\n application:\n  name: userservice\neureka:\n client:\n  service-url:\n   defaultZone: http:127.0.0.1:10086/eureka\n```\n\n3个项目启动后，访问 http://localhost:10086/\n\n![Eureka启动成功界面](/img/Eureka启动成功界面2.png)\n\n这里另外再补充个小技巧，我们可以通过 idea 的多实例启动，来查看 Eureka 的集群效果。\n\n![IDEA多实例调试](/img/IDEA多实例调试.png)\n\n4个项目启动后，访问 http://localhost:10086/\n\n![Eureka4项目启动](/img/Eureka4项目启动.png)\n\n## 服务拉取\n\n> 在order-service中完成服务拉取，然后通过负载均衡挑选一个服务，实践远程调用\n\n下面我们让 order-service 向 eureka-server 拉取 user-service 的信息，实现服务发现。\n\n首先给 `RestTemplate` 这个 Bean 添加一个 `@LoadBalanced` **注解**，用于开启**负载均衡**。（后面会讲）\n\n```java\n@Bean\n@LoadBalanced\npublic RestTemplate restTemplate(){\n    return new RestTemplate();\n}\n```\n\n修改orderService访问的url路径，用**服务名**代替ip、端口\n\n![修改Eureka的url路径](/img/修改Eureka的url路径.png)\n\nspring会自动帮助我们从eureka-server中，根据uservice这个服务名称，获取实例列表后去完成负载均衡。\n\n\n\n# Ribbon\n\n## Ribbon负载均衡\n\n我们添加了`@LoalBalanced`注解，即可实现负载均衡功能，这是什么原理呢？\n\n**SpringCloud底层提供了一个名为Ribbon的组件，来实现负载均衡功能**\n\n![Ribbon负载均衡](/img/Ribbon负载均衡.png)\n\n**1、源码跟踪**\n为什么我们只输入了service名称就可以访问了呢？为什么不需要获取ip和端口，这显然有人帮我们根据service名称，获取到了服务实例的ip和端口，他就是`LoadBalancerInterceptor`，这个类会对RestTemplate的请求进行拦截，然后从Eureka根据服务id获取服务列表，随后根据负载均衡算法得到真实的服务地址信息，替换服务id。\n\n我们进行源码跟踪：\n\n![Interceptor源码跟踪](/img/Interceptor源码跟踪.png)\n\n这里的`intercept()`方法，拦截了用户的HttpRequest请求，然后做了几件事：\n\n- `request.getURL()`：获取请求uri，即http://user-service/user/8\n- `originalUri.getHost()`:获取uri路径的主机名，其实就是服务id`user-service`\n- `this.loadBalancer.execute()`：处理服务id，和用户请求\n\n这里的`this.loadBalancer.execute()`：处理服务id和请求\n\n继续跟人`execute()`方法：\n\n![跟进execute()方法](/img/跟进execute()方法.png)\n\n- `getLoadBalancer(serviceId)`：根据服务id获取\n\n  `IloadBalancer`，而`ILoadBancer`会拿着服务id去eureka中获取服务列表\n\n- `getServer(loadBalancer)`：利用内置的负载均衡算法，从服务列表中选择一个。在图中**可以看到获取了8082端口的服务**\n\n可以看到获取服务时，通过一个`getServer()`方法来做负载均衡：\n\n![getServer负载均衡](/img/getServer负载均衡.png)\n\n我们继续跟入：\n\n![继续跟入](/img/继续跟入.png)\n\n继续跟踪源码 `chooseServer()` 方法，发现这么一段代码：\n\n![跟踪源码 chooseServer()方法](/img/跟踪源码 chooseServer()方法.png)\n\n我们看看这个 `rule` 是谁：\n\n![rule](/img/rule.png)\n\n这里的 rule 默认值是一个 `RoundRobinRule` ，看类的介绍：\n\n![rule默认值](/img/rule默认值.png)\n\n负载均衡默认使用了轮训算法，当然我们也可以自定义。\n\n**2、流程总结**\n\nSpringCloud Ribbon 底层采用了一个拦截器，拦截了 RestTemplate 发出的请求，对地址做了修改。\n\n基本流程如下：\n\n- 拦截我们的 `RestTemplate` 请求 http://userservice/user/1\n- `RibbonLoadBalancerClient` 会从请求url中获取服务名称，也就是 user-service\n- `DynamicServerListLoadBalancer` 根据 user-service 到 eureka 拉取服务列表\n- eureka 返回列表，localhost:8081、localhost:8082\n- `IRule` 利用内置负载均衡规则，从列表中选择一个，例如 localhost:8081\n- `RibbonLoadBalancerClient` 修改请求地址，用 localhost:8081 替代 userservice，得到 http://localhost:8081/user/1，发起真实请求\n\n![robbon流程总结](/img/robbon流程总结.png)\n\n**3、负载均衡策略**\n\n负载均衡的规则都定义在 IRule 接口中，而 IRule 有很多不同的实现类：\n\n![负载均衡策略](/img/负载均衡策略.png)\n\n不同规则的含义如下：\n\n| **内置负载均衡规则类**    | **规则描述**                                                 |\n| :------------------------ | :----------------------------------------------------------- |\n| RoundRobinRule            | 简单轮询服务列表来选择服务器。它是Ribbon默认的负载均衡规则。 |\n| AvailabilityFilteringRule | 对以下两种服务器进行忽略：（1）在默认情况下，这台服务器如果3次连接失败，这台服务器就会被设置为“短路”状态。短路状态将持续30秒，如果再次连接失败，短路的持续时间就会几何级地增加。 （2）并发数过高的服务器。如果一个服务器的并发连接数过高，配置了AvailabilityFilteringRule 规则的客户端也会将其忽略。并发连接数的上限，可以由客户端设置。 |\n| WeightedResponseTimeRule  | 为每一个服务器赋予一个权重值。服务器响应时间越长，这个服务器的权重就越小。这个规则会随机选择服务器，这个权重值会影响服务器的选择。 |\n| **ZoneAvoidanceRule**     | 以区域可用的服务器为基础进行服务器的选择。使用Zone对服务器进行分类，这个Zone可以理解为一个机房、一个机架等。而后再对Zone内的多个服务做轮询。 |\n| BestAvailableRule         | 忽略那些短路的服务器，并选择并发数较低的服务器。             |\n| RandomRule                | 随机选择一个可用的服务器。                                   |\n| RetryRule                 | 重试机制的选择逻辑                                           |\n\n默认的实现就是 `ZoneAvoidanceRule`，**是一种轮询方案**。\n\n**4、自定义策略**\n\n通过定义 IRule 实现可以修改负载均衡规则，有两种方式：\n\n1 代码方式在 order-service 中的 OrderApplication 类中，定义一个新的 IRule：\n\n![自定义策略](/img/自定义策略.png)\n\n2 配置文件方式：在 order-service 的 application.yml 文件中，添加新的配置也可以修改规则：\n\n```java\nuserservice: # 给需要调用的微服务配置负载均衡规则，orderservice服务去调用userservice服务\n  ribbon:\n    NFLoadBalancerRuleClassName: com.netflix.loadbalancer.RandomRule # 负载均衡规则\n```\n\n**注意**：一般用默认的负载均衡规则，不做修改。\n\n**5、饥饿加载**\n\n当我们启动 orderservice，第一次访问时，时间消耗会大很多，这是因为 Ribbon 懒加载的机制。\n\n![/img/第一次访问.png](/img/第一次访问.png)\n\nRibbon 默认是采用懒加载，即第一次访问时才会去创建 LoadBalanceClient，拉取集群地址，所以请求时间会很长。\n\n而饥饿加载则会在项目启动时创建 LoadBalanceClient，降低第一次访问的耗时，通过下面配置开启饥饿加载：\n\n```java\nribbon:\n eager-load:\n  enabled: true\n   clients: userservice # 项目启动时直接去拉取userservice的集群，多个用\",\"隔开\n```\n\n\n\n# Nacos\n\n## Nacos注册中心\n\nSpringCloudAlibaba 推出了一个名为 Nacos 的注册中心，在国外也有大量的使用。\n\n![Nacos注册中心](/img/Nacos注册中心.png)\n\n解压启动Nacos，详细请看[Nacos安装指南](https://www.xn2001.com/archives/661.html)\n\n```makefile\n# 单机启动\nstartup.cmd -m standalone\n```\n\n访问：http://localhost:8848/nacos/\n\n![Nacos启动](/img/Nacos启动.png)\n\n**1、服务注册**\n\n这里上来就直接服务注册，很多东西可能有疑惑，其实 Nacos 本身就是一个 SprintBoot 项目，这点你从启动的控制台打印就可以看出来，所以就不再需要去额外搭建一个像 Eureka 的注册中心。\n\n**引入依赖**\n\n在 cloud-demo 父工程中引入 SpringCloudAlibaba 的依赖：\n\n```java\n<dependency>\n    <groupId>com.alibaba.cloud</groupId>\n    <artifactId>spring-cloud-alibaba-dependencies</artifactId>\n    <version>2.2.6.RELEASE</version>\n    <type>pom</type>\n    <scope>import</scope>\n</dependency>\n```\n\n然后在 user-service 和 order-service 中的pom文件中引入 nacos-discovery 依赖：\n\n```java\n<dependency>\n    <groupId>com.alibaba.cloud</groupId>\n    <artifactId>spring-cloud-starter-alibaba-nacos-discovery</artifactId>\n</dependency>\n```\n\n**配置nacos地址**\n\n在 user-service 和 order-service 的 application.yml 中添加 nacos 地址：\n\n```java\nspring:\n cloud:\n  nacos:\n   server-addr: 127.0.0.1:8848\n```\n\n项目重新启动后，可以看到三个服务都被注册进了 Nacos\n\n![Nacos注册](/img/Nacos注册.png)\n\n浏览器访问：http://localhost:8080/order/101，正常访问，同时负载均衡也正常。\n\n## 分级存储模型\n\n一个**服务**可以有多个**实例**，例如我们的 user-service，可以有:\n\n- 127.0.0.1:8081\n- 127.0.0.1:8082\n- 127.0.0.1:8083\n\n假如这些实例分布于全国各地的不同机房，例如：\n\n- 127.0.0.1:8081，在上海机房\n- 127.0.0.1:8082，在上海机房\n- 127.0.0.1:8083，在杭州机房\n\nNacos就将同一机房内的实例，划分为一个**集群**。\n\n![Nacos集群](/img/Nacos集群.png)\n\n微服务互相访问时，应该尽可能访问同集群实例，因为本地访问速度更快。**当本集群内不可用时，才访问其它集群。**例如：杭州机房内的 order-service 应该优先访问同机房的 user-service。\n\n![微服务集群访问](/img/微服务集群访问.png)\n\n**配置集群**\n\n接下来我们给 user-service **配置集群**\n\n修改 user-service 的 application.yml 文件，添加集群配置：\n\n```java\nspring:\n cloud:\n  nacos:\n   server-addr: localhost:8848\n   discovery:\n    cluster-name: HZ # 集群名称 HZ杭州\n```\n\n重启两个 user-service 实例后，我们再去启动一个上海集群的实例。\n\n```java\n-Dserver.port=8083 -Dspring.cloud.nacos.discovery.cluster-name=SH\n```\n\n![再次启动集群实例](/img/再次启动集群实例.png)\n\n查看 nacos 控制台\n\n![查看nacos控制台](/img/查看nacos控制台.png)\n\n## NacosRule\n\nRibbon的默认实现 `ZoneAvoidanceRule` 并不能实现根据同集群优先来实现负载均衡，我们把规则改成 **NacosRule** 即可。我们是用 orderservice 调用 userservice，所以在 orderservice 配置规则。\n\n```java\n@Bean\npublic IRule iRule(){\n\t//默认为轮询规则，这里自定义为随机规则\n\treturn new NacosRule();\n}\n```\n\n另外，你同样可以使用配置的形式来完成，具体参考上面的 Ribbon 栏目。\n\n```java\nuserservice:\n ribbon:\n  NFLoadBalancerRuleClassName: com.alibaba.cloud.nacos.ribbon.NacosRule #负载均衡规则 \n```\n\n然后，再对 orderservice 配置集群。\n\n```java\nspring:\n cloud:\n  nacos:\n   server-addr: localhost:8848\n   discovery:\n    cluster-name: HZ # 集群名称\n```\n\n现在我启动了四个服务，分别是：\n\n- orderservice - HZ\n- userservice - HZ\n- userservice1 - HZ\n- userservice2 - SH\n\n访问地址：http://localhost:8080/order/101\n\n在访问中我们发现，只有同在一个 HZ 集群下的 userservice、userservice1 会被调用，并且是随机的。\n\n我们试着把 userservice、userservice2 停掉。依旧可以访问。\n\n在 userservice3 控制台可以看到发出了一串的警告，因为 orderservice 本身是在 HZ 集群的，这波 HZ 集群没有了 userservice，就会去别的集群找。\n\n![nacos集群警告](/img/nacos集群警告.png)\n\n## 权重配置\n\n实际部署中会出现这样的场景：\n\n服务器设备性能有差异，部分实例所在机器性能较好，另一些较差，我们希望性能好的机器承担更多的用户请求。但默认情况下 NacosRule 是同集群内随机挑选，不会考虑机器的性能问题。\n\n因此，Nacos 提供了**权重配置来控制访问频率**，0~1 之间，权重越大则访问频率越高，权重修改为 0，则该实例永远不会被访问。\n\n在 Nacos 控制台，找到 user-service 的实例列表，点击编辑，即可修改权重。\n\n![nacos权限配置](/img/nacos权限配置.png)\n\n在弹出的编辑窗口，修改权重\n\n![nacos修改权重](/img/nacos修改权重.png)\n\n另外，在服务升级的时候，有一种较好的方案：我们也可以通过调整权重来进行平滑升级，例如：先把 userservice 权重调节为 0，让用户先流向 userservice2、userservice3，升级 userservice后，再把权重从 0 调到 0.1，让一部分用户先体验，用户体验稳定后就可以往上调权重啦。\n\n## 环境隔离\n\nNacos 提供了 namespace 来实现环境隔离功能。\n\n- Nacos 中可以有多个 namespace\n- namespace 下可以有 group、service 等\n- 不同 namespace 之间**相互隔离**，例如不同 namespace 的服务互相不可见\n\n![环境隔离](/img/环境隔离.png)\n\n**1、创建namespace**\n\n默认情况下，所有 service、data、group 都在同一个 namespace，名为 public(保留空间)：\n\n![创建namespace](/img/创建namespace.png)\n\n我们可以点击页面新增按钮，添加一个 namespace：\n\n![添加namespace](/img/添加namespace.png)\n\n然后，填写表单：\n\n![填写表单](/img/填写表单.png)\n\n就能在页面看到一个新的 namespace：\n\n![新的namespace](/img/新的namespace.png)\n\n**2、配置namespace**\n\n给微服务配置 namespace 只能通过修改配置来实现。\n\n例如，修改 order-service 的 application.yml 文件：\n\n```java\nspring:\n cloud:\n  nacos:\n   server-addr: localhost:8848\n   discovery:\n    cluster-name: HZ\n    namespace: 492a7d5d-237b-46a1-a99a-fa8e98e4b0f9 # 命名空间ID\n```\n\n重启 order-service 后，访问控制台。\n\n**public**\n\n![public](/img/public.png)\n\n**dev**\n\n![dev](/img/dev.png)\n\n此时访问 order-service，因为 namespace 不同，会导致找不到 userservice，控制台会报错：\n\n![控制台报](/img/控制台报错.png)\n\n## 临时实例\n\nNacos 的服务实例分为两种类型：\n\n- **临时实例**：如果实例宕机超过一定时间，会从服务列表剔除，**默认的类型**。\n- 非临时实例：如果实例宕机，不会从服务列表剔除，也可以叫永久实例。\n\n配置一个服务实例为永久实例：\n\n```java\nspring:\n cloud:\n  nacos:\n   discovery:\n    ephemeral: false # 设置为非临时实例\n```\n\n另外，Nacos 集群**默认采用AP方式(可用性)**，当集群中存在非临时实例时，**采用CP模式(一致性)**；而 Eureka 采用AP方式，不可切换。（这里说的是 CAP 原理，后面会写到）\n\n## Nacos配置中心\n\nNacos除了可以做注册中心，同样可以做配置管理来使用。\n\n当微服务部署的实例越来越多，达到数十、数百时，逐个修改微服务配置就会让人抓狂，而且很容易出错。**我们需要一种统一配置管理方案，可以集中管理所有实例的配置。**\n\n![Nacos配置中心](/img/Nacos配置中心.png)\n\n**创建配置**\n\n在 Nacos 控制面板中添加配置文件\n\n![添加配置文件](/img/添加配置文件.png)\n\n然后在弹出的表单中，填写配置信息：\n\n![填写配置信息](/img/填写配置信息.png)\n\n**注意**：项目的核心配置，需要热更新的配置才有放到 nacos 管理的必要。基本不会变更的一些配置(例如数据库连接)还是保存在微服务本地比较好。\n\n**拉取配置**\n\n首先我们需要了解 Nacos 读取配置文件的环节是在哪一步，在没加入 Nacos 配置之前，获取配置是这样：\n\n![获取配置](/img/获取配置.png)\n\n加入 Nacos 配置，它的读取是在 application.yml 之前的：\n\n![加入Nacos配置后](/img/加入Nacos配置后.png)\n\n这时候如果把 nacos 地址放在 application.yml 中，显然是不合适的，**Nacos 就无法根据地址去获取配置了。**\n\n因此，nacos 地址必须放在优先级最高的 bootstrap.yml 文件。\n\n![bootstrap.yml](/img/bootstrapyml.png)\n\n**引入 nacos-config 依赖**\n\n首先，在 user-service 服务中，引入 nacos-config 的客户端依赖：\n\n```java\n<!--nacos配置管理依赖-->\n<dependency>\n    <groupId>com.alibaba.cloud</groupId>\n    <artifactId>spring-cloud-starter-alibaba-nacos-config</artifactId>\n</dependency>\n```\n\n**添加 bootstrap.yml**\n\n然后，在 user-service 中添加一个 bootstrap.yml 文件，内容如下：\n\n```java\nspring:\n  application:\n    name: userservice # 服务名称\n  profiles:\n    active: dev #开发环境，这里是dev \n  cloud:\n    nacos:\n      server-addr: localhost:8848 # Nacos地址\n      config:\n        file-extension: yaml # 文件后缀名\n```\n\n根据 spring.cloud.nacos.server-addr 获取 nacos地址，再根据`${spring.application.name}-${spring.profiles.active}.${spring.cloud.nacos.config.file-extension}`作为文件id，来读取配置。\n\n在这个例子例中，就是去读取 `userservice-dev.yaml`\n\n![nacos配置映射关系](/img/nacos配置映射关系.png)\n\n使用代码来验证是否拉取成功\n\n在 user-service 中的 UserController 中添加业务逻辑，读取 pattern.dateformat 配置并使用：\n\n```java\n@Value(\"${pattern.dateformat}\")\nprivate String dateformat;\n\n@GetMapping(\"now\")\npublic String now(){\n    //格式化时间\n    return LocalDateTime.now().format(DateTimeFormatter.ofPattern(dateformat));\n}\n```\n\n![代码验证](/img/代码验证.png)\n\n启动服务后，访问：http://localhost:8081/user/now\n\n![启动示意图](/img/启动示意图.png)\n\n## 配置共享\n\n其实在服务启动时，nacos 会读取多个配置文件，例如：\n\n- `[spring.application.name]-[spring.profiles.active].yaml`，例如：userservice-dev.yaml\n- `[spring.application.name].yaml`，例如：userservice.yaml\n\n这里的 `[spring.application.name].yaml` 不包含环境，**因此可以被多个环境共享**。\n\n**添加一个环境共享配置**\n\n我们在 nacos 中添加一个 userservice.yaml 文件：\n\n![添加一个环境共享配置](/img/添加一个环境共享配置.png)\n\n**在 user-service 中读取共享配置**\n\n在 user-service 服务中，修改 PatternProperties 类，读取新添加的属性：\n\n![读取新添加的属性](/img/读取新添加的属性.png)\n\n在 user-service 服务中，修改 UserController，添加一个方法：\n\n![添加一个方法](/img/添加一个方法.png)\n\n**运行两个 UserApplication，使用不同的profile**\n\n修改 UserApplication2 这个启动项，改变其profile值：\n\n![使用不同的profile](/img/使用不同的profile.png)\n\n![使用不同的profile2](/img/使用不同的profile2.png)\n\n这样，UserApplication(8081) 使用的 profile 是 dev，UserApplication2(8082) 使用的 profile 是test\n\n启动 UserApplication 和 UserApplication2\n\n访问地址：http://localhost:8081/user/prop，结果：\n\n![使用不同的配置结果](/img/使用不同的配置结果1.png)\n\n访问地址：http://localhost:8082/user/prop，结果：\n\n![使用不同的配置结果](/img/使用不同的配置结果2.png)\n\n可以看出来，不管是 dev，还是 test 环境，都读取到了 envSharedValue 这个属性的值。\n\n上面的都是同一个微服务下，**那么不同微服务之间可以环境共享吗？**\n\n通过下面的两种方式来指定：\n\n- extension-configs\n- shared-configs\n\n```java\nspring: \n  cloud:\n    nacos:\n      config:\n        file-extension: yaml # 文件后缀名\n        extends-configs: # 多微服务间共享的配置列表\n          - dataId: common.yaml # 要共享的配置文件id\n```\n\n```java\nspring: \n  cloud:\n    nacos:\n      config:\n        file-extension: yaml # 文件后缀名\n        shared-configs: # 多微服务间共享的配置列表\n          - dataId: common.yaml # 要共享的配置文件id\n```\n\n**配置优先级**\n\n当 nacos、服务本地同时**出现相同属性时**，优先级有高低之分。\n\n![优先级有高低之分](/img/优先级有高低之分.png)\n\n更细致的配置\n\n![更细致的配置](/img/更细致的配置.png)\n\n## Nacos集群\n\n**架构介绍**\n\n![架构介绍](/img/架构介绍.png)\n\n其中包含 3 个Nacos 节点，然后一个负载均衡器 Nginx 代理 3 个 Nacos，我们计划的 Nacos 集群如下图，MySQL 的主从复制后续再添加。\n\n![计划的Nacos集群](/img/计划的Nacos集群.png)\n\n三个 Nacos 节点的地址\n\n| 节点   | ip            | port |\n| :----- | :------------ | :--- |\n| nacos1 | 192.168.150.1 | 8845 |\n| nacos2 | 192.168.150.1 | 8846 |\n| nacos3 | 192.168.150.1 | 8847 |\n\n## 初始化数据库\n\nNacos 默认数据存储在内嵌数据库 Derby 中，不属于生产可用的数据库。官方推荐的最佳实践是使用带有主从的高可用数据库集群，主从模式的高可用数据库。这里我们以单点的数据库为例。\n\n首先新建一个数据库，命名为 nacos，而后导入下面的 SQL\n\n```mysql\nCREATE TABLE `config_info` (\n  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT 'id',\n  `data_id` varchar(255) NOT NULL COMMENT 'data_id',\n  `group_id` varchar(255) DEFAULT NULL,\n  `content` longtext NOT NULL COMMENT 'content',\n  `md5` varchar(32) DEFAULT NULL COMMENT 'md5',\n  `gmt_create` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',\n  `gmt_modified` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '修改时间',\n  `src_user` text COMMENT 'source user',\n  `src_ip` varchar(50) DEFAULT NULL COMMENT 'source ip',\n  `app_name` varchar(128) DEFAULT NULL,\n  `tenant_id` varchar(128) DEFAULT '' COMMENT '租户字段',\n  `c_desc` varchar(256) DEFAULT NULL,\n  `c_use` varchar(64) DEFAULT NULL,\n  `effect` varchar(64) DEFAULT NULL,\n  `type` varchar(64) DEFAULT NULL,\n  `c_schema` text,\n  PRIMARY KEY (`id`),\n  UNIQUE KEY `uk_configinfo_datagrouptenant` (`data_id`,`group_id`,`tenant_id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT='config_info';\n\n/******************************************/\n/*   数据库全名 = nacos_config   */\n/*   表名称 = config_info_aggr   */\n/******************************************/\nCREATE TABLE `config_info_aggr` (\n  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT 'id',\n  `data_id` varchar(255) NOT NULL COMMENT 'data_id',\n  `group_id` varchar(255) NOT NULL COMMENT 'group_id',\n  `datum_id` varchar(255) NOT NULL COMMENT 'datum_id',\n  `content` longtext NOT NULL COMMENT '内容',\n  `gmt_modified` datetime NOT NULL COMMENT '修改时间',\n  `app_name` varchar(128) DEFAULT NULL,\n  `tenant_id` varchar(128) DEFAULT '' COMMENT '租户字段',\n  PRIMARY KEY (`id`),\n  UNIQUE KEY `uk_configinfoaggr_datagrouptenantdatum` (`data_id`,`group_id`,`tenant_id`,`datum_id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT='增加租户字段';\n\n\n/******************************************/\n/*   数据库全名 = nacos_config   */\n/*   表名称 = config_info_beta   */\n/******************************************/\nCREATE TABLE `config_info_beta` (\n  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT 'id',\n  `data_id` varchar(255) NOT NULL COMMENT 'data_id',\n  `group_id` varchar(128) NOT NULL COMMENT 'group_id',\n  `app_name` varchar(128) DEFAULT NULL COMMENT 'app_name',\n  `content` longtext NOT NULL COMMENT 'content',\n  `beta_ips` varchar(1024) DEFAULT NULL COMMENT 'betaIps',\n  `md5` varchar(32) DEFAULT NULL COMMENT 'md5',\n  `gmt_create` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',\n  `gmt_modified` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '修改时间',\n  `src_user` text COMMENT 'source user',\n  `src_ip` varchar(50) DEFAULT NULL COMMENT 'source ip',\n  `tenant_id` varchar(128) DEFAULT '' COMMENT '租户字段',\n  PRIMARY KEY (`id`),\n  UNIQUE KEY `uk_configinfobeta_datagrouptenant` (`data_id`,`group_id`,`tenant_id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT='config_info_beta';\n\n/******************************************/\n/*   数据库全名 = nacos_config   */\n/*   表名称 = config_info_tag   */\n/******************************************/\nCREATE TABLE `config_info_tag` (\n  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT 'id',\n  `data_id` varchar(255) NOT NULL COMMENT 'data_id',\n  `group_id` varchar(128) NOT NULL COMMENT 'group_id',\n  `tenant_id` varchar(128) DEFAULT '' COMMENT 'tenant_id',\n  `tag_id` varchar(128) NOT NULL COMMENT 'tag_id',\n  `app_name` varchar(128) DEFAULT NULL COMMENT 'app_name',\n  `content` longtext NOT NULL COMMENT 'content',\n  `md5` varchar(32) DEFAULT NULL COMMENT 'md5',\n  `gmt_create` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',\n  `gmt_modified` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '修改时间',\n  `src_user` text COMMENT 'source user',\n  `src_ip` varchar(50) DEFAULT NULL COMMENT 'source ip',\n  PRIMARY KEY (`id`),\n  UNIQUE KEY `uk_configinfotag_datagrouptenanttag` (`data_id`,`group_id`,`tenant_id`,`tag_id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT='config_info_tag';\n\n/******************************************/\n/*   数据库全名 = nacos_config   */\n/*   表名称 = config_tags_relation   */\n/******************************************/\nCREATE TABLE `config_tags_relation` (\n  `id` bigint(20) NOT NULL COMMENT 'id',\n  `tag_name` varchar(128) NOT NULL COMMENT 'tag_name',\n  `tag_type` varchar(64) DEFAULT NULL COMMENT 'tag_type',\n  `data_id` varchar(255) NOT NULL COMMENT 'data_id',\n  `group_id` varchar(128) NOT NULL COMMENT 'group_id',\n  `tenant_id` varchar(128) DEFAULT '' COMMENT 'tenant_id',\n  `nid` bigint(20) NOT NULL AUTO_INCREMENT,\n  PRIMARY KEY (`nid`),\n  UNIQUE KEY `uk_configtagrelation_configidtag` (`id`,`tag_name`,`tag_type`),\n  KEY `idx_tenant_id` (`tenant_id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT='config_tag_relation';\n\n/******************************************/\n/*   数据库全名 = nacos_config   */\n/*   表名称 = group_capacity   */\n/******************************************/\nCREATE TABLE `group_capacity` (\n  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT COMMENT '主键ID',\n  `group_id` varchar(128) NOT NULL DEFAULT '' COMMENT 'Group ID，空字符表示整个集群',\n  `quota` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '配额，0表示使用默认值',\n  `usage` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '使用量',\n  `max_size` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '单个配置大小上限，单位为字节，0表示使用默认值',\n  `max_aggr_count` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '聚合子配置最大个数，，0表示使用默认值',\n  `max_aggr_size` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '单个聚合数据的子配置大小上限，单位为字节，0表示使用默认值',\n  `max_history_count` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '最大变更历史数量',\n  `gmt_create` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',\n  `gmt_modified` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '修改时间',\n  PRIMARY KEY (`id`),\n  UNIQUE KEY `uk_group_id` (`group_id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT='集群、各Group容量信息表';\n\n/******************************************/\n/*   数据库全名 = nacos_config   */\n/*   表名称 = his_config_info   */\n/******************************************/\nCREATE TABLE `his_config_info` (\n  `id` bigint(64) unsigned NOT NULL,\n  `nid` bigint(20) unsigned NOT NULL AUTO_INCREMENT,\n  `data_id` varchar(255) NOT NULL,\n  `group_id` varchar(128) NOT NULL,\n  `app_name` varchar(128) DEFAULT NULL COMMENT 'app_name',\n  `content` longtext NOT NULL,\n  `md5` varchar(32) DEFAULT NULL,\n  `gmt_create` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  `gmt_modified` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  `src_user` text,\n  `src_ip` varchar(50) DEFAULT NULL,\n  `op_type` char(10) DEFAULT NULL,\n  `tenant_id` varchar(128) DEFAULT '' COMMENT '租户字段',\n  PRIMARY KEY (`nid`),\n  KEY `idx_gmt_create` (`gmt_create`),\n  KEY `idx_gmt_modified` (`gmt_modified`),\n  KEY `idx_did` (`data_id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT='多租户改造';\n\n\n/******************************************/\n/*   数据库全名 = nacos_config   */\n/*   表名称 = tenant_capacity   */\n/******************************************/\nCREATE TABLE `tenant_capacity` (\n  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT COMMENT '主键ID',\n  `tenant_id` varchar(128) NOT NULL DEFAULT '' COMMENT 'Tenant ID',\n  `quota` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '配额，0表示使用默认值',\n  `usage` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '使用量',\n  `max_size` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '单个配置大小上限，单位为字节，0表示使用默认值',\n  `max_aggr_count` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '聚合子配置最大个数',\n  `max_aggr_size` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '单个聚合数据的子配置大小上限，单位为字节，0表示使用默认值',\n  `max_history_count` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '最大变更历史数量',\n  `gmt_create` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',\n  `gmt_modified` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '修改时间',\n  PRIMARY KEY (`id`),\n  UNIQUE KEY `uk_tenant_id` (`tenant_id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT='租户容量信息表';\n\n\nCREATE TABLE `tenant_info` (\n  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT 'id',\n  `kp` varchar(128) NOT NULL COMMENT 'kp',\n  `tenant_id` varchar(128) default '' COMMENT 'tenant_id',\n  `tenant_name` varchar(128) default '' COMMENT 'tenant_name',\n  `tenant_desc` varchar(256) DEFAULT NULL COMMENT 'tenant_desc',\n  `create_source` varchar(32) DEFAULT NULL COMMENT 'create_source',\n  `gmt_create` bigint(20) NOT NULL COMMENT '创建时间',\n  `gmt_modified` bigint(20) NOT NULL COMMENT '修改时间',\n  PRIMARY KEY (`id`),\n  UNIQUE KEY `uk_tenant_info_kptenantid` (`kp`,`tenant_id`),\n  KEY `idx_tenant_id` (`tenant_id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT='tenant_info';\n\nCREATE TABLE `users` (\n    `username` varchar(50) NOT NULL PRIMARY KEY,\n    `password` varchar(500) NOT NULL,\n    `enabled` boolean NOT NULL\n);\n\nCREATE TABLE `roles` (\n    `username` varchar(50) NOT NULL,\n    `role` varchar(50) NOT NULL,\n    UNIQUE INDEX `idx_user_role` (`username` ASC, `role` ASC) USING BTREE\n);\n\nCREATE TABLE `permissions` (\n    `role` varchar(50) NOT NULL,\n    `resource` varchar(255) NOT NULL,\n    `action` varchar(8) NOT NULL,\n    UNIQUE INDEX `uk_role_permission` (`role`,`resource`,`action`) USING BTREE\n);\n\nINSERT INTO users (username, password, enabled) VALUES ('nacos', '$2a$10$EuWPZHzz32dJN7jexM34MOeYirDdFAZm2kuWj7VEOJhhZkDrxfvUu', TRUE);\n\nINSERT INTO roles (username, role) VALUES ('nacos', 'ROLE_ADMIN');\n```\n\n**配置Nacos**\n\n进入 nacos 的 conf 目录，修改配置文件 cluster.conf.example，重命名为 cluster.conf\n\n![修改配置文件](/img/修改配置文件.png)\n\n添加内容\n\n```java\n127.0.0.1:8845\n127.0.0.1.8846\n127.0.0.1.8847\n```\n\n然后修改 application.properties 文件，添加数据库配置\n\n```java\nspring.datasource.platform=mysql\ndb.num=1\ndb.url.0=jdbc:mysql://127.0.0.1:3306/nacos?characterEncoding=utf8&connectTimeout=1000&socketTimeout=3000&autoReconnect=true&useUnicode=true&useSSL=false&serverTimezone=UTC\ndb.user.0=root\ndb.password.0=123456\n```\n\n将 nacos 文件夹复制三份，分别命名为：nacos1、nacos2、nacos3\n\n![将nacos文件夹复制三份](/img/将nacos文件夹复制三份.png)\n\n然后分别修改三个文件夹中的 application.properties，\n\nnacos1\n\n```properties\nserver.port=8845\n```\n\nnacos2\n\n```properties\nserver.port=8846\n```\n\nnacos3\n\n```properties\nserver.port=8847\n```\n\n然后分别启动三个 nacos\n\n```\nstartup.cmd\n```\n\n**Nginx反向代理**\n\n修改 nginx 文件夹下的 conf/nginx.conf 文件，配置如下\n\n```nginx\nupstream nacos-cluster {\n    server 127.0.0.1:8845;\n    server 127.0.0.1:8846;\n    server 127.0.0.1:8847;\n}\n\nserver {\n    listen       80;\n    server_name  localhost;\n\n    location /nacos {\n        proxy_pass http://nacos-cluster;\n    }\n}\n```\n\n启动 nginx，在浏览器访问：http://localhost/nacos\n\n在代码中的 application.yml 文件配置改为如下：\n\n```yaml\nspring:\n  cloud:\n    nacos:\n      server-addr: localhost:80 # Nacos地址\n```\n\n实际部署时，需要给做反向代理的 Nginx 服务器设置一个域名，这样后续如果有服务器迁移 Nacos 的客户端也无需更改配置。Nacos 的各个节点应该部署到多个不同服务器，做好容灾和隔离工作。\n\n\n\n# Feign\n\n我们以前利用 RestTemplate 发起远程调用的代码：\n\n![利用RestTemplate发起远程调用](/img/利用RestTemplate发起远程调用.png)\n\n- 代码可读性差，编程体验不统一\n- 参数复杂URL难以维护\n\nFeign 是一个声明式的 http 客户端，官方地址：https://github.com/OpenFeign/feign\n\n其作用就是帮助我们**优雅的实现 http 请求的发送**，解决上面提到的问题。\n\n![feign作用](/img/feign作用.png)\n\n## Feign使用\n\n**引入依赖**\n\n我们在 order-service 引入 feign 依赖：\n\n```xml\n<dependency>\n    <groupId>org.springframework.cloud</groupId>\n    <artifactId>spring-cloud-starter-openfeign</artifactId>\n</dependency>\n```\n\n**添加注解**\n\n在 order-service 启动类添加注解开启 Feign\n\n![注解开启Feign](/img/注解开启Feign.png)\n\n**请求接口**\n\n在 order-service 中新建一个接口，内容如下\n\n```java\npackage com.xn2001.order.client;\n\nimport com.xn2001.order.pojo.User;\nimport org.springframework.cloud.openfeign.FeignClient;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.PathVariable;\n\n@FeignClient(\"userservice\")\npublic interface UserClient {\n    @GetMapping(\"/user/{id}\")\n    User findById(@PathVariable(\"id\") Long id);\n}\n```\n\n`@FeignClient(\"userservice\")`：其中参数填写的是微服务名\n\n`@GetMapping(\"/user/{id}\")`：其中参数填写的是请求路径\n\n这个客户端主要是基于 SpringMVC 的注解 `@GetMapping` 来声明远程调用的信息\n\nFeign 可以帮助我们发送 http 请求，无需自己使用 RestTemplate 来发送了。\n\n**测试**\n\n```java\n@Autowired\nprivate UserClient userClient;\n\npublic Order queryOrderAndUserById(Long orderId) {\n    // 1.查询订单\n    Order order = orderMapper.findById(orderId);\n    // TODO: 2021/8/20 使用feign远程调用\n    User user = userClient.findById(order.getUserId());\n    // 3. 将用户信息封装进订单\n    order.setUser(user);\n    // 4.返回\n    return order;\n}\n```\n\n## 自定义配置\n\nFeign 可以支持很多的自定义配置，如下表所示：\n\n| 类型                   | 作用             | 说明                                                   |\n| :--------------------- | :--------------- | :----------------------------------------------------- |\n| **feign.Logger.Level** | 修改日志级别     | 包含四种不同的级别：NONE、BASIC、HEADERS、FULL         |\n| feign.codec.Decoder    | 响应结果的解析器 | http远程调用的结果做解析，例如解析json字符串为java对象 |\n| feign.codec.Encoder    | 请求参数编码     | 将请求参数编码，便于通过http请求发送                   |\n| feign.Contract         | 支持的注解格式   | 默认是SpringMVC的注解                                  |\n| feign.Retryer          | 失败重试机制     | 请求失败的重试机制，默认是没有，不过会使用Ribbon的重试 |\n\n一般情况下，默认值就能满足我们使用，如果要自定义时，只需要创建自定义的 @Bean 覆盖默认 Bean 即可。下面以日志为例来演示如何自定义配置。\n\n基于配置文件修改 feign 的日志级别可以针对单个服务：\n\n```yaml\nfeign:  \n  client:\n    config: \n      userservice: # 针对某个微服务的配置\n        loggerLevel: FULL #  日志级别 \n```\n\n**也可以针对所有服务**：\n\n```yaml\nfeign:  \n  client:\n    config: \n      default: # 这里用default就是全局配置，如果是写服务名称，则是针对某个微服务的配置\n        loggerLevel: FULL #  日志级别 \n```\n\n而日志的级别分为四种：\n\n- NONE：不记录任何日志信息，这是默认值。\n- BASIC：仅记录请求的方法，URL以及响应状态码和执行时间\n- HEADERS：在BASIC的基础上，额外记录了请求和响应的头信息\n- FULL：记录所有请求和响应的明细，包括头信息、请求体、元数据\n\n也可以基于 **Java 代码**来修改日志级别，先声明一个类，然后声明一个 Logger.Level 的对象\n\n```java\npublic class DefaultFeignConfiguration  {\n    @Bean\n    public Logger.Level feignLogLevel(){\n        return Logger.Level.BASIC; // 日志级别为BASIC\n    }\n}\n```\n\n如果要**全局生效**，将其放到启动类的 `@EnableFeignClients` 这个注解中：\n\n```java\n@EnableFeignClients(defaultConfiguration = DefaultFeignConfiguration .class) \n```\n\n如果是**局部生效**，则把它放到对应的 `@FeignClient` 这个注解中：\n\n```java\n@FeignClient(value = \"userservice\", configuration = DefaultFeignConfiguration .class) \n```\n\n## 性能优化\n\nFeign 底层发起 http 请求，依赖于其它的框架。其底层客户端实现有：\n\n- **URLConnection**：默认实现，不支持连接池\n- **Apache HttpClient** ：支持连接池\n- **OKHttp**：支持连接池\n\n因此提高 Feign 性能的主要手段就是使用**连接池**代替默认的 URLConnection\n\n另外，日志级别应该尽量用 basic/none，可以有效提高性能。\n\n**这里我们用 Apache 的HttpClient来演示连接池。**\n\n在 order-service 的 pom 文件中引入 HttpClient 依赖\n\n```xml\n<!--httpClient的依赖 -->\n<dependency>\n    <groupId>io.github.openfeign</groupId>\n    <artifactId>feign-httpclient</artifactId>\n</dependency>\n```\n\n**配置连接池**\n\n在 order-service 的 application.yml 中添加配置\n\n```yaml\nfeign:\n  client:\n    config:\n      default: # default全局的配置\n        loggerLevel: BASIC # 日志级别，BASIC就是基本的请求和响应信息\n  httpclient:\n    enabled: true # 开启feign对HttpClient的支持\n    max-connections: 200 # 最大的连接数\n    max-connections-per-route: 50 # 每个路径的最大连接数\n```\n\n在 FeignClientFactoryBean 中的 loadBalance 方法中打断点\n\n![loadBalance](/img/loadBalance.png)\n\nDebug 方式启动 order-service 服务，可以看到这里的 client，底层就是 HttpClient\n\n![HttpClient](/img/HttpClient.png)\n\n## 最佳实践\n\n**继承方式**\n\n一样的代码可以通过继承来共享：\n\n1）定义一个 API 接口，利用定义方法，并基于 SpringMVC 注解做声明\n\n2）Feign 客户端、Controller 都集成该接口\n\n![最佳实践](/img/最佳实践.png)\n\n优点\n\n- 简单\n- 实现了代码共享\n\n缺点\n\n- 服务提供方、服务消费方紧耦合\n- 参数列表中的注解映射并不会继承，因此 Controller 中必须再次声明方法、参数列表、注解\n\n**抽取方式**\n\n将 FeignClient 抽取为独立模块，并且把接口有关的 pojo、默认的 Feign 配置都放到这个模块中，提供给所有消费者使用。\n\n例如：将 UserClient、User、Feign 的默认配置都抽取到一个 feign-api 包中，所有微服务引用该依赖包，即可直接使用。\n\n![抽取方式](/img/抽取方式.png)\n\n接下来我们就用该方法在代码中实现\n\n**首先创建一个 module，命名为 feign-api**\n\n![feign-api](/img/feign-api.png)\n\n在 feign-api 中然后引入依赖\n\n```xml\n<dependency>\n    <groupId>org.springframework.cloud</groupId>\n    <artifactId>spring-cloud-starter-openfeign</artifactId>\n</dependency>\n```\n\norder-service中 的 UserClient、User 都复制到 feign-api 项目中\n\n![feign-api修改](/img/feign-api修改.png)\n\n接下来在 order-service 中使用 feign-api\n\n由于我们已经将 UserClient、User 放在 fegin-api 中共享了 ，所以可以删除 order-service 中的 UserClient、User，然后在 order-service 中引入 feign-api\n\n```xml\n<dependency>\n    <groupId>com.xn2001.feign</groupId>\n    <artifactId>feign-api</artifactId>\n    <version>1.0</version>\n</dependency>\n```\n\n**修改注解**\n\n当定义的 FeignClient 不在 SpringBootApplication 的扫描包范围下时，这些 FeignClient 就不能使用。\n\n修改 order-service 启动类上的 `@EnableFeignClients` 注解\n\n```java\n@EnableFeignClients(basePackages = \"com.xn2001.feign.clients\")\n```\n\n# Gateway\n\nSpring Cloud Gateway 是 Spring Cloud 的一个全新项目，该项目是基于 Spring 5.0，Spring Boot 2.0 和 Project Reactor 等响应式编程和事件流技术开发的网关，它旨在为微服务架构提供一种简单有效的统一的 API 路由管理方式。\n\nGateway 网关是我们服务的守门神，**所有微服务的统一入口。**\n\n网关的**核心功能特性**：\n\n- 请求路由\n- 权限控制\n- 限流\n\n![Gateway网关](/img/Gateway网关.png)\n\n**权限控制**：网关作为微服务入口，需要校验用户是是否有请求资格，如果没有则进行拦截。\n\n**路由和负载均衡**：一切请求都必须先经过 gateway，但网关不处理业务，而是根据某种规则，把请求转发到某个微服务，这个过程叫做路由。当然路由的目标服务有多个时，还需要做负载均衡。\n\n**限流**：当请求流量过高时，在网关中按照下流的微服务能够接受的速度来放行请求，避免服务压力过大。\n\n在 SpringCloud 中网关的实现包括两种：\n\n- gateway\n- zuul\n\nZuul 是基于 Servlet 实现，属于阻塞式编程。而 Spring Cloud Gateway 则是基于 Spring5 中提供的WebFlux，属于响应式编程的实现，具备更好的性能。\n\n## 入门使用\n\n1. 创建 SpringBoot 工程 gateway，引入网关依赖\n2. 编写启动类\n3. 编写基础配置和路由规则\n4. 启动网关服务进行测试\n\n```xml\n<!--网关-->\n<dependency>\n    <groupId>org.springframework.cloud</groupId>\n    <artifactId>spring-cloud-starter-gateway</artifactId>\n</dependency>\n<!--nacos服务发现依赖-->\n<dependency>\n    <groupId>com.alibaba.cloud</groupId>\n    <artifactId>spring-cloud-starter-alibaba-nacos-discovery</artifactId>\n</dependency>\n```\n\n创建 application.yml 文件，内容如下：\n\n```yaml\nserver:\n  port: 10010 # 网关端口\nspring:\n  application:\n    name: gateway # 服务名称\n  cloud:\n    nacos:\n      server-addr: localhost:8848 # nacos地址\n    gateway:\n      routes: # 网关路由配置\n        - id: user-service # 路由id，自定义，只要唯一即可\n          # uri: http://127.0.0.1:8081 # 路由的目标地址 http就是固定地址\n          uri: lb://userservice # 路由的目标地址 lb就是负载均衡，后面跟服务名称\n          predicates: # 路由断言，也就是判断请求是否符合路由规则的条件\n            - Path=/user/** # 这个是按照路径匹配，只要以/user/开头就符合要求\n```\n\n我们将符合`Path` 规则的一切请求，都代理到 `uri`参数指定的地址。\n\n上面的例子中，我们将 `/user/**` 开头的请求，代理到 `lb://userservice`，其中 lb 是负载均衡(LoadBalance)，根据服务名拉取服务列表，实现负载均衡。\n\n重启网关，访问 http://localhost:10010/user/1 时，符合 `/user/**` 规则，请求转发到 uri：http://userservice/user/1\n\n![httpuserserviceuser1](/img/httpuserserviceuser1.png)\n\n多个 predicates 的话，要同时满足规则，下文有例子。\n\n## 流程图\n\n![gateway流程图](/img/gateway流程图.png)\n\n路由配置包括：\n\n1. 路由id：路由的唯一标示\n2. 路由目标（uri）：路由的目标地址，http代表固定地址，lb代表根据服务名负载均衡\n3. 路由断言（predicates）：判断路由的规则\n4. 路由过滤器（filters）：对请求或响应做处理\n\n## 断言工厂\n\n我们在配置文件中写的断言规则只是字符串，这些字符串会被 Predicate Factory 读取并处理，转变为路由判断的条件。\n\n例如 `Path=/user/**` 是按照路径匹配，这个规则是由\n\n`org.springframework.cloud.gateway.handler.predicate.PathRoutePredicateFactory` 类来处理的，像这样的断言工厂在 Spring Cloud Gateway 还有十几个\n\n| 名称       | 说明                           | 示例                                                         |\n| :--------- | :----------------------------- | :----------------------------------------------------------- |\n| After      | 是某个时间点后的请求           | - After=2037-01-20T17:42:47.789-07:00[America/Denver]        |\n| Before     | 是某个时间点之前的请求         | - Before=2031-04-13T15:14:47.433+08:00[Asia/Shanghai]        |\n| Between    | 是某两个时间点之前的请求       | - Between=2037-01-20T17:42:47.789-07:00[America/Denver], 2037-01-21T17:42:47.789-07:00[America/Denver] |\n| Cookie     | 请求必须包含某些cookie         | - Cookie=chocolate, ch.p                                     |\n| Header     | 请求必须包含某些header         | - Header=X-Request-Id, \\d+                                   |\n| Host       | 请求必须是访问某个host（域名） | - Host=`**.somehost.org`, `**.anotherhost.org`               |\n| Method     | 请求方式必须是指定方式         | - Method=GET,POST                                            |\n| Path       | 请求路径必须符合指定规则       | - Path=/red/{segment},/blue/**                               |\n| Query      | 请求参数必须包含指定参数       | - Query=name, Jack或者- Query=name                           |\n| RemoteAddr | 请求者的ip必须是指定范围       | - RemoteAddr=192.168.1.1/24                                  |\n| Weight     | 权重处理                       |                                                              |\n\n> 官方文档：https://docs.spring.io/spring-cloud-gateway/docs/current/reference/html/#gateway-request-predicates-factories\n\n一般的，我们只需要掌握 Path，加上官方文档的例子，就可以应对各种工作场景了。\n\n```yaml\npredicates:\n  - Path=/order/**\n  - After=2031-04-13T15:14:47.433+08:00[Asia/Shanghai]\n```\n\n像这样的规则，现在是 2021年8月22日01:32:42，很明显 After 条件不满足，可以不会转发，路由不起作用。\n\n## 过滤器工厂\n\nGatewayFilter 是网关中提供的一种过滤器，可以对进入网关的请求和微服务返回的响应做处理。\n\n![过滤器工厂](/img/过滤器工厂.png)\n\nSpring提供了31种不同的路由过滤器工厂。\n\n> 官方文档：https://docs.spring.io/spring-cloud-gateway/docs/current/reference/html/#gatewayfilter-factories\n\n| **名称**             | **说明**                     |\n| :------------------- | :--------------------------- |\n| AddRequestHeader     | 给当前请求添加一个请求头     |\n| RemoveRequestHeader  | 移除请求中的一个请求头       |\n| AddResponseHeader    | 给响应结果中添加一个响应头   |\n| RemoveResponseHeader | 从响应结果中移除有一个响应头 |\n| RequestRateLimiter   | 限制请求的流量               |\n\n下面我们以 AddRequestHeader 为例：\n\n![AddRequestHeader](/img/AddRequestHeader.png)\n\n**需求**：给所有进入 userservice 的请求添加一个请求头：`sign=xn2001.com is eternal`\n\n只需要修改 gateway 服务的 application.yml文件，添加路由过滤即可。\n\n```yaml\nspring:\n  cloud:\n    gateway:\n      routes: # 网关路由配置\n        - id: user-service # 路由id，自定义，只要唯一即可\n          # uri: http://127.0.0.1:8081 # 路由的目标地址 http就是固定地址\n          uri: lb://userservice # 路由的目标地址 lb就是负载均衡，后面跟服务名称\n          predicates: # 路由断言，也就是判断请求是否符合路由规则的条件\n            - Path=/user/** # 这个是按照路径匹配，只要以/user/开头就符合要求\n          filters:\n            - AddRequestHeader=sign, xn2001.com is eternal # 添加请求头\n```\n\n如何验证，我们修改 userservice 中的一个接口\n\n```java\n@GetMapping(\"/{id}\")\npublic User queryById(@PathVariable(\"id\") Long id, @RequestHeader(value = \"sign\", required = false) String sign) {\n    log.warn(sign);\n    return userService.queryById(id);\n}\n```\n\n重启两个服务，访问：http://localhost:10010/user/1\n\n可以看到控制台打印出了这个请求头\n\n![控制台打印请求头](/img/控制台打印请求头.png)\n\n## 全局过滤器\n\n上面介绍的过滤器工厂，网关提供了 31 种，但每一种过滤器的作用都是固定的。**如果我们希望拦截请求，做自己的业务逻辑则没办法实现**。\n\n全局过滤器的作用也是处理一切进入网关的请求和微服务响应，**与 GatewayFilter 的作用一样**。区别在于 GlobalFilter 的逻辑可以**写代码来自定义规则**；而 GatewayFilter 通过配置定义，处理逻辑是固定的。\n\n**需求**：定义全局过滤器，拦截请求，判断请求的参数是否满足下面条件\n\n- 参数中是否有 authorization\n- authorization 参数值是否为 admin\n\n如果同时满足则放行，否则拦截。\n\n```java\n@Component\npublic class AuthorizeFilter implements GlobalFilter, Ordered {\n\n    // 测试：http://localhost:10010/order/101?authorization=admin\n    @Override\n    public Mono<Void> filter(ServerWebExchange exchange, GatewayFilterChain chain) {\n        // 获取第一个 authorization 参数\n        String authorization = exchange.getRequest().getQueryParams().getFirst(\"authorization\");\n        if (\"admin\".equals(authorization)){\n            // 放行\n            return chain.filter(exchange);\n        }\n        // 设置拦截状态码信息\n        exchange.getResponse().setStatusCode(HttpStatus.UNAUTHORIZED);\n        // 设置拦截\n        return exchange.getResponse().setComplete();\n    }\n\n    // 设置过滤器优先级，值越低优先级越高\n    // 也可以使用 @Order 注解\n    @Override\n    public int getOrder() {\n        return 0;\n    }\n}\n```\n\n## 过滤器顺序\n\n请求进入网关会碰到三类过滤器：DefaultFilter、当前路由的过滤器、GlobalFilter；\n\n请求路由后，会将三者合并到一个过滤器链（集合）中，排序后依次执行每个过滤器.\n\n![过滤器顺序](/img/过滤器顺序.png)\n\n排序的规则是什么呢？\n\n- 每一个过滤器都必须指定一个 int 类型的 order 值，**order 值越小，优先级越高，执行顺序越靠前**。\n- GlobalFilter 通过实现 Ordered 接口，或者使用 @Order 注解来指定 order 值，由我们自己指定。\n- 路由过滤器和 defaultFilter 的 order 由 Spring 指定，默认是按照声明顺序从1递增。\n- 当过滤器的 order 值一样时，**会按照 defaultFilter > 路由过滤器 > GlobalFilter 的顺序执行。**\n\n## 跨域问题\n\n不了解跨域问题的同学可以百度了解一下；在 Gateway 网关中解决跨域问题还是比较方便的。\n\n```yaml\nspring:\n  cloud:\n    gateway:\n      globalcors: # 全局的跨域处理\n        add-to-simple-url-handler-mapping: true # 解决options请求被拦截问题\n        corsConfigurations:\n          '[/**]':\n            allowedOrigins: # 允许哪些网站的跨域请求 allowedOrigins: “*” 允许所有网站\n              - \"http://localhost:8090\"\n            allowedMethods: # 允许的跨域ajax的请求方式\n              - \"GET\"\n              - \"POST\"\n              - \"DELETE\"\n              - \"PUT\"\n              - \"OPTIONS\"\n            allowedHeaders: \"*\" # 允许在请求中携带的头信息\n            allowCredentials: true # 是否允许携带cookie\n            maxAge: 360000 # 这次跨域检测的有效期\n```\n\n# RabbitMQ\n\n# Elasticsearch\n\n<span style=\"text-align:center;font-size:50px;background-color:orange\">高级篇</span>\n\n# JMeter\n\n# Sentinel\n\n# Seata\n","slug":"微服务技术栈","published":1,"updated":"2022-10-11T13:42:29.856Z","comments":1,"layout":"post","photos":[],"link":"","_id":"claryulc9000h5ojrb3ee9uvb","content":"<p><span style=\"text-align:center;font-size:50px;background-color:orange\">基础篇</span></p>\n<p><strong>本篇微服务技术栈参考：</strong> <a href=\"https://www.xn2001.com/archives/663.html\">https://www.xn2001.com/archives/663.html</a></p>\n<h1 id=\"认识微服务\"><a href=\"#认识微服务\" class=\"headerlink\" title=\"认识微服务\"></a>认识微服务</h1><h2 id=\"单体架构\"><a href=\"#单体架构\" class=\"headerlink\" title=\"单体架构\"></a>单体架构</h2><p><strong>单体架构：</strong> 将业务的所有功能集中在一个项目中开发，打成一个包部署。</p>\n<p><img src=\"/img/%E5%8D%95%E4%BD%93%E6%9E%B6%E6%9E%84.png\" alt=\"单体架构\"></p>\n<p><strong>优点：</strong> 架构简单，部署成本低</p>\n<p><strong>缺点：</strong> 耦合度高（维护困难，升级困难）</p>\n<h2 id=\"分布式架构\"><a href=\"#分布式架构\" class=\"headerlink\" title=\"分布式架构\"></a>分布式架构</h2><p><strong>分布式架构：</strong> 根据业务功能对系统做拆分，每个业务功能模块作为独立项目开发，称为一个服务</p>\n<p><img src=\"/img/%E5%88%86%E5%B8%83%E5%BC%8F%E6%9E%B6%E6%9E%84.png\" alt=\"分布式架构\"></p>\n<p><strong>优点：</strong> 降低服务耦合，有利于服务升级和扩展</p>\n<p><strong>缺点：</strong> 服务调用关系错综复杂</p>\n<p>分布式架构虽然降低了服务耦合，但是服务拆分时也有很多问题需要思考：</p>\n<ul>\n<li>服务拆分的粒度如何界定？</li>\n<li>服务之间如何调用？</li>\n<li>服务的调用关系如何管理？</li>\n</ul>\n<p><strong>人们需要指定一套行之有效的标准来约束分布式架构。</strong></p>\n<h2 id=\"微服务\"><a href=\"#微服务\" class=\"headerlink\" title=\"微服务\"></a>微服务</h2><p><strong>微服务的架构特征：</strong></p>\n<ul>\n<li><strong>单一职责：</strong> 微服务拆分粒度更小，每一个服务都对应唯一的业务功能，做到单一职责</li>\n<li><strong>自治：</strong> 团队独立、技术独立、数据独立、独立部署和交付</li>\n<li><strong>面向服务：</strong> 服务提供统一标准的接口，与语言和技术无关</li>\n<li><strong>隔离性强：</strong> 服务调度做和隔离、容错、降级，避免出现级联问题</li>\n</ul>\n<p><img src=\"/img/%E5%BE%AE%E6%9C%8D%E5%8A%A1.png\" alt=\"微服务\"></p>\n<p>微服务的上述特性<strong>其实是在给分布式架构指定一个标准</strong>，进一步降低服务之间的耦合度，提供服务的独立性和灵活性。做到高内聚，低耦合。</p>\n<p><strong>因此，可以认为微服务是一种经过良好架构设计的分布式架构方案。</strong></p>\n<p>其中在Java领域最引人注目的就是SpringCloud提供的方案了。<a href=\"https://spring.io/projects/spring-cloud\">https://spring.io/projects/spring-cloud</a></p>\n<h3 id=\"SpringCloud\"><a href=\"#SpringCloud\" class=\"headerlink\" title=\"SpringCloud\"></a>SpringCloud</h3><p>SpringCloud是目前国内使用最广泛的微服务架构。官网地址：<a href=\"https://spring.io/projects/spring-cloud\">https://spring.io/projects/spring-cloud</a></p>\n<p>SpringCloud集成了各种微服务功能组件，并基于SpringBoot实现了这些组件的自动装配，从而提供了良好的开箱即用体验。</p>\n<p>其中常见的组件包括：</p>\n<p><img src=\"/img/SpringCloud%E5%B8%B8%E7%94%A8%E7%BB%84%E4%BB%B6.png\" alt=\"SpringCloud常用组件\"></p>\n<p>另外，SpringCloud底层是依赖于SpringBoot的，并且有版本的兼容关系，如下：</p>\n<p><img src=\"/img/SpringCloud%E5%92%8CSpringBoot%E7%9A%84%E7%89%88%E6%9C%AC%E5%85%BC%E5%AE%B9%E5%85%B3%E7%B3%BB.png\" alt=\"SpringCloud和SpringBoot的版本兼容关系\"></p>\n<h3 id=\"内容知识\"><a href=\"#内容知识\" class=\"headerlink\" title=\"内容知识\"></a>内容知识</h3><p><img src=\"/img/%E9%9C%80%E8%A6%81%E5%AD%A6%E4%B9%A0%E7%9A%84%E5%BE%AE%E6%9C%8D%E5%8A%A1%E7%9F%A5%E8%AF%86%E5%86%85%E5%AE%B9.png\" alt=\"需要学习的微服务知识内容\"></p>\n<p><img src=\"/img/%E6%8A%80%E6%9C%AF%E6%A0%88.png\" alt=\"技术栈\"></p>\n<p><img src=\"/img/%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2.png\" alt=\"自动化部署\"></p>\n<h3 id=\"技术栈对比\"><a href=\"#技术栈对比\" class=\"headerlink\" title=\"技术栈对比\"></a>技术栈对比</h3><p><img src=\"/img/%E6%8A%80%E6%9C%AF%E6%A0%88%E5%AF%B9%E6%AF%94.png\" alt=\"技术栈对比\"></p>\n<h1 id=\"服务拆分\"><a href=\"#服务拆分\" class=\"headerlink\" title=\"服务拆分\"></a>服务拆分</h1><p><strong>服务器拆分注意事项</strong></p>\n<p>单一职责：不同微服务，不要重复开发相同业务</p>\n<p>数据独立：不要访问其他微服务的数据库</p>\n<p>面向服务：将自己的业务暴露为接口，供其他微服务调用</p>\n<p><img src=\"/img/%E6%9C%8D%E5%8A%A1%E6%8B%86%E5%88%86%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9.png\" alt=\"服务拆分注意事项\"></p>\n<p>cloude-demo：夫工程，管理依赖</p>\n<ul>\n<li>order-service：订单微服务，负责订单相关业务</li>\n<li>user-service：用户微服务，负责用户相关业务</li>\n</ul>\n<p>要求：</p>\n<ul>\n<li>订单微服务和用户微服务都必须有<strong>各自的数据库</strong>，相互独立</li>\n<li>订单服务和用户服务**都对外暴露Restful的接口</li>\n<li>订单服务如果需要查询用户信息，<strong>只能调用用户服务的Restful接口，</strong> 不能查询用户数据库</li>\n</ul>\n<p>微服务项目下，打开IDEA的Service，可以很方便地启动。</p>\n<p><img src=\"/img/Services.png\" alt=\"Services\"></p>\n<p>启动完成后，访问 <a href=\"http://localhost:8080/order/101\">http://localhost:8080/order/101</a></p>\n<p><img src=\"/img/Services2.png\" alt=\"Services2\"></p>\n<h1 id=\"远程调用\"><a href=\"#远程调用\" class=\"headerlink\" title=\"远程调用\"></a>远程调用</h1><p>服务拆分要求：</p>\n<blockquote>\n<p>订单服务如果需要查询用户信息，<strong>只能调用用户服务的Restful接口</strong>，不能查询用户数据库</p>\n</blockquote>\n<p>因此外卖需要知道Java如何去发送http请求，Spring提供了一个RestTemplate工具，只需要把它创建出来即可。（即注入Bean）</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Bean</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> RestTemplate <span class=\"title function_\">restTemplate</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"title class_\">RestTemplate</span>();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>发送请求，自动序列化为java对象。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> Order <span class=\"title function_\">queryOrderById</span><span class=\"params\">(Long orderId)</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 1.查询订单</span></span><br><span class=\"line\">    <span class=\"type\">Order</span> <span class=\"variable\">order</span> <span class=\"operator\">=</span> orderMapper.findById(orderId);</span><br><span class=\"line\">    <span class=\"comment\">// 2.利用resttemplate发起http请求，查询用户</span></span><br><span class=\"line\">    <span class=\"comment\">// 2.1 url路径</span></span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">url</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;http://localhost:8081/user/&quot;</span> + order.getUserId();</span><br><span class=\"line\">    <span class=\"comment\">// 2.2 发起http请求，实现远程调用</span></span><br><span class=\"line\">    <span class=\"type\">User</span> <span class=\"variable\">user</span> <span class=\"operator\">=</span> restTemplate.getForObject(url, User.class);</span><br><span class=\"line\">    <span class=\"comment\">// 3.封装user到order</span></span><br><span class=\"line\">    order.setUser(user);</span><br><span class=\"line\">    <span class=\"comment\">// 4.返回</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> order;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>启动完成后，访问：<a href=\"http://localhost:8080/order/101\">http://localhost:8080/order/101</a></p>\n<p><img src=\"/img/Service3.png\" alt=\"启动完成后\"></p>\n<p>在上面代码的url中，我们可以发现调用服务的地址采用硬编码，这在后续的开发中肯定是不理想的，这就需要<strong>服务注册中心（Eureka）</strong> 来帮我们解决这个事情。</p>\n<h1 id=\"Eureka\"><a href=\"#Eureka\" class=\"headerlink\" title=\"Eureka\"></a>Eureka</h1><h2 id=\"Eureka注册中心\"><a href=\"#Eureka注册中心\" class=\"headerlink\" title=\"Eureka注册中心\"></a>Eureka注册中心</h2><p>最广为人知的注册中心就是Eureka，其结构如下：<br><img src=\"/img/Eureka%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83.png\" alt=\"Eureka注册中心\"></p>\n<p><strong>order-service如何得知user-service实例地址？</strong> </p>\n<ul>\n<li>user-service服务实例启动后，将自己的信息注册到eureka-service（Eureka服务端），也叫<strong>服务注册</strong></li>\n<li>eureka-server保存服务名称到服务实例地址列表的映射关系</li>\n<li>order-service根据服务名称，拉取实例地址列表，这个叫<strong>服务发现</strong>或服务拉取</li>\n</ul>\n<p><strong>order-service如何从多个user-service实例中选择具体的实例？</strong></p>\n<p>order-service从实例列表中利用<strong>负载均衡算法</strong>选中一个实例地址，向该实例地址发起远程调用</p>\n<p><strong>order-service如何得知某个user-service实例是否依然健康，是不是已经宕机？</strong></p>\n<ul>\n<li>user-service会<strong>每隔一段时间（默认30秒）向eureka-server发起请求</strong>，报告自己状态，称为<strong>心跳</strong></li>\n<li>当超过一定时间没有发送心跳时，eureka-server会认为微服务实例故障，将该实例从服务列表中剔除</li>\n<li>order-service拉取请求时，就能将故障实例排除了</li>\n</ul>\n<p>接下来我们动手实践的步骤包括</p>\n<p><img src=\"/img/Eureka%E6%B3%A8%E5%86%8C%E6%AD%A5%E9%AA%A4.png\" alt=\"Eureka注册步骤\"></p>\n<h2 id=\"搭建注册中心\"><a href=\"#搭建注册中心\" class=\"headerlink\" title=\"搭建注册中心\"></a>搭建注册中心</h2><p><strong>1、搭建eureka-server</strong></p>\n<p>引入SpringCloud为eureka提供的starter依赖，注意这里是用<strong>server</strong></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;dependency&gt;</span><br><span class=\"line\">    &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;</span><br><span class=\"line\">    &lt;artifactId&gt;spring-cloud-starter-netflix-eureka-server&lt;/artifactId&gt;</span><br><span class=\"line\">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>\n\n<p><strong>2、编写启动类</strong></p>\n<p>注意要添加一个<font color=\"red\">@EnableEurekaServer</font><strong>注解</strong>，开启eureka的<strong>注册中心</strong>功能</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.xn2001.eureka;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.boot.SpringApplication;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.cloud.netflix.eureka.server.EnableEurekaServer;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@SpringBootApplication</span></span><br><span class=\"line\"><span class=\"meta\">@EnableEurekaServer</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">EurekaApplication</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> &#123;</span><br><span class=\"line\">        SpringApplication.run(EurekaApplication.class, args);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong>3、编写配置文件</strong></p>\n<p>编写一个application.yml文件，内容如下：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">server:</span><br><span class=\"line\"> port: <span class=\"number\">10086</span></span><br><span class=\"line\">spring:</span><br><span class=\"line\"> application:</span><br><span class=\"line\">  name: eureka-server</span><br><span class=\"line\">eureka:</span><br><span class=\"line\"> client:</span><br><span class=\"line\">  service-url:</span><br><span class=\"line\">   defaultZone: http:<span class=\"comment\">//127.0.0.1::10086/eureka</span></span><br></pre></td></tr></table></figure>\n\n<p>其中<code>default-zone</code>是因为前面配置类开启了注册中心所需要配置的eureka的<strong>地址信息</strong>，因为eureka本事也是一个微服务，这里也要将自己注册起来，当后面eureka<strong>集群</strong>时，这里就可以填写多个，使用“ ；”隔开。</p>\n<p>启动完成后，访问 <a href=\"http://localhost:10086/\">http://localhost:10086/</a></p>\n<p><img src=\"/img/Eureka%E5%90%AF%E5%8A%A8%E6%88%90%E5%8A%9F%E7%95%8C%E9%9D%A2.png\" alt=\"Eureka启动成功界面\"></p>\n<h2 id=\"服务注册\"><a href=\"#服务注册\" class=\"headerlink\" title=\"服务注册\"></a>服务注册</h2><blockquote>\n<p>将user-service、order-service都注册到eureka</p>\n</blockquote>\n<p>引入SpringCloud为eureka提供的starter依赖，注意这里是用<strong>client</strong></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;dependency&gt;</span><br><span class=\"line\">    &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;</span><br><span class=\"line\">    &lt;artifactId&gt;spring-cloud-starter-netflix-eureka-client&lt;/artifactId&gt;</span><br><span class=\"line\">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>\n\n<p>在启动类上添加注解：<code>@EnableEurekaClient</code></p>\n<p>在application.yml文件，添加下面的配置：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">spring:</span><br><span class=\"line\"> application:</span><br><span class=\"line\">  name: userservice</span><br><span class=\"line\">eureka:</span><br><span class=\"line\"> client:</span><br><span class=\"line\">  service-url:</span><br><span class=\"line\">   defaultZone: http:<span class=\"number\">127.0</span><span class=\"number\">.0</span><span class=\"number\">.1</span>:<span class=\"number\">10086</span>/eureka</span><br></pre></td></tr></table></figure>\n\n<p>3个项目启动后，访问 <a href=\"http://localhost:10086/\">http://localhost:10086/</a></p>\n<p><img src=\"/img/Eureka%E5%90%AF%E5%8A%A8%E6%88%90%E5%8A%9F%E7%95%8C%E9%9D%A22.png\" alt=\"Eureka启动成功界面\"></p>\n<p>这里另外再补充个小技巧，我们可以通过 idea 的多实例启动，来查看 Eureka 的集群效果。</p>\n<p><img src=\"/img/IDEA%E5%A4%9A%E5%AE%9E%E4%BE%8B%E8%B0%83%E8%AF%95.png\" alt=\"IDEA多实例调试\"></p>\n<p>4个项目启动后，访问 <a href=\"http://localhost:10086/\">http://localhost:10086/</a></p>\n<p><img src=\"/img/Eureka4%E9%A1%B9%E7%9B%AE%E5%90%AF%E5%8A%A8.png\" alt=\"Eureka4项目启动\"></p>\n<h2 id=\"服务拉取\"><a href=\"#服务拉取\" class=\"headerlink\" title=\"服务拉取\"></a>服务拉取</h2><blockquote>\n<p>在order-service中完成服务拉取，然后通过负载均衡挑选一个服务，实践远程调用</p>\n</blockquote>\n<p>下面我们让 order-service 向 eureka-server 拉取 user-service 的信息，实现服务发现。</p>\n<p>首先给 <code>RestTemplate</code> 这个 Bean 添加一个 <code>@LoadBalanced</code> <strong>注解</strong>，用于开启<strong>负载均衡</strong>。（后面会讲）</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Bean</span></span><br><span class=\"line\"><span class=\"meta\">@LoadBalanced</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> RestTemplate <span class=\"title function_\">restTemplate</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"title class_\">RestTemplate</span>();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>修改orderService访问的url路径，用<strong>服务名</strong>代替ip、端口</p>\n<p><img src=\"/img/%E4%BF%AE%E6%94%B9Eureka%E7%9A%84url%E8%B7%AF%E5%BE%84.png\" alt=\"修改Eureka的url路径\"></p>\n<p>spring会自动帮助我们从eureka-server中，根据uservice这个服务名称，获取实例列表后去完成负载均衡。</p>\n<h1 id=\"Ribbon\"><a href=\"#Ribbon\" class=\"headerlink\" title=\"Ribbon\"></a>Ribbon</h1><h2 id=\"Ribbon负载均衡\"><a href=\"#Ribbon负载均衡\" class=\"headerlink\" title=\"Ribbon负载均衡\"></a>Ribbon负载均衡</h2><p>我们添加了<code>@LoalBalanced</code>注解，即可实现负载均衡功能，这是什么原理呢？</p>\n<p><strong>SpringCloud底层提供了一个名为Ribbon的组件，来实现负载均衡功能</strong></p>\n<p><img src=\"/img/Ribbon%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1.png\" alt=\"Ribbon负载均衡\"></p>\n<p><strong>1、源码跟踪</strong><br>为什么我们只输入了service名称就可以访问了呢？为什么不需要获取ip和端口，这显然有人帮我们根据service名称，获取到了服务实例的ip和端口，他就是<code>LoadBalancerInterceptor</code>，这个类会对RestTemplate的请求进行拦截，然后从Eureka根据服务id获取服务列表，随后根据负载均衡算法得到真实的服务地址信息，替换服务id。</p>\n<p>我们进行源码跟踪：</p>\n<p><img src=\"/img/Interceptor%E6%BA%90%E7%A0%81%E8%B7%9F%E8%B8%AA.png\" alt=\"Interceptor源码跟踪\"></p>\n<p>这里的<code>intercept()</code>方法，拦截了用户的HttpRequest请求，然后做了几件事：</p>\n<ul>\n<li><code>request.getURL()</code>：获取请求uri，即<a href=\"http://user-service/user/8\">http://user-service/user/8</a></li>\n<li><code>originalUri.getHost()</code>:获取uri路径的主机名，其实就是服务id<code>user-service</code></li>\n<li><code>this.loadBalancer.execute()</code>：处理服务id，和用户请求</li>\n</ul>\n<p>这里的<code>this.loadBalancer.execute()</code>：处理服务id和请求</p>\n<p>继续跟人<code>execute()</code>方法：</p>\n<p><img src=\"/img/%E8%B7%9F%E8%BF%9Bexecute()%E6%96%B9%E6%B3%95.png\" alt=\"跟进execute()方法\"></p>\n<ul>\n<li><p><code>getLoadBalancer(serviceId)</code>：根据服务id获取</p>\n<p><code>IloadBalancer</code>，而<code>ILoadBancer</code>会拿着服务id去eureka中获取服务列表</p>\n</li>\n<li><p><code>getServer(loadBalancer)</code>：利用内置的负载均衡算法，从服务列表中选择一个。在图中<strong>可以看到获取了8082端口的服务</strong></p>\n</li>\n</ul>\n<p>可以看到获取服务时，通过一个<code>getServer()</code>方法来做负载均衡：</p>\n<p><img src=\"/img/getServer%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1.png\" alt=\"getServer负载均衡\"></p>\n<p>我们继续跟入：</p>\n<p><img src=\"/img/%E7%BB%A7%E7%BB%AD%E8%B7%9F%E5%85%A5.png\" alt=\"继续跟入\"></p>\n<p>继续跟踪源码 <code>chooseServer()</code> 方法，发现这么一段代码：</p>\n<p>![跟踪源码 chooseServer()方法](/img/跟踪源码 chooseServer()方法.png)</p>\n<p>我们看看这个 <code>rule</code> 是谁：</p>\n<p><img src=\"/img/rule.png\" alt=\"rule\"></p>\n<p>这里的 rule 默认值是一个 <code>RoundRobinRule</code> ，看类的介绍：</p>\n<p><img src=\"/img/rule%E9%BB%98%E8%AE%A4%E5%80%BC.png\" alt=\"rule默认值\"></p>\n<p>负载均衡默认使用了轮训算法，当然我们也可以自定义。</p>\n<p><strong>2、流程总结</strong></p>\n<p>SpringCloud Ribbon 底层采用了一个拦截器，拦截了 RestTemplate 发出的请求，对地址做了修改。</p>\n<p>基本流程如下：</p>\n<ul>\n<li>拦截我们的 <code>RestTemplate</code> 请求 <a href=\"http://userservice/user/1\">http://userservice/user/1</a></li>\n<li><code>RibbonLoadBalancerClient</code> 会从请求url中获取服务名称，也就是 user-service</li>\n<li><code>DynamicServerListLoadBalancer</code> 根据 user-service 到 eureka 拉取服务列表</li>\n<li>eureka 返回列表，localhost:8081、localhost:8082</li>\n<li><code>IRule</code> 利用内置负载均衡规则，从列表中选择一个，例如 localhost:8081</li>\n<li><code>RibbonLoadBalancerClient</code> 修改请求地址，用 localhost:8081 替代 userservice，得到 <a href=\"http://localhost:8081/user/1%EF%BC%8C%E5%8F%91%E8%B5%B7%E7%9C%9F%E5%AE%9E%E8%AF%B7%E6%B1%82\">http://localhost:8081/user/1，发起真实请求</a></li>\n</ul>\n<p><img src=\"/img/robbon%E6%B5%81%E7%A8%8B%E6%80%BB%E7%BB%93.png\" alt=\"robbon流程总结\"></p>\n<p><strong>3、负载均衡策略</strong></p>\n<p>负载均衡的规则都定义在 IRule 接口中，而 IRule 有很多不同的实现类：</p>\n<p><img src=\"/img/%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%E7%AD%96%E7%95%A5.png\" alt=\"负载均衡策略\"></p>\n<p>不同规则的含义如下：</p>\n<table>\n<thead>\n<tr>\n<th align=\"left\"><strong>内置负载均衡规则类</strong></th>\n<th align=\"left\"><strong>规则描述</strong></th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">RoundRobinRule</td>\n<td align=\"left\">简单轮询服务列表来选择服务器。它是Ribbon默认的负载均衡规则。</td>\n</tr>\n<tr>\n<td align=\"left\">AvailabilityFilteringRule</td>\n<td align=\"left\">对以下两种服务器进行忽略：（1）在默认情况下，这台服务器如果3次连接失败，这台服务器就会被设置为“短路”状态。短路状态将持续30秒，如果再次连接失败，短路的持续时间就会几何级地增加。 （2）并发数过高的服务器。如果一个服务器的并发连接数过高，配置了AvailabilityFilteringRule 规则的客户端也会将其忽略。并发连接数的上限，可以由客户端设置。</td>\n</tr>\n<tr>\n<td align=\"left\">WeightedResponseTimeRule</td>\n<td align=\"left\">为每一个服务器赋予一个权重值。服务器响应时间越长，这个服务器的权重就越小。这个规则会随机选择服务器，这个权重值会影响服务器的选择。</td>\n</tr>\n<tr>\n<td align=\"left\"><strong>ZoneAvoidanceRule</strong></td>\n<td align=\"left\">以区域可用的服务器为基础进行服务器的选择。使用Zone对服务器进行分类，这个Zone可以理解为一个机房、一个机架等。而后再对Zone内的多个服务做轮询。</td>\n</tr>\n<tr>\n<td align=\"left\">BestAvailableRule</td>\n<td align=\"left\">忽略那些短路的服务器，并选择并发数较低的服务器。</td>\n</tr>\n<tr>\n<td align=\"left\">RandomRule</td>\n<td align=\"left\">随机选择一个可用的服务器。</td>\n</tr>\n<tr>\n<td align=\"left\">RetryRule</td>\n<td align=\"left\">重试机制的选择逻辑</td>\n</tr>\n</tbody></table>\n<p>默认的实现就是 <code>ZoneAvoidanceRule</code>，<strong>是一种轮询方案</strong>。</p>\n<p><strong>4、自定义策略</strong></p>\n<p>通过定义 IRule 实现可以修改负载均衡规则，有两种方式：</p>\n<p>1 代码方式在 order-service 中的 OrderApplication 类中，定义一个新的 IRule：</p>\n<p><img src=\"/img/%E8%87%AA%E5%AE%9A%E4%B9%89%E7%AD%96%E7%95%A5.png\" alt=\"自定义策略\"></p>\n<p>2 配置文件方式：在 order-service 的 application.yml 文件中，添加新的配置也可以修改规则：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">userservice: # 给需要调用的微服务配置负载均衡规则，orderservice服务去调用userservice服务</span><br><span class=\"line\">  ribbon:</span><br><span class=\"line\">    NFLoadBalancerRuleClassName: com.netflix.loadbalancer.RandomRule # 负载均衡规则</span><br></pre></td></tr></table></figure>\n\n<p><strong>注意</strong>：一般用默认的负载均衡规则，不做修改。</p>\n<p><strong>5、饥饿加载</strong></p>\n<p>当我们启动 orderservice，第一次访问时，时间消耗会大很多，这是因为 Ribbon 懒加载的机制。</p>\n<p><img src=\"/img/%E7%AC%AC%E4%B8%80%E6%AC%A1%E8%AE%BF%E9%97%AE.png\" alt=\"/img/第一次访问.png\"></p>\n<p>Ribbon 默认是采用懒加载，即第一次访问时才会去创建 LoadBalanceClient，拉取集群地址，所以请求时间会很长。</p>\n<p>而饥饿加载则会在项目启动时创建 LoadBalanceClient，降低第一次访问的耗时，通过下面配置开启饥饿加载：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ribbon:</span><br><span class=\"line\"> eager-load:</span><br><span class=\"line\">  enabled: <span class=\"literal\">true</span></span><br><span class=\"line\">   clients: userservice # 项目启动时直接去拉取userservice的集群，多个用<span class=\"string\">&quot;,&quot;</span>隔开</span><br></pre></td></tr></table></figure>\n\n\n\n<h1 id=\"Nacos\"><a href=\"#Nacos\" class=\"headerlink\" title=\"Nacos\"></a>Nacos</h1><h2 id=\"Nacos注册中心\"><a href=\"#Nacos注册中心\" class=\"headerlink\" title=\"Nacos注册中心\"></a>Nacos注册中心</h2><p>SpringCloudAlibaba 推出了一个名为 Nacos 的注册中心，在国外也有大量的使用。</p>\n<p><img src=\"/img/Nacos%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83.png\" alt=\"Nacos注册中心\"></p>\n<p>解压启动Nacos，详细请看<a href=\"https://www.xn2001.com/archives/661.html\">Nacos安装指南</a></p>\n<figure class=\"highlight makefile\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 单机启动</span></span><br><span class=\"line\">startup.cmd -m standalone</span><br></pre></td></tr></table></figure>\n\n<p>访问：<a href=\"http://localhost:8848/nacos/\">http://localhost:8848/nacos/</a></p>\n<p><img src=\"/img/Nacos%E5%90%AF%E5%8A%A8.png\" alt=\"Nacos启动\"></p>\n<p><strong>1、服务注册</strong></p>\n<p>这里上来就直接服务注册，很多东西可能有疑惑，其实 Nacos 本身就是一个 SprintBoot 项目，这点你从启动的控制台打印就可以看出来，所以就不再需要去额外搭建一个像 Eureka 的注册中心。</p>\n<p><strong>引入依赖</strong></p>\n<p>在 cloud-demo 父工程中引入 SpringCloudAlibaba 的依赖：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;dependency&gt;</span><br><span class=\"line\">    &lt;groupId&gt;com.alibaba.cloud&lt;/groupId&gt;</span><br><span class=\"line\">    &lt;artifactId&gt;spring-cloud-alibaba-dependencies&lt;/artifactId&gt;</span><br><span class=\"line\">    &lt;version&gt;<span class=\"number\">2.2</span><span class=\"number\">.6</span>.RELEASE&lt;/version&gt;</span><br><span class=\"line\">    &lt;type&gt;pom&lt;/type&gt;</span><br><span class=\"line\">    &lt;scope&gt;<span class=\"keyword\">import</span>&lt;/scope&gt;</span><br><span class=\"line\">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>\n\n<p>然后在 user-service 和 order-service 中的pom文件中引入 nacos-discovery 依赖：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;dependency&gt;</span><br><span class=\"line\">    &lt;groupId&gt;com.alibaba.cloud&lt;/groupId&gt;</span><br><span class=\"line\">    &lt;artifactId&gt;spring-cloud-starter-alibaba-nacos-discovery&lt;/artifactId&gt;</span><br><span class=\"line\">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>\n\n<p><strong>配置nacos地址</strong></p>\n<p>在 user-service 和 order-service 的 application.yml 中添加 nacos 地址：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">spring:</span><br><span class=\"line\"> cloud:</span><br><span class=\"line\">  nacos:</span><br><span class=\"line\">   server-addr: <span class=\"number\">127.0</span><span class=\"number\">.0</span><span class=\"number\">.1</span>:<span class=\"number\">8848</span></span><br></pre></td></tr></table></figure>\n\n<p>项目重新启动后，可以看到三个服务都被注册进了 Nacos</p>\n<p><img src=\"/img/Nacos%E6%B3%A8%E5%86%8C.png\" alt=\"Nacos注册\"></p>\n<p>浏览器访问：<a href=\"http://localhost:8080/order/101%EF%BC%8C%E6%AD%A3%E5%B8%B8%E8%AE%BF%E9%97%AE%EF%BC%8C%E5%90%8C%E6%97%B6%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%E4%B9%9F%E6%AD%A3%E5%B8%B8%E3%80%82\">http://localhost:8080/order/101，正常访问，同时负载均衡也正常。</a></p>\n<h2 id=\"分级存储模型\"><a href=\"#分级存储模型\" class=\"headerlink\" title=\"分级存储模型\"></a>分级存储模型</h2><p>一个<strong>服务</strong>可以有多个<strong>实例</strong>，例如我们的 user-service，可以有:</p>\n<ul>\n<li>127.0.0.1:8081</li>\n<li>127.0.0.1:8082</li>\n<li>127.0.0.1:8083</li>\n</ul>\n<p>假如这些实例分布于全国各地的不同机房，例如：</p>\n<ul>\n<li>127.0.0.1:8081，在上海机房</li>\n<li>127.0.0.1:8082，在上海机房</li>\n<li>127.0.0.1:8083，在杭州机房</li>\n</ul>\n<p>Nacos就将同一机房内的实例，划分为一个<strong>集群</strong>。</p>\n<p><img src=\"/img/Nacos%E9%9B%86%E7%BE%A4.png\" alt=\"Nacos集群\"></p>\n<p>微服务互相访问时，应该尽可能访问同集群实例，因为本地访问速度更快。<strong>当本集群内不可用时，才访问其它集群。</strong>例如：杭州机房内的 order-service 应该优先访问同机房的 user-service。</p>\n<p><img src=\"/img/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E9%9B%86%E7%BE%A4%E8%AE%BF%E9%97%AE.png\" alt=\"微服务集群访问\"></p>\n<p><strong>配置集群</strong></p>\n<p>接下来我们给 user-service <strong>配置集群</strong></p>\n<p>修改 user-service 的 application.yml 文件，添加集群配置：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">spring:</span><br><span class=\"line\"> cloud:</span><br><span class=\"line\">  nacos:</span><br><span class=\"line\">   server-addr: localhost:<span class=\"number\">8848</span></span><br><span class=\"line\">   discovery:</span><br><span class=\"line\">    cluster-name: HZ # 集群名称 HZ杭州</span><br></pre></td></tr></table></figure>\n\n<p>重启两个 user-service 实例后，我们再去启动一个上海集群的实例。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">-Dserver.port=<span class=\"number\">8083</span> -Dspring.cloud.nacos.discovery.cluster-name=SH</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"/img/%E5%86%8D%E6%AC%A1%E5%90%AF%E5%8A%A8%E9%9B%86%E7%BE%A4%E5%AE%9E%E4%BE%8B.png\" alt=\"再次启动集群实例\"></p>\n<p>查看 nacos 控制台</p>\n<p><img src=\"/img/%E6%9F%A5%E7%9C%8Bnacos%E6%8E%A7%E5%88%B6%E5%8F%B0.png\" alt=\"查看nacos控制台\"></p>\n<h2 id=\"NacosRule\"><a href=\"#NacosRule\" class=\"headerlink\" title=\"NacosRule\"></a>NacosRule</h2><p>Ribbon的默认实现 <code>ZoneAvoidanceRule</code> 并不能实现根据同集群优先来实现负载均衡，我们把规则改成 <strong>NacosRule</strong> 即可。我们是用 orderservice 调用 userservice，所以在 orderservice 配置规则。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Bean</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> IRule <span class=\"title function_\">iRule</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">\t<span class=\"comment\">//默认为轮询规则，这里自定义为随机规则</span></span><br><span class=\"line\">\t<span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"title class_\">NacosRule</span>();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>另外，你同样可以使用配置的形式来完成，具体参考上面的 Ribbon 栏目。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">userservice:</span><br><span class=\"line\"> ribbon:</span><br><span class=\"line\">  NFLoadBalancerRuleClassName: com.alibaba.cloud.nacos.ribbon.NacosRule #负载均衡规则 </span><br></pre></td></tr></table></figure>\n\n<p>然后，再对 orderservice 配置集群。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">spring:</span><br><span class=\"line\"> cloud:</span><br><span class=\"line\">  nacos:</span><br><span class=\"line\">   server-addr: localhost:<span class=\"number\">8848</span></span><br><span class=\"line\">   discovery:</span><br><span class=\"line\">    cluster-name: HZ # 集群名称</span><br></pre></td></tr></table></figure>\n\n<p>现在我启动了四个服务，分别是：</p>\n<ul>\n<li>orderservice - HZ</li>\n<li>userservice - HZ</li>\n<li>userservice1 - HZ</li>\n<li>userservice2 - SH</li>\n</ul>\n<p>访问地址：<a href=\"http://localhost:8080/order/101\">http://localhost:8080/order/101</a></p>\n<p>在访问中我们发现，只有同在一个 HZ 集群下的 userservice、userservice1 会被调用，并且是随机的。</p>\n<p>我们试着把 userservice、userservice2 停掉。依旧可以访问。</p>\n<p>在 userservice3 控制台可以看到发出了一串的警告，因为 orderservice 本身是在 HZ 集群的，这波 HZ 集群没有了 userservice，就会去别的集群找。</p>\n<p><img src=\"/img/nacos%E9%9B%86%E7%BE%A4%E8%AD%A6%E5%91%8A.png\" alt=\"nacos集群警告\"></p>\n<h2 id=\"权重配置\"><a href=\"#权重配置\" class=\"headerlink\" title=\"权重配置\"></a>权重配置</h2><p>实际部署中会出现这样的场景：</p>\n<p>服务器设备性能有差异，部分实例所在机器性能较好，另一些较差，我们希望性能好的机器承担更多的用户请求。但默认情况下 NacosRule 是同集群内随机挑选，不会考虑机器的性能问题。</p>\n<p>因此，Nacos 提供了<strong>权重配置来控制访问频率</strong>，0~1 之间，权重越大则访问频率越高，权重修改为 0，则该实例永远不会被访问。</p>\n<p>在 Nacos 控制台，找到 user-service 的实例列表，点击编辑，即可修改权重。</p>\n<p><img src=\"/img/nacos%E6%9D%83%E9%99%90%E9%85%8D%E7%BD%AE.png\" alt=\"nacos权限配置\"></p>\n<p>在弹出的编辑窗口，修改权重</p>\n<p><img src=\"/img/nacos%E4%BF%AE%E6%94%B9%E6%9D%83%E9%87%8D.png\" alt=\"nacos修改权重\"></p>\n<p>另外，在服务升级的时候，有一种较好的方案：我们也可以通过调整权重来进行平滑升级，例如：先把 userservice 权重调节为 0，让用户先流向 userservice2、userservice3，升级 userservice后，再把权重从 0 调到 0.1，让一部分用户先体验，用户体验稳定后就可以往上调权重啦。</p>\n<h2 id=\"环境隔离\"><a href=\"#环境隔离\" class=\"headerlink\" title=\"环境隔离\"></a>环境隔离</h2><p>Nacos 提供了 namespace 来实现环境隔离功能。</p>\n<ul>\n<li>Nacos 中可以有多个 namespace</li>\n<li>namespace 下可以有 group、service 等</li>\n<li>不同 namespace 之间<strong>相互隔离</strong>，例如不同 namespace 的服务互相不可见</li>\n</ul>\n<p><img src=\"/img/%E7%8E%AF%E5%A2%83%E9%9A%94%E7%A6%BB.png\" alt=\"环境隔离\"></p>\n<p><strong>1、创建namespace</strong></p>\n<p>默认情况下，所有 service、data、group 都在同一个 namespace，名为 public(保留空间)：</p>\n<p><img src=\"/img/%E5%88%9B%E5%BB%BAnamespace.png\" alt=\"创建namespace\"></p>\n<p>我们可以点击页面新增按钮，添加一个 namespace：</p>\n<p><img src=\"/img/%E6%B7%BB%E5%8A%A0namespace.png\" alt=\"添加namespace\"></p>\n<p>然后，填写表单：</p>\n<p><img src=\"/img/%E5%A1%AB%E5%86%99%E8%A1%A8%E5%8D%95.png\" alt=\"填写表单\"></p>\n<p>就能在页面看到一个新的 namespace：</p>\n<p><img src=\"/img/%E6%96%B0%E7%9A%84namespace.png\" alt=\"新的namespace\"></p>\n<p><strong>2、配置namespace</strong></p>\n<p>给微服务配置 namespace 只能通过修改配置来实现。</p>\n<p>例如，修改 order-service 的 application.yml 文件：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">spring:</span><br><span class=\"line\"> cloud:</span><br><span class=\"line\">  nacos:</span><br><span class=\"line\">   server-addr: localhost:<span class=\"number\">8848</span></span><br><span class=\"line\">   discovery:</span><br><span class=\"line\">    cluster-name: HZ</span><br><span class=\"line\">    namespace: 492a7d5d-237b-46a1-a99a-fa8e98e4b0f9 # 命名空间ID</span><br></pre></td></tr></table></figure>\n\n<p>重启 order-service 后，访问控制台。</p>\n<p><strong>public</strong></p>\n<p><img src=\"/img/public.png\" alt=\"public\"></p>\n<p><strong>dev</strong></p>\n<p><img src=\"/img/dev.png\" alt=\"dev\"></p>\n<p>此时访问 order-service，因为 namespace 不同，会导致找不到 userservice，控制台会报错：</p>\n<p><img src=\"/img/%E6%8E%A7%E5%88%B6%E5%8F%B0%E6%8A%A5%E9%94%99.png\" alt=\"控制台报\"></p>\n<h2 id=\"临时实例\"><a href=\"#临时实例\" class=\"headerlink\" title=\"临时实例\"></a>临时实例</h2><p>Nacos 的服务实例分为两种类型：</p>\n<ul>\n<li><strong>临时实例</strong>：如果实例宕机超过一定时间，会从服务列表剔除，<strong>默认的类型</strong>。</li>\n<li>非临时实例：如果实例宕机，不会从服务列表剔除，也可以叫永久实例。</li>\n</ul>\n<p>配置一个服务实例为永久实例：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">spring:</span><br><span class=\"line\"> cloud:</span><br><span class=\"line\">  nacos:</span><br><span class=\"line\">   discovery:</span><br><span class=\"line\">    ephemeral: <span class=\"literal\">false</span> # 设置为非临时实例</span><br></pre></td></tr></table></figure>\n\n<p>另外，Nacos 集群**默认采用AP方式(可用性)<strong>，当集群中存在非临时实例时，</strong>采用CP模式(一致性)**；而 Eureka 采用AP方式，不可切换。（这里说的是 CAP 原理，后面会写到）</p>\n<h2 id=\"Nacos配置中心\"><a href=\"#Nacos配置中心\" class=\"headerlink\" title=\"Nacos配置中心\"></a>Nacos配置中心</h2><p>Nacos除了可以做注册中心，同样可以做配置管理来使用。</p>\n<p>当微服务部署的实例越来越多，达到数十、数百时，逐个修改微服务配置就会让人抓狂，而且很容易出错。<strong>我们需要一种统一配置管理方案，可以集中管理所有实例的配置。</strong></p>\n<p><img src=\"/img/Nacos%E9%85%8D%E7%BD%AE%E4%B8%AD%E5%BF%83.png\" alt=\"Nacos配置中心\"></p>\n<p><strong>创建配置</strong></p>\n<p>在 Nacos 控制面板中添加配置文件</p>\n<p><img src=\"/img/%E6%B7%BB%E5%8A%A0%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6.png\" alt=\"添加配置文件\"></p>\n<p>然后在弹出的表单中，填写配置信息：</p>\n<p><img src=\"/img/%E5%A1%AB%E5%86%99%E9%85%8D%E7%BD%AE%E4%BF%A1%E6%81%AF.png\" alt=\"填写配置信息\"></p>\n<p><strong>注意</strong>：项目的核心配置，需要热更新的配置才有放到 nacos 管理的必要。基本不会变更的一些配置(例如数据库连接)还是保存在微服务本地比较好。</p>\n<p><strong>拉取配置</strong></p>\n<p>首先我们需要了解 Nacos 读取配置文件的环节是在哪一步，在没加入 Nacos 配置之前，获取配置是这样：</p>\n<p><img src=\"/img/%E8%8E%B7%E5%8F%96%E9%85%8D%E7%BD%AE.png\" alt=\"获取配置\"></p>\n<p>加入 Nacos 配置，它的读取是在 application.yml 之前的：</p>\n<p><img src=\"/img/%E5%8A%A0%E5%85%A5Nacos%E9%85%8D%E7%BD%AE%E5%90%8E.png\" alt=\"加入Nacos配置后\"></p>\n<p>这时候如果把 nacos 地址放在 application.yml 中，显然是不合适的，<strong>Nacos 就无法根据地址去获取配置了。</strong></p>\n<p>因此，nacos 地址必须放在优先级最高的 bootstrap.yml 文件。</p>\n<p><img src=\"/img/bootstrapyml.png\" alt=\"bootstrap.yml\"></p>\n<p><strong>引入 nacos-config 依赖</strong></p>\n<p>首先，在 user-service 服务中，引入 nacos-config 的客户端依赖：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!--nacos配置管理依赖--&gt;</span><br><span class=\"line\">&lt;dependency&gt;</span><br><span class=\"line\">    &lt;groupId&gt;com.alibaba.cloud&lt;/groupId&gt;</span><br><span class=\"line\">    &lt;artifactId&gt;spring-cloud-starter-alibaba-nacos-config&lt;/artifactId&gt;</span><br><span class=\"line\">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>\n\n<p><strong>添加 bootstrap.yml</strong></p>\n<p>然后，在 user-service 中添加一个 bootstrap.yml 文件，内容如下：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">spring:</span><br><span class=\"line\">  application:</span><br><span class=\"line\">    name: userservice # 服务名称</span><br><span class=\"line\">  profiles:</span><br><span class=\"line\">    active: dev #开发环境，这里是dev </span><br><span class=\"line\">  cloud:</span><br><span class=\"line\">    nacos:</span><br><span class=\"line\">      server-addr: localhost:<span class=\"number\">8848</span> # Nacos地址</span><br><span class=\"line\">      config:</span><br><span class=\"line\">        file-extension: yaml # 文件后缀名</span><br></pre></td></tr></table></figure>\n\n<p>根据 spring.cloud.nacos.server-addr 获取 nacos地址，再根据<code>$&#123;spring.application.name&#125;-$&#123;spring.profiles.active&#125;.$&#123;spring.cloud.nacos.config.file-extension&#125;</code>作为文件id，来读取配置。</p>\n<p>在这个例子例中，就是去读取 <code>userservice-dev.yaml</code></p>\n<p><img src=\"/img/nacos%E9%85%8D%E7%BD%AE%E6%98%A0%E5%B0%84%E5%85%B3%E7%B3%BB.png\" alt=\"nacos配置映射关系\"></p>\n<p>使用代码来验证是否拉取成功</p>\n<p>在 user-service 中的 UserController 中添加业务逻辑，读取 pattern.dateformat 配置并使用：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Value(&quot;$&#123;pattern.dateformat&#125;&quot;)</span></span><br><span class=\"line\"><span class=\"keyword\">private</span> String dateformat;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@GetMapping(&quot;now&quot;)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> String <span class=\"title function_\">now</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">//格式化时间</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> LocalDateTime.now().format(DateTimeFormatter.ofPattern(dateformat));</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"/img/%E4%BB%A3%E7%A0%81%E9%AA%8C%E8%AF%81.png\" alt=\"代码验证\"></p>\n<p>启动服务后，访问：<a href=\"http://localhost:8081/user/now\">http://localhost:8081/user/now</a></p>\n<p><img src=\"/img/%E5%90%AF%E5%8A%A8%E7%A4%BA%E6%84%8F%E5%9B%BE.png\" alt=\"启动示意图\"></p>\n<h2 id=\"配置共享\"><a href=\"#配置共享\" class=\"headerlink\" title=\"配置共享\"></a>配置共享</h2><p>其实在服务启动时，nacos 会读取多个配置文件，例如：</p>\n<ul>\n<li><code>[spring.application.name]-[spring.profiles.active].yaml</code>，例如：userservice-dev.yaml</li>\n<li><code>[spring.application.name].yaml</code>，例如：userservice.yaml</li>\n</ul>\n<p>这里的 <code>[spring.application.name].yaml</code> 不包含环境，<strong>因此可以被多个环境共享</strong>。</p>\n<p><strong>添加一个环境共享配置</strong></p>\n<p>我们在 nacos 中添加一个 userservice.yaml 文件：</p>\n<p><img src=\"/img/%E6%B7%BB%E5%8A%A0%E4%B8%80%E4%B8%AA%E7%8E%AF%E5%A2%83%E5%85%B1%E4%BA%AB%E9%85%8D%E7%BD%AE.png\" alt=\"添加一个环境共享配置\"></p>\n<p><strong>在 user-service 中读取共享配置</strong></p>\n<p>在 user-service 服务中，修改 PatternProperties 类，读取新添加的属性：</p>\n<p><img src=\"/img/%E8%AF%BB%E5%8F%96%E6%96%B0%E6%B7%BB%E5%8A%A0%E7%9A%84%E5%B1%9E%E6%80%A7.png\" alt=\"读取新添加的属性\"></p>\n<p>在 user-service 服务中，修改 UserController，添加一个方法：</p>\n<p><img src=\"/img/%E6%B7%BB%E5%8A%A0%E4%B8%80%E4%B8%AA%E6%96%B9%E6%B3%95.png\" alt=\"添加一个方法\"></p>\n<p><strong>运行两个 UserApplication，使用不同的profile</strong></p>\n<p>修改 UserApplication2 这个启动项，改变其profile值：</p>\n<p><img src=\"/img/%E4%BD%BF%E7%94%A8%E4%B8%8D%E5%90%8C%E7%9A%84profile.png\" alt=\"使用不同的profile\"></p>\n<p><img src=\"/img/%E4%BD%BF%E7%94%A8%E4%B8%8D%E5%90%8C%E7%9A%84profile2.png\" alt=\"使用不同的profile2\"></p>\n<p>这样，UserApplication(8081) 使用的 profile 是 dev，UserApplication2(8082) 使用的 profile 是test</p>\n<p>启动 UserApplication 和 UserApplication2</p>\n<p>访问地址：<a href=\"http://localhost:8081/user/prop%EF%BC%8C%E7%BB%93%E6%9E%9C%EF%BC%9A\">http://localhost:8081/user/prop，结果：</a></p>\n<p><img src=\"/img/%E4%BD%BF%E7%94%A8%E4%B8%8D%E5%90%8C%E7%9A%84%E9%85%8D%E7%BD%AE%E7%BB%93%E6%9E%9C1.png\" alt=\"使用不同的配置结果\"></p>\n<p>访问地址：<a href=\"http://localhost:8082/user/prop%EF%BC%8C%E7%BB%93%E6%9E%9C%EF%BC%9A\">http://localhost:8082/user/prop，结果：</a></p>\n<p><img src=\"/img/%E4%BD%BF%E7%94%A8%E4%B8%8D%E5%90%8C%E7%9A%84%E9%85%8D%E7%BD%AE%E7%BB%93%E6%9E%9C2.png\" alt=\"使用不同的配置结果\"></p>\n<p>可以看出来，不管是 dev，还是 test 环境，都读取到了 envSharedValue 这个属性的值。</p>\n<p>上面的都是同一个微服务下，<strong>那么不同微服务之间可以环境共享吗？</strong></p>\n<p>通过下面的两种方式来指定：</p>\n<ul>\n<li>extension-configs</li>\n<li>shared-configs</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">spring: </span><br><span class=\"line\">  cloud:</span><br><span class=\"line\">    nacos:</span><br><span class=\"line\">      config:</span><br><span class=\"line\">        file-extension: yaml # 文件后缀名</span><br><span class=\"line\">        extends-configs: # 多微服务间共享的配置列表</span><br><span class=\"line\">          - dataId: common.yaml # 要共享的配置文件id</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">spring: </span><br><span class=\"line\">  cloud:</span><br><span class=\"line\">    nacos:</span><br><span class=\"line\">      config:</span><br><span class=\"line\">        file-extension: yaml # 文件后缀名</span><br><span class=\"line\">        shared-configs: # 多微服务间共享的配置列表</span><br><span class=\"line\">          - dataId: common.yaml # 要共享的配置文件id</span><br></pre></td></tr></table></figure>\n\n<p><strong>配置优先级</strong></p>\n<p>当 nacos、服务本地同时<strong>出现相同属性时</strong>，优先级有高低之分。</p>\n<p><img src=\"/img/%E4%BC%98%E5%85%88%E7%BA%A7%E6%9C%89%E9%AB%98%E4%BD%8E%E4%B9%8B%E5%88%86.png\" alt=\"优先级有高低之分\"></p>\n<p>更细致的配置</p>\n<p><img src=\"/img/%E6%9B%B4%E7%BB%86%E8%87%B4%E7%9A%84%E9%85%8D%E7%BD%AE.png\" alt=\"更细致的配置\"></p>\n<h2 id=\"Nacos集群\"><a href=\"#Nacos集群\" class=\"headerlink\" title=\"Nacos集群\"></a>Nacos集群</h2><p><strong>架构介绍</strong></p>\n<p><img src=\"/img/%E6%9E%B6%E6%9E%84%E4%BB%8B%E7%BB%8D.png\" alt=\"架构介绍\"></p>\n<p>其中包含 3 个Nacos 节点，然后一个负载均衡器 Nginx 代理 3 个 Nacos，我们计划的 Nacos 集群如下图，MySQL 的主从复制后续再添加。</p>\n<p><img src=\"/img/%E8%AE%A1%E5%88%92%E7%9A%84Nacos%E9%9B%86%E7%BE%A4.png\" alt=\"计划的Nacos集群\"></p>\n<p>三个 Nacos 节点的地址</p>\n<table>\n<thead>\n<tr>\n<th align=\"left\">节点</th>\n<th align=\"left\">ip</th>\n<th align=\"left\">port</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">nacos1</td>\n<td align=\"left\">192.168.150.1</td>\n<td align=\"left\">8845</td>\n</tr>\n<tr>\n<td align=\"left\">nacos2</td>\n<td align=\"left\">192.168.150.1</td>\n<td align=\"left\">8846</td>\n</tr>\n<tr>\n<td align=\"left\">nacos3</td>\n<td align=\"left\">192.168.150.1</td>\n<td align=\"left\">8847</td>\n</tr>\n</tbody></table>\n<h2 id=\"初始化数据库\"><a href=\"#初始化数据库\" class=\"headerlink\" title=\"初始化数据库\"></a>初始化数据库</h2><p>Nacos 默认数据存储在内嵌数据库 Derby 中，不属于生产可用的数据库。官方推荐的最佳实践是使用带有主从的高可用数据库集群，主从模式的高可用数据库。这里我们以单点的数据库为例。</p>\n<p>首先新建一个数据库，命名为 nacos，而后导入下面的 SQL</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">CREATE TABLE `config_info` (</span><br><span class=\"line\">  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT &#x27;id&#x27;,</span><br><span class=\"line\">  `data_id` varchar(255) NOT NULL COMMENT &#x27;data_id&#x27;,</span><br><span class=\"line\">  `group_id` varchar(255) DEFAULT NULL,</span><br><span class=\"line\">  `content` longtext NOT NULL COMMENT &#x27;content&#x27;,</span><br><span class=\"line\">  `md5` varchar(32) DEFAULT NULL COMMENT &#x27;md5&#x27;,</span><br><span class=\"line\">  `gmt_create` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT &#x27;创建时间&#x27;,</span><br><span class=\"line\">  `gmt_modified` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT &#x27;修改时间&#x27;,</span><br><span class=\"line\">  `src_user` text COMMENT &#x27;source user&#x27;,</span><br><span class=\"line\">  `src_ip` varchar(50) DEFAULT NULL COMMENT &#x27;source ip&#x27;,</span><br><span class=\"line\">  `app_name` varchar(128) DEFAULT NULL,</span><br><span class=\"line\">  `tenant_id` varchar(128) DEFAULT &#x27;&#x27; COMMENT &#x27;租户字段&#x27;,</span><br><span class=\"line\">  `c_desc` varchar(256) DEFAULT NULL,</span><br><span class=\"line\">  `c_use` varchar(64) DEFAULT NULL,</span><br><span class=\"line\">  `effect` varchar(64) DEFAULT NULL,</span><br><span class=\"line\">  `type` varchar(64) DEFAULT NULL,</span><br><span class=\"line\">  `c_schema` text,</span><br><span class=\"line\">  PRIMARY KEY (`id`),</span><br><span class=\"line\">  UNIQUE KEY `uk_configinfo_datagrouptenant` (`data_id`,`group_id`,`tenant_id`)</span><br><span class=\"line\">) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT=&#x27;config_info&#x27;;</span><br><span class=\"line\"></span><br><span class=\"line\">/******************************************/</span><br><span class=\"line\">/*   数据库全名 = nacos_config   */</span><br><span class=\"line\">/*   表名称 = config_info_aggr   */</span><br><span class=\"line\">/******************************************/</span><br><span class=\"line\">CREATE TABLE `config_info_aggr` (</span><br><span class=\"line\">  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT &#x27;id&#x27;,</span><br><span class=\"line\">  `data_id` varchar(255) NOT NULL COMMENT &#x27;data_id&#x27;,</span><br><span class=\"line\">  `group_id` varchar(255) NOT NULL COMMENT &#x27;group_id&#x27;,</span><br><span class=\"line\">  `datum_id` varchar(255) NOT NULL COMMENT &#x27;datum_id&#x27;,</span><br><span class=\"line\">  `content` longtext NOT NULL COMMENT &#x27;内容&#x27;,</span><br><span class=\"line\">  `gmt_modified` datetime NOT NULL COMMENT &#x27;修改时间&#x27;,</span><br><span class=\"line\">  `app_name` varchar(128) DEFAULT NULL,</span><br><span class=\"line\">  `tenant_id` varchar(128) DEFAULT &#x27;&#x27; COMMENT &#x27;租户字段&#x27;,</span><br><span class=\"line\">  PRIMARY KEY (`id`),</span><br><span class=\"line\">  UNIQUE KEY `uk_configinfoaggr_datagrouptenantdatum` (`data_id`,`group_id`,`tenant_id`,`datum_id`)</span><br><span class=\"line\">) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT=&#x27;增加租户字段&#x27;;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">/******************************************/</span><br><span class=\"line\">/*   数据库全名 = nacos_config   */</span><br><span class=\"line\">/*   表名称 = config_info_beta   */</span><br><span class=\"line\">/******************************************/</span><br><span class=\"line\">CREATE TABLE `config_info_beta` (</span><br><span class=\"line\">  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT &#x27;id&#x27;,</span><br><span class=\"line\">  `data_id` varchar(255) NOT NULL COMMENT &#x27;data_id&#x27;,</span><br><span class=\"line\">  `group_id` varchar(128) NOT NULL COMMENT &#x27;group_id&#x27;,</span><br><span class=\"line\">  `app_name` varchar(128) DEFAULT NULL COMMENT &#x27;app_name&#x27;,</span><br><span class=\"line\">  `content` longtext NOT NULL COMMENT &#x27;content&#x27;,</span><br><span class=\"line\">  `beta_ips` varchar(1024) DEFAULT NULL COMMENT &#x27;betaIps&#x27;,</span><br><span class=\"line\">  `md5` varchar(32) DEFAULT NULL COMMENT &#x27;md5&#x27;,</span><br><span class=\"line\">  `gmt_create` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT &#x27;创建时间&#x27;,</span><br><span class=\"line\">  `gmt_modified` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT &#x27;修改时间&#x27;,</span><br><span class=\"line\">  `src_user` text COMMENT &#x27;source user&#x27;,</span><br><span class=\"line\">  `src_ip` varchar(50) DEFAULT NULL COMMENT &#x27;source ip&#x27;,</span><br><span class=\"line\">  `tenant_id` varchar(128) DEFAULT &#x27;&#x27; COMMENT &#x27;租户字段&#x27;,</span><br><span class=\"line\">  PRIMARY KEY (`id`),</span><br><span class=\"line\">  UNIQUE KEY `uk_configinfobeta_datagrouptenant` (`data_id`,`group_id`,`tenant_id`)</span><br><span class=\"line\">) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT=&#x27;config_info_beta&#x27;;</span><br><span class=\"line\"></span><br><span class=\"line\">/******************************************/</span><br><span class=\"line\">/*   数据库全名 = nacos_config   */</span><br><span class=\"line\">/*   表名称 = config_info_tag   */</span><br><span class=\"line\">/******************************************/</span><br><span class=\"line\">CREATE TABLE `config_info_tag` (</span><br><span class=\"line\">  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT &#x27;id&#x27;,</span><br><span class=\"line\">  `data_id` varchar(255) NOT NULL COMMENT &#x27;data_id&#x27;,</span><br><span class=\"line\">  `group_id` varchar(128) NOT NULL COMMENT &#x27;group_id&#x27;,</span><br><span class=\"line\">  `tenant_id` varchar(128) DEFAULT &#x27;&#x27; COMMENT &#x27;tenant_id&#x27;,</span><br><span class=\"line\">  `tag_id` varchar(128) NOT NULL COMMENT &#x27;tag_id&#x27;,</span><br><span class=\"line\">  `app_name` varchar(128) DEFAULT NULL COMMENT &#x27;app_name&#x27;,</span><br><span class=\"line\">  `content` longtext NOT NULL COMMENT &#x27;content&#x27;,</span><br><span class=\"line\">  `md5` varchar(32) DEFAULT NULL COMMENT &#x27;md5&#x27;,</span><br><span class=\"line\">  `gmt_create` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT &#x27;创建时间&#x27;,</span><br><span class=\"line\">  `gmt_modified` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT &#x27;修改时间&#x27;,</span><br><span class=\"line\">  `src_user` text COMMENT &#x27;source user&#x27;,</span><br><span class=\"line\">  `src_ip` varchar(50) DEFAULT NULL COMMENT &#x27;source ip&#x27;,</span><br><span class=\"line\">  PRIMARY KEY (`id`),</span><br><span class=\"line\">  UNIQUE KEY `uk_configinfotag_datagrouptenanttag` (`data_id`,`group_id`,`tenant_id`,`tag_id`)</span><br><span class=\"line\">) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT=&#x27;config_info_tag&#x27;;</span><br><span class=\"line\"></span><br><span class=\"line\">/******************************************/</span><br><span class=\"line\">/*   数据库全名 = nacos_config   */</span><br><span class=\"line\">/*   表名称 = config_tags_relation   */</span><br><span class=\"line\">/******************************************/</span><br><span class=\"line\">CREATE TABLE `config_tags_relation` (</span><br><span class=\"line\">  `id` bigint(20) NOT NULL COMMENT &#x27;id&#x27;,</span><br><span class=\"line\">  `tag_name` varchar(128) NOT NULL COMMENT &#x27;tag_name&#x27;,</span><br><span class=\"line\">  `tag_type` varchar(64) DEFAULT NULL COMMENT &#x27;tag_type&#x27;,</span><br><span class=\"line\">  `data_id` varchar(255) NOT NULL COMMENT &#x27;data_id&#x27;,</span><br><span class=\"line\">  `group_id` varchar(128) NOT NULL COMMENT &#x27;group_id&#x27;,</span><br><span class=\"line\">  `tenant_id` varchar(128) DEFAULT &#x27;&#x27; COMMENT &#x27;tenant_id&#x27;,</span><br><span class=\"line\">  `nid` bigint(20) NOT NULL AUTO_INCREMENT,</span><br><span class=\"line\">  PRIMARY KEY (`nid`),</span><br><span class=\"line\">  UNIQUE KEY `uk_configtagrelation_configidtag` (`id`,`tag_name`,`tag_type`),</span><br><span class=\"line\">  KEY `idx_tenant_id` (`tenant_id`)</span><br><span class=\"line\">) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT=&#x27;config_tag_relation&#x27;;</span><br><span class=\"line\"></span><br><span class=\"line\">/******************************************/</span><br><span class=\"line\">/*   数据库全名 = nacos_config   */</span><br><span class=\"line\">/*   表名称 = group_capacity   */</span><br><span class=\"line\">/******************************************/</span><br><span class=\"line\">CREATE TABLE `group_capacity` (</span><br><span class=\"line\">  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT COMMENT &#x27;主键ID&#x27;,</span><br><span class=\"line\">  `group_id` varchar(128) NOT NULL DEFAULT &#x27;&#x27; COMMENT &#x27;Group ID，空字符表示整个集群&#x27;,</span><br><span class=\"line\">  `quota` int(10) unsigned NOT NULL DEFAULT &#x27;0&#x27; COMMENT &#x27;配额，0表示使用默认值&#x27;,</span><br><span class=\"line\">  `usage` int(10) unsigned NOT NULL DEFAULT &#x27;0&#x27; COMMENT &#x27;使用量&#x27;,</span><br><span class=\"line\">  `max_size` int(10) unsigned NOT NULL DEFAULT &#x27;0&#x27; COMMENT &#x27;单个配置大小上限，单位为字节，0表示使用默认值&#x27;,</span><br><span class=\"line\">  `max_aggr_count` int(10) unsigned NOT NULL DEFAULT &#x27;0&#x27; COMMENT &#x27;聚合子配置最大个数，，0表示使用默认值&#x27;,</span><br><span class=\"line\">  `max_aggr_size` int(10) unsigned NOT NULL DEFAULT &#x27;0&#x27; COMMENT &#x27;单个聚合数据的子配置大小上限，单位为字节，0表示使用默认值&#x27;,</span><br><span class=\"line\">  `max_history_count` int(10) unsigned NOT NULL DEFAULT &#x27;0&#x27; COMMENT &#x27;最大变更历史数量&#x27;,</span><br><span class=\"line\">  `gmt_create` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT &#x27;创建时间&#x27;,</span><br><span class=\"line\">  `gmt_modified` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT &#x27;修改时间&#x27;,</span><br><span class=\"line\">  PRIMARY KEY (`id`),</span><br><span class=\"line\">  UNIQUE KEY `uk_group_id` (`group_id`)</span><br><span class=\"line\">) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT=&#x27;集群、各Group容量信息表&#x27;;</span><br><span class=\"line\"></span><br><span class=\"line\">/******************************************/</span><br><span class=\"line\">/*   数据库全名 = nacos_config   */</span><br><span class=\"line\">/*   表名称 = his_config_info   */</span><br><span class=\"line\">/******************************************/</span><br><span class=\"line\">CREATE TABLE `his_config_info` (</span><br><span class=\"line\">  `id` bigint(64) unsigned NOT NULL,</span><br><span class=\"line\">  `nid` bigint(20) unsigned NOT NULL AUTO_INCREMENT,</span><br><span class=\"line\">  `data_id` varchar(255) NOT NULL,</span><br><span class=\"line\">  `group_id` varchar(128) NOT NULL,</span><br><span class=\"line\">  `app_name` varchar(128) DEFAULT NULL COMMENT &#x27;app_name&#x27;,</span><br><span class=\"line\">  `content` longtext NOT NULL,</span><br><span class=\"line\">  `md5` varchar(32) DEFAULT NULL,</span><br><span class=\"line\">  `gmt_create` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,</span><br><span class=\"line\">  `gmt_modified` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,</span><br><span class=\"line\">  `src_user` text,</span><br><span class=\"line\">  `src_ip` varchar(50) DEFAULT NULL,</span><br><span class=\"line\">  `op_type` char(10) DEFAULT NULL,</span><br><span class=\"line\">  `tenant_id` varchar(128) DEFAULT &#x27;&#x27; COMMENT &#x27;租户字段&#x27;,</span><br><span class=\"line\">  PRIMARY KEY (`nid`),</span><br><span class=\"line\">  KEY `idx_gmt_create` (`gmt_create`),</span><br><span class=\"line\">  KEY `idx_gmt_modified` (`gmt_modified`),</span><br><span class=\"line\">  KEY `idx_did` (`data_id`)</span><br><span class=\"line\">) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT=&#x27;多租户改造&#x27;;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">/******************************************/</span><br><span class=\"line\">/*   数据库全名 = nacos_config   */</span><br><span class=\"line\">/*   表名称 = tenant_capacity   */</span><br><span class=\"line\">/******************************************/</span><br><span class=\"line\">CREATE TABLE `tenant_capacity` (</span><br><span class=\"line\">  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT COMMENT &#x27;主键ID&#x27;,</span><br><span class=\"line\">  `tenant_id` varchar(128) NOT NULL DEFAULT &#x27;&#x27; COMMENT &#x27;Tenant ID&#x27;,</span><br><span class=\"line\">  `quota` int(10) unsigned NOT NULL DEFAULT &#x27;0&#x27; COMMENT &#x27;配额，0表示使用默认值&#x27;,</span><br><span class=\"line\">  `usage` int(10) unsigned NOT NULL DEFAULT &#x27;0&#x27; COMMENT &#x27;使用量&#x27;,</span><br><span class=\"line\">  `max_size` int(10) unsigned NOT NULL DEFAULT &#x27;0&#x27; COMMENT &#x27;单个配置大小上限，单位为字节，0表示使用默认值&#x27;,</span><br><span class=\"line\">  `max_aggr_count` int(10) unsigned NOT NULL DEFAULT &#x27;0&#x27; COMMENT &#x27;聚合子配置最大个数&#x27;,</span><br><span class=\"line\">  `max_aggr_size` int(10) unsigned NOT NULL DEFAULT &#x27;0&#x27; COMMENT &#x27;单个聚合数据的子配置大小上限，单位为字节，0表示使用默认值&#x27;,</span><br><span class=\"line\">  `max_history_count` int(10) unsigned NOT NULL DEFAULT &#x27;0&#x27; COMMENT &#x27;最大变更历史数量&#x27;,</span><br><span class=\"line\">  `gmt_create` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT &#x27;创建时间&#x27;,</span><br><span class=\"line\">  `gmt_modified` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT &#x27;修改时间&#x27;,</span><br><span class=\"line\">  PRIMARY KEY (`id`),</span><br><span class=\"line\">  UNIQUE KEY `uk_tenant_id` (`tenant_id`)</span><br><span class=\"line\">) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT=&#x27;租户容量信息表&#x27;;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">CREATE TABLE `tenant_info` (</span><br><span class=\"line\">  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT &#x27;id&#x27;,</span><br><span class=\"line\">  `kp` varchar(128) NOT NULL COMMENT &#x27;kp&#x27;,</span><br><span class=\"line\">  `tenant_id` varchar(128) default &#x27;&#x27; COMMENT &#x27;tenant_id&#x27;,</span><br><span class=\"line\">  `tenant_name` varchar(128) default &#x27;&#x27; COMMENT &#x27;tenant_name&#x27;,</span><br><span class=\"line\">  `tenant_desc` varchar(256) DEFAULT NULL COMMENT &#x27;tenant_desc&#x27;,</span><br><span class=\"line\">  `create_source` varchar(32) DEFAULT NULL COMMENT &#x27;create_source&#x27;,</span><br><span class=\"line\">  `gmt_create` bigint(20) NOT NULL COMMENT &#x27;创建时间&#x27;,</span><br><span class=\"line\">  `gmt_modified` bigint(20) NOT NULL COMMENT &#x27;修改时间&#x27;,</span><br><span class=\"line\">  PRIMARY KEY (`id`),</span><br><span class=\"line\">  UNIQUE KEY `uk_tenant_info_kptenantid` (`kp`,`tenant_id`),</span><br><span class=\"line\">  KEY `idx_tenant_id` (`tenant_id`)</span><br><span class=\"line\">) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT=&#x27;tenant_info&#x27;;</span><br><span class=\"line\"></span><br><span class=\"line\">CREATE TABLE `users` (</span><br><span class=\"line\">    `username` varchar(50) NOT NULL PRIMARY KEY,</span><br><span class=\"line\">    `password` varchar(500) NOT NULL,</span><br><span class=\"line\">    `enabled` boolean NOT NULL</span><br><span class=\"line\">);</span><br><span class=\"line\"></span><br><span class=\"line\">CREATE TABLE `roles` (</span><br><span class=\"line\">    `username` varchar(50) NOT NULL,</span><br><span class=\"line\">    `role` varchar(50) NOT NULL,</span><br><span class=\"line\">    UNIQUE INDEX `idx_user_role` (`username` ASC, `role` ASC) USING BTREE</span><br><span class=\"line\">);</span><br><span class=\"line\"></span><br><span class=\"line\">CREATE TABLE `permissions` (</span><br><span class=\"line\">    `role` varchar(50) NOT NULL,</span><br><span class=\"line\">    `resource` varchar(255) NOT NULL,</span><br><span class=\"line\">    `action` varchar(8) NOT NULL,</span><br><span class=\"line\">    UNIQUE INDEX `uk_role_permission` (`role`,`resource`,`action`) USING BTREE</span><br><span class=\"line\">);</span><br><span class=\"line\"></span><br><span class=\"line\">INSERT INTO users (username, password, enabled) VALUES (&#x27;nacos&#x27;, &#x27;$2a$10$EuWPZHzz32dJN7jexM34MOeYirDdFAZm2kuWj7VEOJhhZkDrxfvUu&#x27;, TRUE);</span><br><span class=\"line\"></span><br><span class=\"line\">INSERT INTO roles (username, role) VALUES (&#x27;nacos&#x27;, &#x27;ROLE_ADMIN&#x27;);</span><br></pre></td></tr></table></figure>\n\n<p><strong>配置Nacos</strong></p>\n<p>进入 nacos 的 conf 目录，修改配置文件 cluster.conf.example，重命名为 cluster.conf</p>\n<p><img src=\"/img/%E4%BF%AE%E6%94%B9%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6.png\" alt=\"修改配置文件\"></p>\n<p>添加内容</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">127.0</span><span class=\"number\">.0</span><span class=\"number\">.1</span>:<span class=\"number\">8845</span></span><br><span class=\"line\"><span class=\"number\">127.0</span><span class=\"number\">.0</span><span class=\"number\">.1</span><span class=\"number\">.8846</span></span><br><span class=\"line\"><span class=\"number\">127.0</span><span class=\"number\">.0</span><span class=\"number\">.1</span><span class=\"number\">.8847</span></span><br></pre></td></tr></table></figure>\n\n<p>然后修改 application.properties 文件，添加数据库配置</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">spring.datasource.platform=mysql</span><br><span class=\"line\">db.num=<span class=\"number\">1</span></span><br><span class=\"line\">db.url<span class=\"number\">.0</span>=jdbc:mysql:<span class=\"comment\">//127.0.0.1:3306/nacos?characterEncoding=utf8&amp;connectTimeout=1000&amp;socketTimeout=3000&amp;autoReconnect=true&amp;useUnicode=true&amp;useSSL=false&amp;serverTimezone=UTC</span></span><br><span class=\"line\">db.user<span class=\"number\">.0</span>=root</span><br><span class=\"line\">db.password<span class=\"number\">.0</span>=<span class=\"number\">123456</span></span><br></pre></td></tr></table></figure>\n\n<p>将 nacos 文件夹复制三份，分别命名为：nacos1、nacos2、nacos3</p>\n<p><img src=\"/img/%E5%B0%86nacos%E6%96%87%E4%BB%B6%E5%A4%B9%E5%A4%8D%E5%88%B6%E4%B8%89%E4%BB%BD.png\" alt=\"将nacos文件夹复制三份\"></p>\n<p>然后分别修改三个文件夹中的 application.properties，</p>\n<p>nacos1</p>\n<figure class=\"highlight properties\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">server.port</span>=<span class=\"string\">8845</span></span><br></pre></td></tr></table></figure>\n\n<p>nacos2</p>\n<figure class=\"highlight properties\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">server.port</span>=<span class=\"string\">8846</span></span><br></pre></td></tr></table></figure>\n\n<p>nacos3</p>\n<figure class=\"highlight properties\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">server.port</span>=<span class=\"string\">8847</span></span><br></pre></td></tr></table></figure>\n\n<p>然后分别启动三个 nacos</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">startup.cmd</span><br></pre></td></tr></table></figure>\n\n<p><strong>Nginx反向代理</strong></p>\n<p>修改 nginx 文件夹下的 conf/nginx.conf 文件，配置如下</p>\n<figure class=\"highlight nginx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"section\">upstream</span> nacos-cluster &#123;</span><br><span class=\"line\">    <span class=\"attribute\">server</span> <span class=\"number\">127.0.0.1:8845</span>;</span><br><span class=\"line\">    <span class=\"attribute\">server</span> <span class=\"number\">127.0.0.1:8846</span>;</span><br><span class=\"line\">    <span class=\"attribute\">server</span> <span class=\"number\">127.0.0.1:8847</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"section\">server</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">listen</span>       <span class=\"number\">80</span>;</span><br><span class=\"line\">    <span class=\"attribute\">server_name</span>  localhost;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"section\">location</span> /nacos &#123;</span><br><span class=\"line\">        <span class=\"attribute\">proxy_pass</span> http://nacos-cluster;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>启动 nginx，在浏览器访问：<a href=\"http://localhost/nacos\">http://localhost/nacos</a></p>\n<p>在代码中的 application.yml 文件配置改为如下：</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">spring:</span></span><br><span class=\"line\">  <span class=\"attr\">cloud:</span></span><br><span class=\"line\">    <span class=\"attr\">nacos:</span></span><br><span class=\"line\">      <span class=\"attr\">server-addr:</span> <span class=\"string\">localhost:80</span> <span class=\"comment\"># Nacos地址</span></span><br></pre></td></tr></table></figure>\n\n<p>实际部署时，需要给做反向代理的 Nginx 服务器设置一个域名，这样后续如果有服务器迁移 Nacos 的客户端也无需更改配置。Nacos 的各个节点应该部署到多个不同服务器，做好容灾和隔离工作。</p>\n<h1 id=\"Feign\"><a href=\"#Feign\" class=\"headerlink\" title=\"Feign\"></a>Feign</h1><p>我们以前利用 RestTemplate 发起远程调用的代码：</p>\n<p><img src=\"/img/%E5%88%A9%E7%94%A8RestTemplate%E5%8F%91%E8%B5%B7%E8%BF%9C%E7%A8%8B%E8%B0%83%E7%94%A8.png\" alt=\"利用RestTemplate发起远程调用\"></p>\n<ul>\n<li>代码可读性差，编程体验不统一</li>\n<li>参数复杂URL难以维护</li>\n</ul>\n<p>Feign 是一个声明式的 http 客户端，官方地址：<a href=\"https://github.com/OpenFeign/feign\">https://github.com/OpenFeign/feign</a></p>\n<p>其作用就是帮助我们<strong>优雅的实现 http 请求的发送</strong>，解决上面提到的问题。</p>\n<p><img src=\"/img/feign%E4%BD%9C%E7%94%A8.png\" alt=\"feign作用\"></p>\n<h2 id=\"Feign使用\"><a href=\"#Feign使用\" class=\"headerlink\" title=\"Feign使用\"></a>Feign使用</h2><p><strong>引入依赖</strong></p>\n<p>我们在 order-service 引入 feign 依赖：</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.springframework.cloud<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring-cloud-starter-openfeign<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p><strong>添加注解</strong></p>\n<p>在 order-service 启动类添加注解开启 Feign</p>\n<p><img src=\"/img/%E6%B3%A8%E8%A7%A3%E5%BC%80%E5%90%AFFeign.png\" alt=\"注解开启Feign\"></p>\n<p><strong>请求接口</strong></p>\n<p>在 order-service 中新建一个接口，内容如下</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.xn2001.order.client;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> com.xn2001.order.pojo.User;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.cloud.openfeign.FeignClient;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.web.bind.annotation.PathVariable;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@FeignClient(&quot;userservice&quot;)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">interface</span> <span class=\"title class_\">UserClient</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@GetMapping(&quot;/user/&#123;id&#125;&quot;)</span></span><br><span class=\"line\">    User <span class=\"title function_\">findById</span><span class=\"params\">(<span class=\"meta\">@PathVariable(&quot;id&quot;)</span> Long id)</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><code>@FeignClient(&quot;userservice&quot;)</code>：其中参数填写的是微服务名</p>\n<p><code>@GetMapping(&quot;/user/&#123;id&#125;&quot;)</code>：其中参数填写的是请求路径</p>\n<p>这个客户端主要是基于 SpringMVC 的注解 <code>@GetMapping</code> 来声明远程调用的信息</p>\n<p>Feign 可以帮助我们发送 http 请求，无需自己使用 RestTemplate 来发送了。</p>\n<p><strong>测试</strong></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Autowired</span></span><br><span class=\"line\"><span class=\"keyword\">private</span> UserClient userClient;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> Order <span class=\"title function_\">queryOrderAndUserById</span><span class=\"params\">(Long orderId)</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 1.查询订单</span></span><br><span class=\"line\">    <span class=\"type\">Order</span> <span class=\"variable\">order</span> <span class=\"operator\">=</span> orderMapper.findById(orderId);</span><br><span class=\"line\">    <span class=\"comment\">// <span class=\"doctag\">TODO:</span> 2021/8/20 使用feign远程调用</span></span><br><span class=\"line\">    <span class=\"type\">User</span> <span class=\"variable\">user</span> <span class=\"operator\">=</span> userClient.findById(order.getUserId());</span><br><span class=\"line\">    <span class=\"comment\">// 3. 将用户信息封装进订单</span></span><br><span class=\"line\">    order.setUser(user);</span><br><span class=\"line\">    <span class=\"comment\">// 4.返回</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> order;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"自定义配置\"><a href=\"#自定义配置\" class=\"headerlink\" title=\"自定义配置\"></a>自定义配置</h2><p>Feign 可以支持很多的自定义配置，如下表所示：</p>\n<table>\n<thead>\n<tr>\n<th align=\"left\">类型</th>\n<th align=\"left\">作用</th>\n<th align=\"left\">说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\"><strong>feign.Logger.Level</strong></td>\n<td align=\"left\">修改日志级别</td>\n<td align=\"left\">包含四种不同的级别：NONE、BASIC、HEADERS、FULL</td>\n</tr>\n<tr>\n<td align=\"left\">feign.codec.Decoder</td>\n<td align=\"left\">响应结果的解析器</td>\n<td align=\"left\">http远程调用的结果做解析，例如解析json字符串为java对象</td>\n</tr>\n<tr>\n<td align=\"left\">feign.codec.Encoder</td>\n<td align=\"left\">请求参数编码</td>\n<td align=\"left\">将请求参数编码，便于通过http请求发送</td>\n</tr>\n<tr>\n<td align=\"left\">feign.Contract</td>\n<td align=\"left\">支持的注解格式</td>\n<td align=\"left\">默认是SpringMVC的注解</td>\n</tr>\n<tr>\n<td align=\"left\">feign.Retryer</td>\n<td align=\"left\">失败重试机制</td>\n<td align=\"left\">请求失败的重试机制，默认是没有，不过会使用Ribbon的重试</td>\n</tr>\n</tbody></table>\n<p>一般情况下，默认值就能满足我们使用，如果要自定义时，只需要创建自定义的 @Bean 覆盖默认 Bean 即可。下面以日志为例来演示如何自定义配置。</p>\n<p>基于配置文件修改 feign 的日志级别可以针对单个服务：</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">feign:</span>  </span><br><span class=\"line\">  <span class=\"attr\">client:</span></span><br><span class=\"line\">    <span class=\"attr\">config:</span> </span><br><span class=\"line\">      <span class=\"attr\">userservice:</span> <span class=\"comment\"># 针对某个微服务的配置</span></span><br><span class=\"line\">        <span class=\"attr\">loggerLevel:</span> <span class=\"string\">FULL</span> <span class=\"comment\">#  日志级别 </span></span><br></pre></td></tr></table></figure>\n\n<p><strong>也可以针对所有服务</strong>：</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">feign:</span>  </span><br><span class=\"line\">  <span class=\"attr\">client:</span></span><br><span class=\"line\">    <span class=\"attr\">config:</span> </span><br><span class=\"line\">      <span class=\"attr\">default:</span> <span class=\"comment\"># 这里用default就是全局配置，如果是写服务名称，则是针对某个微服务的配置</span></span><br><span class=\"line\">        <span class=\"attr\">loggerLevel:</span> <span class=\"string\">FULL</span> <span class=\"comment\">#  日志级别 </span></span><br></pre></td></tr></table></figure>\n\n<p>而日志的级别分为四种：</p>\n<ul>\n<li>NONE：不记录任何日志信息，这是默认值。</li>\n<li>BASIC：仅记录请求的方法，URL以及响应状态码和执行时间</li>\n<li>HEADERS：在BASIC的基础上，额外记录了请求和响应的头信息</li>\n<li>FULL：记录所有请求和响应的明细，包括头信息、请求体、元数据</li>\n</ul>\n<p>也可以基于 <strong>Java 代码</strong>来修改日志级别，先声明一个类，然后声明一个 Logger.Level 的对象</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">DefaultFeignConfiguration</span>  &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Bean</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> Logger.Level <span class=\"title function_\">feignLogLevel</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> Logger.Level.BASIC; <span class=\"comment\">// 日志级别为BASIC</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>如果要<strong>全局生效</strong>，将其放到启动类的 <code>@EnableFeignClients</code> 这个注解中：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@EnableFeignClients(defaultConfiguration = DefaultFeignConfiguration .class)</span> </span><br></pre></td></tr></table></figure>\n\n<p>如果是<strong>局部生效</strong>，则把它放到对应的 <code>@FeignClient</code> 这个注解中：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@FeignClient(value = &quot;userservice&quot;, configuration = DefaultFeignConfiguration .class)</span> </span><br></pre></td></tr></table></figure>\n\n<h2 id=\"性能优化\"><a href=\"#性能优化\" class=\"headerlink\" title=\"性能优化\"></a>性能优化</h2><p>Feign 底层发起 http 请求，依赖于其它的框架。其底层客户端实现有：</p>\n<ul>\n<li><strong>URLConnection</strong>：默认实现，不支持连接池</li>\n<li><strong>Apache HttpClient</strong> ：支持连接池</li>\n<li><strong>OKHttp</strong>：支持连接池</li>\n</ul>\n<p>因此提高 Feign 性能的主要手段就是使用<strong>连接池</strong>代替默认的 URLConnection</p>\n<p>另外，日志级别应该尽量用 basic/none，可以有效提高性能。</p>\n<p><strong>这里我们用 Apache 的HttpClient来演示连接池。</strong></p>\n<p>在 order-service 的 pom 文件中引入 HttpClient 依赖</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!--httpClient的依赖 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>io.github.openfeign<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>feign-httpclient<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p><strong>配置连接池</strong></p>\n<p>在 order-service 的 application.yml 中添加配置</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">feign:</span></span><br><span class=\"line\">  <span class=\"attr\">client:</span></span><br><span class=\"line\">    <span class=\"attr\">config:</span></span><br><span class=\"line\">      <span class=\"attr\">default:</span> <span class=\"comment\"># default全局的配置</span></span><br><span class=\"line\">        <span class=\"attr\">loggerLevel:</span> <span class=\"string\">BASIC</span> <span class=\"comment\"># 日志级别，BASIC就是基本的请求和响应信息</span></span><br><span class=\"line\">  <span class=\"attr\">httpclient:</span></span><br><span class=\"line\">    <span class=\"attr\">enabled:</span> <span class=\"literal\">true</span> <span class=\"comment\"># 开启feign对HttpClient的支持</span></span><br><span class=\"line\">    <span class=\"attr\">max-connections:</span> <span class=\"number\">200</span> <span class=\"comment\"># 最大的连接数</span></span><br><span class=\"line\">    <span class=\"attr\">max-connections-per-route:</span> <span class=\"number\">50</span> <span class=\"comment\"># 每个路径的最大连接数</span></span><br></pre></td></tr></table></figure>\n\n<p>在 FeignClientFactoryBean 中的 loadBalance 方法中打断点</p>\n<p><img src=\"/img/loadBalance.png\" alt=\"loadBalance\"></p>\n<p>Debug 方式启动 order-service 服务，可以看到这里的 client，底层就是 HttpClient</p>\n<p><img src=\"/img/HttpClient.png\" alt=\"HttpClient\"></p>\n<h2 id=\"最佳实践\"><a href=\"#最佳实践\" class=\"headerlink\" title=\"最佳实践\"></a>最佳实践</h2><p><strong>继承方式</strong></p>\n<p>一样的代码可以通过继承来共享：</p>\n<p>1）定义一个 API 接口，利用定义方法，并基于 SpringMVC 注解做声明</p>\n<p>2）Feign 客户端、Controller 都集成该接口</p>\n<p><img src=\"/img/%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5.png\" alt=\"最佳实践\"></p>\n<p>优点</p>\n<ul>\n<li>简单</li>\n<li>实现了代码共享</li>\n</ul>\n<p>缺点</p>\n<ul>\n<li>服务提供方、服务消费方紧耦合</li>\n<li>参数列表中的注解映射并不会继承，因此 Controller 中必须再次声明方法、参数列表、注解</li>\n</ul>\n<p><strong>抽取方式</strong></p>\n<p>将 FeignClient 抽取为独立模块，并且把接口有关的 pojo、默认的 Feign 配置都放到这个模块中，提供给所有消费者使用。</p>\n<p>例如：将 UserClient、User、Feign 的默认配置都抽取到一个 feign-api 包中，所有微服务引用该依赖包，即可直接使用。</p>\n<p><img src=\"/img/%E6%8A%BD%E5%8F%96%E6%96%B9%E5%BC%8F.png\" alt=\"抽取方式\"></p>\n<p>接下来我们就用该方法在代码中实现</p>\n<p><strong>首先创建一个 module，命名为 feign-api</strong></p>\n<p><img src=\"/img/feign-api.png\" alt=\"feign-api\"></p>\n<p>在 feign-api 中然后引入依赖</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.springframework.cloud<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring-cloud-starter-openfeign<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>order-service中 的 UserClient、User 都复制到 feign-api 项目中</p>\n<p><img src=\"/img/feign-api%E4%BF%AE%E6%94%B9.png\" alt=\"feign-api修改\"></p>\n<p>接下来在 order-service 中使用 feign-api</p>\n<p>由于我们已经将 UserClient、User 放在 fegin-api 中共享了 ，所以可以删除 order-service 中的 UserClient、User，然后在 order-service 中引入 feign-api</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>com.xn2001.feign<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>feign-api<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>1.0<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p><strong>修改注解</strong></p>\n<p>当定义的 FeignClient 不在 SpringBootApplication 的扫描包范围下时，这些 FeignClient 就不能使用。</p>\n<p>修改 order-service 启动类上的 <code>@EnableFeignClients</code> 注解</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@EnableFeignClients(basePackages = &quot;com.xn2001.feign.clients&quot;)</span></span><br></pre></td></tr></table></figure>\n\n<h1 id=\"Gateway\"><a href=\"#Gateway\" class=\"headerlink\" title=\"Gateway\"></a>Gateway</h1><p>Spring Cloud Gateway 是 Spring Cloud 的一个全新项目，该项目是基于 Spring 5.0，Spring Boot 2.0 和 Project Reactor 等响应式编程和事件流技术开发的网关，它旨在为微服务架构提供一种简单有效的统一的 API 路由管理方式。</p>\n<p>Gateway 网关是我们服务的守门神，<strong>所有微服务的统一入口。</strong></p>\n<p>网关的<strong>核心功能特性</strong>：</p>\n<ul>\n<li>请求路由</li>\n<li>权限控制</li>\n<li>限流</li>\n</ul>\n<p><img src=\"/img/Gateway%E7%BD%91%E5%85%B3.png\" alt=\"Gateway网关\"></p>\n<p><strong>权限控制</strong>：网关作为微服务入口，需要校验用户是是否有请求资格，如果没有则进行拦截。</p>\n<p><strong>路由和负载均衡</strong>：一切请求都必须先经过 gateway，但网关不处理业务，而是根据某种规则，把请求转发到某个微服务，这个过程叫做路由。当然路由的目标服务有多个时，还需要做负载均衡。</p>\n<p><strong>限流</strong>：当请求流量过高时，在网关中按照下流的微服务能够接受的速度来放行请求，避免服务压力过大。</p>\n<p>在 SpringCloud 中网关的实现包括两种：</p>\n<ul>\n<li>gateway</li>\n<li>zuul</li>\n</ul>\n<p>Zuul 是基于 Servlet 实现，属于阻塞式编程。而 Spring Cloud Gateway 则是基于 Spring5 中提供的WebFlux，属于响应式编程的实现，具备更好的性能。</p>\n<h2 id=\"入门使用\"><a href=\"#入门使用\" class=\"headerlink\" title=\"入门使用\"></a>入门使用</h2><ol>\n<li>创建 SpringBoot 工程 gateway，引入网关依赖</li>\n<li>编写启动类</li>\n<li>编写基础配置和路由规则</li>\n<li>启动网关服务进行测试</li>\n</ol>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!--网关--&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.springframework.cloud<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring-cloud-starter-gateway<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!--nacos服务发现依赖--&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>com.alibaba.cloud<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-nacos-discovery<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>创建 application.yml 文件，内容如下：</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">server:</span></span><br><span class=\"line\">  <span class=\"attr\">port:</span> <span class=\"number\">10010</span> <span class=\"comment\"># 网关端口</span></span><br><span class=\"line\"><span class=\"attr\">spring:</span></span><br><span class=\"line\">  <span class=\"attr\">application:</span></span><br><span class=\"line\">    <span class=\"attr\">name:</span> <span class=\"string\">gateway</span> <span class=\"comment\"># 服务名称</span></span><br><span class=\"line\">  <span class=\"attr\">cloud:</span></span><br><span class=\"line\">    <span class=\"attr\">nacos:</span></span><br><span class=\"line\">      <span class=\"attr\">server-addr:</span> <span class=\"string\">localhost:8848</span> <span class=\"comment\"># nacos地址</span></span><br><span class=\"line\">    <span class=\"attr\">gateway:</span></span><br><span class=\"line\">      <span class=\"attr\">routes:</span> <span class=\"comment\"># 网关路由配置</span></span><br><span class=\"line\">        <span class=\"bullet\">-</span> <span class=\"attr\">id:</span> <span class=\"string\">user-service</span> <span class=\"comment\"># 路由id，自定义，只要唯一即可</span></span><br><span class=\"line\">          <span class=\"comment\"># uri: http://127.0.0.1:8081 # 路由的目标地址 http就是固定地址</span></span><br><span class=\"line\">          <span class=\"attr\">uri:</span> <span class=\"string\">lb://userservice</span> <span class=\"comment\"># 路由的目标地址 lb就是负载均衡，后面跟服务名称</span></span><br><span class=\"line\">          <span class=\"attr\">predicates:</span> <span class=\"comment\"># 路由断言，也就是判断请求是否符合路由规则的条件</span></span><br><span class=\"line\">            <span class=\"bullet\">-</span> <span class=\"string\">Path=/user/**</span> <span class=\"comment\"># 这个是按照路径匹配，只要以/user/开头就符合要求</span></span><br></pre></td></tr></table></figure>\n\n<p>我们将符合<code>Path</code> 规则的一切请求，都代理到 <code>uri</code>参数指定的地址。</p>\n<p>上面的例子中，我们将 <code>/user/**</code> 开头的请求，代理到 <code>lb://userservice</code>，其中 lb 是负载均衡(LoadBalance)，根据服务名拉取服务列表，实现负载均衡。</p>\n<p>重启网关，访问 <a href=\"http://localhost:10010/user/1\">http://localhost:10010/user/1</a> 时，符合 <code>/user/**</code> 规则，请求转发到 uri：<a href=\"http://userservice/user/1\">http://userservice/user/1</a></p>\n<p><img src=\"/img/httpuserserviceuser1.png\" alt=\"httpuserserviceuser1\"></p>\n<p>多个 predicates 的话，要同时满足规则，下文有例子。</p>\n<h2 id=\"流程图\"><a href=\"#流程图\" class=\"headerlink\" title=\"流程图\"></a>流程图</h2><p><img src=\"/img/gateway%E6%B5%81%E7%A8%8B%E5%9B%BE.png\" alt=\"gateway流程图\"></p>\n<p>路由配置包括：</p>\n<ol>\n<li>路由id：路由的唯一标示</li>\n<li>路由目标（uri）：路由的目标地址，http代表固定地址，lb代表根据服务名负载均衡</li>\n<li>路由断言（predicates）：判断路由的规则</li>\n<li>路由过滤器（filters）：对请求或响应做处理</li>\n</ol>\n<h2 id=\"断言工厂\"><a href=\"#断言工厂\" class=\"headerlink\" title=\"断言工厂\"></a>断言工厂</h2><p>我们在配置文件中写的断言规则只是字符串，这些字符串会被 Predicate Factory 读取并处理，转变为路由判断的条件。</p>\n<p>例如 <code>Path=/user/**</code> 是按照路径匹配，这个规则是由</p>\n<p><code>org.springframework.cloud.gateway.handler.predicate.PathRoutePredicateFactory</code> 类来处理的，像这样的断言工厂在 Spring Cloud Gateway 还有十几个</p>\n<table>\n<thead>\n<tr>\n<th align=\"left\">名称</th>\n<th align=\"left\">说明</th>\n<th align=\"left\">示例</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">After</td>\n<td align=\"left\">是某个时间点后的请求</td>\n<td align=\"left\">- After=2037-01-20T17:42:47.789-07:00[America/Denver]</td>\n</tr>\n<tr>\n<td align=\"left\">Before</td>\n<td align=\"left\">是某个时间点之前的请求</td>\n<td align=\"left\">- Before=2031-04-13T15:14:47.433+08:00[Asia/Shanghai]</td>\n</tr>\n<tr>\n<td align=\"left\">Between</td>\n<td align=\"left\">是某两个时间点之前的请求</td>\n<td align=\"left\">- Between=2037-01-20T17:42:47.789-07:00[America/Denver], 2037-01-21T17:42:47.789-07:00[America/Denver]</td>\n</tr>\n<tr>\n<td align=\"left\">Cookie</td>\n<td align=\"left\">请求必须包含某些cookie</td>\n<td align=\"left\">- Cookie=chocolate, ch.p</td>\n</tr>\n<tr>\n<td align=\"left\">Header</td>\n<td align=\"left\">请求必须包含某些header</td>\n<td align=\"left\">- Header=X-Request-Id, \\d+</td>\n</tr>\n<tr>\n<td align=\"left\">Host</td>\n<td align=\"left\">请求必须是访问某个host（域名）</td>\n<td align=\"left\">- Host=<code>**.somehost.org</code>, <code>**.anotherhost.org</code></td>\n</tr>\n<tr>\n<td align=\"left\">Method</td>\n<td align=\"left\">请求方式必须是指定方式</td>\n<td align=\"left\">- Method=GET,POST</td>\n</tr>\n<tr>\n<td align=\"left\">Path</td>\n<td align=\"left\">请求路径必须符合指定规则</td>\n<td align=\"left\">- Path=/red/{segment},/blue/**</td>\n</tr>\n<tr>\n<td align=\"left\">Query</td>\n<td align=\"left\">请求参数必须包含指定参数</td>\n<td align=\"left\">- Query=name, Jack或者- Query=name</td>\n</tr>\n<tr>\n<td align=\"left\">RemoteAddr</td>\n<td align=\"left\">请求者的ip必须是指定范围</td>\n<td align=\"left\">- RemoteAddr=192.168.1.1/24</td>\n</tr>\n<tr>\n<td align=\"left\">Weight</td>\n<td align=\"left\">权重处理</td>\n<td align=\"left\"></td>\n</tr>\n</tbody></table>\n<blockquote>\n<p>官方文档：<a href=\"https://docs.spring.io/spring-cloud-gateway/docs/current/reference/html/#gateway-request-predicates-factories\">https://docs.spring.io/spring-cloud-gateway/docs/current/reference/html/#gateway-request-predicates-factories</a></p>\n</blockquote>\n<p>一般的，我们只需要掌握 Path，加上官方文档的例子，就可以应对各种工作场景了。</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">predicates:</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"string\">Path=/order/**</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"string\">After=2031-04-13T15:14:47.433+08:00[Asia/Shanghai]</span></span><br></pre></td></tr></table></figure>\n\n<p>像这样的规则，现在是 2021年8月22日01:32:42，很明显 After 条件不满足，可以不会转发，路由不起作用。</p>\n<h2 id=\"过滤器工厂\"><a href=\"#过滤器工厂\" class=\"headerlink\" title=\"过滤器工厂\"></a>过滤器工厂</h2><p>GatewayFilter 是网关中提供的一种过滤器，可以对进入网关的请求和微服务返回的响应做处理。</p>\n<p><img src=\"/img/%E8%BF%87%E6%BB%A4%E5%99%A8%E5%B7%A5%E5%8E%82.png\" alt=\"过滤器工厂\"></p>\n<p>Spring提供了31种不同的路由过滤器工厂。</p>\n<blockquote>\n<p>官方文档：<a href=\"https://docs.spring.io/spring-cloud-gateway/docs/current/reference/html/#gatewayfilter-factories\">https://docs.spring.io/spring-cloud-gateway/docs/current/reference/html/#gatewayfilter-factories</a></p>\n</blockquote>\n<table>\n<thead>\n<tr>\n<th align=\"left\"><strong>名称</strong></th>\n<th align=\"left\"><strong>说明</strong></th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">AddRequestHeader</td>\n<td align=\"left\">给当前请求添加一个请求头</td>\n</tr>\n<tr>\n<td align=\"left\">RemoveRequestHeader</td>\n<td align=\"left\">移除请求中的一个请求头</td>\n</tr>\n<tr>\n<td align=\"left\">AddResponseHeader</td>\n<td align=\"left\">给响应结果中添加一个响应头</td>\n</tr>\n<tr>\n<td align=\"left\">RemoveResponseHeader</td>\n<td align=\"left\">从响应结果中移除有一个响应头</td>\n</tr>\n<tr>\n<td align=\"left\">RequestRateLimiter</td>\n<td align=\"left\">限制请求的流量</td>\n</tr>\n</tbody></table>\n<p>下面我们以 AddRequestHeader 为例：</p>\n<p><img src=\"/img/AddRequestHeader.png\" alt=\"AddRequestHeader\"></p>\n<p><strong>需求</strong>：给所有进入 userservice 的请求添加一个请求头：<code>sign=xn2001.com is eternal</code></p>\n<p>只需要修改 gateway 服务的 application.yml文件，添加路由过滤即可。</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">spring:</span></span><br><span class=\"line\">  <span class=\"attr\">cloud:</span></span><br><span class=\"line\">    <span class=\"attr\">gateway:</span></span><br><span class=\"line\">      <span class=\"attr\">routes:</span> <span class=\"comment\"># 网关路由配置</span></span><br><span class=\"line\">        <span class=\"bullet\">-</span> <span class=\"attr\">id:</span> <span class=\"string\">user-service</span> <span class=\"comment\"># 路由id，自定义，只要唯一即可</span></span><br><span class=\"line\">          <span class=\"comment\"># uri: http://127.0.0.1:8081 # 路由的目标地址 http就是固定地址</span></span><br><span class=\"line\">          <span class=\"attr\">uri:</span> <span class=\"string\">lb://userservice</span> <span class=\"comment\"># 路由的目标地址 lb就是负载均衡，后面跟服务名称</span></span><br><span class=\"line\">          <span class=\"attr\">predicates:</span> <span class=\"comment\"># 路由断言，也就是判断请求是否符合路由规则的条件</span></span><br><span class=\"line\">            <span class=\"bullet\">-</span> <span class=\"string\">Path=/user/**</span> <span class=\"comment\"># 这个是按照路径匹配，只要以/user/开头就符合要求</span></span><br><span class=\"line\">          <span class=\"attr\">filters:</span></span><br><span class=\"line\">            <span class=\"bullet\">-</span> <span class=\"string\">AddRequestHeader=sign,</span> <span class=\"string\">xn2001.com</span> <span class=\"string\">is</span> <span class=\"string\">eternal</span> <span class=\"comment\"># 添加请求头</span></span><br></pre></td></tr></table></figure>\n\n<p>如何验证，我们修改 userservice 中的一个接口</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@GetMapping(&quot;/&#123;id&#125;&quot;)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> User <span class=\"title function_\">queryById</span><span class=\"params\">(<span class=\"meta\">@PathVariable(&quot;id&quot;)</span> Long id, <span class=\"meta\">@RequestHeader(value = &quot;sign&quot;, required = false)</span> String sign)</span> &#123;</span><br><span class=\"line\">    log.warn(sign);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> userService.queryById(id);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>重启两个服务，访问：<a href=\"http://localhost:10010/user/1\">http://localhost:10010/user/1</a></p>\n<p>可以看到控制台打印出了这个请求头</p>\n<p><img src=\"/img/%E6%8E%A7%E5%88%B6%E5%8F%B0%E6%89%93%E5%8D%B0%E8%AF%B7%E6%B1%82%E5%A4%B4.png\" alt=\"控制台打印请求头\"></p>\n<h2 id=\"全局过滤器\"><a href=\"#全局过滤器\" class=\"headerlink\" title=\"全局过滤器\"></a>全局过滤器</h2><p>上面介绍的过滤器工厂，网关提供了 31 种，但每一种过滤器的作用都是固定的。<strong>如果我们希望拦截请求，做自己的业务逻辑则没办法实现</strong>。</p>\n<p>全局过滤器的作用也是处理一切进入网关的请求和微服务响应，<strong>与 GatewayFilter 的作用一样</strong>。区别在于 GlobalFilter 的逻辑可以<strong>写代码来自定义规则</strong>；而 GatewayFilter 通过配置定义，处理逻辑是固定的。</p>\n<p><strong>需求</strong>：定义全局过滤器，拦截请求，判断请求的参数是否满足下面条件</p>\n<ul>\n<li>参数中是否有 authorization</li>\n<li>authorization 参数值是否为 admin</li>\n</ul>\n<p>如果同时满足则放行，否则拦截。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Component</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">AuthorizeFilter</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">GlobalFilter</span>, Ordered &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 测试：http://localhost:10010/order/101?authorization=admin</span></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> Mono&lt;Void&gt; <span class=\"title function_\">filter</span><span class=\"params\">(ServerWebExchange exchange, GatewayFilterChain chain)</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 获取第一个 authorization 参数</span></span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">authorization</span> <span class=\"operator\">=</span> exchange.getRequest().getQueryParams().getFirst(<span class=\"string\">&quot;authorization&quot;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"string\">&quot;admin&quot;</span>.equals(authorization))&#123;</span><br><span class=\"line\">            <span class=\"comment\">// 放行</span></span><br><span class=\"line\">            <span class=\"keyword\">return</span> chain.filter(exchange);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">// 设置拦截状态码信息</span></span><br><span class=\"line\">        exchange.getResponse().setStatusCode(HttpStatus.UNAUTHORIZED);</span><br><span class=\"line\">        <span class=\"comment\">// 设置拦截</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> exchange.getResponse().setComplete();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 设置过滤器优先级，值越低优先级越高</span></span><br><span class=\"line\">    <span class=\"comment\">// 也可以使用 @Order 注解</span></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"type\">int</span> <span class=\"title function_\">getOrder</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"过滤器顺序\"><a href=\"#过滤器顺序\" class=\"headerlink\" title=\"过滤器顺序\"></a>过滤器顺序</h2><p>请求进入网关会碰到三类过滤器：DefaultFilter、当前路由的过滤器、GlobalFilter；</p>\n<p>请求路由后，会将三者合并到一个过滤器链（集合）中，排序后依次执行每个过滤器.</p>\n<p><img src=\"/img/%E8%BF%87%E6%BB%A4%E5%99%A8%E9%A1%BA%E5%BA%8F.png\" alt=\"过滤器顺序\"></p>\n<p>排序的规则是什么呢？</p>\n<ul>\n<li>每一个过滤器都必须指定一个 int 类型的 order 值，<strong>order 值越小，优先级越高，执行顺序越靠前</strong>。</li>\n<li>GlobalFilter 通过实现 Ordered 接口，或者使用 @Order 注解来指定 order 值，由我们自己指定。</li>\n<li>路由过滤器和 defaultFilter 的 order 由 Spring 指定，默认是按照声明顺序从1递增。</li>\n<li>当过滤器的 order 值一样时，<strong>会按照 defaultFilter &gt; 路由过滤器 &gt; GlobalFilter 的顺序执行。</strong></li>\n</ul>\n<h2 id=\"跨域问题\"><a href=\"#跨域问题\" class=\"headerlink\" title=\"跨域问题\"></a>跨域问题</h2><p>不了解跨域问题的同学可以百度了解一下；在 Gateway 网关中解决跨域问题还是比较方便的。</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">spring:</span></span><br><span class=\"line\">  <span class=\"attr\">cloud:</span></span><br><span class=\"line\">    <span class=\"attr\">gateway:</span></span><br><span class=\"line\">      <span class=\"attr\">globalcors:</span> <span class=\"comment\"># 全局的跨域处理</span></span><br><span class=\"line\">        <span class=\"attr\">add-to-simple-url-handler-mapping:</span> <span class=\"literal\">true</span> <span class=\"comment\"># 解决options请求被拦截问题</span></span><br><span class=\"line\">        <span class=\"attr\">corsConfigurations:</span></span><br><span class=\"line\">          <span class=\"string\">&#x27;[/**]&#x27;</span><span class=\"string\">:</span></span><br><span class=\"line\">            <span class=\"attr\">allowedOrigins:</span> <span class=\"comment\"># 允许哪些网站的跨域请求 allowedOrigins: “*” 允许所有网站</span></span><br><span class=\"line\">              <span class=\"bullet\">-</span> <span class=\"string\">&quot;http://localhost:8090&quot;</span></span><br><span class=\"line\">            <span class=\"attr\">allowedMethods:</span> <span class=\"comment\"># 允许的跨域ajax的请求方式</span></span><br><span class=\"line\">              <span class=\"bullet\">-</span> <span class=\"string\">&quot;GET&quot;</span></span><br><span class=\"line\">              <span class=\"bullet\">-</span> <span class=\"string\">&quot;POST&quot;</span></span><br><span class=\"line\">              <span class=\"bullet\">-</span> <span class=\"string\">&quot;DELETE&quot;</span></span><br><span class=\"line\">              <span class=\"bullet\">-</span> <span class=\"string\">&quot;PUT&quot;</span></span><br><span class=\"line\">              <span class=\"bullet\">-</span> <span class=\"string\">&quot;OPTIONS&quot;</span></span><br><span class=\"line\">            <span class=\"attr\">allowedHeaders:</span> <span class=\"string\">&quot;*&quot;</span> <span class=\"comment\"># 允许在请求中携带的头信息</span></span><br><span class=\"line\">            <span class=\"attr\">allowCredentials:</span> <span class=\"literal\">true</span> <span class=\"comment\"># 是否允许携带cookie</span></span><br><span class=\"line\">            <span class=\"attr\">maxAge:</span> <span class=\"number\">360000</span> <span class=\"comment\"># 这次跨域检测的有效期</span></span><br></pre></td></tr></table></figure>\n\n<h1 id=\"RabbitMQ\"><a href=\"#RabbitMQ\" class=\"headerlink\" title=\"RabbitMQ\"></a>RabbitMQ</h1><h1 id=\"Elasticsearch\"><a href=\"#Elasticsearch\" class=\"headerlink\" title=\"Elasticsearch\"></a>Elasticsearch</h1><p><span style=\"text-align:center;font-size:50px;background-color:orange\">高级篇</span></p>\n<h1 id=\"JMeter\"><a href=\"#JMeter\" class=\"headerlink\" title=\"JMeter\"></a>JMeter</h1><h1 id=\"Sentinel\"><a href=\"#Sentinel\" class=\"headerlink\" title=\"Sentinel\"></a>Sentinel</h1><h1 id=\"Seata\"><a href=\"#Seata\" class=\"headerlink\" title=\"Seata\"></a>Seata</h1>","site":{"data":{"link":[{"class_name":"友情链接","class_desc":"那些人，那些事","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]},{"class_name":"网站","class_desc":"值得推荐的网站","link_list":[{"name":"Youtube","link":"https://www.youtube.com/","avatar":"https://i.loli.net/2020/05/14/9ZkGg8v3azHJfM1.png","descr":"视频网站"},{"name":"Weibo","link":"https://www.weibo.com/","avatar":"https://i.loli.net/2020/05/14/TLJBum386vcnI1P.png","descr":"中国最大社交分享平台"},{"name":"Twitter","link":"https://twitter.com/","avatar":"https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png","descr":"社交分享平台"}]}]}},"cover":"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7","excerpt":"","more":"<p><span style=\"text-align:center;font-size:50px;background-color:orange\">基础篇</span></p>\n<p><strong>本篇微服务技术栈参考：</strong> <a href=\"https://www.xn2001.com/archives/663.html\">https://www.xn2001.com/archives/663.html</a></p>\n<h1 id=\"认识微服务\"><a href=\"#认识微服务\" class=\"headerlink\" title=\"认识微服务\"></a>认识微服务</h1><h2 id=\"单体架构\"><a href=\"#单体架构\" class=\"headerlink\" title=\"单体架构\"></a>单体架构</h2><p><strong>单体架构：</strong> 将业务的所有功能集中在一个项目中开发，打成一个包部署。</p>\n<p><img src=\"/img/%E5%8D%95%E4%BD%93%E6%9E%B6%E6%9E%84.png\" alt=\"单体架构\"></p>\n<p><strong>优点：</strong> 架构简单，部署成本低</p>\n<p><strong>缺点：</strong> 耦合度高（维护困难，升级困难）</p>\n<h2 id=\"分布式架构\"><a href=\"#分布式架构\" class=\"headerlink\" title=\"分布式架构\"></a>分布式架构</h2><p><strong>分布式架构：</strong> 根据业务功能对系统做拆分，每个业务功能模块作为独立项目开发，称为一个服务</p>\n<p><img src=\"/img/%E5%88%86%E5%B8%83%E5%BC%8F%E6%9E%B6%E6%9E%84.png\" alt=\"分布式架构\"></p>\n<p><strong>优点：</strong> 降低服务耦合，有利于服务升级和扩展</p>\n<p><strong>缺点：</strong> 服务调用关系错综复杂</p>\n<p>分布式架构虽然降低了服务耦合，但是服务拆分时也有很多问题需要思考：</p>\n<ul>\n<li>服务拆分的粒度如何界定？</li>\n<li>服务之间如何调用？</li>\n<li>服务的调用关系如何管理？</li>\n</ul>\n<p><strong>人们需要指定一套行之有效的标准来约束分布式架构。</strong></p>\n<h2 id=\"微服务\"><a href=\"#微服务\" class=\"headerlink\" title=\"微服务\"></a>微服务</h2><p><strong>微服务的架构特征：</strong></p>\n<ul>\n<li><strong>单一职责：</strong> 微服务拆分粒度更小，每一个服务都对应唯一的业务功能，做到单一职责</li>\n<li><strong>自治：</strong> 团队独立、技术独立、数据独立、独立部署和交付</li>\n<li><strong>面向服务：</strong> 服务提供统一标准的接口，与语言和技术无关</li>\n<li><strong>隔离性强：</strong> 服务调度做和隔离、容错、降级，避免出现级联问题</li>\n</ul>\n<p><img src=\"/img/%E5%BE%AE%E6%9C%8D%E5%8A%A1.png\" alt=\"微服务\"></p>\n<p>微服务的上述特性<strong>其实是在给分布式架构指定一个标准</strong>，进一步降低服务之间的耦合度，提供服务的独立性和灵活性。做到高内聚，低耦合。</p>\n<p><strong>因此，可以认为微服务是一种经过良好架构设计的分布式架构方案。</strong></p>\n<p>其中在Java领域最引人注目的就是SpringCloud提供的方案了。<a href=\"https://spring.io/projects/spring-cloud\">https://spring.io/projects/spring-cloud</a></p>\n<h3 id=\"SpringCloud\"><a href=\"#SpringCloud\" class=\"headerlink\" title=\"SpringCloud\"></a>SpringCloud</h3><p>SpringCloud是目前国内使用最广泛的微服务架构。官网地址：<a href=\"https://spring.io/projects/spring-cloud\">https://spring.io/projects/spring-cloud</a></p>\n<p>SpringCloud集成了各种微服务功能组件，并基于SpringBoot实现了这些组件的自动装配，从而提供了良好的开箱即用体验。</p>\n<p>其中常见的组件包括：</p>\n<p><img src=\"/img/SpringCloud%E5%B8%B8%E7%94%A8%E7%BB%84%E4%BB%B6.png\" alt=\"SpringCloud常用组件\"></p>\n<p>另外，SpringCloud底层是依赖于SpringBoot的，并且有版本的兼容关系，如下：</p>\n<p><img src=\"/img/SpringCloud%E5%92%8CSpringBoot%E7%9A%84%E7%89%88%E6%9C%AC%E5%85%BC%E5%AE%B9%E5%85%B3%E7%B3%BB.png\" alt=\"SpringCloud和SpringBoot的版本兼容关系\"></p>\n<h3 id=\"内容知识\"><a href=\"#内容知识\" class=\"headerlink\" title=\"内容知识\"></a>内容知识</h3><p><img src=\"/img/%E9%9C%80%E8%A6%81%E5%AD%A6%E4%B9%A0%E7%9A%84%E5%BE%AE%E6%9C%8D%E5%8A%A1%E7%9F%A5%E8%AF%86%E5%86%85%E5%AE%B9.png\" alt=\"需要学习的微服务知识内容\"></p>\n<p><img src=\"/img/%E6%8A%80%E6%9C%AF%E6%A0%88.png\" alt=\"技术栈\"></p>\n<p><img src=\"/img/%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2.png\" alt=\"自动化部署\"></p>\n<h3 id=\"技术栈对比\"><a href=\"#技术栈对比\" class=\"headerlink\" title=\"技术栈对比\"></a>技术栈对比</h3><p><img src=\"/img/%E6%8A%80%E6%9C%AF%E6%A0%88%E5%AF%B9%E6%AF%94.png\" alt=\"技术栈对比\"></p>\n<h1 id=\"服务拆分\"><a href=\"#服务拆分\" class=\"headerlink\" title=\"服务拆分\"></a>服务拆分</h1><p><strong>服务器拆分注意事项</strong></p>\n<p>单一职责：不同微服务，不要重复开发相同业务</p>\n<p>数据独立：不要访问其他微服务的数据库</p>\n<p>面向服务：将自己的业务暴露为接口，供其他微服务调用</p>\n<p><img src=\"/img/%E6%9C%8D%E5%8A%A1%E6%8B%86%E5%88%86%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9.png\" alt=\"服务拆分注意事项\"></p>\n<p>cloude-demo：夫工程，管理依赖</p>\n<ul>\n<li>order-service：订单微服务，负责订单相关业务</li>\n<li>user-service：用户微服务，负责用户相关业务</li>\n</ul>\n<p>要求：</p>\n<ul>\n<li>订单微服务和用户微服务都必须有<strong>各自的数据库</strong>，相互独立</li>\n<li>订单服务和用户服务**都对外暴露Restful的接口</li>\n<li>订单服务如果需要查询用户信息，<strong>只能调用用户服务的Restful接口，</strong> 不能查询用户数据库</li>\n</ul>\n<p>微服务项目下，打开IDEA的Service，可以很方便地启动。</p>\n<p><img src=\"/img/Services.png\" alt=\"Services\"></p>\n<p>启动完成后，访问 <a href=\"http://localhost:8080/order/101\">http://localhost:8080/order/101</a></p>\n<p><img src=\"/img/Services2.png\" alt=\"Services2\"></p>\n<h1 id=\"远程调用\"><a href=\"#远程调用\" class=\"headerlink\" title=\"远程调用\"></a>远程调用</h1><p>服务拆分要求：</p>\n<blockquote>\n<p>订单服务如果需要查询用户信息，<strong>只能调用用户服务的Restful接口</strong>，不能查询用户数据库</p>\n</blockquote>\n<p>因此外卖需要知道Java如何去发送http请求，Spring提供了一个RestTemplate工具，只需要把它创建出来即可。（即注入Bean）</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Bean</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> RestTemplate <span class=\"title function_\">restTemplate</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"title class_\">RestTemplate</span>();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>发送请求，自动序列化为java对象。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> Order <span class=\"title function_\">queryOrderById</span><span class=\"params\">(Long orderId)</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 1.查询订单</span></span><br><span class=\"line\">    <span class=\"type\">Order</span> <span class=\"variable\">order</span> <span class=\"operator\">=</span> orderMapper.findById(orderId);</span><br><span class=\"line\">    <span class=\"comment\">// 2.利用resttemplate发起http请求，查询用户</span></span><br><span class=\"line\">    <span class=\"comment\">// 2.1 url路径</span></span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">url</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;http://localhost:8081/user/&quot;</span> + order.getUserId();</span><br><span class=\"line\">    <span class=\"comment\">// 2.2 发起http请求，实现远程调用</span></span><br><span class=\"line\">    <span class=\"type\">User</span> <span class=\"variable\">user</span> <span class=\"operator\">=</span> restTemplate.getForObject(url, User.class);</span><br><span class=\"line\">    <span class=\"comment\">// 3.封装user到order</span></span><br><span class=\"line\">    order.setUser(user);</span><br><span class=\"line\">    <span class=\"comment\">// 4.返回</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> order;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>启动完成后，访问：<a href=\"http://localhost:8080/order/101\">http://localhost:8080/order/101</a></p>\n<p><img src=\"/img/Service3.png\" alt=\"启动完成后\"></p>\n<p>在上面代码的url中，我们可以发现调用服务的地址采用硬编码，这在后续的开发中肯定是不理想的，这就需要<strong>服务注册中心（Eureka）</strong> 来帮我们解决这个事情。</p>\n<h1 id=\"Eureka\"><a href=\"#Eureka\" class=\"headerlink\" title=\"Eureka\"></a>Eureka</h1><h2 id=\"Eureka注册中心\"><a href=\"#Eureka注册中心\" class=\"headerlink\" title=\"Eureka注册中心\"></a>Eureka注册中心</h2><p>最广为人知的注册中心就是Eureka，其结构如下：<br><img src=\"/img/Eureka%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83.png\" alt=\"Eureka注册中心\"></p>\n<p><strong>order-service如何得知user-service实例地址？</strong> </p>\n<ul>\n<li>user-service服务实例启动后，将自己的信息注册到eureka-service（Eureka服务端），也叫<strong>服务注册</strong></li>\n<li>eureka-server保存服务名称到服务实例地址列表的映射关系</li>\n<li>order-service根据服务名称，拉取实例地址列表，这个叫<strong>服务发现</strong>或服务拉取</li>\n</ul>\n<p><strong>order-service如何从多个user-service实例中选择具体的实例？</strong></p>\n<p>order-service从实例列表中利用<strong>负载均衡算法</strong>选中一个实例地址，向该实例地址发起远程调用</p>\n<p><strong>order-service如何得知某个user-service实例是否依然健康，是不是已经宕机？</strong></p>\n<ul>\n<li>user-service会<strong>每隔一段时间（默认30秒）向eureka-server发起请求</strong>，报告自己状态，称为<strong>心跳</strong></li>\n<li>当超过一定时间没有发送心跳时，eureka-server会认为微服务实例故障，将该实例从服务列表中剔除</li>\n<li>order-service拉取请求时，就能将故障实例排除了</li>\n</ul>\n<p>接下来我们动手实践的步骤包括</p>\n<p><img src=\"/img/Eureka%E6%B3%A8%E5%86%8C%E6%AD%A5%E9%AA%A4.png\" alt=\"Eureka注册步骤\"></p>\n<h2 id=\"搭建注册中心\"><a href=\"#搭建注册中心\" class=\"headerlink\" title=\"搭建注册中心\"></a>搭建注册中心</h2><p><strong>1、搭建eureka-server</strong></p>\n<p>引入SpringCloud为eureka提供的starter依赖，注意这里是用<strong>server</strong></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;dependency&gt;</span><br><span class=\"line\">    &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;</span><br><span class=\"line\">    &lt;artifactId&gt;spring-cloud-starter-netflix-eureka-server&lt;/artifactId&gt;</span><br><span class=\"line\">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>\n\n<p><strong>2、编写启动类</strong></p>\n<p>注意要添加一个<font color=\"red\">@EnableEurekaServer</font><strong>注解</strong>，开启eureka的<strong>注册中心</strong>功能</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.xn2001.eureka;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.boot.SpringApplication;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.cloud.netflix.eureka.server.EnableEurekaServer;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@SpringBootApplication</span></span><br><span class=\"line\"><span class=\"meta\">@EnableEurekaServer</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">EurekaApplication</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> &#123;</span><br><span class=\"line\">        SpringApplication.run(EurekaApplication.class, args);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong>3、编写配置文件</strong></p>\n<p>编写一个application.yml文件，内容如下：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">server:</span><br><span class=\"line\"> port: <span class=\"number\">10086</span></span><br><span class=\"line\">spring:</span><br><span class=\"line\"> application:</span><br><span class=\"line\">  name: eureka-server</span><br><span class=\"line\">eureka:</span><br><span class=\"line\"> client:</span><br><span class=\"line\">  service-url:</span><br><span class=\"line\">   defaultZone: http:<span class=\"comment\">//127.0.0.1::10086/eureka</span></span><br></pre></td></tr></table></figure>\n\n<p>其中<code>default-zone</code>是因为前面配置类开启了注册中心所需要配置的eureka的<strong>地址信息</strong>，因为eureka本事也是一个微服务，这里也要将自己注册起来，当后面eureka<strong>集群</strong>时，这里就可以填写多个，使用“ ；”隔开。</p>\n<p>启动完成后，访问 <a href=\"http://localhost:10086/\">http://localhost:10086/</a></p>\n<p><img src=\"/img/Eureka%E5%90%AF%E5%8A%A8%E6%88%90%E5%8A%9F%E7%95%8C%E9%9D%A2.png\" alt=\"Eureka启动成功界面\"></p>\n<h2 id=\"服务注册\"><a href=\"#服务注册\" class=\"headerlink\" title=\"服务注册\"></a>服务注册</h2><blockquote>\n<p>将user-service、order-service都注册到eureka</p>\n</blockquote>\n<p>引入SpringCloud为eureka提供的starter依赖，注意这里是用<strong>client</strong></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;dependency&gt;</span><br><span class=\"line\">    &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;</span><br><span class=\"line\">    &lt;artifactId&gt;spring-cloud-starter-netflix-eureka-client&lt;/artifactId&gt;</span><br><span class=\"line\">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>\n\n<p>在启动类上添加注解：<code>@EnableEurekaClient</code></p>\n<p>在application.yml文件，添加下面的配置：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">spring:</span><br><span class=\"line\"> application:</span><br><span class=\"line\">  name: userservice</span><br><span class=\"line\">eureka:</span><br><span class=\"line\"> client:</span><br><span class=\"line\">  service-url:</span><br><span class=\"line\">   defaultZone: http:<span class=\"number\">127.0</span><span class=\"number\">.0</span><span class=\"number\">.1</span>:<span class=\"number\">10086</span>/eureka</span><br></pre></td></tr></table></figure>\n\n<p>3个项目启动后，访问 <a href=\"http://localhost:10086/\">http://localhost:10086/</a></p>\n<p><img src=\"/img/Eureka%E5%90%AF%E5%8A%A8%E6%88%90%E5%8A%9F%E7%95%8C%E9%9D%A22.png\" alt=\"Eureka启动成功界面\"></p>\n<p>这里另外再补充个小技巧，我们可以通过 idea 的多实例启动，来查看 Eureka 的集群效果。</p>\n<p><img src=\"/img/IDEA%E5%A4%9A%E5%AE%9E%E4%BE%8B%E8%B0%83%E8%AF%95.png\" alt=\"IDEA多实例调试\"></p>\n<p>4个项目启动后，访问 <a href=\"http://localhost:10086/\">http://localhost:10086/</a></p>\n<p><img src=\"/img/Eureka4%E9%A1%B9%E7%9B%AE%E5%90%AF%E5%8A%A8.png\" alt=\"Eureka4项目启动\"></p>\n<h2 id=\"服务拉取\"><a href=\"#服务拉取\" class=\"headerlink\" title=\"服务拉取\"></a>服务拉取</h2><blockquote>\n<p>在order-service中完成服务拉取，然后通过负载均衡挑选一个服务，实践远程调用</p>\n</blockquote>\n<p>下面我们让 order-service 向 eureka-server 拉取 user-service 的信息，实现服务发现。</p>\n<p>首先给 <code>RestTemplate</code> 这个 Bean 添加一个 <code>@LoadBalanced</code> <strong>注解</strong>，用于开启<strong>负载均衡</strong>。（后面会讲）</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Bean</span></span><br><span class=\"line\"><span class=\"meta\">@LoadBalanced</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> RestTemplate <span class=\"title function_\">restTemplate</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"title class_\">RestTemplate</span>();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>修改orderService访问的url路径，用<strong>服务名</strong>代替ip、端口</p>\n<p><img src=\"/img/%E4%BF%AE%E6%94%B9Eureka%E7%9A%84url%E8%B7%AF%E5%BE%84.png\" alt=\"修改Eureka的url路径\"></p>\n<p>spring会自动帮助我们从eureka-server中，根据uservice这个服务名称，获取实例列表后去完成负载均衡。</p>\n<h1 id=\"Ribbon\"><a href=\"#Ribbon\" class=\"headerlink\" title=\"Ribbon\"></a>Ribbon</h1><h2 id=\"Ribbon负载均衡\"><a href=\"#Ribbon负载均衡\" class=\"headerlink\" title=\"Ribbon负载均衡\"></a>Ribbon负载均衡</h2><p>我们添加了<code>@LoalBalanced</code>注解，即可实现负载均衡功能，这是什么原理呢？</p>\n<p><strong>SpringCloud底层提供了一个名为Ribbon的组件，来实现负载均衡功能</strong></p>\n<p><img src=\"/img/Ribbon%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1.png\" alt=\"Ribbon负载均衡\"></p>\n<p><strong>1、源码跟踪</strong><br>为什么我们只输入了service名称就可以访问了呢？为什么不需要获取ip和端口，这显然有人帮我们根据service名称，获取到了服务实例的ip和端口，他就是<code>LoadBalancerInterceptor</code>，这个类会对RestTemplate的请求进行拦截，然后从Eureka根据服务id获取服务列表，随后根据负载均衡算法得到真实的服务地址信息，替换服务id。</p>\n<p>我们进行源码跟踪：</p>\n<p><img src=\"/img/Interceptor%E6%BA%90%E7%A0%81%E8%B7%9F%E8%B8%AA.png\" alt=\"Interceptor源码跟踪\"></p>\n<p>这里的<code>intercept()</code>方法，拦截了用户的HttpRequest请求，然后做了几件事：</p>\n<ul>\n<li><code>request.getURL()</code>：获取请求uri，即<a href=\"http://user-service/user/8\">http://user-service/user/8</a></li>\n<li><code>originalUri.getHost()</code>:获取uri路径的主机名，其实就是服务id<code>user-service</code></li>\n<li><code>this.loadBalancer.execute()</code>：处理服务id，和用户请求</li>\n</ul>\n<p>这里的<code>this.loadBalancer.execute()</code>：处理服务id和请求</p>\n<p>继续跟人<code>execute()</code>方法：</p>\n<p><img src=\"/img/%E8%B7%9F%E8%BF%9Bexecute()%E6%96%B9%E6%B3%95.png\" alt=\"跟进execute()方法\"></p>\n<ul>\n<li><p><code>getLoadBalancer(serviceId)</code>：根据服务id获取</p>\n<p><code>IloadBalancer</code>，而<code>ILoadBancer</code>会拿着服务id去eureka中获取服务列表</p>\n</li>\n<li><p><code>getServer(loadBalancer)</code>：利用内置的负载均衡算法，从服务列表中选择一个。在图中<strong>可以看到获取了8082端口的服务</strong></p>\n</li>\n</ul>\n<p>可以看到获取服务时，通过一个<code>getServer()</code>方法来做负载均衡：</p>\n<p><img src=\"/img/getServer%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1.png\" alt=\"getServer负载均衡\"></p>\n<p>我们继续跟入：</p>\n<p><img src=\"/img/%E7%BB%A7%E7%BB%AD%E8%B7%9F%E5%85%A5.png\" alt=\"继续跟入\"></p>\n<p>继续跟踪源码 <code>chooseServer()</code> 方法，发现这么一段代码：</p>\n<p>![跟踪源码 chooseServer()方法](/img/跟踪源码 chooseServer()方法.png)</p>\n<p>我们看看这个 <code>rule</code> 是谁：</p>\n<p><img src=\"/img/rule.png\" alt=\"rule\"></p>\n<p>这里的 rule 默认值是一个 <code>RoundRobinRule</code> ，看类的介绍：</p>\n<p><img src=\"/img/rule%E9%BB%98%E8%AE%A4%E5%80%BC.png\" alt=\"rule默认值\"></p>\n<p>负载均衡默认使用了轮训算法，当然我们也可以自定义。</p>\n<p><strong>2、流程总结</strong></p>\n<p>SpringCloud Ribbon 底层采用了一个拦截器，拦截了 RestTemplate 发出的请求，对地址做了修改。</p>\n<p>基本流程如下：</p>\n<ul>\n<li>拦截我们的 <code>RestTemplate</code> 请求 <a href=\"http://userservice/user/1\">http://userservice/user/1</a></li>\n<li><code>RibbonLoadBalancerClient</code> 会从请求url中获取服务名称，也就是 user-service</li>\n<li><code>DynamicServerListLoadBalancer</code> 根据 user-service 到 eureka 拉取服务列表</li>\n<li>eureka 返回列表，localhost:8081、localhost:8082</li>\n<li><code>IRule</code> 利用内置负载均衡规则，从列表中选择一个，例如 localhost:8081</li>\n<li><code>RibbonLoadBalancerClient</code> 修改请求地址，用 localhost:8081 替代 userservice，得到 <a href=\"http://localhost:8081/user/1%EF%BC%8C%E5%8F%91%E8%B5%B7%E7%9C%9F%E5%AE%9E%E8%AF%B7%E6%B1%82\">http://localhost:8081/user/1，发起真实请求</a></li>\n</ul>\n<p><img src=\"/img/robbon%E6%B5%81%E7%A8%8B%E6%80%BB%E7%BB%93.png\" alt=\"robbon流程总结\"></p>\n<p><strong>3、负载均衡策略</strong></p>\n<p>负载均衡的规则都定义在 IRule 接口中，而 IRule 有很多不同的实现类：</p>\n<p><img src=\"/img/%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%E7%AD%96%E7%95%A5.png\" alt=\"负载均衡策略\"></p>\n<p>不同规则的含义如下：</p>\n<table>\n<thead>\n<tr>\n<th align=\"left\"><strong>内置负载均衡规则类</strong></th>\n<th align=\"left\"><strong>规则描述</strong></th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">RoundRobinRule</td>\n<td align=\"left\">简单轮询服务列表来选择服务器。它是Ribbon默认的负载均衡规则。</td>\n</tr>\n<tr>\n<td align=\"left\">AvailabilityFilteringRule</td>\n<td align=\"left\">对以下两种服务器进行忽略：（1）在默认情况下，这台服务器如果3次连接失败，这台服务器就会被设置为“短路”状态。短路状态将持续30秒，如果再次连接失败，短路的持续时间就会几何级地增加。 （2）并发数过高的服务器。如果一个服务器的并发连接数过高，配置了AvailabilityFilteringRule 规则的客户端也会将其忽略。并发连接数的上限，可以由客户端设置。</td>\n</tr>\n<tr>\n<td align=\"left\">WeightedResponseTimeRule</td>\n<td align=\"left\">为每一个服务器赋予一个权重值。服务器响应时间越长，这个服务器的权重就越小。这个规则会随机选择服务器，这个权重值会影响服务器的选择。</td>\n</tr>\n<tr>\n<td align=\"left\"><strong>ZoneAvoidanceRule</strong></td>\n<td align=\"left\">以区域可用的服务器为基础进行服务器的选择。使用Zone对服务器进行分类，这个Zone可以理解为一个机房、一个机架等。而后再对Zone内的多个服务做轮询。</td>\n</tr>\n<tr>\n<td align=\"left\">BestAvailableRule</td>\n<td align=\"left\">忽略那些短路的服务器，并选择并发数较低的服务器。</td>\n</tr>\n<tr>\n<td align=\"left\">RandomRule</td>\n<td align=\"left\">随机选择一个可用的服务器。</td>\n</tr>\n<tr>\n<td align=\"left\">RetryRule</td>\n<td align=\"left\">重试机制的选择逻辑</td>\n</tr>\n</tbody></table>\n<p>默认的实现就是 <code>ZoneAvoidanceRule</code>，<strong>是一种轮询方案</strong>。</p>\n<p><strong>4、自定义策略</strong></p>\n<p>通过定义 IRule 实现可以修改负载均衡规则，有两种方式：</p>\n<p>1 代码方式在 order-service 中的 OrderApplication 类中，定义一个新的 IRule：</p>\n<p><img src=\"/img/%E8%87%AA%E5%AE%9A%E4%B9%89%E7%AD%96%E7%95%A5.png\" alt=\"自定义策略\"></p>\n<p>2 配置文件方式：在 order-service 的 application.yml 文件中，添加新的配置也可以修改规则：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">userservice: # 给需要调用的微服务配置负载均衡规则，orderservice服务去调用userservice服务</span><br><span class=\"line\">  ribbon:</span><br><span class=\"line\">    NFLoadBalancerRuleClassName: com.netflix.loadbalancer.RandomRule # 负载均衡规则</span><br></pre></td></tr></table></figure>\n\n<p><strong>注意</strong>：一般用默认的负载均衡规则，不做修改。</p>\n<p><strong>5、饥饿加载</strong></p>\n<p>当我们启动 orderservice，第一次访问时，时间消耗会大很多，这是因为 Ribbon 懒加载的机制。</p>\n<p><img src=\"/img/%E7%AC%AC%E4%B8%80%E6%AC%A1%E8%AE%BF%E9%97%AE.png\" alt=\"/img/第一次访问.png\"></p>\n<p>Ribbon 默认是采用懒加载，即第一次访问时才会去创建 LoadBalanceClient，拉取集群地址，所以请求时间会很长。</p>\n<p>而饥饿加载则会在项目启动时创建 LoadBalanceClient，降低第一次访问的耗时，通过下面配置开启饥饿加载：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ribbon:</span><br><span class=\"line\"> eager-load:</span><br><span class=\"line\">  enabled: <span class=\"literal\">true</span></span><br><span class=\"line\">   clients: userservice # 项目启动时直接去拉取userservice的集群，多个用<span class=\"string\">&quot;,&quot;</span>隔开</span><br></pre></td></tr></table></figure>\n\n\n\n<h1 id=\"Nacos\"><a href=\"#Nacos\" class=\"headerlink\" title=\"Nacos\"></a>Nacos</h1><h2 id=\"Nacos注册中心\"><a href=\"#Nacos注册中心\" class=\"headerlink\" title=\"Nacos注册中心\"></a>Nacos注册中心</h2><p>SpringCloudAlibaba 推出了一个名为 Nacos 的注册中心，在国外也有大量的使用。</p>\n<p><img src=\"/img/Nacos%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83.png\" alt=\"Nacos注册中心\"></p>\n<p>解压启动Nacos，详细请看<a href=\"https://www.xn2001.com/archives/661.html\">Nacos安装指南</a></p>\n<figure class=\"highlight makefile\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 单机启动</span></span><br><span class=\"line\">startup.cmd -m standalone</span><br></pre></td></tr></table></figure>\n\n<p>访问：<a href=\"http://localhost:8848/nacos/\">http://localhost:8848/nacos/</a></p>\n<p><img src=\"/img/Nacos%E5%90%AF%E5%8A%A8.png\" alt=\"Nacos启动\"></p>\n<p><strong>1、服务注册</strong></p>\n<p>这里上来就直接服务注册，很多东西可能有疑惑，其实 Nacos 本身就是一个 SprintBoot 项目，这点你从启动的控制台打印就可以看出来，所以就不再需要去额外搭建一个像 Eureka 的注册中心。</p>\n<p><strong>引入依赖</strong></p>\n<p>在 cloud-demo 父工程中引入 SpringCloudAlibaba 的依赖：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;dependency&gt;</span><br><span class=\"line\">    &lt;groupId&gt;com.alibaba.cloud&lt;/groupId&gt;</span><br><span class=\"line\">    &lt;artifactId&gt;spring-cloud-alibaba-dependencies&lt;/artifactId&gt;</span><br><span class=\"line\">    &lt;version&gt;<span class=\"number\">2.2</span><span class=\"number\">.6</span>.RELEASE&lt;/version&gt;</span><br><span class=\"line\">    &lt;type&gt;pom&lt;/type&gt;</span><br><span class=\"line\">    &lt;scope&gt;<span class=\"keyword\">import</span>&lt;/scope&gt;</span><br><span class=\"line\">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>\n\n<p>然后在 user-service 和 order-service 中的pom文件中引入 nacos-discovery 依赖：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;dependency&gt;</span><br><span class=\"line\">    &lt;groupId&gt;com.alibaba.cloud&lt;/groupId&gt;</span><br><span class=\"line\">    &lt;artifactId&gt;spring-cloud-starter-alibaba-nacos-discovery&lt;/artifactId&gt;</span><br><span class=\"line\">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>\n\n<p><strong>配置nacos地址</strong></p>\n<p>在 user-service 和 order-service 的 application.yml 中添加 nacos 地址：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">spring:</span><br><span class=\"line\"> cloud:</span><br><span class=\"line\">  nacos:</span><br><span class=\"line\">   server-addr: <span class=\"number\">127.0</span><span class=\"number\">.0</span><span class=\"number\">.1</span>:<span class=\"number\">8848</span></span><br></pre></td></tr></table></figure>\n\n<p>项目重新启动后，可以看到三个服务都被注册进了 Nacos</p>\n<p><img src=\"/img/Nacos%E6%B3%A8%E5%86%8C.png\" alt=\"Nacos注册\"></p>\n<p>浏览器访问：<a href=\"http://localhost:8080/order/101%EF%BC%8C%E6%AD%A3%E5%B8%B8%E8%AE%BF%E9%97%AE%EF%BC%8C%E5%90%8C%E6%97%B6%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%E4%B9%9F%E6%AD%A3%E5%B8%B8%E3%80%82\">http://localhost:8080/order/101，正常访问，同时负载均衡也正常。</a></p>\n<h2 id=\"分级存储模型\"><a href=\"#分级存储模型\" class=\"headerlink\" title=\"分级存储模型\"></a>分级存储模型</h2><p>一个<strong>服务</strong>可以有多个<strong>实例</strong>，例如我们的 user-service，可以有:</p>\n<ul>\n<li>127.0.0.1:8081</li>\n<li>127.0.0.1:8082</li>\n<li>127.0.0.1:8083</li>\n</ul>\n<p>假如这些实例分布于全国各地的不同机房，例如：</p>\n<ul>\n<li>127.0.0.1:8081，在上海机房</li>\n<li>127.0.0.1:8082，在上海机房</li>\n<li>127.0.0.1:8083，在杭州机房</li>\n</ul>\n<p>Nacos就将同一机房内的实例，划分为一个<strong>集群</strong>。</p>\n<p><img src=\"/img/Nacos%E9%9B%86%E7%BE%A4.png\" alt=\"Nacos集群\"></p>\n<p>微服务互相访问时，应该尽可能访问同集群实例，因为本地访问速度更快。<strong>当本集群内不可用时，才访问其它集群。</strong>例如：杭州机房内的 order-service 应该优先访问同机房的 user-service。</p>\n<p><img src=\"/img/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E9%9B%86%E7%BE%A4%E8%AE%BF%E9%97%AE.png\" alt=\"微服务集群访问\"></p>\n<p><strong>配置集群</strong></p>\n<p>接下来我们给 user-service <strong>配置集群</strong></p>\n<p>修改 user-service 的 application.yml 文件，添加集群配置：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">spring:</span><br><span class=\"line\"> cloud:</span><br><span class=\"line\">  nacos:</span><br><span class=\"line\">   server-addr: localhost:<span class=\"number\">8848</span></span><br><span class=\"line\">   discovery:</span><br><span class=\"line\">    cluster-name: HZ # 集群名称 HZ杭州</span><br></pre></td></tr></table></figure>\n\n<p>重启两个 user-service 实例后，我们再去启动一个上海集群的实例。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">-Dserver.port=<span class=\"number\">8083</span> -Dspring.cloud.nacos.discovery.cluster-name=SH</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"/img/%E5%86%8D%E6%AC%A1%E5%90%AF%E5%8A%A8%E9%9B%86%E7%BE%A4%E5%AE%9E%E4%BE%8B.png\" alt=\"再次启动集群实例\"></p>\n<p>查看 nacos 控制台</p>\n<p><img src=\"/img/%E6%9F%A5%E7%9C%8Bnacos%E6%8E%A7%E5%88%B6%E5%8F%B0.png\" alt=\"查看nacos控制台\"></p>\n<h2 id=\"NacosRule\"><a href=\"#NacosRule\" class=\"headerlink\" title=\"NacosRule\"></a>NacosRule</h2><p>Ribbon的默认实现 <code>ZoneAvoidanceRule</code> 并不能实现根据同集群优先来实现负载均衡，我们把规则改成 <strong>NacosRule</strong> 即可。我们是用 orderservice 调用 userservice，所以在 orderservice 配置规则。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Bean</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> IRule <span class=\"title function_\">iRule</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">\t<span class=\"comment\">//默认为轮询规则，这里自定义为随机规则</span></span><br><span class=\"line\">\t<span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"title class_\">NacosRule</span>();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>另外，你同样可以使用配置的形式来完成，具体参考上面的 Ribbon 栏目。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">userservice:</span><br><span class=\"line\"> ribbon:</span><br><span class=\"line\">  NFLoadBalancerRuleClassName: com.alibaba.cloud.nacos.ribbon.NacosRule #负载均衡规则 </span><br></pre></td></tr></table></figure>\n\n<p>然后，再对 orderservice 配置集群。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">spring:</span><br><span class=\"line\"> cloud:</span><br><span class=\"line\">  nacos:</span><br><span class=\"line\">   server-addr: localhost:<span class=\"number\">8848</span></span><br><span class=\"line\">   discovery:</span><br><span class=\"line\">    cluster-name: HZ # 集群名称</span><br></pre></td></tr></table></figure>\n\n<p>现在我启动了四个服务，分别是：</p>\n<ul>\n<li>orderservice - HZ</li>\n<li>userservice - HZ</li>\n<li>userservice1 - HZ</li>\n<li>userservice2 - SH</li>\n</ul>\n<p>访问地址：<a href=\"http://localhost:8080/order/101\">http://localhost:8080/order/101</a></p>\n<p>在访问中我们发现，只有同在一个 HZ 集群下的 userservice、userservice1 会被调用，并且是随机的。</p>\n<p>我们试着把 userservice、userservice2 停掉。依旧可以访问。</p>\n<p>在 userservice3 控制台可以看到发出了一串的警告，因为 orderservice 本身是在 HZ 集群的，这波 HZ 集群没有了 userservice，就会去别的集群找。</p>\n<p><img src=\"/img/nacos%E9%9B%86%E7%BE%A4%E8%AD%A6%E5%91%8A.png\" alt=\"nacos集群警告\"></p>\n<h2 id=\"权重配置\"><a href=\"#权重配置\" class=\"headerlink\" title=\"权重配置\"></a>权重配置</h2><p>实际部署中会出现这样的场景：</p>\n<p>服务器设备性能有差异，部分实例所在机器性能较好，另一些较差，我们希望性能好的机器承担更多的用户请求。但默认情况下 NacosRule 是同集群内随机挑选，不会考虑机器的性能问题。</p>\n<p>因此，Nacos 提供了<strong>权重配置来控制访问频率</strong>，0~1 之间，权重越大则访问频率越高，权重修改为 0，则该实例永远不会被访问。</p>\n<p>在 Nacos 控制台，找到 user-service 的实例列表，点击编辑，即可修改权重。</p>\n<p><img src=\"/img/nacos%E6%9D%83%E9%99%90%E9%85%8D%E7%BD%AE.png\" alt=\"nacos权限配置\"></p>\n<p>在弹出的编辑窗口，修改权重</p>\n<p><img src=\"/img/nacos%E4%BF%AE%E6%94%B9%E6%9D%83%E9%87%8D.png\" alt=\"nacos修改权重\"></p>\n<p>另外，在服务升级的时候，有一种较好的方案：我们也可以通过调整权重来进行平滑升级，例如：先把 userservice 权重调节为 0，让用户先流向 userservice2、userservice3，升级 userservice后，再把权重从 0 调到 0.1，让一部分用户先体验，用户体验稳定后就可以往上调权重啦。</p>\n<h2 id=\"环境隔离\"><a href=\"#环境隔离\" class=\"headerlink\" title=\"环境隔离\"></a>环境隔离</h2><p>Nacos 提供了 namespace 来实现环境隔离功能。</p>\n<ul>\n<li>Nacos 中可以有多个 namespace</li>\n<li>namespace 下可以有 group、service 等</li>\n<li>不同 namespace 之间<strong>相互隔离</strong>，例如不同 namespace 的服务互相不可见</li>\n</ul>\n<p><img src=\"/img/%E7%8E%AF%E5%A2%83%E9%9A%94%E7%A6%BB.png\" alt=\"环境隔离\"></p>\n<p><strong>1、创建namespace</strong></p>\n<p>默认情况下，所有 service、data、group 都在同一个 namespace，名为 public(保留空间)：</p>\n<p><img src=\"/img/%E5%88%9B%E5%BB%BAnamespace.png\" alt=\"创建namespace\"></p>\n<p>我们可以点击页面新增按钮，添加一个 namespace：</p>\n<p><img src=\"/img/%E6%B7%BB%E5%8A%A0namespace.png\" alt=\"添加namespace\"></p>\n<p>然后，填写表单：</p>\n<p><img src=\"/img/%E5%A1%AB%E5%86%99%E8%A1%A8%E5%8D%95.png\" alt=\"填写表单\"></p>\n<p>就能在页面看到一个新的 namespace：</p>\n<p><img src=\"/img/%E6%96%B0%E7%9A%84namespace.png\" alt=\"新的namespace\"></p>\n<p><strong>2、配置namespace</strong></p>\n<p>给微服务配置 namespace 只能通过修改配置来实现。</p>\n<p>例如，修改 order-service 的 application.yml 文件：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">spring:</span><br><span class=\"line\"> cloud:</span><br><span class=\"line\">  nacos:</span><br><span class=\"line\">   server-addr: localhost:<span class=\"number\">8848</span></span><br><span class=\"line\">   discovery:</span><br><span class=\"line\">    cluster-name: HZ</span><br><span class=\"line\">    namespace: 492a7d5d-237b-46a1-a99a-fa8e98e4b0f9 # 命名空间ID</span><br></pre></td></tr></table></figure>\n\n<p>重启 order-service 后，访问控制台。</p>\n<p><strong>public</strong></p>\n<p><img src=\"/img/public.png\" alt=\"public\"></p>\n<p><strong>dev</strong></p>\n<p><img src=\"/img/dev.png\" alt=\"dev\"></p>\n<p>此时访问 order-service，因为 namespace 不同，会导致找不到 userservice，控制台会报错：</p>\n<p><img src=\"/img/%E6%8E%A7%E5%88%B6%E5%8F%B0%E6%8A%A5%E9%94%99.png\" alt=\"控制台报\"></p>\n<h2 id=\"临时实例\"><a href=\"#临时实例\" class=\"headerlink\" title=\"临时实例\"></a>临时实例</h2><p>Nacos 的服务实例分为两种类型：</p>\n<ul>\n<li><strong>临时实例</strong>：如果实例宕机超过一定时间，会从服务列表剔除，<strong>默认的类型</strong>。</li>\n<li>非临时实例：如果实例宕机，不会从服务列表剔除，也可以叫永久实例。</li>\n</ul>\n<p>配置一个服务实例为永久实例：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">spring:</span><br><span class=\"line\"> cloud:</span><br><span class=\"line\">  nacos:</span><br><span class=\"line\">   discovery:</span><br><span class=\"line\">    ephemeral: <span class=\"literal\">false</span> # 设置为非临时实例</span><br></pre></td></tr></table></figure>\n\n<p>另外，Nacos 集群**默认采用AP方式(可用性)<strong>，当集群中存在非临时实例时，</strong>采用CP模式(一致性)**；而 Eureka 采用AP方式，不可切换。（这里说的是 CAP 原理，后面会写到）</p>\n<h2 id=\"Nacos配置中心\"><a href=\"#Nacos配置中心\" class=\"headerlink\" title=\"Nacos配置中心\"></a>Nacos配置中心</h2><p>Nacos除了可以做注册中心，同样可以做配置管理来使用。</p>\n<p>当微服务部署的实例越来越多，达到数十、数百时，逐个修改微服务配置就会让人抓狂，而且很容易出错。<strong>我们需要一种统一配置管理方案，可以集中管理所有实例的配置。</strong></p>\n<p><img src=\"/img/Nacos%E9%85%8D%E7%BD%AE%E4%B8%AD%E5%BF%83.png\" alt=\"Nacos配置中心\"></p>\n<p><strong>创建配置</strong></p>\n<p>在 Nacos 控制面板中添加配置文件</p>\n<p><img src=\"/img/%E6%B7%BB%E5%8A%A0%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6.png\" alt=\"添加配置文件\"></p>\n<p>然后在弹出的表单中，填写配置信息：</p>\n<p><img src=\"/img/%E5%A1%AB%E5%86%99%E9%85%8D%E7%BD%AE%E4%BF%A1%E6%81%AF.png\" alt=\"填写配置信息\"></p>\n<p><strong>注意</strong>：项目的核心配置，需要热更新的配置才有放到 nacos 管理的必要。基本不会变更的一些配置(例如数据库连接)还是保存在微服务本地比较好。</p>\n<p><strong>拉取配置</strong></p>\n<p>首先我们需要了解 Nacos 读取配置文件的环节是在哪一步，在没加入 Nacos 配置之前，获取配置是这样：</p>\n<p><img src=\"/img/%E8%8E%B7%E5%8F%96%E9%85%8D%E7%BD%AE.png\" alt=\"获取配置\"></p>\n<p>加入 Nacos 配置，它的读取是在 application.yml 之前的：</p>\n<p><img src=\"/img/%E5%8A%A0%E5%85%A5Nacos%E9%85%8D%E7%BD%AE%E5%90%8E.png\" alt=\"加入Nacos配置后\"></p>\n<p>这时候如果把 nacos 地址放在 application.yml 中，显然是不合适的，<strong>Nacos 就无法根据地址去获取配置了。</strong></p>\n<p>因此，nacos 地址必须放在优先级最高的 bootstrap.yml 文件。</p>\n<p><img src=\"/img/bootstrapyml.png\" alt=\"bootstrap.yml\"></p>\n<p><strong>引入 nacos-config 依赖</strong></p>\n<p>首先，在 user-service 服务中，引入 nacos-config 的客户端依赖：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!--nacos配置管理依赖--&gt;</span><br><span class=\"line\">&lt;dependency&gt;</span><br><span class=\"line\">    &lt;groupId&gt;com.alibaba.cloud&lt;/groupId&gt;</span><br><span class=\"line\">    &lt;artifactId&gt;spring-cloud-starter-alibaba-nacos-config&lt;/artifactId&gt;</span><br><span class=\"line\">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>\n\n<p><strong>添加 bootstrap.yml</strong></p>\n<p>然后，在 user-service 中添加一个 bootstrap.yml 文件，内容如下：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">spring:</span><br><span class=\"line\">  application:</span><br><span class=\"line\">    name: userservice # 服务名称</span><br><span class=\"line\">  profiles:</span><br><span class=\"line\">    active: dev #开发环境，这里是dev </span><br><span class=\"line\">  cloud:</span><br><span class=\"line\">    nacos:</span><br><span class=\"line\">      server-addr: localhost:<span class=\"number\">8848</span> # Nacos地址</span><br><span class=\"line\">      config:</span><br><span class=\"line\">        file-extension: yaml # 文件后缀名</span><br></pre></td></tr></table></figure>\n\n<p>根据 spring.cloud.nacos.server-addr 获取 nacos地址，再根据<code>$&#123;spring.application.name&#125;-$&#123;spring.profiles.active&#125;.$&#123;spring.cloud.nacos.config.file-extension&#125;</code>作为文件id，来读取配置。</p>\n<p>在这个例子例中，就是去读取 <code>userservice-dev.yaml</code></p>\n<p><img src=\"/img/nacos%E9%85%8D%E7%BD%AE%E6%98%A0%E5%B0%84%E5%85%B3%E7%B3%BB.png\" alt=\"nacos配置映射关系\"></p>\n<p>使用代码来验证是否拉取成功</p>\n<p>在 user-service 中的 UserController 中添加业务逻辑，读取 pattern.dateformat 配置并使用：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Value(&quot;$&#123;pattern.dateformat&#125;&quot;)</span></span><br><span class=\"line\"><span class=\"keyword\">private</span> String dateformat;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@GetMapping(&quot;now&quot;)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> String <span class=\"title function_\">now</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">//格式化时间</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> LocalDateTime.now().format(DateTimeFormatter.ofPattern(dateformat));</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"/img/%E4%BB%A3%E7%A0%81%E9%AA%8C%E8%AF%81.png\" alt=\"代码验证\"></p>\n<p>启动服务后，访问：<a href=\"http://localhost:8081/user/now\">http://localhost:8081/user/now</a></p>\n<p><img src=\"/img/%E5%90%AF%E5%8A%A8%E7%A4%BA%E6%84%8F%E5%9B%BE.png\" alt=\"启动示意图\"></p>\n<h2 id=\"配置共享\"><a href=\"#配置共享\" class=\"headerlink\" title=\"配置共享\"></a>配置共享</h2><p>其实在服务启动时，nacos 会读取多个配置文件，例如：</p>\n<ul>\n<li><code>[spring.application.name]-[spring.profiles.active].yaml</code>，例如：userservice-dev.yaml</li>\n<li><code>[spring.application.name].yaml</code>，例如：userservice.yaml</li>\n</ul>\n<p>这里的 <code>[spring.application.name].yaml</code> 不包含环境，<strong>因此可以被多个环境共享</strong>。</p>\n<p><strong>添加一个环境共享配置</strong></p>\n<p>我们在 nacos 中添加一个 userservice.yaml 文件：</p>\n<p><img src=\"/img/%E6%B7%BB%E5%8A%A0%E4%B8%80%E4%B8%AA%E7%8E%AF%E5%A2%83%E5%85%B1%E4%BA%AB%E9%85%8D%E7%BD%AE.png\" alt=\"添加一个环境共享配置\"></p>\n<p><strong>在 user-service 中读取共享配置</strong></p>\n<p>在 user-service 服务中，修改 PatternProperties 类，读取新添加的属性：</p>\n<p><img src=\"/img/%E8%AF%BB%E5%8F%96%E6%96%B0%E6%B7%BB%E5%8A%A0%E7%9A%84%E5%B1%9E%E6%80%A7.png\" alt=\"读取新添加的属性\"></p>\n<p>在 user-service 服务中，修改 UserController，添加一个方法：</p>\n<p><img src=\"/img/%E6%B7%BB%E5%8A%A0%E4%B8%80%E4%B8%AA%E6%96%B9%E6%B3%95.png\" alt=\"添加一个方法\"></p>\n<p><strong>运行两个 UserApplication，使用不同的profile</strong></p>\n<p>修改 UserApplication2 这个启动项，改变其profile值：</p>\n<p><img src=\"/img/%E4%BD%BF%E7%94%A8%E4%B8%8D%E5%90%8C%E7%9A%84profile.png\" alt=\"使用不同的profile\"></p>\n<p><img src=\"/img/%E4%BD%BF%E7%94%A8%E4%B8%8D%E5%90%8C%E7%9A%84profile2.png\" alt=\"使用不同的profile2\"></p>\n<p>这样，UserApplication(8081) 使用的 profile 是 dev，UserApplication2(8082) 使用的 profile 是test</p>\n<p>启动 UserApplication 和 UserApplication2</p>\n<p>访问地址：<a href=\"http://localhost:8081/user/prop%EF%BC%8C%E7%BB%93%E6%9E%9C%EF%BC%9A\">http://localhost:8081/user/prop，结果：</a></p>\n<p><img src=\"/img/%E4%BD%BF%E7%94%A8%E4%B8%8D%E5%90%8C%E7%9A%84%E9%85%8D%E7%BD%AE%E7%BB%93%E6%9E%9C1.png\" alt=\"使用不同的配置结果\"></p>\n<p>访问地址：<a href=\"http://localhost:8082/user/prop%EF%BC%8C%E7%BB%93%E6%9E%9C%EF%BC%9A\">http://localhost:8082/user/prop，结果：</a></p>\n<p><img src=\"/img/%E4%BD%BF%E7%94%A8%E4%B8%8D%E5%90%8C%E7%9A%84%E9%85%8D%E7%BD%AE%E7%BB%93%E6%9E%9C2.png\" alt=\"使用不同的配置结果\"></p>\n<p>可以看出来，不管是 dev，还是 test 环境，都读取到了 envSharedValue 这个属性的值。</p>\n<p>上面的都是同一个微服务下，<strong>那么不同微服务之间可以环境共享吗？</strong></p>\n<p>通过下面的两种方式来指定：</p>\n<ul>\n<li>extension-configs</li>\n<li>shared-configs</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">spring: </span><br><span class=\"line\">  cloud:</span><br><span class=\"line\">    nacos:</span><br><span class=\"line\">      config:</span><br><span class=\"line\">        file-extension: yaml # 文件后缀名</span><br><span class=\"line\">        extends-configs: # 多微服务间共享的配置列表</span><br><span class=\"line\">          - dataId: common.yaml # 要共享的配置文件id</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">spring: </span><br><span class=\"line\">  cloud:</span><br><span class=\"line\">    nacos:</span><br><span class=\"line\">      config:</span><br><span class=\"line\">        file-extension: yaml # 文件后缀名</span><br><span class=\"line\">        shared-configs: # 多微服务间共享的配置列表</span><br><span class=\"line\">          - dataId: common.yaml # 要共享的配置文件id</span><br></pre></td></tr></table></figure>\n\n<p><strong>配置优先级</strong></p>\n<p>当 nacos、服务本地同时<strong>出现相同属性时</strong>，优先级有高低之分。</p>\n<p><img src=\"/img/%E4%BC%98%E5%85%88%E7%BA%A7%E6%9C%89%E9%AB%98%E4%BD%8E%E4%B9%8B%E5%88%86.png\" alt=\"优先级有高低之分\"></p>\n<p>更细致的配置</p>\n<p><img src=\"/img/%E6%9B%B4%E7%BB%86%E8%87%B4%E7%9A%84%E9%85%8D%E7%BD%AE.png\" alt=\"更细致的配置\"></p>\n<h2 id=\"Nacos集群\"><a href=\"#Nacos集群\" class=\"headerlink\" title=\"Nacos集群\"></a>Nacos集群</h2><p><strong>架构介绍</strong></p>\n<p><img src=\"/img/%E6%9E%B6%E6%9E%84%E4%BB%8B%E7%BB%8D.png\" alt=\"架构介绍\"></p>\n<p>其中包含 3 个Nacos 节点，然后一个负载均衡器 Nginx 代理 3 个 Nacos，我们计划的 Nacos 集群如下图，MySQL 的主从复制后续再添加。</p>\n<p><img src=\"/img/%E8%AE%A1%E5%88%92%E7%9A%84Nacos%E9%9B%86%E7%BE%A4.png\" alt=\"计划的Nacos集群\"></p>\n<p>三个 Nacos 节点的地址</p>\n<table>\n<thead>\n<tr>\n<th align=\"left\">节点</th>\n<th align=\"left\">ip</th>\n<th align=\"left\">port</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">nacos1</td>\n<td align=\"left\">192.168.150.1</td>\n<td align=\"left\">8845</td>\n</tr>\n<tr>\n<td align=\"left\">nacos2</td>\n<td align=\"left\">192.168.150.1</td>\n<td align=\"left\">8846</td>\n</tr>\n<tr>\n<td align=\"left\">nacos3</td>\n<td align=\"left\">192.168.150.1</td>\n<td align=\"left\">8847</td>\n</tr>\n</tbody></table>\n<h2 id=\"初始化数据库\"><a href=\"#初始化数据库\" class=\"headerlink\" title=\"初始化数据库\"></a>初始化数据库</h2><p>Nacos 默认数据存储在内嵌数据库 Derby 中，不属于生产可用的数据库。官方推荐的最佳实践是使用带有主从的高可用数据库集群，主从模式的高可用数据库。这里我们以单点的数据库为例。</p>\n<p>首先新建一个数据库，命名为 nacos，而后导入下面的 SQL</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">CREATE TABLE `config_info` (</span><br><span class=\"line\">  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT &#x27;id&#x27;,</span><br><span class=\"line\">  `data_id` varchar(255) NOT NULL COMMENT &#x27;data_id&#x27;,</span><br><span class=\"line\">  `group_id` varchar(255) DEFAULT NULL,</span><br><span class=\"line\">  `content` longtext NOT NULL COMMENT &#x27;content&#x27;,</span><br><span class=\"line\">  `md5` varchar(32) DEFAULT NULL COMMENT &#x27;md5&#x27;,</span><br><span class=\"line\">  `gmt_create` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT &#x27;创建时间&#x27;,</span><br><span class=\"line\">  `gmt_modified` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT &#x27;修改时间&#x27;,</span><br><span class=\"line\">  `src_user` text COMMENT &#x27;source user&#x27;,</span><br><span class=\"line\">  `src_ip` varchar(50) DEFAULT NULL COMMENT &#x27;source ip&#x27;,</span><br><span class=\"line\">  `app_name` varchar(128) DEFAULT NULL,</span><br><span class=\"line\">  `tenant_id` varchar(128) DEFAULT &#x27;&#x27; COMMENT &#x27;租户字段&#x27;,</span><br><span class=\"line\">  `c_desc` varchar(256) DEFAULT NULL,</span><br><span class=\"line\">  `c_use` varchar(64) DEFAULT NULL,</span><br><span class=\"line\">  `effect` varchar(64) DEFAULT NULL,</span><br><span class=\"line\">  `type` varchar(64) DEFAULT NULL,</span><br><span class=\"line\">  `c_schema` text,</span><br><span class=\"line\">  PRIMARY KEY (`id`),</span><br><span class=\"line\">  UNIQUE KEY `uk_configinfo_datagrouptenant` (`data_id`,`group_id`,`tenant_id`)</span><br><span class=\"line\">) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT=&#x27;config_info&#x27;;</span><br><span class=\"line\"></span><br><span class=\"line\">/******************************************/</span><br><span class=\"line\">/*   数据库全名 = nacos_config   */</span><br><span class=\"line\">/*   表名称 = config_info_aggr   */</span><br><span class=\"line\">/******************************************/</span><br><span class=\"line\">CREATE TABLE `config_info_aggr` (</span><br><span class=\"line\">  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT &#x27;id&#x27;,</span><br><span class=\"line\">  `data_id` varchar(255) NOT NULL COMMENT &#x27;data_id&#x27;,</span><br><span class=\"line\">  `group_id` varchar(255) NOT NULL COMMENT &#x27;group_id&#x27;,</span><br><span class=\"line\">  `datum_id` varchar(255) NOT NULL COMMENT &#x27;datum_id&#x27;,</span><br><span class=\"line\">  `content` longtext NOT NULL COMMENT &#x27;内容&#x27;,</span><br><span class=\"line\">  `gmt_modified` datetime NOT NULL COMMENT &#x27;修改时间&#x27;,</span><br><span class=\"line\">  `app_name` varchar(128) DEFAULT NULL,</span><br><span class=\"line\">  `tenant_id` varchar(128) DEFAULT &#x27;&#x27; COMMENT &#x27;租户字段&#x27;,</span><br><span class=\"line\">  PRIMARY KEY (`id`),</span><br><span class=\"line\">  UNIQUE KEY `uk_configinfoaggr_datagrouptenantdatum` (`data_id`,`group_id`,`tenant_id`,`datum_id`)</span><br><span class=\"line\">) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT=&#x27;增加租户字段&#x27;;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">/******************************************/</span><br><span class=\"line\">/*   数据库全名 = nacos_config   */</span><br><span class=\"line\">/*   表名称 = config_info_beta   */</span><br><span class=\"line\">/******************************************/</span><br><span class=\"line\">CREATE TABLE `config_info_beta` (</span><br><span class=\"line\">  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT &#x27;id&#x27;,</span><br><span class=\"line\">  `data_id` varchar(255) NOT NULL COMMENT &#x27;data_id&#x27;,</span><br><span class=\"line\">  `group_id` varchar(128) NOT NULL COMMENT &#x27;group_id&#x27;,</span><br><span class=\"line\">  `app_name` varchar(128) DEFAULT NULL COMMENT &#x27;app_name&#x27;,</span><br><span class=\"line\">  `content` longtext NOT NULL COMMENT &#x27;content&#x27;,</span><br><span class=\"line\">  `beta_ips` varchar(1024) DEFAULT NULL COMMENT &#x27;betaIps&#x27;,</span><br><span class=\"line\">  `md5` varchar(32) DEFAULT NULL COMMENT &#x27;md5&#x27;,</span><br><span class=\"line\">  `gmt_create` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT &#x27;创建时间&#x27;,</span><br><span class=\"line\">  `gmt_modified` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT &#x27;修改时间&#x27;,</span><br><span class=\"line\">  `src_user` text COMMENT &#x27;source user&#x27;,</span><br><span class=\"line\">  `src_ip` varchar(50) DEFAULT NULL COMMENT &#x27;source ip&#x27;,</span><br><span class=\"line\">  `tenant_id` varchar(128) DEFAULT &#x27;&#x27; COMMENT &#x27;租户字段&#x27;,</span><br><span class=\"line\">  PRIMARY KEY (`id`),</span><br><span class=\"line\">  UNIQUE KEY `uk_configinfobeta_datagrouptenant` (`data_id`,`group_id`,`tenant_id`)</span><br><span class=\"line\">) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT=&#x27;config_info_beta&#x27;;</span><br><span class=\"line\"></span><br><span class=\"line\">/******************************************/</span><br><span class=\"line\">/*   数据库全名 = nacos_config   */</span><br><span class=\"line\">/*   表名称 = config_info_tag   */</span><br><span class=\"line\">/******************************************/</span><br><span class=\"line\">CREATE TABLE `config_info_tag` (</span><br><span class=\"line\">  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT &#x27;id&#x27;,</span><br><span class=\"line\">  `data_id` varchar(255) NOT NULL COMMENT &#x27;data_id&#x27;,</span><br><span class=\"line\">  `group_id` varchar(128) NOT NULL COMMENT &#x27;group_id&#x27;,</span><br><span class=\"line\">  `tenant_id` varchar(128) DEFAULT &#x27;&#x27; COMMENT &#x27;tenant_id&#x27;,</span><br><span class=\"line\">  `tag_id` varchar(128) NOT NULL COMMENT &#x27;tag_id&#x27;,</span><br><span class=\"line\">  `app_name` varchar(128) DEFAULT NULL COMMENT &#x27;app_name&#x27;,</span><br><span class=\"line\">  `content` longtext NOT NULL COMMENT &#x27;content&#x27;,</span><br><span class=\"line\">  `md5` varchar(32) DEFAULT NULL COMMENT &#x27;md5&#x27;,</span><br><span class=\"line\">  `gmt_create` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT &#x27;创建时间&#x27;,</span><br><span class=\"line\">  `gmt_modified` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT &#x27;修改时间&#x27;,</span><br><span class=\"line\">  `src_user` text COMMENT &#x27;source user&#x27;,</span><br><span class=\"line\">  `src_ip` varchar(50) DEFAULT NULL COMMENT &#x27;source ip&#x27;,</span><br><span class=\"line\">  PRIMARY KEY (`id`),</span><br><span class=\"line\">  UNIQUE KEY `uk_configinfotag_datagrouptenanttag` (`data_id`,`group_id`,`tenant_id`,`tag_id`)</span><br><span class=\"line\">) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT=&#x27;config_info_tag&#x27;;</span><br><span class=\"line\"></span><br><span class=\"line\">/******************************************/</span><br><span class=\"line\">/*   数据库全名 = nacos_config   */</span><br><span class=\"line\">/*   表名称 = config_tags_relation   */</span><br><span class=\"line\">/******************************************/</span><br><span class=\"line\">CREATE TABLE `config_tags_relation` (</span><br><span class=\"line\">  `id` bigint(20) NOT NULL COMMENT &#x27;id&#x27;,</span><br><span class=\"line\">  `tag_name` varchar(128) NOT NULL COMMENT &#x27;tag_name&#x27;,</span><br><span class=\"line\">  `tag_type` varchar(64) DEFAULT NULL COMMENT &#x27;tag_type&#x27;,</span><br><span class=\"line\">  `data_id` varchar(255) NOT NULL COMMENT &#x27;data_id&#x27;,</span><br><span class=\"line\">  `group_id` varchar(128) NOT NULL COMMENT &#x27;group_id&#x27;,</span><br><span class=\"line\">  `tenant_id` varchar(128) DEFAULT &#x27;&#x27; COMMENT &#x27;tenant_id&#x27;,</span><br><span class=\"line\">  `nid` bigint(20) NOT NULL AUTO_INCREMENT,</span><br><span class=\"line\">  PRIMARY KEY (`nid`),</span><br><span class=\"line\">  UNIQUE KEY `uk_configtagrelation_configidtag` (`id`,`tag_name`,`tag_type`),</span><br><span class=\"line\">  KEY `idx_tenant_id` (`tenant_id`)</span><br><span class=\"line\">) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT=&#x27;config_tag_relation&#x27;;</span><br><span class=\"line\"></span><br><span class=\"line\">/******************************************/</span><br><span class=\"line\">/*   数据库全名 = nacos_config   */</span><br><span class=\"line\">/*   表名称 = group_capacity   */</span><br><span class=\"line\">/******************************************/</span><br><span class=\"line\">CREATE TABLE `group_capacity` (</span><br><span class=\"line\">  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT COMMENT &#x27;主键ID&#x27;,</span><br><span class=\"line\">  `group_id` varchar(128) NOT NULL DEFAULT &#x27;&#x27; COMMENT &#x27;Group ID，空字符表示整个集群&#x27;,</span><br><span class=\"line\">  `quota` int(10) unsigned NOT NULL DEFAULT &#x27;0&#x27; COMMENT &#x27;配额，0表示使用默认值&#x27;,</span><br><span class=\"line\">  `usage` int(10) unsigned NOT NULL DEFAULT &#x27;0&#x27; COMMENT &#x27;使用量&#x27;,</span><br><span class=\"line\">  `max_size` int(10) unsigned NOT NULL DEFAULT &#x27;0&#x27; COMMENT &#x27;单个配置大小上限，单位为字节，0表示使用默认值&#x27;,</span><br><span class=\"line\">  `max_aggr_count` int(10) unsigned NOT NULL DEFAULT &#x27;0&#x27; COMMENT &#x27;聚合子配置最大个数，，0表示使用默认值&#x27;,</span><br><span class=\"line\">  `max_aggr_size` int(10) unsigned NOT NULL DEFAULT &#x27;0&#x27; COMMENT &#x27;单个聚合数据的子配置大小上限，单位为字节，0表示使用默认值&#x27;,</span><br><span class=\"line\">  `max_history_count` int(10) unsigned NOT NULL DEFAULT &#x27;0&#x27; COMMENT &#x27;最大变更历史数量&#x27;,</span><br><span class=\"line\">  `gmt_create` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT &#x27;创建时间&#x27;,</span><br><span class=\"line\">  `gmt_modified` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT &#x27;修改时间&#x27;,</span><br><span class=\"line\">  PRIMARY KEY (`id`),</span><br><span class=\"line\">  UNIQUE KEY `uk_group_id` (`group_id`)</span><br><span class=\"line\">) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT=&#x27;集群、各Group容量信息表&#x27;;</span><br><span class=\"line\"></span><br><span class=\"line\">/******************************************/</span><br><span class=\"line\">/*   数据库全名 = nacos_config   */</span><br><span class=\"line\">/*   表名称 = his_config_info   */</span><br><span class=\"line\">/******************************************/</span><br><span class=\"line\">CREATE TABLE `his_config_info` (</span><br><span class=\"line\">  `id` bigint(64) unsigned NOT NULL,</span><br><span class=\"line\">  `nid` bigint(20) unsigned NOT NULL AUTO_INCREMENT,</span><br><span class=\"line\">  `data_id` varchar(255) NOT NULL,</span><br><span class=\"line\">  `group_id` varchar(128) NOT NULL,</span><br><span class=\"line\">  `app_name` varchar(128) DEFAULT NULL COMMENT &#x27;app_name&#x27;,</span><br><span class=\"line\">  `content` longtext NOT NULL,</span><br><span class=\"line\">  `md5` varchar(32) DEFAULT NULL,</span><br><span class=\"line\">  `gmt_create` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,</span><br><span class=\"line\">  `gmt_modified` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,</span><br><span class=\"line\">  `src_user` text,</span><br><span class=\"line\">  `src_ip` varchar(50) DEFAULT NULL,</span><br><span class=\"line\">  `op_type` char(10) DEFAULT NULL,</span><br><span class=\"line\">  `tenant_id` varchar(128) DEFAULT &#x27;&#x27; COMMENT &#x27;租户字段&#x27;,</span><br><span class=\"line\">  PRIMARY KEY (`nid`),</span><br><span class=\"line\">  KEY `idx_gmt_create` (`gmt_create`),</span><br><span class=\"line\">  KEY `idx_gmt_modified` (`gmt_modified`),</span><br><span class=\"line\">  KEY `idx_did` (`data_id`)</span><br><span class=\"line\">) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT=&#x27;多租户改造&#x27;;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">/******************************************/</span><br><span class=\"line\">/*   数据库全名 = nacos_config   */</span><br><span class=\"line\">/*   表名称 = tenant_capacity   */</span><br><span class=\"line\">/******************************************/</span><br><span class=\"line\">CREATE TABLE `tenant_capacity` (</span><br><span class=\"line\">  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT COMMENT &#x27;主键ID&#x27;,</span><br><span class=\"line\">  `tenant_id` varchar(128) NOT NULL DEFAULT &#x27;&#x27; COMMENT &#x27;Tenant ID&#x27;,</span><br><span class=\"line\">  `quota` int(10) unsigned NOT NULL DEFAULT &#x27;0&#x27; COMMENT &#x27;配额，0表示使用默认值&#x27;,</span><br><span class=\"line\">  `usage` int(10) unsigned NOT NULL DEFAULT &#x27;0&#x27; COMMENT &#x27;使用量&#x27;,</span><br><span class=\"line\">  `max_size` int(10) unsigned NOT NULL DEFAULT &#x27;0&#x27; COMMENT &#x27;单个配置大小上限，单位为字节，0表示使用默认值&#x27;,</span><br><span class=\"line\">  `max_aggr_count` int(10) unsigned NOT NULL DEFAULT &#x27;0&#x27; COMMENT &#x27;聚合子配置最大个数&#x27;,</span><br><span class=\"line\">  `max_aggr_size` int(10) unsigned NOT NULL DEFAULT &#x27;0&#x27; COMMENT &#x27;单个聚合数据的子配置大小上限，单位为字节，0表示使用默认值&#x27;,</span><br><span class=\"line\">  `max_history_count` int(10) unsigned NOT NULL DEFAULT &#x27;0&#x27; COMMENT &#x27;最大变更历史数量&#x27;,</span><br><span class=\"line\">  `gmt_create` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT &#x27;创建时间&#x27;,</span><br><span class=\"line\">  `gmt_modified` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT &#x27;修改时间&#x27;,</span><br><span class=\"line\">  PRIMARY KEY (`id`),</span><br><span class=\"line\">  UNIQUE KEY `uk_tenant_id` (`tenant_id`)</span><br><span class=\"line\">) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT=&#x27;租户容量信息表&#x27;;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">CREATE TABLE `tenant_info` (</span><br><span class=\"line\">  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT &#x27;id&#x27;,</span><br><span class=\"line\">  `kp` varchar(128) NOT NULL COMMENT &#x27;kp&#x27;,</span><br><span class=\"line\">  `tenant_id` varchar(128) default &#x27;&#x27; COMMENT &#x27;tenant_id&#x27;,</span><br><span class=\"line\">  `tenant_name` varchar(128) default &#x27;&#x27; COMMENT &#x27;tenant_name&#x27;,</span><br><span class=\"line\">  `tenant_desc` varchar(256) DEFAULT NULL COMMENT &#x27;tenant_desc&#x27;,</span><br><span class=\"line\">  `create_source` varchar(32) DEFAULT NULL COMMENT &#x27;create_source&#x27;,</span><br><span class=\"line\">  `gmt_create` bigint(20) NOT NULL COMMENT &#x27;创建时间&#x27;,</span><br><span class=\"line\">  `gmt_modified` bigint(20) NOT NULL COMMENT &#x27;修改时间&#x27;,</span><br><span class=\"line\">  PRIMARY KEY (`id`),</span><br><span class=\"line\">  UNIQUE KEY `uk_tenant_info_kptenantid` (`kp`,`tenant_id`),</span><br><span class=\"line\">  KEY `idx_tenant_id` (`tenant_id`)</span><br><span class=\"line\">) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT=&#x27;tenant_info&#x27;;</span><br><span class=\"line\"></span><br><span class=\"line\">CREATE TABLE `users` (</span><br><span class=\"line\">    `username` varchar(50) NOT NULL PRIMARY KEY,</span><br><span class=\"line\">    `password` varchar(500) NOT NULL,</span><br><span class=\"line\">    `enabled` boolean NOT NULL</span><br><span class=\"line\">);</span><br><span class=\"line\"></span><br><span class=\"line\">CREATE TABLE `roles` (</span><br><span class=\"line\">    `username` varchar(50) NOT NULL,</span><br><span class=\"line\">    `role` varchar(50) NOT NULL,</span><br><span class=\"line\">    UNIQUE INDEX `idx_user_role` (`username` ASC, `role` ASC) USING BTREE</span><br><span class=\"line\">);</span><br><span class=\"line\"></span><br><span class=\"line\">CREATE TABLE `permissions` (</span><br><span class=\"line\">    `role` varchar(50) NOT NULL,</span><br><span class=\"line\">    `resource` varchar(255) NOT NULL,</span><br><span class=\"line\">    `action` varchar(8) NOT NULL,</span><br><span class=\"line\">    UNIQUE INDEX `uk_role_permission` (`role`,`resource`,`action`) USING BTREE</span><br><span class=\"line\">);</span><br><span class=\"line\"></span><br><span class=\"line\">INSERT INTO users (username, password, enabled) VALUES (&#x27;nacos&#x27;, &#x27;$2a$10$EuWPZHzz32dJN7jexM34MOeYirDdFAZm2kuWj7VEOJhhZkDrxfvUu&#x27;, TRUE);</span><br><span class=\"line\"></span><br><span class=\"line\">INSERT INTO roles (username, role) VALUES (&#x27;nacos&#x27;, &#x27;ROLE_ADMIN&#x27;);</span><br></pre></td></tr></table></figure>\n\n<p><strong>配置Nacos</strong></p>\n<p>进入 nacos 的 conf 目录，修改配置文件 cluster.conf.example，重命名为 cluster.conf</p>\n<p><img src=\"/img/%E4%BF%AE%E6%94%B9%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6.png\" alt=\"修改配置文件\"></p>\n<p>添加内容</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">127.0</span><span class=\"number\">.0</span><span class=\"number\">.1</span>:<span class=\"number\">8845</span></span><br><span class=\"line\"><span class=\"number\">127.0</span><span class=\"number\">.0</span><span class=\"number\">.1</span><span class=\"number\">.8846</span></span><br><span class=\"line\"><span class=\"number\">127.0</span><span class=\"number\">.0</span><span class=\"number\">.1</span><span class=\"number\">.8847</span></span><br></pre></td></tr></table></figure>\n\n<p>然后修改 application.properties 文件，添加数据库配置</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">spring.datasource.platform=mysql</span><br><span class=\"line\">db.num=<span class=\"number\">1</span></span><br><span class=\"line\">db.url<span class=\"number\">.0</span>=jdbc:mysql:<span class=\"comment\">//127.0.0.1:3306/nacos?characterEncoding=utf8&amp;connectTimeout=1000&amp;socketTimeout=3000&amp;autoReconnect=true&amp;useUnicode=true&amp;useSSL=false&amp;serverTimezone=UTC</span></span><br><span class=\"line\">db.user<span class=\"number\">.0</span>=root</span><br><span class=\"line\">db.password<span class=\"number\">.0</span>=<span class=\"number\">123456</span></span><br></pre></td></tr></table></figure>\n\n<p>将 nacos 文件夹复制三份，分别命名为：nacos1、nacos2、nacos3</p>\n<p><img src=\"/img/%E5%B0%86nacos%E6%96%87%E4%BB%B6%E5%A4%B9%E5%A4%8D%E5%88%B6%E4%B8%89%E4%BB%BD.png\" alt=\"将nacos文件夹复制三份\"></p>\n<p>然后分别修改三个文件夹中的 application.properties，</p>\n<p>nacos1</p>\n<figure class=\"highlight properties\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">server.port</span>=<span class=\"string\">8845</span></span><br></pre></td></tr></table></figure>\n\n<p>nacos2</p>\n<figure class=\"highlight properties\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">server.port</span>=<span class=\"string\">8846</span></span><br></pre></td></tr></table></figure>\n\n<p>nacos3</p>\n<figure class=\"highlight properties\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">server.port</span>=<span class=\"string\">8847</span></span><br></pre></td></tr></table></figure>\n\n<p>然后分别启动三个 nacos</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">startup.cmd</span><br></pre></td></tr></table></figure>\n\n<p><strong>Nginx反向代理</strong></p>\n<p>修改 nginx 文件夹下的 conf/nginx.conf 文件，配置如下</p>\n<figure class=\"highlight nginx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"section\">upstream</span> nacos-cluster &#123;</span><br><span class=\"line\">    <span class=\"attribute\">server</span> <span class=\"number\">127.0.0.1:8845</span>;</span><br><span class=\"line\">    <span class=\"attribute\">server</span> <span class=\"number\">127.0.0.1:8846</span>;</span><br><span class=\"line\">    <span class=\"attribute\">server</span> <span class=\"number\">127.0.0.1:8847</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"section\">server</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">listen</span>       <span class=\"number\">80</span>;</span><br><span class=\"line\">    <span class=\"attribute\">server_name</span>  localhost;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"section\">location</span> /nacos &#123;</span><br><span class=\"line\">        <span class=\"attribute\">proxy_pass</span> http://nacos-cluster;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>启动 nginx，在浏览器访问：<a href=\"http://localhost/nacos\">http://localhost/nacos</a></p>\n<p>在代码中的 application.yml 文件配置改为如下：</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">spring:</span></span><br><span class=\"line\">  <span class=\"attr\">cloud:</span></span><br><span class=\"line\">    <span class=\"attr\">nacos:</span></span><br><span class=\"line\">      <span class=\"attr\">server-addr:</span> <span class=\"string\">localhost:80</span> <span class=\"comment\"># Nacos地址</span></span><br></pre></td></tr></table></figure>\n\n<p>实际部署时，需要给做反向代理的 Nginx 服务器设置一个域名，这样后续如果有服务器迁移 Nacos 的客户端也无需更改配置。Nacos 的各个节点应该部署到多个不同服务器，做好容灾和隔离工作。</p>\n<h1 id=\"Feign\"><a href=\"#Feign\" class=\"headerlink\" title=\"Feign\"></a>Feign</h1><p>我们以前利用 RestTemplate 发起远程调用的代码：</p>\n<p><img src=\"/img/%E5%88%A9%E7%94%A8RestTemplate%E5%8F%91%E8%B5%B7%E8%BF%9C%E7%A8%8B%E8%B0%83%E7%94%A8.png\" alt=\"利用RestTemplate发起远程调用\"></p>\n<ul>\n<li>代码可读性差，编程体验不统一</li>\n<li>参数复杂URL难以维护</li>\n</ul>\n<p>Feign 是一个声明式的 http 客户端，官方地址：<a href=\"https://github.com/OpenFeign/feign\">https://github.com/OpenFeign/feign</a></p>\n<p>其作用就是帮助我们<strong>优雅的实现 http 请求的发送</strong>，解决上面提到的问题。</p>\n<p><img src=\"/img/feign%E4%BD%9C%E7%94%A8.png\" alt=\"feign作用\"></p>\n<h2 id=\"Feign使用\"><a href=\"#Feign使用\" class=\"headerlink\" title=\"Feign使用\"></a>Feign使用</h2><p><strong>引入依赖</strong></p>\n<p>我们在 order-service 引入 feign 依赖：</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.springframework.cloud<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring-cloud-starter-openfeign<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p><strong>添加注解</strong></p>\n<p>在 order-service 启动类添加注解开启 Feign</p>\n<p><img src=\"/img/%E6%B3%A8%E8%A7%A3%E5%BC%80%E5%90%AFFeign.png\" alt=\"注解开启Feign\"></p>\n<p><strong>请求接口</strong></p>\n<p>在 order-service 中新建一个接口，内容如下</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.xn2001.order.client;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> com.xn2001.order.pojo.User;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.cloud.openfeign.FeignClient;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.web.bind.annotation.PathVariable;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@FeignClient(&quot;userservice&quot;)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">interface</span> <span class=\"title class_\">UserClient</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@GetMapping(&quot;/user/&#123;id&#125;&quot;)</span></span><br><span class=\"line\">    User <span class=\"title function_\">findById</span><span class=\"params\">(<span class=\"meta\">@PathVariable(&quot;id&quot;)</span> Long id)</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><code>@FeignClient(&quot;userservice&quot;)</code>：其中参数填写的是微服务名</p>\n<p><code>@GetMapping(&quot;/user/&#123;id&#125;&quot;)</code>：其中参数填写的是请求路径</p>\n<p>这个客户端主要是基于 SpringMVC 的注解 <code>@GetMapping</code> 来声明远程调用的信息</p>\n<p>Feign 可以帮助我们发送 http 请求，无需自己使用 RestTemplate 来发送了。</p>\n<p><strong>测试</strong></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Autowired</span></span><br><span class=\"line\"><span class=\"keyword\">private</span> UserClient userClient;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> Order <span class=\"title function_\">queryOrderAndUserById</span><span class=\"params\">(Long orderId)</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 1.查询订单</span></span><br><span class=\"line\">    <span class=\"type\">Order</span> <span class=\"variable\">order</span> <span class=\"operator\">=</span> orderMapper.findById(orderId);</span><br><span class=\"line\">    <span class=\"comment\">// <span class=\"doctag\">TODO:</span> 2021/8/20 使用feign远程调用</span></span><br><span class=\"line\">    <span class=\"type\">User</span> <span class=\"variable\">user</span> <span class=\"operator\">=</span> userClient.findById(order.getUserId());</span><br><span class=\"line\">    <span class=\"comment\">// 3. 将用户信息封装进订单</span></span><br><span class=\"line\">    order.setUser(user);</span><br><span class=\"line\">    <span class=\"comment\">// 4.返回</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> order;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"自定义配置\"><a href=\"#自定义配置\" class=\"headerlink\" title=\"自定义配置\"></a>自定义配置</h2><p>Feign 可以支持很多的自定义配置，如下表所示：</p>\n<table>\n<thead>\n<tr>\n<th align=\"left\">类型</th>\n<th align=\"left\">作用</th>\n<th align=\"left\">说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\"><strong>feign.Logger.Level</strong></td>\n<td align=\"left\">修改日志级别</td>\n<td align=\"left\">包含四种不同的级别：NONE、BASIC、HEADERS、FULL</td>\n</tr>\n<tr>\n<td align=\"left\">feign.codec.Decoder</td>\n<td align=\"left\">响应结果的解析器</td>\n<td align=\"left\">http远程调用的结果做解析，例如解析json字符串为java对象</td>\n</tr>\n<tr>\n<td align=\"left\">feign.codec.Encoder</td>\n<td align=\"left\">请求参数编码</td>\n<td align=\"left\">将请求参数编码，便于通过http请求发送</td>\n</tr>\n<tr>\n<td align=\"left\">feign.Contract</td>\n<td align=\"left\">支持的注解格式</td>\n<td align=\"left\">默认是SpringMVC的注解</td>\n</tr>\n<tr>\n<td align=\"left\">feign.Retryer</td>\n<td align=\"left\">失败重试机制</td>\n<td align=\"left\">请求失败的重试机制，默认是没有，不过会使用Ribbon的重试</td>\n</tr>\n</tbody></table>\n<p>一般情况下，默认值就能满足我们使用，如果要自定义时，只需要创建自定义的 @Bean 覆盖默认 Bean 即可。下面以日志为例来演示如何自定义配置。</p>\n<p>基于配置文件修改 feign 的日志级别可以针对单个服务：</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">feign:</span>  </span><br><span class=\"line\">  <span class=\"attr\">client:</span></span><br><span class=\"line\">    <span class=\"attr\">config:</span> </span><br><span class=\"line\">      <span class=\"attr\">userservice:</span> <span class=\"comment\"># 针对某个微服务的配置</span></span><br><span class=\"line\">        <span class=\"attr\">loggerLevel:</span> <span class=\"string\">FULL</span> <span class=\"comment\">#  日志级别 </span></span><br></pre></td></tr></table></figure>\n\n<p><strong>也可以针对所有服务</strong>：</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">feign:</span>  </span><br><span class=\"line\">  <span class=\"attr\">client:</span></span><br><span class=\"line\">    <span class=\"attr\">config:</span> </span><br><span class=\"line\">      <span class=\"attr\">default:</span> <span class=\"comment\"># 这里用default就是全局配置，如果是写服务名称，则是针对某个微服务的配置</span></span><br><span class=\"line\">        <span class=\"attr\">loggerLevel:</span> <span class=\"string\">FULL</span> <span class=\"comment\">#  日志级别 </span></span><br></pre></td></tr></table></figure>\n\n<p>而日志的级别分为四种：</p>\n<ul>\n<li>NONE：不记录任何日志信息，这是默认值。</li>\n<li>BASIC：仅记录请求的方法，URL以及响应状态码和执行时间</li>\n<li>HEADERS：在BASIC的基础上，额外记录了请求和响应的头信息</li>\n<li>FULL：记录所有请求和响应的明细，包括头信息、请求体、元数据</li>\n</ul>\n<p>也可以基于 <strong>Java 代码</strong>来修改日志级别，先声明一个类，然后声明一个 Logger.Level 的对象</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">DefaultFeignConfiguration</span>  &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Bean</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> Logger.Level <span class=\"title function_\">feignLogLevel</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> Logger.Level.BASIC; <span class=\"comment\">// 日志级别为BASIC</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>如果要<strong>全局生效</strong>，将其放到启动类的 <code>@EnableFeignClients</code> 这个注解中：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@EnableFeignClients(defaultConfiguration = DefaultFeignConfiguration .class)</span> </span><br></pre></td></tr></table></figure>\n\n<p>如果是<strong>局部生效</strong>，则把它放到对应的 <code>@FeignClient</code> 这个注解中：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@FeignClient(value = &quot;userservice&quot;, configuration = DefaultFeignConfiguration .class)</span> </span><br></pre></td></tr></table></figure>\n\n<h2 id=\"性能优化\"><a href=\"#性能优化\" class=\"headerlink\" title=\"性能优化\"></a>性能优化</h2><p>Feign 底层发起 http 请求，依赖于其它的框架。其底层客户端实现有：</p>\n<ul>\n<li><strong>URLConnection</strong>：默认实现，不支持连接池</li>\n<li><strong>Apache HttpClient</strong> ：支持连接池</li>\n<li><strong>OKHttp</strong>：支持连接池</li>\n</ul>\n<p>因此提高 Feign 性能的主要手段就是使用<strong>连接池</strong>代替默认的 URLConnection</p>\n<p>另外，日志级别应该尽量用 basic/none，可以有效提高性能。</p>\n<p><strong>这里我们用 Apache 的HttpClient来演示连接池。</strong></p>\n<p>在 order-service 的 pom 文件中引入 HttpClient 依赖</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!--httpClient的依赖 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>io.github.openfeign<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>feign-httpclient<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p><strong>配置连接池</strong></p>\n<p>在 order-service 的 application.yml 中添加配置</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">feign:</span></span><br><span class=\"line\">  <span class=\"attr\">client:</span></span><br><span class=\"line\">    <span class=\"attr\">config:</span></span><br><span class=\"line\">      <span class=\"attr\">default:</span> <span class=\"comment\"># default全局的配置</span></span><br><span class=\"line\">        <span class=\"attr\">loggerLevel:</span> <span class=\"string\">BASIC</span> <span class=\"comment\"># 日志级别，BASIC就是基本的请求和响应信息</span></span><br><span class=\"line\">  <span class=\"attr\">httpclient:</span></span><br><span class=\"line\">    <span class=\"attr\">enabled:</span> <span class=\"literal\">true</span> <span class=\"comment\"># 开启feign对HttpClient的支持</span></span><br><span class=\"line\">    <span class=\"attr\">max-connections:</span> <span class=\"number\">200</span> <span class=\"comment\"># 最大的连接数</span></span><br><span class=\"line\">    <span class=\"attr\">max-connections-per-route:</span> <span class=\"number\">50</span> <span class=\"comment\"># 每个路径的最大连接数</span></span><br></pre></td></tr></table></figure>\n\n<p>在 FeignClientFactoryBean 中的 loadBalance 方法中打断点</p>\n<p><img src=\"/img/loadBalance.png\" alt=\"loadBalance\"></p>\n<p>Debug 方式启动 order-service 服务，可以看到这里的 client，底层就是 HttpClient</p>\n<p><img src=\"/img/HttpClient.png\" alt=\"HttpClient\"></p>\n<h2 id=\"最佳实践\"><a href=\"#最佳实践\" class=\"headerlink\" title=\"最佳实践\"></a>最佳实践</h2><p><strong>继承方式</strong></p>\n<p>一样的代码可以通过继承来共享：</p>\n<p>1）定义一个 API 接口，利用定义方法，并基于 SpringMVC 注解做声明</p>\n<p>2）Feign 客户端、Controller 都集成该接口</p>\n<p><img src=\"/img/%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5.png\" alt=\"最佳实践\"></p>\n<p>优点</p>\n<ul>\n<li>简单</li>\n<li>实现了代码共享</li>\n</ul>\n<p>缺点</p>\n<ul>\n<li>服务提供方、服务消费方紧耦合</li>\n<li>参数列表中的注解映射并不会继承，因此 Controller 中必须再次声明方法、参数列表、注解</li>\n</ul>\n<p><strong>抽取方式</strong></p>\n<p>将 FeignClient 抽取为独立模块，并且把接口有关的 pojo、默认的 Feign 配置都放到这个模块中，提供给所有消费者使用。</p>\n<p>例如：将 UserClient、User、Feign 的默认配置都抽取到一个 feign-api 包中，所有微服务引用该依赖包，即可直接使用。</p>\n<p><img src=\"/img/%E6%8A%BD%E5%8F%96%E6%96%B9%E5%BC%8F.png\" alt=\"抽取方式\"></p>\n<p>接下来我们就用该方法在代码中实现</p>\n<p><strong>首先创建一个 module，命名为 feign-api</strong></p>\n<p><img src=\"/img/feign-api.png\" alt=\"feign-api\"></p>\n<p>在 feign-api 中然后引入依赖</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.springframework.cloud<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring-cloud-starter-openfeign<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>order-service中 的 UserClient、User 都复制到 feign-api 项目中</p>\n<p><img src=\"/img/feign-api%E4%BF%AE%E6%94%B9.png\" alt=\"feign-api修改\"></p>\n<p>接下来在 order-service 中使用 feign-api</p>\n<p>由于我们已经将 UserClient、User 放在 fegin-api 中共享了 ，所以可以删除 order-service 中的 UserClient、User，然后在 order-service 中引入 feign-api</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>com.xn2001.feign<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>feign-api<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>1.0<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p><strong>修改注解</strong></p>\n<p>当定义的 FeignClient 不在 SpringBootApplication 的扫描包范围下时，这些 FeignClient 就不能使用。</p>\n<p>修改 order-service 启动类上的 <code>@EnableFeignClients</code> 注解</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@EnableFeignClients(basePackages = &quot;com.xn2001.feign.clients&quot;)</span></span><br></pre></td></tr></table></figure>\n\n<h1 id=\"Gateway\"><a href=\"#Gateway\" class=\"headerlink\" title=\"Gateway\"></a>Gateway</h1><p>Spring Cloud Gateway 是 Spring Cloud 的一个全新项目，该项目是基于 Spring 5.0，Spring Boot 2.0 和 Project Reactor 等响应式编程和事件流技术开发的网关，它旨在为微服务架构提供一种简单有效的统一的 API 路由管理方式。</p>\n<p>Gateway 网关是我们服务的守门神，<strong>所有微服务的统一入口。</strong></p>\n<p>网关的<strong>核心功能特性</strong>：</p>\n<ul>\n<li>请求路由</li>\n<li>权限控制</li>\n<li>限流</li>\n</ul>\n<p><img src=\"/img/Gateway%E7%BD%91%E5%85%B3.png\" alt=\"Gateway网关\"></p>\n<p><strong>权限控制</strong>：网关作为微服务入口，需要校验用户是是否有请求资格，如果没有则进行拦截。</p>\n<p><strong>路由和负载均衡</strong>：一切请求都必须先经过 gateway，但网关不处理业务，而是根据某种规则，把请求转发到某个微服务，这个过程叫做路由。当然路由的目标服务有多个时，还需要做负载均衡。</p>\n<p><strong>限流</strong>：当请求流量过高时，在网关中按照下流的微服务能够接受的速度来放行请求，避免服务压力过大。</p>\n<p>在 SpringCloud 中网关的实现包括两种：</p>\n<ul>\n<li>gateway</li>\n<li>zuul</li>\n</ul>\n<p>Zuul 是基于 Servlet 实现，属于阻塞式编程。而 Spring Cloud Gateway 则是基于 Spring5 中提供的WebFlux，属于响应式编程的实现，具备更好的性能。</p>\n<h2 id=\"入门使用\"><a href=\"#入门使用\" class=\"headerlink\" title=\"入门使用\"></a>入门使用</h2><ol>\n<li>创建 SpringBoot 工程 gateway，引入网关依赖</li>\n<li>编写启动类</li>\n<li>编写基础配置和路由规则</li>\n<li>启动网关服务进行测试</li>\n</ol>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!--网关--&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.springframework.cloud<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring-cloud-starter-gateway<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!--nacos服务发现依赖--&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>com.alibaba.cloud<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-nacos-discovery<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>创建 application.yml 文件，内容如下：</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">server:</span></span><br><span class=\"line\">  <span class=\"attr\">port:</span> <span class=\"number\">10010</span> <span class=\"comment\"># 网关端口</span></span><br><span class=\"line\"><span class=\"attr\">spring:</span></span><br><span class=\"line\">  <span class=\"attr\">application:</span></span><br><span class=\"line\">    <span class=\"attr\">name:</span> <span class=\"string\">gateway</span> <span class=\"comment\"># 服务名称</span></span><br><span class=\"line\">  <span class=\"attr\">cloud:</span></span><br><span class=\"line\">    <span class=\"attr\">nacos:</span></span><br><span class=\"line\">      <span class=\"attr\">server-addr:</span> <span class=\"string\">localhost:8848</span> <span class=\"comment\"># nacos地址</span></span><br><span class=\"line\">    <span class=\"attr\">gateway:</span></span><br><span class=\"line\">      <span class=\"attr\">routes:</span> <span class=\"comment\"># 网关路由配置</span></span><br><span class=\"line\">        <span class=\"bullet\">-</span> <span class=\"attr\">id:</span> <span class=\"string\">user-service</span> <span class=\"comment\"># 路由id，自定义，只要唯一即可</span></span><br><span class=\"line\">          <span class=\"comment\"># uri: http://127.0.0.1:8081 # 路由的目标地址 http就是固定地址</span></span><br><span class=\"line\">          <span class=\"attr\">uri:</span> <span class=\"string\">lb://userservice</span> <span class=\"comment\"># 路由的目标地址 lb就是负载均衡，后面跟服务名称</span></span><br><span class=\"line\">          <span class=\"attr\">predicates:</span> <span class=\"comment\"># 路由断言，也就是判断请求是否符合路由规则的条件</span></span><br><span class=\"line\">            <span class=\"bullet\">-</span> <span class=\"string\">Path=/user/**</span> <span class=\"comment\"># 这个是按照路径匹配，只要以/user/开头就符合要求</span></span><br></pre></td></tr></table></figure>\n\n<p>我们将符合<code>Path</code> 规则的一切请求，都代理到 <code>uri</code>参数指定的地址。</p>\n<p>上面的例子中，我们将 <code>/user/**</code> 开头的请求，代理到 <code>lb://userservice</code>，其中 lb 是负载均衡(LoadBalance)，根据服务名拉取服务列表，实现负载均衡。</p>\n<p>重启网关，访问 <a href=\"http://localhost:10010/user/1\">http://localhost:10010/user/1</a> 时，符合 <code>/user/**</code> 规则，请求转发到 uri：<a href=\"http://userservice/user/1\">http://userservice/user/1</a></p>\n<p><img src=\"/img/httpuserserviceuser1.png\" alt=\"httpuserserviceuser1\"></p>\n<p>多个 predicates 的话，要同时满足规则，下文有例子。</p>\n<h2 id=\"流程图\"><a href=\"#流程图\" class=\"headerlink\" title=\"流程图\"></a>流程图</h2><p><img src=\"/img/gateway%E6%B5%81%E7%A8%8B%E5%9B%BE.png\" alt=\"gateway流程图\"></p>\n<p>路由配置包括：</p>\n<ol>\n<li>路由id：路由的唯一标示</li>\n<li>路由目标（uri）：路由的目标地址，http代表固定地址，lb代表根据服务名负载均衡</li>\n<li>路由断言（predicates）：判断路由的规则</li>\n<li>路由过滤器（filters）：对请求或响应做处理</li>\n</ol>\n<h2 id=\"断言工厂\"><a href=\"#断言工厂\" class=\"headerlink\" title=\"断言工厂\"></a>断言工厂</h2><p>我们在配置文件中写的断言规则只是字符串，这些字符串会被 Predicate Factory 读取并处理，转变为路由判断的条件。</p>\n<p>例如 <code>Path=/user/**</code> 是按照路径匹配，这个规则是由</p>\n<p><code>org.springframework.cloud.gateway.handler.predicate.PathRoutePredicateFactory</code> 类来处理的，像这样的断言工厂在 Spring Cloud Gateway 还有十几个</p>\n<table>\n<thead>\n<tr>\n<th align=\"left\">名称</th>\n<th align=\"left\">说明</th>\n<th align=\"left\">示例</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">After</td>\n<td align=\"left\">是某个时间点后的请求</td>\n<td align=\"left\">- After=2037-01-20T17:42:47.789-07:00[America/Denver]</td>\n</tr>\n<tr>\n<td align=\"left\">Before</td>\n<td align=\"left\">是某个时间点之前的请求</td>\n<td align=\"left\">- Before=2031-04-13T15:14:47.433+08:00[Asia/Shanghai]</td>\n</tr>\n<tr>\n<td align=\"left\">Between</td>\n<td align=\"left\">是某两个时间点之前的请求</td>\n<td align=\"left\">- Between=2037-01-20T17:42:47.789-07:00[America/Denver], 2037-01-21T17:42:47.789-07:00[America/Denver]</td>\n</tr>\n<tr>\n<td align=\"left\">Cookie</td>\n<td align=\"left\">请求必须包含某些cookie</td>\n<td align=\"left\">- Cookie=chocolate, ch.p</td>\n</tr>\n<tr>\n<td align=\"left\">Header</td>\n<td align=\"left\">请求必须包含某些header</td>\n<td align=\"left\">- Header=X-Request-Id, \\d+</td>\n</tr>\n<tr>\n<td align=\"left\">Host</td>\n<td align=\"left\">请求必须是访问某个host（域名）</td>\n<td align=\"left\">- Host=<code>**.somehost.org</code>, <code>**.anotherhost.org</code></td>\n</tr>\n<tr>\n<td align=\"left\">Method</td>\n<td align=\"left\">请求方式必须是指定方式</td>\n<td align=\"left\">- Method=GET,POST</td>\n</tr>\n<tr>\n<td align=\"left\">Path</td>\n<td align=\"left\">请求路径必须符合指定规则</td>\n<td align=\"left\">- Path=/red/{segment},/blue/**</td>\n</tr>\n<tr>\n<td align=\"left\">Query</td>\n<td align=\"left\">请求参数必须包含指定参数</td>\n<td align=\"left\">- Query=name, Jack或者- Query=name</td>\n</tr>\n<tr>\n<td align=\"left\">RemoteAddr</td>\n<td align=\"left\">请求者的ip必须是指定范围</td>\n<td align=\"left\">- RemoteAddr=192.168.1.1/24</td>\n</tr>\n<tr>\n<td align=\"left\">Weight</td>\n<td align=\"left\">权重处理</td>\n<td align=\"left\"></td>\n</tr>\n</tbody></table>\n<blockquote>\n<p>官方文档：<a href=\"https://docs.spring.io/spring-cloud-gateway/docs/current/reference/html/#gateway-request-predicates-factories\">https://docs.spring.io/spring-cloud-gateway/docs/current/reference/html/#gateway-request-predicates-factories</a></p>\n</blockquote>\n<p>一般的，我们只需要掌握 Path，加上官方文档的例子，就可以应对各种工作场景了。</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">predicates:</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"string\">Path=/order/**</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"string\">After=2031-04-13T15:14:47.433+08:00[Asia/Shanghai]</span></span><br></pre></td></tr></table></figure>\n\n<p>像这样的规则，现在是 2021年8月22日01:32:42，很明显 After 条件不满足，可以不会转发，路由不起作用。</p>\n<h2 id=\"过滤器工厂\"><a href=\"#过滤器工厂\" class=\"headerlink\" title=\"过滤器工厂\"></a>过滤器工厂</h2><p>GatewayFilter 是网关中提供的一种过滤器，可以对进入网关的请求和微服务返回的响应做处理。</p>\n<p><img src=\"/img/%E8%BF%87%E6%BB%A4%E5%99%A8%E5%B7%A5%E5%8E%82.png\" alt=\"过滤器工厂\"></p>\n<p>Spring提供了31种不同的路由过滤器工厂。</p>\n<blockquote>\n<p>官方文档：<a href=\"https://docs.spring.io/spring-cloud-gateway/docs/current/reference/html/#gatewayfilter-factories\">https://docs.spring.io/spring-cloud-gateway/docs/current/reference/html/#gatewayfilter-factories</a></p>\n</blockquote>\n<table>\n<thead>\n<tr>\n<th align=\"left\"><strong>名称</strong></th>\n<th align=\"left\"><strong>说明</strong></th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">AddRequestHeader</td>\n<td align=\"left\">给当前请求添加一个请求头</td>\n</tr>\n<tr>\n<td align=\"left\">RemoveRequestHeader</td>\n<td align=\"left\">移除请求中的一个请求头</td>\n</tr>\n<tr>\n<td align=\"left\">AddResponseHeader</td>\n<td align=\"left\">给响应结果中添加一个响应头</td>\n</tr>\n<tr>\n<td align=\"left\">RemoveResponseHeader</td>\n<td align=\"left\">从响应结果中移除有一个响应头</td>\n</tr>\n<tr>\n<td align=\"left\">RequestRateLimiter</td>\n<td align=\"left\">限制请求的流量</td>\n</tr>\n</tbody></table>\n<p>下面我们以 AddRequestHeader 为例：</p>\n<p><img src=\"/img/AddRequestHeader.png\" alt=\"AddRequestHeader\"></p>\n<p><strong>需求</strong>：给所有进入 userservice 的请求添加一个请求头：<code>sign=xn2001.com is eternal</code></p>\n<p>只需要修改 gateway 服务的 application.yml文件，添加路由过滤即可。</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">spring:</span></span><br><span class=\"line\">  <span class=\"attr\">cloud:</span></span><br><span class=\"line\">    <span class=\"attr\">gateway:</span></span><br><span class=\"line\">      <span class=\"attr\">routes:</span> <span class=\"comment\"># 网关路由配置</span></span><br><span class=\"line\">        <span class=\"bullet\">-</span> <span class=\"attr\">id:</span> <span class=\"string\">user-service</span> <span class=\"comment\"># 路由id，自定义，只要唯一即可</span></span><br><span class=\"line\">          <span class=\"comment\"># uri: http://127.0.0.1:8081 # 路由的目标地址 http就是固定地址</span></span><br><span class=\"line\">          <span class=\"attr\">uri:</span> <span class=\"string\">lb://userservice</span> <span class=\"comment\"># 路由的目标地址 lb就是负载均衡，后面跟服务名称</span></span><br><span class=\"line\">          <span class=\"attr\">predicates:</span> <span class=\"comment\"># 路由断言，也就是判断请求是否符合路由规则的条件</span></span><br><span class=\"line\">            <span class=\"bullet\">-</span> <span class=\"string\">Path=/user/**</span> <span class=\"comment\"># 这个是按照路径匹配，只要以/user/开头就符合要求</span></span><br><span class=\"line\">          <span class=\"attr\">filters:</span></span><br><span class=\"line\">            <span class=\"bullet\">-</span> <span class=\"string\">AddRequestHeader=sign,</span> <span class=\"string\">xn2001.com</span> <span class=\"string\">is</span> <span class=\"string\">eternal</span> <span class=\"comment\"># 添加请求头</span></span><br></pre></td></tr></table></figure>\n\n<p>如何验证，我们修改 userservice 中的一个接口</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@GetMapping(&quot;/&#123;id&#125;&quot;)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> User <span class=\"title function_\">queryById</span><span class=\"params\">(<span class=\"meta\">@PathVariable(&quot;id&quot;)</span> Long id, <span class=\"meta\">@RequestHeader(value = &quot;sign&quot;, required = false)</span> String sign)</span> &#123;</span><br><span class=\"line\">    log.warn(sign);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> userService.queryById(id);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>重启两个服务，访问：<a href=\"http://localhost:10010/user/1\">http://localhost:10010/user/1</a></p>\n<p>可以看到控制台打印出了这个请求头</p>\n<p><img src=\"/img/%E6%8E%A7%E5%88%B6%E5%8F%B0%E6%89%93%E5%8D%B0%E8%AF%B7%E6%B1%82%E5%A4%B4.png\" alt=\"控制台打印请求头\"></p>\n<h2 id=\"全局过滤器\"><a href=\"#全局过滤器\" class=\"headerlink\" title=\"全局过滤器\"></a>全局过滤器</h2><p>上面介绍的过滤器工厂，网关提供了 31 种，但每一种过滤器的作用都是固定的。<strong>如果我们希望拦截请求，做自己的业务逻辑则没办法实现</strong>。</p>\n<p>全局过滤器的作用也是处理一切进入网关的请求和微服务响应，<strong>与 GatewayFilter 的作用一样</strong>。区别在于 GlobalFilter 的逻辑可以<strong>写代码来自定义规则</strong>；而 GatewayFilter 通过配置定义，处理逻辑是固定的。</p>\n<p><strong>需求</strong>：定义全局过滤器，拦截请求，判断请求的参数是否满足下面条件</p>\n<ul>\n<li>参数中是否有 authorization</li>\n<li>authorization 参数值是否为 admin</li>\n</ul>\n<p>如果同时满足则放行，否则拦截。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Component</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">AuthorizeFilter</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">GlobalFilter</span>, Ordered &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 测试：http://localhost:10010/order/101?authorization=admin</span></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> Mono&lt;Void&gt; <span class=\"title function_\">filter</span><span class=\"params\">(ServerWebExchange exchange, GatewayFilterChain chain)</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 获取第一个 authorization 参数</span></span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">authorization</span> <span class=\"operator\">=</span> exchange.getRequest().getQueryParams().getFirst(<span class=\"string\">&quot;authorization&quot;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"string\">&quot;admin&quot;</span>.equals(authorization))&#123;</span><br><span class=\"line\">            <span class=\"comment\">// 放行</span></span><br><span class=\"line\">            <span class=\"keyword\">return</span> chain.filter(exchange);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">// 设置拦截状态码信息</span></span><br><span class=\"line\">        exchange.getResponse().setStatusCode(HttpStatus.UNAUTHORIZED);</span><br><span class=\"line\">        <span class=\"comment\">// 设置拦截</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> exchange.getResponse().setComplete();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 设置过滤器优先级，值越低优先级越高</span></span><br><span class=\"line\">    <span class=\"comment\">// 也可以使用 @Order 注解</span></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"type\">int</span> <span class=\"title function_\">getOrder</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"过滤器顺序\"><a href=\"#过滤器顺序\" class=\"headerlink\" title=\"过滤器顺序\"></a>过滤器顺序</h2><p>请求进入网关会碰到三类过滤器：DefaultFilter、当前路由的过滤器、GlobalFilter；</p>\n<p>请求路由后，会将三者合并到一个过滤器链（集合）中，排序后依次执行每个过滤器.</p>\n<p><img src=\"/img/%E8%BF%87%E6%BB%A4%E5%99%A8%E9%A1%BA%E5%BA%8F.png\" alt=\"过滤器顺序\"></p>\n<p>排序的规则是什么呢？</p>\n<ul>\n<li>每一个过滤器都必须指定一个 int 类型的 order 值，<strong>order 值越小，优先级越高，执行顺序越靠前</strong>。</li>\n<li>GlobalFilter 通过实现 Ordered 接口，或者使用 @Order 注解来指定 order 值，由我们自己指定。</li>\n<li>路由过滤器和 defaultFilter 的 order 由 Spring 指定，默认是按照声明顺序从1递增。</li>\n<li>当过滤器的 order 值一样时，<strong>会按照 defaultFilter &gt; 路由过滤器 &gt; GlobalFilter 的顺序执行。</strong></li>\n</ul>\n<h2 id=\"跨域问题\"><a href=\"#跨域问题\" class=\"headerlink\" title=\"跨域问题\"></a>跨域问题</h2><p>不了解跨域问题的同学可以百度了解一下；在 Gateway 网关中解决跨域问题还是比较方便的。</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">spring:</span></span><br><span class=\"line\">  <span class=\"attr\">cloud:</span></span><br><span class=\"line\">    <span class=\"attr\">gateway:</span></span><br><span class=\"line\">      <span class=\"attr\">globalcors:</span> <span class=\"comment\"># 全局的跨域处理</span></span><br><span class=\"line\">        <span class=\"attr\">add-to-simple-url-handler-mapping:</span> <span class=\"literal\">true</span> <span class=\"comment\"># 解决options请求被拦截问题</span></span><br><span class=\"line\">        <span class=\"attr\">corsConfigurations:</span></span><br><span class=\"line\">          <span class=\"string\">&#x27;[/**]&#x27;</span><span class=\"string\">:</span></span><br><span class=\"line\">            <span class=\"attr\">allowedOrigins:</span> <span class=\"comment\"># 允许哪些网站的跨域请求 allowedOrigins: “*” 允许所有网站</span></span><br><span class=\"line\">              <span class=\"bullet\">-</span> <span class=\"string\">&quot;http://localhost:8090&quot;</span></span><br><span class=\"line\">            <span class=\"attr\">allowedMethods:</span> <span class=\"comment\"># 允许的跨域ajax的请求方式</span></span><br><span class=\"line\">              <span class=\"bullet\">-</span> <span class=\"string\">&quot;GET&quot;</span></span><br><span class=\"line\">              <span class=\"bullet\">-</span> <span class=\"string\">&quot;POST&quot;</span></span><br><span class=\"line\">              <span class=\"bullet\">-</span> <span class=\"string\">&quot;DELETE&quot;</span></span><br><span class=\"line\">              <span class=\"bullet\">-</span> <span class=\"string\">&quot;PUT&quot;</span></span><br><span class=\"line\">              <span class=\"bullet\">-</span> <span class=\"string\">&quot;OPTIONS&quot;</span></span><br><span class=\"line\">            <span class=\"attr\">allowedHeaders:</span> <span class=\"string\">&quot;*&quot;</span> <span class=\"comment\"># 允许在请求中携带的头信息</span></span><br><span class=\"line\">            <span class=\"attr\">allowCredentials:</span> <span class=\"literal\">true</span> <span class=\"comment\"># 是否允许携带cookie</span></span><br><span class=\"line\">            <span class=\"attr\">maxAge:</span> <span class=\"number\">360000</span> <span class=\"comment\"># 这次跨域检测的有效期</span></span><br></pre></td></tr></table></figure>\n\n<h1 id=\"RabbitMQ\"><a href=\"#RabbitMQ\" class=\"headerlink\" title=\"RabbitMQ\"></a>RabbitMQ</h1><h1 id=\"Elasticsearch\"><a href=\"#Elasticsearch\" class=\"headerlink\" title=\"Elasticsearch\"></a>Elasticsearch</h1><p><span style=\"text-align:center;font-size:50px;background-color:orange\">高级篇</span></p>\n<h1 id=\"JMeter\"><a href=\"#JMeter\" class=\"headerlink\" title=\"JMeter\"></a>JMeter</h1><h1 id=\"Sentinel\"><a href=\"#Sentinel\" class=\"headerlink\" title=\"Sentinel\"></a>Sentinel</h1><h1 id=\"Seata\"><a href=\"#Seata\" class=\"headerlink\" title=\"Seata\"></a>Seata</h1>"},{"title":"基础算法","date":"2022-09-23T03:50:02.613Z","_content":"\n# AcWing 785. 快速排序\n\n### 题目来源--[785. 快速排序](https://www.acwing.com/problem/content/787/ \"快速排序\")\n\n\n```c++\n\n题目描述：\n    给定你一个长度为 n 的整数数列。\n    请你使用快速排序对这个数列按照从小到大进行排序。\n    并将排好序的数列按顺序输出。\n\n输入格式\n    输入共两行，第一行包含整数 n。\n    第二行包含 n 个整数（所有整数均在 1∼109 范围内），表示整个数列。\n\t\n输出格式\n\t输出共一行，包含 n 个整数，表示排好序的数列。\n\n数据范围\n\t1≤n≤100000\n\n输入样例：\n    5\n    3 1 2 4 5\n\n输出样例：\n    1 2 3 4 5\n```\n### 代码演示\n```c++\n#include <iostream>\n\nusing namespace std;\n\nconst int N = 100010;\n\nint q[N];\n\nvoid quick_sort(int q[], int l, int r)\n{\n    if (l >= r) return;\n\n    int i = l - 1, j = r + 1, x = q[l + r >> 1];\n    while (i < j)\n    {\n        do i ++ ; while (q[i] < x);\n        do j -- ; while (q[j] > x);\n        if (i < j) swap(q[i], q[j]);\n    }\n\n    quick_sort(q, l, j);\n    quick_sort(q, j + 1, r);\n}\n\nint main()\n{\n    int n;\n    scanf(\"%d\", &n);\n\n    for (int i = 0; i < n; i ++ ) scanf(\"%d\", &q[i]);\n\n    quick_sort(q, 0, n - 1);\n\n    for (int i = 0; i < n; i ++ ) printf(\"%d \", q[i]);\n\n    return 0;\n}\n\n作者：yxc\n链接：https://www.acwing.com/activity/content/code/content/39784/\n来源：AcWing\n著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。\n```\n\n- - -\n\n# AcWing 786. 第k个数\n### 题目来源--[786. 第k个数](https://www.acwing.com/problem/content/788/ \"第k个数\")\n\n```c++\n\n题目描述\n\t给定一个长度为 n 的整数数列，以及一个整数 k，请用快速选择算法求出数列从小到大排序后的第 k 个数。\n\n输入格式\n\t第一行包含两个整数 n 和 k。\n\t第二行包含 n 个整数（所有整数均在 1～109 范围内），表示整数数列。\n\n输出格式\n\t输出一个整数，表示数列的第 k 小数。\n\n数据范围\n\t1≤n≤100000,\n\t1≤k≤n\n输入样例：\n\t5 3\n\t2 4 1 5 3\n输出样例：\n\t\n```\n\n### 代码演示\n```c++\n#include <iostream>\n\nusing namespace std;\n\nconst int N = 100010;\n\nint q[N];\n\nint quick_sort(int q[], int l, int r, int k)\n{\n    if (l >= r) return q[l];\n\n    int i = l - 1, j = r + 1, x = q[l + r >> 1];\n    while (i < j)\n    {\n        do i ++ ; while (q[i] < x);\n        do j -- ; while (q[j] > x);\n        if (i < j) swap(q[i], q[j]);\n    }\n\n    if (j - l + 1 >= k) return quick_sort(q, l, j, k);\n    else return quick_sort(q, j + 1, r, k - (j - l + 1));\n}\n\nint main()\n{\n    int n, k;\n    scanf(\"%d%d\", &n, &k);\n\n    for (int i = 0; i < n; i ++ ) scanf(\"%d\", &q[i]);\n\n    cout << quick_sort(q, 0, n - 1, k) << endl;\n\n    return 0;\n}\n\n作者：yxc\n链接：https://www.acwing.com/activity/content/code/content/39785/\n来源：AcWing\n著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。\n```\n\n- - -\n\n# AcWing 787. 归并排序\n### 题目来源--[787. 归并排序](https://www.acwing.com/problem/content/789/ \"归并排序\")\n\n```c++\n\n题目描述\n\t给定你一个长度为 n 的整数数列。\n\t请你使用归并排序对这个数列按照从小到大进行排序。\n\t并将排好序的数列按顺序输出。\n\n输入格式\n\t输入共两行，第一行包含整数 n。\n\t第二行包含 n 个整数（所有整数均在 1∼109 范围内），表示整个数列。\n\n输出格式\n\t输出共一行，包含 n 个整数，表示排好序的数列。\n\n数据范围\n\t1≤n≤100000\n\t\n输入样例：\n\t5\n\t3 1 2 4 5\n\t\n输出样例：\n\t1 2 3 4 5\n\t\n```\n### 代码演示\n```c++\n#include <iostream>\n\nusing namespace std;\n\nconst int N = 1e5 + 10;\n\nint a[N], tmp[N];\n\nvoid merge_sort(int q[], int l, int r)\n{\n    if (l >= r) return;\n\n    int mid = l + r >> 1;\n\n    merge_sort(q, l, mid), merge_sort(q, mid + 1, r);\n\n    int k = 0, i = l, j = mid + 1;\n    while (i <= mid && j <= r)\n        if (q[i] <= q[j]) tmp[k ++ ] = q[i ++ ];\n        else tmp[k ++ ] = q[j ++ ];\n    while (i <= mid) tmp[k ++ ] = q[i ++ ];\n    while (j <= r) tmp[k ++ ] = q[j ++ ];\n\n    for (i = l, j = 0; i <= r; i ++, j ++ ) q[i] = tmp[j];\n}\n\nint main()\n{\n    int n;\n    scanf(\"%d\", &n);\n    for (int i = 0; i < n; i ++ ) scanf(\"%d\", &a[i]);\n\n    merge_sort(a, 0, n - 1);\n\n    for (int i = 0; i < n; i ++ ) printf(\"%d \", a[i]);\n\n    return 0;\n}\n\n作者：yxc\n链接：https://www.acwing.com/activity/content/code/content/39790/\n来源：AcWing\n著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。\n```\n- - -\n\n# AcWing 788. 逆序对的数量\n\n### 题目来源--[788. 逆序对的数量](https://www.acwing.com/problem/content/790/ \"逆序对的数量 \")\n\n```c++\n\n题目描述\n\t给定一个长度为 n 的整数数列，请你计算数列中的逆序对的数量。\n\t逆序对的定义如下：对于数列的第 i 个和第 j 个元素，如果满足 i<j 且 a[i]>a[j]，则其为一个逆序对；否则不是。\n\n输入格式\n\t第一行包含整数 n，表示数列的长度。\n\t第二行包含 n 个整数，表示整个数列。\n\n输出格式\n\t输出一个整数，表示逆序对的个数。\n\n数据范围\n\t1≤n≤100000，\n\t\n数列中的元素的取值范围 [1,109]。\n\n输入样例：\n\t6\n\t2 3 4 5 6 1\n\t\n输出样例：\n\t5\n\t\n```\n\n### 代码演示\n```c++\n#include <iostream>\n\nusing namespace std;\n\ntypedef long long LL;\n\nconst int N = 1e5 + 10;\n\nint a[N], tmp[N];\n\nLL merge_sort(int q[], int l, int r)\n{\n    if (l >= r) return 0;\n\n    int mid = l + r >> 1;\n\n    LL res = merge_sort(q, l, mid) + merge_sort(q, mid + 1, r);\n\n    int k = 0, i = l, j = mid + 1;\n    while (i <= mid && j <= r)\n        if (q[i] <= q[j]) tmp[k ++ ] = q[i ++ ];\n        else\n        {\n            res += mid - i + 1;\n            tmp[k ++ ] = q[j ++ ];\n        }\n    while (i <= mid) tmp[k ++ ] = q[i ++ ];\n    while (j <= r) tmp[k ++ ] = q[j ++ ];\n\n    for (i = l, j = 0; i <= r; i ++, j ++ ) q[i] = tmp[j];\n\n    return res;\n}\n\nint main()\n{\n    int n;\n    scanf(\"%d\", &n);\n    for (int i = 0; i < n; i ++ ) scanf(\"%d\", &a[i]);\n\n    cout << merge_sort(a, 0, n - 1) << endl;\n\n    return 0;\n}\n\n作者：yxc\n链接：https://www.acwing.com/activity/content/code/content/39791/\n来源：AcWing\n著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。\n```\n\n- - -\n\n# AcWing 789. 数的范围\n\n### 题目来源--[789. 数的范围](https://www.acwing.com/problem/content/791/ \"数的范围  \")\n\n```c++\n\n题目描述\n\t给定一个按照升序排列的长度为 n 的整数数组，以及 q 个查询。\n\t对于每个查询，返回一个元素 k 的起始位置和终止位置（位置从 0 开始计数）。\n\t如果数组中不存在该元素，则返回 -1 -1。\n\n输入格式\n\t第一行包含整数 n 和 q，表示数组长度和询问个数。\n\t第二行包含 n 个整数（均在 1～10000 范围内），表示完整数组。\n\t接下来 q 行，每行包含一个整数 k，表示一个询问元素。\n\n输出格式\n\t共 q 行，每行包含两个整数，表示所求元素的起始位置和终止位置。\n\t如果数组中不存在该元素，则返回 -1 -1。\n\n数据范围\n\t1≤n≤100000\n\t1≤q≤10000\n\t1≤k≤10000\n\t\n输入样例：\n\t6 3\n\t1 2 2 3 3 4\n\t3\n\t4\n\t5\n\t\n输出样例：\n\t3 4\n\t5 5\n\t-1 -1\n\t\n```\n\n### 代码演示\n```c++\n#include <iostream>\n\nusing namespace std;\n\nconst int N = 100010;\n\nint n, m;\nint q[N];\n\nint main()\n{\n    scanf(\"%d%d\", &n, &m);\n    for (int i = 0; i < n; i ++ ) scanf(\"%d\", &q[i]);\n\n    while (m -- )\n    {\n        int x;\n        scanf(\"%d\", &x);\n\n        int l = 0, r = n - 1;\n        while (l < r)\n        {\n            int mid = l + r >> 1;\n            if (q[mid] >= x) r = mid;\n            else l = mid + 1;\n        }\n\n        if (q[l] != x) cout << \"-1 -1\" << endl;\n        else\n        {\n            cout << l << ' ';\n\n            int l = 0, r = n - 1;\n            while (l < r)\n            {\n                int mid = l + r + 1 >> 1;\n                if (q[mid] <= x) l = mid;\n                else r = mid - 1;\n            }\n\n            cout << l << endl;\n        }\n    }\n\n    return 0;\n}\n\n作者：yxc\n链接：https://www.acwing.com/activity/content/code/content/39787/\n来源：AcWing\n著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。\n```\n\n- - -\n\n# AcWing 790. 数的三次方根 \n\n### 题目来源--[790. 数的三次方根](https://www.acwing.com/problem/content/792/ \"数的三次方根  \")\n\n```c++\n\n题目描述\n\t给定一个浮点数 n，求它的三次方根。\n\n输入格式\n\t共一行，包含一个浮点数 n。\n\n输出格式\n\t共一行，包含一个浮点数，表示问题的解。\n\t注意，结果保留 6 位小数。\n\n数据范围\n\t-10000≤n≤10000\n\t\n输入样例：\n\t1000.00\n\t\n输出样例：\n\t10.000000\n\t\n```\n\n### 代码演示\n```c++\n#include <iostream>\n\nusing namespace std;\n\nint main()\n{\n    double x;\n    cin >> x;\n\n    double l = -100, r = 100;\n    while (r - l > 1e-8)\n    {\n        double mid = (l + r) / 2;\n        if (mid * mid * mid >= x) r = mid;\n        else l = mid;\n    }\n\n    printf(\"%.6lf\\n\", l);\n    return 0;\n}\n```\n\n- - -\n\n# AcWing 791. 高精度加法 \n\n### 题目来源--[791.高精度加法](https://www.acwing.com/problem/content/793/\"高精度加法\")\n\n```c++\n\n题目描述\n\t给定两个正整数（不含前导 0），计算它们的和。\n\n输入格式\n\t共两行，每行包含一个整数。\n\n输出格式\n\t共一行，包含所求的和。\n\n数据范围\n\t1≤整数长度≤100000\n输入样例：\n\n\t12\n\t23\n\t\n输出样例：\n\t35\n\t\n```\n\n## 不圧位代码\n```c++\n#include <iostream>\n#include <vector>\n\nusing namespace std;\n\nvector<int> add(vector<int> &A, vector<int> &B)\n{\n    if (A.size() < B.size()) return add(B, A);\n\n    vector<int> C;\n    int t = 0;\n    for (int i = 0; i < A.size(); i ++ )\n    {\n        t += A[i];\n        if (i < B.size()) t += B[i];\n        C.push_back(t % 10);\n        t /= 10;\n    }\n\n    if (t) C.push_back(t);\n    return C;\n}\n\nint main()\n{\n    string a, b;\n    vector<int> A, B;\n    cin >> a >> b;\n    for (int i = a.size() - 1; i >= 0; i -- ) A.push_back(a[i] - '0');\n    for (int i = b.size() - 1; i >= 0; i -- ) B.push_back(b[i] - '0');\n\n    auto C = add(A, B);\n\n    for (int i = C.size() - 1; i >= 0; i -- ) cout << C[i];\n    cout << endl;\n\n    return 0;\n}\n\n作者：yxc\n链接：https://www.acwing.com/activity/content/code/content/39792/\n来源：AcWing\n著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。\n```\n\n## 压9位的代码\n\n```C++\n#include <iostream>\n#include <vector>\n\nusing namespace std;\n\nconst int base = 1000000000;\n\nvector<int> add(vector<int> &A, vector<int> &B)\n{\n    if (A.size() < B.size()) return add(B, A);\n\n    vector<int> C;\n    int t = 0;\n    for (int i = 0; i < A.size(); i ++ )\n    {\n        t += A[i];\n        if (i < B.size()) t += B[i];\n        C.push_back(t % base);\n        t /= base;\n    }\n\n    if (t) C.push_back(t);\n    return C;\n}\n\nint main()\n{\n    string a, b;\n    vector<int> A, B;\n    cin >> a >> b;\n\n    for (int i = a.size() - 1, s = 0, j = 0, t = 1; i >= 0; i -- )\n    {\n        s += (a[i] - '0') * t;\n        j ++, t *= 10;\n        if (j == 9 || i == 0)\n        {\n            A.push_back(s);\n            s = j = 0;\n            t = 1;\n        }\n    }\n    for (int i = b.size() - 1, s = 0, j = 0, t = 1; i >= 0; i -- )\n    {\n        s += (b[i] - '0') * t;\n        j ++, t *= 10;\n        if (j == 9 || i == 0)\n        {\n            B.push_back(s);\n            s = j = 0;\n            t = 1;\n        }\n    }\n\n    auto C = add(A, B);\n\n    cout << C.back();\n    for (int i = C.size() - 2; i >= 0; i -- ) printf(\"%09d\", C[i]);\n    cout << endl;\n\n    return 0;\n}\n\n作者：yxc\n链接：https://www.acwing.com/activity/content/code/content/39792/\n来源：AcWing\n著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。\n```\n\n- - -\n\n# AcWing 792. 高精度减法 \n\n### 题目来源--[792. 高精度减法 ](https://www.acwing.com/problem/content/794/ \"高精度减法\")\n\n```c++\n\n题目描述\n\t给定两个正整数（不含前导 0），计算它们的差，计算结果可能为负数。\n\n输入格式\n\t共两行，每行包含一个整数。\n\n输出格式\n\t共一行，包含所求的差。\n\n数据范围\n\t1≤整数长度≤105\n\t\n输入样例：\n\t32\n\t11\n\t\n输出样例：\n\t21\n\t\n```\n\n### 代码演示\n```c++\n#include <iostream>\n#include <vector>\n\nusing namespace std;\n\nbool cmp(vector<int> &A, vector<int> &B)\n{\n    if (A.size() != B.size()) return A.size() > B.size();\n\n    for (int i = A.size() - 1; i >= 0; i -- )\n        if (A[i] != B[i])\n            return A[i] > B[i];\n\n    return true;\n}\n\nvector<int> sub(vector<int> &A, vector<int> &B)\n{\n    vector<int> C;\n    for (int i = 0, t = 0; i < A.size(); i ++ )\n    {\n        t = A[i] - t;\n        if (i < B.size()) t -= B[i];\n        C.push_back((t + 10) % 10);\n        if (t < 0) t = 1;\n        else t = 0;\n    }\n\n    while (C.size() > 1 && C.back() == 0) C.pop_back();\n    return C;\n}\n\nint main()\n{\n    string a, b;\n    vector<int> A, B;\n    cin >> a >> b;\n    for (int i = a.size() - 1; i >= 0; i -- ) A.push_back(a[i] - '0');\n    for (int i = b.size() - 1; i >= 0; i -- ) B.push_back(b[i] - '0');\n\n    vector<int> C;\n\n    if (cmp(A, B)) C = sub(A, B);\n    else C = sub(B, A), cout << '-';\n\n    for (int i = C.size() - 1; i >= 0; i -- ) cout << C[i];\n    cout << endl;\n\n    return 0;\n}\n\n作者：yxc\n链接：https://www.acwing.com/activity/content/code/content/39793/\n来源：AcWing\n著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。\n```\n\n- - -\n\n# AcWing 793. 高精度乘法\n\n### 题目来源--[793. 高精度乘法](https://www.acwing.com/problem/content/795/ \"高精度乘法\")\n\n```c++\n\n题目描述\n\t给定两个非负整数（不含前导 0） A 和 B，请你计算 A×B 的值。\n\n输入格式\n\t共两行，第一行包含整数 A，第二行包含整数 B。\n\n输出格式\n\t共一行，包含 A×B 的值。\n\n数据范围\n\t1≤A的长度≤100000,\n\t0≤B≤10000\n\t\n输入样例：\n\t2\n\t3\n\t\n输出样例：\n\t6\n\t\n```\n\n### 代码演示\n```c++\n#include <iostream>\n#include <vector>\n\nusing namespace std;\n\n\nvector<int> mul(vector<int> &A, int b)\n{\n    vector<int> C;\n\n    int t = 0;\n    for (int i = 0; i < A.size() || t; i ++ )\n    {\n        if (i < A.size()) t += A[i] * b;\n        C.push_back(t % 10);\n        t /= 10;\n    }\n\n    while (C.size() > 1 && C.back() == 0) C.pop_back();\n\n    return C;\n}\n\n\nint main()\n{\n    string a;\n    int b;\n\n    cin >> a >> b;\n\n    vector<int> A;\n    for (int i = a.size() - 1; i >= 0; i -- ) A.push_back(a[i] - '0');\n\n    auto C = mul(A, b);\n\n    for (int i = C.size() - 1; i >= 0; i -- ) printf(\"%d\", C[i]);\n\n    return 0;\n}\n\n作者：yxc\n链接：https://www.acwing.com/activity/content/code/content/39794/\n来源：AcWing\n著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。\n```\n\n- - -\n\n# AcWing 794. 高精度除法  \n\n### 题目来源--[794. 高精度除法](https://www.acwing.com/problem/content/796/ \"高精度除法\")\n\n```c++\n\n题目描述\n\t给定两个非负整数（不含前导 0） A，B，请你计算 A/B 的商和余数。\n\n输入格式\n\t共两行，第一行包含整数 A，第二行包含整数 B。\n\n输出格式\n\t共两行，第一行输出所求的商，第二行输出所求余数。\n\n数据范围\n\t1≤A的长度≤100000,\n\t1≤B≤10000,\n\tB 一定不为 0\n\t\n输入样例：\n\t7\n\t2\n\t\n输出样例：\n\t3\n\t1\n\t\n```\n\n### 代码演示\n```c++\n#include <iostream>\n#include <vector>\n#include <algorithm>\n\nusing namespace std;\n\nvector<int> div(vector<int> &A, int b, int &r)\n{\n    vector<int> C;\n    r = 0;\n    for (int i = A.size() - 1; i >= 0; i -- )\n    {\n        r = r * 10 + A[i];\n        C.push_back(r / b);\n        r %= b;\n    }\n    reverse(C.begin(), C.end());\n    while (C.size() > 1 && C.back() == 0) C.pop_back();\n    return C;\n}\n\nint main()\n{\n    string a;\n    vector<int> A;\n\n    int B;\n    cin >> a >> B;\n    for (int i = a.size() - 1; i >= 0; i -- ) A.push_back(a[i] - '0');\n\n    int r;\n    auto C = div(A, B, r);\n\n    for (int i = C.size() - 1; i >= 0; i -- ) cout << C[i];\n\n    cout << endl << r << endl;\n\n    return 0;\n}\n\n作者：yxc\n链接：https://www.acwing.com/activity/content/code/content/39795/\n来源：AcWing\n著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。\n```\n\n- - -\n\n# AcWing 795. 前缀和   \n\n### 题目来源--[795. 前缀和](https://www.acwing.com/problem/content/797/ \"前缀和\")\n\n```c++\n\n题目描述\n\t输入一个长度为 n 的整数序列。\n\t接下来再输入 m 个询问，每个询问输入一对 l,r。\n\t对于每个询问，输出原序列中从第 l 个数到第 r 个数的和。\n\n输入格式\n\t第一行包含两个整数 n 和 m。\n\t第二行包含 n 个整数，表示整数数列。\n\t接下来 m 行，每行包含两个整数 l 和 r，表示一个询问的区间范围。\n\n输出格式\n\t共 m 行，每行输出一个询问的结果。\n\n数据范围\n\t1≤l≤r≤n,\n\t1≤n,m≤100000,\n\t−1000≤数列中元素的值≤1000\n\t\n输入样例：\n\t5 3\n\t2 1 3 6 4\n\t1 2\n\t1 3\n\t2 4\n\t\n输出样例：\n\t3\n\t6\n\t10\n\t\n```\n\n### 代码演示\n```c++\n#include <iostream>\n\nusing namespace std;\n\nconst int N = 100010;\n\nint n, m;\nint a[N], s[N];\n\nint main()\n{\n    scanf(\"%d%d\", &n, &m);\n    for (int i = 1; i <= n; i ++ ) scanf(\"%d\", &a[i]);\n\n    for (int i = 1; i <= n; i ++ ) s[i] = s[i - 1] + a[i]; // 前缀和的初始化\n\n    while (m -- )\n    {\n        int l, r;\n        scanf(\"%d%d\", &l, &r);\n        printf(\"%d\\n\", s[r] - s[l - 1]); // 区间和的计算\n    }\n\n    return 0;\n}\n\n作者：yxc\n链接：https://www.acwing.com/activity/content/code/content/39796/\n来源：AcWing\n著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。\n```\n\n- - -\n\n# AcWing 796. 子矩阵的和 \n  \n### 题目来源--[796. 子矩阵的和](https://www.acwing.com/problem/content/798/ \"子矩阵的和\")\n\n```c++\n\n题目描述\n\t输入一个 n 行 m 列的整数矩阵，再输入 q 个询问，每个询问包含四个整数 x1,y1,x2,y2，表示一个子矩阵的左上角坐标和右下角坐标。\n\t对于每个询问输出子矩阵中所有数的和。\n\n输入格式\n\t第一行包含三个整数 n，m，q。\n\t接下来 n 行，每行包含 m 个整数，表示整数矩阵。\n\t接下来 q 行，每行包含四个整数 x1,y1,x2,y2，表示一组询问。\n\n输出格式\n\t共 q 行，每行输出一个询问的结果。\n\n数据范围\n\t1≤n,m≤1000,\n\t1≤q≤200000,\n\t1≤x1≤x2≤n,\n\t1≤y1≤y2≤m,\n\t−1000≤矩阵内元素的值≤1000\n\t\n输入样例：\n\t3 4 3\n\t1 7 2 4\n\t3 6 2 8\n\t2 1 2 3\n\t1 1 2 2\n\t2 1 3 4\n\t1 3 3 4\n\t\n输出样例：\n\t17\n\t27\n\t21\n\t\n```\n\n### 代码演示\n```c++\n#include <iostream>\n\nusing namespace std;\n\nconst int N = 1010;\n\nint n, m, q;\nint s[N][N];\n\nint main()\n{\n    scanf(\"%d%d%d\", &n, &m, &q);\n\n    for (int i = 1; i <= n; i ++ )\n        for (int j = 1; j <= m; j ++ )\n            scanf(\"%d\", &s[i][j]);\n\n    for (int i = 1; i <= n; i ++ )\n        for (int j = 1; j <= m; j ++ )\n            s[i][j] += s[i - 1][j] + s[i][j - 1] - s[i - 1][j - 1];\n\n    while (q -- )\n    {\n        int x1, y1, x2, y2;\n        scanf(\"%d%d%d%d\", &x1, &y1, &x2, &y2);\n        printf(\"%d\\n\", s[x2][y2] - s[x1 - 1][y2] - s[x2][y1 - 1] + s[x1 - 1][y1 - 1]);\n    }\n\n    return 0;\n}\n\n作者：yxc\n链接：https://www.acwing.com/activity/content/code/content/39797/\n来源：AcWing\n著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。\n```\n\n- - -\n\n# AcWing 797. 差分   \n\n### 题目来源--[797. 差分](https://www.acwing.com/problem/content/799/ \"差分\")\n\n```c++\n\n题目描述\n\t输入一个长度为 n 的整数序列。\n\t接下来输入 m 个操作，每个操作包含三个整数 l,r,c，表示将序列中 [l,r] 之间的每个数加上 c。\n\t请你输出进行完所有操作后的序列。\n\n输入格式\n\t第一行包含两个整数 n 和 m。\n\t第二行包含 n 个整数，表示整数序列。\n\t接下来 m 行，每行包含三个整数 l，r，c，表示一个操作。\n\n输出格式\n\t共一行，包含 n 个整数，表示最终序列。\n\n数据范围\n\t1≤n,m≤100000,\n\t1≤l≤r≤n,\n\t−1000≤c≤1000,\n\t−1000≤整数序列中元素的值≤1000\n\t\n输入样例：\n\t6 3\n\t1 2 2 1 2 1\n\t1 3 1\n\t3 5 1\n\t1 6 1\n\t\n输出样例：\n\t3 4 5 3 4 2\n\t\n```\n\n### 代码演示\n```c++\n#include <iostream>\n\nusing namespace std;\n\nconst int N = 100010;\n\nint n, m;\nint a[N], b[N];\n\nvoid insert(int l, int r, int c)\n{\n    b[l] += c;\n    b[r + 1] -= c;\n}\n\nint main()\n{\n    scanf(\"%d%d\", &n, &m);\n    for (int i = 1; i <= n; i ++ ) scanf(\"%d\", &a[i]);\n\n    for (int i = 1; i <= n; i ++ ) insert(i, i, a[i]);\n\n    while (m -- )\n    {\n        int l, r, c;\n        scanf(\"%d%d%d\", &l, &r, &c);\n        insert(l, r, c);\n    }\n\n    for (int i = 1; i <= n; i ++ ) b[i] += b[i - 1];\n\n    for (int i = 1; i <= n; i ++ ) printf(\"%d \", b[i]);\n\n    return 0;\n}\n\n作者：yxc\n链接：https://www.acwing.com/activity/content/code/content/39799/\n来源：AcWing\n著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。\n```\n\n- - -\n\n# AcWing 798. 差分矩阵\n   \n### 题目来源--[798. 差分矩阵](https://www.acwing.com/problem/content/800/ \"差分\")\n\n```c++\n\n题目描述\n\t输入一个 n 行 m 列的整数矩阵，再输入 q 个操作，每个操作包含五个整数 x1,y1,x2,y2,c，其中 (x1,y1) 和 (x2,y2) 表示一个子矩阵的左上角坐标和右下角坐标。\n\t每个操作都要将选中的子矩阵中的每个元素的值加上 c。\n\t请你将进行完所有操作后的矩阵输出。\n\n输入格式\n\t第一行包含整数 n,m,q。\n\t接下来 n 行，每行包含 m 个整数，表示整数矩阵。\n\t接下来 q 行，每行包含 5 个整数 x1,y1,x2,y2,c，表示一个操作。\n\n输出格式\n\t共 n 行，每行 m 个整数，表示所有操作进行完毕后的最终矩阵。\n\n数据范围\n\t1≤n,m≤1000,\n\t1≤q≤100000,\n\t1≤x1≤x2≤n,\n\t1≤y1≤y2≤m,\n\t−1000≤c≤1000,\n\t−1000≤矩阵内元素的值≤1000\n\t\n输入样例：\n\t3 4 3\n\t1 2 2 1\n\t3 2 2 1\n\t1 1 1 1\n\t1 1 2 2 1\n\t1 3 2 3 2\n\t3 1 3 4 1\n\t\n输出样例：\n\t2 3 4 1\n\t4 3 4 1\n\t2 2 2 2\n\t\n```\n\n### 代码演示\n```c++\n#include <iostream>\n\nusing namespace std;\n\nconst int N = 1010;\n\nint n, m, q;\nint a[N][N], b[N][N];\n\nvoid insert(int x1, int y1, int x2, int y2, int c)\n{\n    b[x1][y1] += c;\n    b[x2 + 1][y1] -= c;\n    b[x1][y2 + 1] -= c;\n    b[x2 + 1][y2 + 1] += c;\n}\n\nint main()\n{\n    scanf(\"%d%d%d\", &n, &m, &q);\n\n    for (int i = 1; i <= n; i ++ )\n        for (int j = 1; j <= m; j ++ )\n            scanf(\"%d\", &a[i][j]);\n\n    for (int i = 1; i <= n; i ++ )\n        for (int j = 1; j <= m; j ++ )\n            insert(i, j, i, j, a[i][j]);\n\n    while (q -- )\n    {\n        int x1, y1, x2, y2, c;\n        cin >> x1 >> y1 >> x2 >> y2 >> c;\n        insert(x1, y1, x2, y2, c);\n    }\n\n    for (int i = 1; i <= n; i ++ )\n        for (int j = 1; j <= m; j ++ )\n            b[i][j] += b[i - 1][j] + b[i][j - 1] - b[i - 1][j - 1];\n\n    for (int i = 1; i <= n; i ++ )\n    {\n        for (int j = 1; j <= m; j ++ ) printf(\"%d \", b[i][j]);\n        puts(\"\");\n    }\n\n    return 0;\n}\n\n\n作者：yxc\n链接：https://www.acwing.com/activity/content/code/content/39800/\n来源：AcWing\n著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。\n```\n\n- - -\n\n# AcWing 799. 最长连续不重复子序列  \n \n### 题目来源--[799. 最长连续不重复子序列](https://www.acwing.com/problem/content/801/ \"最长连续不重复子序列\")\n\n\n```c++\n\n题目描述\n\t给定一个长度为 n 的整数序列，请找出最长的不包含重复的数的连续区间，输出它的长度。\n\n输入格式\n\t第一行包含整数 n。\n\t第二行包含 n 个整数（均在 0∼105 范围内），表示整数序列。\n\n输出格式\n\t共一行，包含一个整数，表示最长的不包含重复的数的连续区间的长度。\n\n数据范围\n\t1≤n≤105\n\t\n输入样例：\n\t5\n\t1 2 2 3 5\n\t\n输出样例：\n\t3\n\t\n```\n\n### 代码演示\n```c++\n#include <iostream>\n\nusing namespace std;\n\nconst int N = 100010;\n\nint n;\nint q[N], s[N];\n\nint main()\n{\n    scanf(\"%d\", &n);\n    for (int i = 0; i < n; i ++ ) scanf(\"%d\", &q[i]);\n\n    int res = 0;\n    for (int i = 0, j = 0; i < n; i ++ )\n    {\n        s[q[i]] ++ ;\n        while (j < i && s[q[i]] > 1) s[q[j ++ ]] -- ;\n        res = max(res, i - j + 1);\n    }\n\n    cout << res << endl;\n\n    return 0;\n}\n\n作者：yxc\n链接：https://www.acwing.com/activity/content/code/content/40066/\n来源：AcWing\n著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。\n```\n\n- - -\n\n# AcWing 800. 数组元素的目标和   \n\n### 题目来源--[800. 数组元素的目标和](https://www.acwing.com/problem/content/802/ \"数组元素的目标和\")\n\n```c++\n\n题目描述\n\t给定两个升序排序的有序数组 A 和 B，以及一个目标值 x。\n\t数组下标从 0 开始。\n\t请你求出满足 A[i]+B[j]=x 的数对 (i,j)。\n\t数据保证有唯一解。\n\n输入格式\n\t第一行包含三个整数 n,m,x，分别表示 A 的长度，B 的长度以及目标值 x。\n\t第二行包含 n 个整数，表示数组 A。\n\t第三行包含 m 个整数，表示数组 B。\n\n输出格式\n\t共一行，包含两个整数 i 和 j。\n\n数据范围\n\t数组长度不超过 105。\n\t同一数组内元素各不相同。\n\t1≤数组元素≤109\n\t\n输入样例：\n\t4 5 6\n\t1 2 4 7\n\t3 4 6 8 9\n\t\n输出样例：\n\t1 1\n\t\n```\n\n### 代码演示\n```c++\n#include <iostream>\n\nusing namespace std;\n\nconst int N = 1e5 + 10;\n\nint n, m, x;\nint a[N], b[N];\n\nint main()\n{\n    scanf(\"%d%d%d\", &n, &m, &x);\n    for (int i = 0; i < n; i ++ ) scanf(\"%d\", &a[i]);\n    for (int i = 0; i < m; i ++ ) scanf(\"%d\", &b[i]);\n\n    for (int i = 0, j = m - 1; i < n; i ++ )\n    {\n        while (j >= 0 && a[i] + b[j] > x) j -- ;\n        if (j >= 0 && a[i] + b[j] == x) cout << i << ' ' << j << endl;\n    }\n\n    return 0;\n}\n\n作者：yxc\n链接：https://www.acwing.com/activity/content/code/content/40069/\n来源：AcWing\n著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。\n```\n\n- - -\n\n# AcWing 801. 二进制中1的个数   \n\n### 题目来源--[801. 二进制中1的个数](https://www.acwing.com/problem/content/803/ \"判断子序列\")\n\n```c++\n\n题目描述\n\t给定一个长度为 n 的数列，请你求出数列中每个数的二进制表示中 1 的个数。\n\n输入格式\n\t第一行包含整数 n。\n\t第二行包含 n 个整数，表示整个数列。\n\n输出格式\n\t共一行，包含 n 个整数，其中的第 i 个数表示数列中的第 i 个数的二进制表示中 1 的个数。\n\n数据范围\n\t1≤n≤100000,\n\t0≤数列中元素的值≤109\n\t\n输入样例：\n\t5\n\t1 2 3 4 5\n\t\n输出样例：\n\t1 1 2 1 2\n\n\t\n```\n\n### 代码演示\n```c++\n#include <iostream>\n\nusing namespace std;\n\nint main()\n{\n    int n;\n    scanf(\"%d\", &n);\n    while (n -- )\n    {\n        int x, s = 0;\n        scanf(\"%d\", &x);\n\n        for (int i = x; i; i -= i & -i) s ++ ;\n\n        printf(\"%d \", s);\n    }\n\n    return 0;\n}\n```\n\n- - -\n\n# AcWing 802. 区间和   \n \n### 题目来源--[802. 区间和](https://www.acwing.com/problem/content/804/ \"区间和\")\n\n```c++\n\n题目描述\n\t假定有一个无限长的数轴，数轴上每个坐标上的数都是 0。\n\t现在，我们首先进行 n 次操作，每次操作将某一位置 x 上的数加 c。\n\t接下来，进行 m 次询问，每个询问包含两个整数 l 和 r，你需要求出在区间 [l,r] 之间的所有数的和。\n\n输入格式\n\t第一行包含两个整数 n 和 m。\n\t接下来 n 行，每行包含两个整数 x 和 c。\n\t再接下来 m 行，每行包含两个整数 l 和 r。\n\n输出格式\n\t共 m 行，每行输出一个询问中所求的区间内数字和。\n\n数据范围\n\t−109≤x≤109,\n\t1≤n,m≤105,\n\t−109≤l≤r≤109,\n\t−10000≤c≤10000\n\t\n输入样例：\n\t3 3\n\t1 2\n\t3 6\n\t7 5\n\t1 3\n\t4 6\n\t7 8\n\t\n输出样例：\n\t8\n\t0\n\t5\n\n\t\n```\n\n### 代码演示\n```c++\n#include <iostream>\n#include <vector>\n#include <algorithm>\n\nusing namespace std;\n\ntypedef pair<int, int> PII;\n\nconst int N = 300010;\n\nint n, m;\nint a[N], s[N];\n\nvector<int> alls;\nvector<PII> add, query;\n\nint find(int x)\n{\n    int l = 0, r = alls.size() - 1;\n    while (l < r)\n    {\n        int mid = l + r >> 1;\n        if (alls[mid] >= x) r = mid;\n        else l = mid + 1;\n    }\n    return r + 1;\n}\n\nint main()\n{\n    cin >> n >> m;\n    for (int i = 0; i < n; i ++ )\n    {\n        int x, c;\n        cin >> x >> c;\n        add.push_back({x, c});\n\n        alls.push_back(x);\n    }\n\n    for (int i = 0; i < m; i ++ )\n    {\n        int l, r;\n        cin >> l >> r;\n        query.push_back({l, r});\n\n        alls.push_back(l);\n        alls.push_back(r);\n    }\n\n    // 去重\n    sort(alls.begin(), alls.end());\n    alls.erase(unique(alls.begin(), alls.end()), alls.end());\n\n    // 处理插入\n    for (auto item : add)\n    {\n        int x = find(item.first);\n        a[x] += item.second;\n    }\n\n    // 预处理前缀和\n    for (int i = 1; i <= alls.size(); i ++ ) s[i] = s[i - 1] + a[i];\n\n    // 处理询问\n    for (auto item : query)\n    {\n        int l = find(item.first), r = find(item.second);\n        cout << s[r] - s[l - 1] << endl;\n    }\n\n    return 0;\n}\n\n作者：yxc\n链接：https://www.acwing.com/activity/content/code/content/40105/\n来源：AcWing\n著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。\n```\n\n- - -\n\n# AcWing 2816. 判断子序列   \n\n### 题目来源--[2816. 判断子序列](https://www.acwing.com/problem/content/2818/ \"判断子序列\")\n\n```c++\n\n题目描述\n\t给定一个长度为 n 的整数序列 a1,a2,…,an 以及一个长度为 m 的整数序列 b1,b2,…,bm。\n\t请你判断 a 序列是否为 b 序列的子序列。\n\t子序列指序列的一部分项按原有次序排列而得的序列，例如序列 {a1,a3,a5} 是序列 {a1,a2,a3,a4,a5} 的一个子序列。\n\n输入格式\n\t第一行包含两个整数 n,m。\n\t第二行包含 n 个整数，表示 a1,a2,…,an。\n\t第三行包含 m 个整数，表示 b1,b2,…,bm。\n\n输出格式\n\t如果 a 序列是 b 序列的子序列，输出一行 Yes。\n\t否则，输出 No。\n\n数据范围\n\t1≤n≤m≤105,\n\t−109≤ai,bi≤109\n\t\n输入样例：\n\t3 5\n\t1 3 5\n\t1 2 3 4 5\n\t\n输出样例：\n\tYes\n\n\t\n```\n\n### 代码演示\n```c++\n#include <iostream>\n#include <cstring>\n\nusing namespace std;\n\nconst int N = 100010;\n\nint n, m;\nint a[N], b[N];\n\nint main()\n{\n    scanf(\"%d%d\", &n, &m);\n    for (int i = 0; i < n; i ++ ) scanf(\"%d\", &a[i]);\n    for (int i = 0; i < m; i ++ ) scanf(\"%d\", &b[i]);\n\n    int i = 0, j = 0;\n    while (i < n && j < m)\n    {\n        if (a[i] == b[j]) i ++ ;\n        j ++ ;\n    }\n\n    if (i == n) puts(\"Yes\");\n    else puts(\"No\");\n\n    return 0;\n}\n\n作者：yxc\n链接：https://www.acwing.com/activity/content/code/content/589289/\n来源：AcWing\n著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。\n```","source":"_posts/AcWing/算法基础课/1、基础算法/AcWing-785-快速排序.md","raw":"---\ntitle: 基础算法\ndate: \ntags: \n\t- Acwing \ncategories: \n\t- [AcWing,算法基础课,1、基础算法]\n---\n\n# AcWing 785. 快速排序\n\n### 题目来源--[785. 快速排序](https://www.acwing.com/problem/content/787/ \"快速排序\")\n\n\n```c++\n\n题目描述：\n    给定你一个长度为 n 的整数数列。\n    请你使用快速排序对这个数列按照从小到大进行排序。\n    并将排好序的数列按顺序输出。\n\n输入格式\n    输入共两行，第一行包含整数 n。\n    第二行包含 n 个整数（所有整数均在 1∼109 范围内），表示整个数列。\n\t\n输出格式\n\t输出共一行，包含 n 个整数，表示排好序的数列。\n\n数据范围\n\t1≤n≤100000\n\n输入样例：\n    5\n    3 1 2 4 5\n\n输出样例：\n    1 2 3 4 5\n```\n### 代码演示\n```c++\n#include <iostream>\n\nusing namespace std;\n\nconst int N = 100010;\n\nint q[N];\n\nvoid quick_sort(int q[], int l, int r)\n{\n    if (l >= r) return;\n\n    int i = l - 1, j = r + 1, x = q[l + r >> 1];\n    while (i < j)\n    {\n        do i ++ ; while (q[i] < x);\n        do j -- ; while (q[j] > x);\n        if (i < j) swap(q[i], q[j]);\n    }\n\n    quick_sort(q, l, j);\n    quick_sort(q, j + 1, r);\n}\n\nint main()\n{\n    int n;\n    scanf(\"%d\", &n);\n\n    for (int i = 0; i < n; i ++ ) scanf(\"%d\", &q[i]);\n\n    quick_sort(q, 0, n - 1);\n\n    for (int i = 0; i < n; i ++ ) printf(\"%d \", q[i]);\n\n    return 0;\n}\n\n作者：yxc\n链接：https://www.acwing.com/activity/content/code/content/39784/\n来源：AcWing\n著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。\n```\n\n- - -\n\n# AcWing 786. 第k个数\n### 题目来源--[786. 第k个数](https://www.acwing.com/problem/content/788/ \"第k个数\")\n\n```c++\n\n题目描述\n\t给定一个长度为 n 的整数数列，以及一个整数 k，请用快速选择算法求出数列从小到大排序后的第 k 个数。\n\n输入格式\n\t第一行包含两个整数 n 和 k。\n\t第二行包含 n 个整数（所有整数均在 1～109 范围内），表示整数数列。\n\n输出格式\n\t输出一个整数，表示数列的第 k 小数。\n\n数据范围\n\t1≤n≤100000,\n\t1≤k≤n\n输入样例：\n\t5 3\n\t2 4 1 5 3\n输出样例：\n\t\n```\n\n### 代码演示\n```c++\n#include <iostream>\n\nusing namespace std;\n\nconst int N = 100010;\n\nint q[N];\n\nint quick_sort(int q[], int l, int r, int k)\n{\n    if (l >= r) return q[l];\n\n    int i = l - 1, j = r + 1, x = q[l + r >> 1];\n    while (i < j)\n    {\n        do i ++ ; while (q[i] < x);\n        do j -- ; while (q[j] > x);\n        if (i < j) swap(q[i], q[j]);\n    }\n\n    if (j - l + 1 >= k) return quick_sort(q, l, j, k);\n    else return quick_sort(q, j + 1, r, k - (j - l + 1));\n}\n\nint main()\n{\n    int n, k;\n    scanf(\"%d%d\", &n, &k);\n\n    for (int i = 0; i < n; i ++ ) scanf(\"%d\", &q[i]);\n\n    cout << quick_sort(q, 0, n - 1, k) << endl;\n\n    return 0;\n}\n\n作者：yxc\n链接：https://www.acwing.com/activity/content/code/content/39785/\n来源：AcWing\n著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。\n```\n\n- - -\n\n# AcWing 787. 归并排序\n### 题目来源--[787. 归并排序](https://www.acwing.com/problem/content/789/ \"归并排序\")\n\n```c++\n\n题目描述\n\t给定你一个长度为 n 的整数数列。\n\t请你使用归并排序对这个数列按照从小到大进行排序。\n\t并将排好序的数列按顺序输出。\n\n输入格式\n\t输入共两行，第一行包含整数 n。\n\t第二行包含 n 个整数（所有整数均在 1∼109 范围内），表示整个数列。\n\n输出格式\n\t输出共一行，包含 n 个整数，表示排好序的数列。\n\n数据范围\n\t1≤n≤100000\n\t\n输入样例：\n\t5\n\t3 1 2 4 5\n\t\n输出样例：\n\t1 2 3 4 5\n\t\n```\n### 代码演示\n```c++\n#include <iostream>\n\nusing namespace std;\n\nconst int N = 1e5 + 10;\n\nint a[N], tmp[N];\n\nvoid merge_sort(int q[], int l, int r)\n{\n    if (l >= r) return;\n\n    int mid = l + r >> 1;\n\n    merge_sort(q, l, mid), merge_sort(q, mid + 1, r);\n\n    int k = 0, i = l, j = mid + 1;\n    while (i <= mid && j <= r)\n        if (q[i] <= q[j]) tmp[k ++ ] = q[i ++ ];\n        else tmp[k ++ ] = q[j ++ ];\n    while (i <= mid) tmp[k ++ ] = q[i ++ ];\n    while (j <= r) tmp[k ++ ] = q[j ++ ];\n\n    for (i = l, j = 0; i <= r; i ++, j ++ ) q[i] = tmp[j];\n}\n\nint main()\n{\n    int n;\n    scanf(\"%d\", &n);\n    for (int i = 0; i < n; i ++ ) scanf(\"%d\", &a[i]);\n\n    merge_sort(a, 0, n - 1);\n\n    for (int i = 0; i < n; i ++ ) printf(\"%d \", a[i]);\n\n    return 0;\n}\n\n作者：yxc\n链接：https://www.acwing.com/activity/content/code/content/39790/\n来源：AcWing\n著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。\n```\n- - -\n\n# AcWing 788. 逆序对的数量\n\n### 题目来源--[788. 逆序对的数量](https://www.acwing.com/problem/content/790/ \"逆序对的数量 \")\n\n```c++\n\n题目描述\n\t给定一个长度为 n 的整数数列，请你计算数列中的逆序对的数量。\n\t逆序对的定义如下：对于数列的第 i 个和第 j 个元素，如果满足 i<j 且 a[i]>a[j]，则其为一个逆序对；否则不是。\n\n输入格式\n\t第一行包含整数 n，表示数列的长度。\n\t第二行包含 n 个整数，表示整个数列。\n\n输出格式\n\t输出一个整数，表示逆序对的个数。\n\n数据范围\n\t1≤n≤100000，\n\t\n数列中的元素的取值范围 [1,109]。\n\n输入样例：\n\t6\n\t2 3 4 5 6 1\n\t\n输出样例：\n\t5\n\t\n```\n\n### 代码演示\n```c++\n#include <iostream>\n\nusing namespace std;\n\ntypedef long long LL;\n\nconst int N = 1e5 + 10;\n\nint a[N], tmp[N];\n\nLL merge_sort(int q[], int l, int r)\n{\n    if (l >= r) return 0;\n\n    int mid = l + r >> 1;\n\n    LL res = merge_sort(q, l, mid) + merge_sort(q, mid + 1, r);\n\n    int k = 0, i = l, j = mid + 1;\n    while (i <= mid && j <= r)\n        if (q[i] <= q[j]) tmp[k ++ ] = q[i ++ ];\n        else\n        {\n            res += mid - i + 1;\n            tmp[k ++ ] = q[j ++ ];\n        }\n    while (i <= mid) tmp[k ++ ] = q[i ++ ];\n    while (j <= r) tmp[k ++ ] = q[j ++ ];\n\n    for (i = l, j = 0; i <= r; i ++, j ++ ) q[i] = tmp[j];\n\n    return res;\n}\n\nint main()\n{\n    int n;\n    scanf(\"%d\", &n);\n    for (int i = 0; i < n; i ++ ) scanf(\"%d\", &a[i]);\n\n    cout << merge_sort(a, 0, n - 1) << endl;\n\n    return 0;\n}\n\n作者：yxc\n链接：https://www.acwing.com/activity/content/code/content/39791/\n来源：AcWing\n著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。\n```\n\n- - -\n\n# AcWing 789. 数的范围\n\n### 题目来源--[789. 数的范围](https://www.acwing.com/problem/content/791/ \"数的范围  \")\n\n```c++\n\n题目描述\n\t给定一个按照升序排列的长度为 n 的整数数组，以及 q 个查询。\n\t对于每个查询，返回一个元素 k 的起始位置和终止位置（位置从 0 开始计数）。\n\t如果数组中不存在该元素，则返回 -1 -1。\n\n输入格式\n\t第一行包含整数 n 和 q，表示数组长度和询问个数。\n\t第二行包含 n 个整数（均在 1～10000 范围内），表示完整数组。\n\t接下来 q 行，每行包含一个整数 k，表示一个询问元素。\n\n输出格式\n\t共 q 行，每行包含两个整数，表示所求元素的起始位置和终止位置。\n\t如果数组中不存在该元素，则返回 -1 -1。\n\n数据范围\n\t1≤n≤100000\n\t1≤q≤10000\n\t1≤k≤10000\n\t\n输入样例：\n\t6 3\n\t1 2 2 3 3 4\n\t3\n\t4\n\t5\n\t\n输出样例：\n\t3 4\n\t5 5\n\t-1 -1\n\t\n```\n\n### 代码演示\n```c++\n#include <iostream>\n\nusing namespace std;\n\nconst int N = 100010;\n\nint n, m;\nint q[N];\n\nint main()\n{\n    scanf(\"%d%d\", &n, &m);\n    for (int i = 0; i < n; i ++ ) scanf(\"%d\", &q[i]);\n\n    while (m -- )\n    {\n        int x;\n        scanf(\"%d\", &x);\n\n        int l = 0, r = n - 1;\n        while (l < r)\n        {\n            int mid = l + r >> 1;\n            if (q[mid] >= x) r = mid;\n            else l = mid + 1;\n        }\n\n        if (q[l] != x) cout << \"-1 -1\" << endl;\n        else\n        {\n            cout << l << ' ';\n\n            int l = 0, r = n - 1;\n            while (l < r)\n            {\n                int mid = l + r + 1 >> 1;\n                if (q[mid] <= x) l = mid;\n                else r = mid - 1;\n            }\n\n            cout << l << endl;\n        }\n    }\n\n    return 0;\n}\n\n作者：yxc\n链接：https://www.acwing.com/activity/content/code/content/39787/\n来源：AcWing\n著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。\n```\n\n- - -\n\n# AcWing 790. 数的三次方根 \n\n### 题目来源--[790. 数的三次方根](https://www.acwing.com/problem/content/792/ \"数的三次方根  \")\n\n```c++\n\n题目描述\n\t给定一个浮点数 n，求它的三次方根。\n\n输入格式\n\t共一行，包含一个浮点数 n。\n\n输出格式\n\t共一行，包含一个浮点数，表示问题的解。\n\t注意，结果保留 6 位小数。\n\n数据范围\n\t-10000≤n≤10000\n\t\n输入样例：\n\t1000.00\n\t\n输出样例：\n\t10.000000\n\t\n```\n\n### 代码演示\n```c++\n#include <iostream>\n\nusing namespace std;\n\nint main()\n{\n    double x;\n    cin >> x;\n\n    double l = -100, r = 100;\n    while (r - l > 1e-8)\n    {\n        double mid = (l + r) / 2;\n        if (mid * mid * mid >= x) r = mid;\n        else l = mid;\n    }\n\n    printf(\"%.6lf\\n\", l);\n    return 0;\n}\n```\n\n- - -\n\n# AcWing 791. 高精度加法 \n\n### 题目来源--[791.高精度加法](https://www.acwing.com/problem/content/793/\"高精度加法\")\n\n```c++\n\n题目描述\n\t给定两个正整数（不含前导 0），计算它们的和。\n\n输入格式\n\t共两行，每行包含一个整数。\n\n输出格式\n\t共一行，包含所求的和。\n\n数据范围\n\t1≤整数长度≤100000\n输入样例：\n\n\t12\n\t23\n\t\n输出样例：\n\t35\n\t\n```\n\n## 不圧位代码\n```c++\n#include <iostream>\n#include <vector>\n\nusing namespace std;\n\nvector<int> add(vector<int> &A, vector<int> &B)\n{\n    if (A.size() < B.size()) return add(B, A);\n\n    vector<int> C;\n    int t = 0;\n    for (int i = 0; i < A.size(); i ++ )\n    {\n        t += A[i];\n        if (i < B.size()) t += B[i];\n        C.push_back(t % 10);\n        t /= 10;\n    }\n\n    if (t) C.push_back(t);\n    return C;\n}\n\nint main()\n{\n    string a, b;\n    vector<int> A, B;\n    cin >> a >> b;\n    for (int i = a.size() - 1; i >= 0; i -- ) A.push_back(a[i] - '0');\n    for (int i = b.size() - 1; i >= 0; i -- ) B.push_back(b[i] - '0');\n\n    auto C = add(A, B);\n\n    for (int i = C.size() - 1; i >= 0; i -- ) cout << C[i];\n    cout << endl;\n\n    return 0;\n}\n\n作者：yxc\n链接：https://www.acwing.com/activity/content/code/content/39792/\n来源：AcWing\n著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。\n```\n\n## 压9位的代码\n\n```C++\n#include <iostream>\n#include <vector>\n\nusing namespace std;\n\nconst int base = 1000000000;\n\nvector<int> add(vector<int> &A, vector<int> &B)\n{\n    if (A.size() < B.size()) return add(B, A);\n\n    vector<int> C;\n    int t = 0;\n    for (int i = 0; i < A.size(); i ++ )\n    {\n        t += A[i];\n        if (i < B.size()) t += B[i];\n        C.push_back(t % base);\n        t /= base;\n    }\n\n    if (t) C.push_back(t);\n    return C;\n}\n\nint main()\n{\n    string a, b;\n    vector<int> A, B;\n    cin >> a >> b;\n\n    for (int i = a.size() - 1, s = 0, j = 0, t = 1; i >= 0; i -- )\n    {\n        s += (a[i] - '0') * t;\n        j ++, t *= 10;\n        if (j == 9 || i == 0)\n        {\n            A.push_back(s);\n            s = j = 0;\n            t = 1;\n        }\n    }\n    for (int i = b.size() - 1, s = 0, j = 0, t = 1; i >= 0; i -- )\n    {\n        s += (b[i] - '0') * t;\n        j ++, t *= 10;\n        if (j == 9 || i == 0)\n        {\n            B.push_back(s);\n            s = j = 0;\n            t = 1;\n        }\n    }\n\n    auto C = add(A, B);\n\n    cout << C.back();\n    for (int i = C.size() - 2; i >= 0; i -- ) printf(\"%09d\", C[i]);\n    cout << endl;\n\n    return 0;\n}\n\n作者：yxc\n链接：https://www.acwing.com/activity/content/code/content/39792/\n来源：AcWing\n著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。\n```\n\n- - -\n\n# AcWing 792. 高精度减法 \n\n### 题目来源--[792. 高精度减法 ](https://www.acwing.com/problem/content/794/ \"高精度减法\")\n\n```c++\n\n题目描述\n\t给定两个正整数（不含前导 0），计算它们的差，计算结果可能为负数。\n\n输入格式\n\t共两行，每行包含一个整数。\n\n输出格式\n\t共一行，包含所求的差。\n\n数据范围\n\t1≤整数长度≤105\n\t\n输入样例：\n\t32\n\t11\n\t\n输出样例：\n\t21\n\t\n```\n\n### 代码演示\n```c++\n#include <iostream>\n#include <vector>\n\nusing namespace std;\n\nbool cmp(vector<int> &A, vector<int> &B)\n{\n    if (A.size() != B.size()) return A.size() > B.size();\n\n    for (int i = A.size() - 1; i >= 0; i -- )\n        if (A[i] != B[i])\n            return A[i] > B[i];\n\n    return true;\n}\n\nvector<int> sub(vector<int> &A, vector<int> &B)\n{\n    vector<int> C;\n    for (int i = 0, t = 0; i < A.size(); i ++ )\n    {\n        t = A[i] - t;\n        if (i < B.size()) t -= B[i];\n        C.push_back((t + 10) % 10);\n        if (t < 0) t = 1;\n        else t = 0;\n    }\n\n    while (C.size() > 1 && C.back() == 0) C.pop_back();\n    return C;\n}\n\nint main()\n{\n    string a, b;\n    vector<int> A, B;\n    cin >> a >> b;\n    for (int i = a.size() - 1; i >= 0; i -- ) A.push_back(a[i] - '0');\n    for (int i = b.size() - 1; i >= 0; i -- ) B.push_back(b[i] - '0');\n\n    vector<int> C;\n\n    if (cmp(A, B)) C = sub(A, B);\n    else C = sub(B, A), cout << '-';\n\n    for (int i = C.size() - 1; i >= 0; i -- ) cout << C[i];\n    cout << endl;\n\n    return 0;\n}\n\n作者：yxc\n链接：https://www.acwing.com/activity/content/code/content/39793/\n来源：AcWing\n著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。\n```\n\n- - -\n\n# AcWing 793. 高精度乘法\n\n### 题目来源--[793. 高精度乘法](https://www.acwing.com/problem/content/795/ \"高精度乘法\")\n\n```c++\n\n题目描述\n\t给定两个非负整数（不含前导 0） A 和 B，请你计算 A×B 的值。\n\n输入格式\n\t共两行，第一行包含整数 A，第二行包含整数 B。\n\n输出格式\n\t共一行，包含 A×B 的值。\n\n数据范围\n\t1≤A的长度≤100000,\n\t0≤B≤10000\n\t\n输入样例：\n\t2\n\t3\n\t\n输出样例：\n\t6\n\t\n```\n\n### 代码演示\n```c++\n#include <iostream>\n#include <vector>\n\nusing namespace std;\n\n\nvector<int> mul(vector<int> &A, int b)\n{\n    vector<int> C;\n\n    int t = 0;\n    for (int i = 0; i < A.size() || t; i ++ )\n    {\n        if (i < A.size()) t += A[i] * b;\n        C.push_back(t % 10);\n        t /= 10;\n    }\n\n    while (C.size() > 1 && C.back() == 0) C.pop_back();\n\n    return C;\n}\n\n\nint main()\n{\n    string a;\n    int b;\n\n    cin >> a >> b;\n\n    vector<int> A;\n    for (int i = a.size() - 1; i >= 0; i -- ) A.push_back(a[i] - '0');\n\n    auto C = mul(A, b);\n\n    for (int i = C.size() - 1; i >= 0; i -- ) printf(\"%d\", C[i]);\n\n    return 0;\n}\n\n作者：yxc\n链接：https://www.acwing.com/activity/content/code/content/39794/\n来源：AcWing\n著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。\n```\n\n- - -\n\n# AcWing 794. 高精度除法  \n\n### 题目来源--[794. 高精度除法](https://www.acwing.com/problem/content/796/ \"高精度除法\")\n\n```c++\n\n题目描述\n\t给定两个非负整数（不含前导 0） A，B，请你计算 A/B 的商和余数。\n\n输入格式\n\t共两行，第一行包含整数 A，第二行包含整数 B。\n\n输出格式\n\t共两行，第一行输出所求的商，第二行输出所求余数。\n\n数据范围\n\t1≤A的长度≤100000,\n\t1≤B≤10000,\n\tB 一定不为 0\n\t\n输入样例：\n\t7\n\t2\n\t\n输出样例：\n\t3\n\t1\n\t\n```\n\n### 代码演示\n```c++\n#include <iostream>\n#include <vector>\n#include <algorithm>\n\nusing namespace std;\n\nvector<int> div(vector<int> &A, int b, int &r)\n{\n    vector<int> C;\n    r = 0;\n    for (int i = A.size() - 1; i >= 0; i -- )\n    {\n        r = r * 10 + A[i];\n        C.push_back(r / b);\n        r %= b;\n    }\n    reverse(C.begin(), C.end());\n    while (C.size() > 1 && C.back() == 0) C.pop_back();\n    return C;\n}\n\nint main()\n{\n    string a;\n    vector<int> A;\n\n    int B;\n    cin >> a >> B;\n    for (int i = a.size() - 1; i >= 0; i -- ) A.push_back(a[i] - '0');\n\n    int r;\n    auto C = div(A, B, r);\n\n    for (int i = C.size() - 1; i >= 0; i -- ) cout << C[i];\n\n    cout << endl << r << endl;\n\n    return 0;\n}\n\n作者：yxc\n链接：https://www.acwing.com/activity/content/code/content/39795/\n来源：AcWing\n著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。\n```\n\n- - -\n\n# AcWing 795. 前缀和   \n\n### 题目来源--[795. 前缀和](https://www.acwing.com/problem/content/797/ \"前缀和\")\n\n```c++\n\n题目描述\n\t输入一个长度为 n 的整数序列。\n\t接下来再输入 m 个询问，每个询问输入一对 l,r。\n\t对于每个询问，输出原序列中从第 l 个数到第 r 个数的和。\n\n输入格式\n\t第一行包含两个整数 n 和 m。\n\t第二行包含 n 个整数，表示整数数列。\n\t接下来 m 行，每行包含两个整数 l 和 r，表示一个询问的区间范围。\n\n输出格式\n\t共 m 行，每行输出一个询问的结果。\n\n数据范围\n\t1≤l≤r≤n,\n\t1≤n,m≤100000,\n\t−1000≤数列中元素的值≤1000\n\t\n输入样例：\n\t5 3\n\t2 1 3 6 4\n\t1 2\n\t1 3\n\t2 4\n\t\n输出样例：\n\t3\n\t6\n\t10\n\t\n```\n\n### 代码演示\n```c++\n#include <iostream>\n\nusing namespace std;\n\nconst int N = 100010;\n\nint n, m;\nint a[N], s[N];\n\nint main()\n{\n    scanf(\"%d%d\", &n, &m);\n    for (int i = 1; i <= n; i ++ ) scanf(\"%d\", &a[i]);\n\n    for (int i = 1; i <= n; i ++ ) s[i] = s[i - 1] + a[i]; // 前缀和的初始化\n\n    while (m -- )\n    {\n        int l, r;\n        scanf(\"%d%d\", &l, &r);\n        printf(\"%d\\n\", s[r] - s[l - 1]); // 区间和的计算\n    }\n\n    return 0;\n}\n\n作者：yxc\n链接：https://www.acwing.com/activity/content/code/content/39796/\n来源：AcWing\n著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。\n```\n\n- - -\n\n# AcWing 796. 子矩阵的和 \n  \n### 题目来源--[796. 子矩阵的和](https://www.acwing.com/problem/content/798/ \"子矩阵的和\")\n\n```c++\n\n题目描述\n\t输入一个 n 行 m 列的整数矩阵，再输入 q 个询问，每个询问包含四个整数 x1,y1,x2,y2，表示一个子矩阵的左上角坐标和右下角坐标。\n\t对于每个询问输出子矩阵中所有数的和。\n\n输入格式\n\t第一行包含三个整数 n，m，q。\n\t接下来 n 行，每行包含 m 个整数，表示整数矩阵。\n\t接下来 q 行，每行包含四个整数 x1,y1,x2,y2，表示一组询问。\n\n输出格式\n\t共 q 行，每行输出一个询问的结果。\n\n数据范围\n\t1≤n,m≤1000,\n\t1≤q≤200000,\n\t1≤x1≤x2≤n,\n\t1≤y1≤y2≤m,\n\t−1000≤矩阵内元素的值≤1000\n\t\n输入样例：\n\t3 4 3\n\t1 7 2 4\n\t3 6 2 8\n\t2 1 2 3\n\t1 1 2 2\n\t2 1 3 4\n\t1 3 3 4\n\t\n输出样例：\n\t17\n\t27\n\t21\n\t\n```\n\n### 代码演示\n```c++\n#include <iostream>\n\nusing namespace std;\n\nconst int N = 1010;\n\nint n, m, q;\nint s[N][N];\n\nint main()\n{\n    scanf(\"%d%d%d\", &n, &m, &q);\n\n    for (int i = 1; i <= n; i ++ )\n        for (int j = 1; j <= m; j ++ )\n            scanf(\"%d\", &s[i][j]);\n\n    for (int i = 1; i <= n; i ++ )\n        for (int j = 1; j <= m; j ++ )\n            s[i][j] += s[i - 1][j] + s[i][j - 1] - s[i - 1][j - 1];\n\n    while (q -- )\n    {\n        int x1, y1, x2, y2;\n        scanf(\"%d%d%d%d\", &x1, &y1, &x2, &y2);\n        printf(\"%d\\n\", s[x2][y2] - s[x1 - 1][y2] - s[x2][y1 - 1] + s[x1 - 1][y1 - 1]);\n    }\n\n    return 0;\n}\n\n作者：yxc\n链接：https://www.acwing.com/activity/content/code/content/39797/\n来源：AcWing\n著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。\n```\n\n- - -\n\n# AcWing 797. 差分   \n\n### 题目来源--[797. 差分](https://www.acwing.com/problem/content/799/ \"差分\")\n\n```c++\n\n题目描述\n\t输入一个长度为 n 的整数序列。\n\t接下来输入 m 个操作，每个操作包含三个整数 l,r,c，表示将序列中 [l,r] 之间的每个数加上 c。\n\t请你输出进行完所有操作后的序列。\n\n输入格式\n\t第一行包含两个整数 n 和 m。\n\t第二行包含 n 个整数，表示整数序列。\n\t接下来 m 行，每行包含三个整数 l，r，c，表示一个操作。\n\n输出格式\n\t共一行，包含 n 个整数，表示最终序列。\n\n数据范围\n\t1≤n,m≤100000,\n\t1≤l≤r≤n,\n\t−1000≤c≤1000,\n\t−1000≤整数序列中元素的值≤1000\n\t\n输入样例：\n\t6 3\n\t1 2 2 1 2 1\n\t1 3 1\n\t3 5 1\n\t1 6 1\n\t\n输出样例：\n\t3 4 5 3 4 2\n\t\n```\n\n### 代码演示\n```c++\n#include <iostream>\n\nusing namespace std;\n\nconst int N = 100010;\n\nint n, m;\nint a[N], b[N];\n\nvoid insert(int l, int r, int c)\n{\n    b[l] += c;\n    b[r + 1] -= c;\n}\n\nint main()\n{\n    scanf(\"%d%d\", &n, &m);\n    for (int i = 1; i <= n; i ++ ) scanf(\"%d\", &a[i]);\n\n    for (int i = 1; i <= n; i ++ ) insert(i, i, a[i]);\n\n    while (m -- )\n    {\n        int l, r, c;\n        scanf(\"%d%d%d\", &l, &r, &c);\n        insert(l, r, c);\n    }\n\n    for (int i = 1; i <= n; i ++ ) b[i] += b[i - 1];\n\n    for (int i = 1; i <= n; i ++ ) printf(\"%d \", b[i]);\n\n    return 0;\n}\n\n作者：yxc\n链接：https://www.acwing.com/activity/content/code/content/39799/\n来源：AcWing\n著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。\n```\n\n- - -\n\n# AcWing 798. 差分矩阵\n   \n### 题目来源--[798. 差分矩阵](https://www.acwing.com/problem/content/800/ \"差分\")\n\n```c++\n\n题目描述\n\t输入一个 n 行 m 列的整数矩阵，再输入 q 个操作，每个操作包含五个整数 x1,y1,x2,y2,c，其中 (x1,y1) 和 (x2,y2) 表示一个子矩阵的左上角坐标和右下角坐标。\n\t每个操作都要将选中的子矩阵中的每个元素的值加上 c。\n\t请你将进行完所有操作后的矩阵输出。\n\n输入格式\n\t第一行包含整数 n,m,q。\n\t接下来 n 行，每行包含 m 个整数，表示整数矩阵。\n\t接下来 q 行，每行包含 5 个整数 x1,y1,x2,y2,c，表示一个操作。\n\n输出格式\n\t共 n 行，每行 m 个整数，表示所有操作进行完毕后的最终矩阵。\n\n数据范围\n\t1≤n,m≤1000,\n\t1≤q≤100000,\n\t1≤x1≤x2≤n,\n\t1≤y1≤y2≤m,\n\t−1000≤c≤1000,\n\t−1000≤矩阵内元素的值≤1000\n\t\n输入样例：\n\t3 4 3\n\t1 2 2 1\n\t3 2 2 1\n\t1 1 1 1\n\t1 1 2 2 1\n\t1 3 2 3 2\n\t3 1 3 4 1\n\t\n输出样例：\n\t2 3 4 1\n\t4 3 4 1\n\t2 2 2 2\n\t\n```\n\n### 代码演示\n```c++\n#include <iostream>\n\nusing namespace std;\n\nconst int N = 1010;\n\nint n, m, q;\nint a[N][N], b[N][N];\n\nvoid insert(int x1, int y1, int x2, int y2, int c)\n{\n    b[x1][y1] += c;\n    b[x2 + 1][y1] -= c;\n    b[x1][y2 + 1] -= c;\n    b[x2 + 1][y2 + 1] += c;\n}\n\nint main()\n{\n    scanf(\"%d%d%d\", &n, &m, &q);\n\n    for (int i = 1; i <= n; i ++ )\n        for (int j = 1; j <= m; j ++ )\n            scanf(\"%d\", &a[i][j]);\n\n    for (int i = 1; i <= n; i ++ )\n        for (int j = 1; j <= m; j ++ )\n            insert(i, j, i, j, a[i][j]);\n\n    while (q -- )\n    {\n        int x1, y1, x2, y2, c;\n        cin >> x1 >> y1 >> x2 >> y2 >> c;\n        insert(x1, y1, x2, y2, c);\n    }\n\n    for (int i = 1; i <= n; i ++ )\n        for (int j = 1; j <= m; j ++ )\n            b[i][j] += b[i - 1][j] + b[i][j - 1] - b[i - 1][j - 1];\n\n    for (int i = 1; i <= n; i ++ )\n    {\n        for (int j = 1; j <= m; j ++ ) printf(\"%d \", b[i][j]);\n        puts(\"\");\n    }\n\n    return 0;\n}\n\n\n作者：yxc\n链接：https://www.acwing.com/activity/content/code/content/39800/\n来源：AcWing\n著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。\n```\n\n- - -\n\n# AcWing 799. 最长连续不重复子序列  \n \n### 题目来源--[799. 最长连续不重复子序列](https://www.acwing.com/problem/content/801/ \"最长连续不重复子序列\")\n\n\n```c++\n\n题目描述\n\t给定一个长度为 n 的整数序列，请找出最长的不包含重复的数的连续区间，输出它的长度。\n\n输入格式\n\t第一行包含整数 n。\n\t第二行包含 n 个整数（均在 0∼105 范围内），表示整数序列。\n\n输出格式\n\t共一行，包含一个整数，表示最长的不包含重复的数的连续区间的长度。\n\n数据范围\n\t1≤n≤105\n\t\n输入样例：\n\t5\n\t1 2 2 3 5\n\t\n输出样例：\n\t3\n\t\n```\n\n### 代码演示\n```c++\n#include <iostream>\n\nusing namespace std;\n\nconst int N = 100010;\n\nint n;\nint q[N], s[N];\n\nint main()\n{\n    scanf(\"%d\", &n);\n    for (int i = 0; i < n; i ++ ) scanf(\"%d\", &q[i]);\n\n    int res = 0;\n    for (int i = 0, j = 0; i < n; i ++ )\n    {\n        s[q[i]] ++ ;\n        while (j < i && s[q[i]] > 1) s[q[j ++ ]] -- ;\n        res = max(res, i - j + 1);\n    }\n\n    cout << res << endl;\n\n    return 0;\n}\n\n作者：yxc\n链接：https://www.acwing.com/activity/content/code/content/40066/\n来源：AcWing\n著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。\n```\n\n- - -\n\n# AcWing 800. 数组元素的目标和   \n\n### 题目来源--[800. 数组元素的目标和](https://www.acwing.com/problem/content/802/ \"数组元素的目标和\")\n\n```c++\n\n题目描述\n\t给定两个升序排序的有序数组 A 和 B，以及一个目标值 x。\n\t数组下标从 0 开始。\n\t请你求出满足 A[i]+B[j]=x 的数对 (i,j)。\n\t数据保证有唯一解。\n\n输入格式\n\t第一行包含三个整数 n,m,x，分别表示 A 的长度，B 的长度以及目标值 x。\n\t第二行包含 n 个整数，表示数组 A。\n\t第三行包含 m 个整数，表示数组 B。\n\n输出格式\n\t共一行，包含两个整数 i 和 j。\n\n数据范围\n\t数组长度不超过 105。\n\t同一数组内元素各不相同。\n\t1≤数组元素≤109\n\t\n输入样例：\n\t4 5 6\n\t1 2 4 7\n\t3 4 6 8 9\n\t\n输出样例：\n\t1 1\n\t\n```\n\n### 代码演示\n```c++\n#include <iostream>\n\nusing namespace std;\n\nconst int N = 1e5 + 10;\n\nint n, m, x;\nint a[N], b[N];\n\nint main()\n{\n    scanf(\"%d%d%d\", &n, &m, &x);\n    for (int i = 0; i < n; i ++ ) scanf(\"%d\", &a[i]);\n    for (int i = 0; i < m; i ++ ) scanf(\"%d\", &b[i]);\n\n    for (int i = 0, j = m - 1; i < n; i ++ )\n    {\n        while (j >= 0 && a[i] + b[j] > x) j -- ;\n        if (j >= 0 && a[i] + b[j] == x) cout << i << ' ' << j << endl;\n    }\n\n    return 0;\n}\n\n作者：yxc\n链接：https://www.acwing.com/activity/content/code/content/40069/\n来源：AcWing\n著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。\n```\n\n- - -\n\n# AcWing 801. 二进制中1的个数   \n\n### 题目来源--[801. 二进制中1的个数](https://www.acwing.com/problem/content/803/ \"判断子序列\")\n\n```c++\n\n题目描述\n\t给定一个长度为 n 的数列，请你求出数列中每个数的二进制表示中 1 的个数。\n\n输入格式\n\t第一行包含整数 n。\n\t第二行包含 n 个整数，表示整个数列。\n\n输出格式\n\t共一行，包含 n 个整数，其中的第 i 个数表示数列中的第 i 个数的二进制表示中 1 的个数。\n\n数据范围\n\t1≤n≤100000,\n\t0≤数列中元素的值≤109\n\t\n输入样例：\n\t5\n\t1 2 3 4 5\n\t\n输出样例：\n\t1 1 2 1 2\n\n\t\n```\n\n### 代码演示\n```c++\n#include <iostream>\n\nusing namespace std;\n\nint main()\n{\n    int n;\n    scanf(\"%d\", &n);\n    while (n -- )\n    {\n        int x, s = 0;\n        scanf(\"%d\", &x);\n\n        for (int i = x; i; i -= i & -i) s ++ ;\n\n        printf(\"%d \", s);\n    }\n\n    return 0;\n}\n```\n\n- - -\n\n# AcWing 802. 区间和   \n \n### 题目来源--[802. 区间和](https://www.acwing.com/problem/content/804/ \"区间和\")\n\n```c++\n\n题目描述\n\t假定有一个无限长的数轴，数轴上每个坐标上的数都是 0。\n\t现在，我们首先进行 n 次操作，每次操作将某一位置 x 上的数加 c。\n\t接下来，进行 m 次询问，每个询问包含两个整数 l 和 r，你需要求出在区间 [l,r] 之间的所有数的和。\n\n输入格式\n\t第一行包含两个整数 n 和 m。\n\t接下来 n 行，每行包含两个整数 x 和 c。\n\t再接下来 m 行，每行包含两个整数 l 和 r。\n\n输出格式\n\t共 m 行，每行输出一个询问中所求的区间内数字和。\n\n数据范围\n\t−109≤x≤109,\n\t1≤n,m≤105,\n\t−109≤l≤r≤109,\n\t−10000≤c≤10000\n\t\n输入样例：\n\t3 3\n\t1 2\n\t3 6\n\t7 5\n\t1 3\n\t4 6\n\t7 8\n\t\n输出样例：\n\t8\n\t0\n\t5\n\n\t\n```\n\n### 代码演示\n```c++\n#include <iostream>\n#include <vector>\n#include <algorithm>\n\nusing namespace std;\n\ntypedef pair<int, int> PII;\n\nconst int N = 300010;\n\nint n, m;\nint a[N], s[N];\n\nvector<int> alls;\nvector<PII> add, query;\n\nint find(int x)\n{\n    int l = 0, r = alls.size() - 1;\n    while (l < r)\n    {\n        int mid = l + r >> 1;\n        if (alls[mid] >= x) r = mid;\n        else l = mid + 1;\n    }\n    return r + 1;\n}\n\nint main()\n{\n    cin >> n >> m;\n    for (int i = 0; i < n; i ++ )\n    {\n        int x, c;\n        cin >> x >> c;\n        add.push_back({x, c});\n\n        alls.push_back(x);\n    }\n\n    for (int i = 0; i < m; i ++ )\n    {\n        int l, r;\n        cin >> l >> r;\n        query.push_back({l, r});\n\n        alls.push_back(l);\n        alls.push_back(r);\n    }\n\n    // 去重\n    sort(alls.begin(), alls.end());\n    alls.erase(unique(alls.begin(), alls.end()), alls.end());\n\n    // 处理插入\n    for (auto item : add)\n    {\n        int x = find(item.first);\n        a[x] += item.second;\n    }\n\n    // 预处理前缀和\n    for (int i = 1; i <= alls.size(); i ++ ) s[i] = s[i - 1] + a[i];\n\n    // 处理询问\n    for (auto item : query)\n    {\n        int l = find(item.first), r = find(item.second);\n        cout << s[r] - s[l - 1] << endl;\n    }\n\n    return 0;\n}\n\n作者：yxc\n链接：https://www.acwing.com/activity/content/code/content/40105/\n来源：AcWing\n著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。\n```\n\n- - -\n\n# AcWing 2816. 判断子序列   \n\n### 题目来源--[2816. 判断子序列](https://www.acwing.com/problem/content/2818/ \"判断子序列\")\n\n```c++\n\n题目描述\n\t给定一个长度为 n 的整数序列 a1,a2,…,an 以及一个长度为 m 的整数序列 b1,b2,…,bm。\n\t请你判断 a 序列是否为 b 序列的子序列。\n\t子序列指序列的一部分项按原有次序排列而得的序列，例如序列 {a1,a3,a5} 是序列 {a1,a2,a3,a4,a5} 的一个子序列。\n\n输入格式\n\t第一行包含两个整数 n,m。\n\t第二行包含 n 个整数，表示 a1,a2,…,an。\n\t第三行包含 m 个整数，表示 b1,b2,…,bm。\n\n输出格式\n\t如果 a 序列是 b 序列的子序列，输出一行 Yes。\n\t否则，输出 No。\n\n数据范围\n\t1≤n≤m≤105,\n\t−109≤ai,bi≤109\n\t\n输入样例：\n\t3 5\n\t1 3 5\n\t1 2 3 4 5\n\t\n输出样例：\n\tYes\n\n\t\n```\n\n### 代码演示\n```c++\n#include <iostream>\n#include <cstring>\n\nusing namespace std;\n\nconst int N = 100010;\n\nint n, m;\nint a[N], b[N];\n\nint main()\n{\n    scanf(\"%d%d\", &n, &m);\n    for (int i = 0; i < n; i ++ ) scanf(\"%d\", &a[i]);\n    for (int i = 0; i < m; i ++ ) scanf(\"%d\", &b[i]);\n\n    int i = 0, j = 0;\n    while (i < n && j < m)\n    {\n        if (a[i] == b[j]) i ++ ;\n        j ++ ;\n    }\n\n    if (i == n) puts(\"Yes\");\n    else puts(\"No\");\n\n    return 0;\n}\n\n作者：yxc\n链接：https://www.acwing.com/activity/content/code/content/589289/\n来源：AcWing\n著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。\n```","slug":"AcWing/算法基础课/1、基础算法/AcWing-785-快速排序","published":1,"updated":"2022-10-06T01:50:07.818Z","comments":1,"layout":"post","photos":[],"link":"","_id":"claryulca000k5ojrgrv058g5","content":"<h1 id=\"AcWing-785-快速排序\"><a href=\"#AcWing-785-快速排序\" class=\"headerlink\" title=\"AcWing 785. 快速排序\"></a>AcWing 785. 快速排序</h1><h3 id=\"题目来源–785-快速排序\"><a href=\"#题目来源–785-快速排序\" class=\"headerlink\" title=\"题目来源–785. 快速排序\"></a>题目来源–<a href=\"https://www.acwing.com/problem/content/787/\" title=\"快速排序\">785. 快速排序</a></h3><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">题目描述：</span><br><span class=\"line\">    给定你一个长度为 n 的整数数列。</span><br><span class=\"line\">    请你使用快速排序对这个数列按照从小到大进行排序。</span><br><span class=\"line\">    并将排好序的数列按顺序输出。</span><br><span class=\"line\"></span><br><span class=\"line\">输入格式</span><br><span class=\"line\">    输入共两行，第一行包含整数 n。</span><br><span class=\"line\">    第二行包含 n 个整数（所有整数均在 <span class=\"number\">1</span>∼<span class=\"number\">109</span> 范围内），表示整个数列。</span><br><span class=\"line\">\t</span><br><span class=\"line\">输出格式</span><br><span class=\"line\">\t输出共一行，包含 n 个整数，表示排好序的数列。</span><br><span class=\"line\"></span><br><span class=\"line\">数据范围</span><br><span class=\"line\">\t<span class=\"number\">1</span>≤n≤<span class=\"number\">100000</span></span><br><span class=\"line\"></span><br><span class=\"line\">输入样例：</span><br><span class=\"line\">    <span class=\"number\">5</span></span><br><span class=\"line\">    <span class=\"number\">3</span> <span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">4</span> <span class=\"number\">5</span></span><br><span class=\"line\"></span><br><span class=\"line\">输出样例：</span><br><span class=\"line\">    <span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span> <span class=\"number\">4</span> <span class=\"number\">5</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"代码演示\"><a href=\"#代码演示\" class=\"headerlink\" title=\"代码演示\"></a>代码演示</h3><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> std;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">const</span> <span class=\"type\">int</span> N = <span class=\"number\">100010</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">int</span> q[N];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">quick_sort</span><span class=\"params\">(<span class=\"type\">int</span> q[], <span class=\"type\">int</span> l, <span class=\"type\">int</span> r)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (l &gt;= r) <span class=\"keyword\">return</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"type\">int</span> i = l - <span class=\"number\">1</span>, j = r + <span class=\"number\">1</span>, x = q[l + r &gt;&gt; <span class=\"number\">1</span>];</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (i &lt; j)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">do</span> i ++ ; <span class=\"keyword\">while</span> (q[i] &lt; x);</span><br><span class=\"line\">        <span class=\"keyword\">do</span> j -- ; <span class=\"keyword\">while</span> (q[j] &gt; x);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (i &lt; j) <span class=\"built_in\">swap</span>(q[i], q[j]);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"built_in\">quick_sort</span>(q, l, j);</span><br><span class=\"line\">    <span class=\"built_in\">quick_sort</span>(q, j + <span class=\"number\">1</span>, r);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> n;</span><br><span class=\"line\">    <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>, &amp;n);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; n; i ++ ) <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>, &amp;q[i]);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"built_in\">quick_sort</span>(q, <span class=\"number\">0</span>, n - <span class=\"number\">1</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; n; i ++ ) <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d &quot;</span>, q[i]);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">作者：yxc</span><br><span class=\"line\">链接：https:<span class=\"comment\">//www.acwing.com/activity/content/code/content/39784/</span></span><br><span class=\"line\">来源：AcWing</span><br><span class=\"line\">著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h1 id=\"AcWing-786-第k个数\"><a href=\"#AcWing-786-第k个数\" class=\"headerlink\" title=\"AcWing 786. 第k个数\"></a>AcWing 786. 第k个数</h1><h3 id=\"题目来源–786-第k个数\"><a href=\"#题目来源–786-第k个数\" class=\"headerlink\" title=\"题目来源–786. 第k个数\"></a>题目来源–<a href=\"https://www.acwing.com/problem/content/788/\" title=\"第k个数\">786. 第k个数</a></h3><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">题目描述</span><br><span class=\"line\">\t给定一个长度为 n 的整数数列，以及一个整数 k，请用快速选择算法求出数列从小到大排序后的第 k 个数。</span><br><span class=\"line\"></span><br><span class=\"line\">输入格式</span><br><span class=\"line\">\t第一行包含两个整数 n 和 k。</span><br><span class=\"line\">\t第二行包含 n 个整数（所有整数均在 <span class=\"number\">1</span>～<span class=\"number\">109</span> 范围内），表示整数数列。</span><br><span class=\"line\"></span><br><span class=\"line\">输出格式</span><br><span class=\"line\">\t输出一个整数，表示数列的第 k 小数。</span><br><span class=\"line\"></span><br><span class=\"line\">数据范围</span><br><span class=\"line\">\t<span class=\"number\">1</span>≤n≤<span class=\"number\">100000</span>,</span><br><span class=\"line\">\t<span class=\"number\">1</span>≤k≤n</span><br><span class=\"line\">输入样例：</span><br><span class=\"line\">\t<span class=\"number\">5</span> <span class=\"number\">3</span></span><br><span class=\"line\">\t<span class=\"number\">2</span> <span class=\"number\">4</span> <span class=\"number\">1</span> <span class=\"number\">5</span> <span class=\"number\">3</span></span><br><span class=\"line\">输出样例：</span><br><span class=\"line\">\t</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"代码演示-1\"><a href=\"#代码演示-1\" class=\"headerlink\" title=\"代码演示\"></a>代码演示</h3><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> std;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">const</span> <span class=\"type\">int</span> N = <span class=\"number\">100010</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">int</span> q[N];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">quick_sort</span><span class=\"params\">(<span class=\"type\">int</span> q[], <span class=\"type\">int</span> l, <span class=\"type\">int</span> r, <span class=\"type\">int</span> k)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (l &gt;= r) <span class=\"keyword\">return</span> q[l];</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"type\">int</span> i = l - <span class=\"number\">1</span>, j = r + <span class=\"number\">1</span>, x = q[l + r &gt;&gt; <span class=\"number\">1</span>];</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (i &lt; j)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">do</span> i ++ ; <span class=\"keyword\">while</span> (q[i] &lt; x);</span><br><span class=\"line\">        <span class=\"keyword\">do</span> j -- ; <span class=\"keyword\">while</span> (q[j] &gt; x);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (i &lt; j) <span class=\"built_in\">swap</span>(q[i], q[j]);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (j - l + <span class=\"number\">1</span> &gt;= k) <span class=\"keyword\">return</span> <span class=\"built_in\">quick_sort</span>(q, l, j, k);</span><br><span class=\"line\">    <span class=\"keyword\">else</span> <span class=\"keyword\">return</span> <span class=\"built_in\">quick_sort</span>(q, j + <span class=\"number\">1</span>, r, k - (j - l + <span class=\"number\">1</span>));</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> n, k;</span><br><span class=\"line\">    <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d%d&quot;</span>, &amp;n, &amp;k);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; n; i ++ ) <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>, &amp;q[i]);</span><br><span class=\"line\"></span><br><span class=\"line\">    cout &lt;&lt; <span class=\"built_in\">quick_sort</span>(q, <span class=\"number\">0</span>, n - <span class=\"number\">1</span>, k) &lt;&lt; endl;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">作者：yxc</span><br><span class=\"line\">链接：https:<span class=\"comment\">//www.acwing.com/activity/content/code/content/39785/</span></span><br><span class=\"line\">来源：AcWing</span><br><span class=\"line\">著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h1 id=\"AcWing-787-归并排序\"><a href=\"#AcWing-787-归并排序\" class=\"headerlink\" title=\"AcWing 787. 归并排序\"></a>AcWing 787. 归并排序</h1><h3 id=\"题目来源–787-归并排序\"><a href=\"#题目来源–787-归并排序\" class=\"headerlink\" title=\"题目来源–787. 归并排序\"></a>题目来源–<a href=\"https://www.acwing.com/problem/content/789/\" title=\"归并排序\">787. 归并排序</a></h3><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">题目描述</span><br><span class=\"line\">\t给定你一个长度为 n 的整数数列。</span><br><span class=\"line\">\t请你使用归并排序对这个数列按照从小到大进行排序。</span><br><span class=\"line\">\t并将排好序的数列按顺序输出。</span><br><span class=\"line\"></span><br><span class=\"line\">输入格式</span><br><span class=\"line\">\t输入共两行，第一行包含整数 n。</span><br><span class=\"line\">\t第二行包含 n 个整数（所有整数均在 <span class=\"number\">1</span>∼<span class=\"number\">109</span> 范围内），表示整个数列。</span><br><span class=\"line\"></span><br><span class=\"line\">输出格式</span><br><span class=\"line\">\t输出共一行，包含 n 个整数，表示排好序的数列。</span><br><span class=\"line\"></span><br><span class=\"line\">数据范围</span><br><span class=\"line\">\t<span class=\"number\">1</span>≤n≤<span class=\"number\">100000</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输入样例：</span><br><span class=\"line\">\t<span class=\"number\">5</span></span><br><span class=\"line\">\t<span class=\"number\">3</span> <span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">4</span> <span class=\"number\">5</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输出样例：</span><br><span class=\"line\">\t<span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span> <span class=\"number\">4</span> <span class=\"number\">5</span></span><br><span class=\"line\">\t</span><br></pre></td></tr></table></figure>\n<h3 id=\"代码演示-2\"><a href=\"#代码演示-2\" class=\"headerlink\" title=\"代码演示\"></a>代码演示</h3><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> std;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">const</span> <span class=\"type\">int</span> N = <span class=\"number\">1e5</span> + <span class=\"number\">10</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">int</span> a[N], tmp[N];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">merge_sort</span><span class=\"params\">(<span class=\"type\">int</span> q[], <span class=\"type\">int</span> l, <span class=\"type\">int</span> r)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (l &gt;= r) <span class=\"keyword\">return</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"type\">int</span> mid = l + r &gt;&gt; <span class=\"number\">1</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"built_in\">merge_sort</span>(q, l, mid), <span class=\"built_in\">merge_sort</span>(q, mid + <span class=\"number\">1</span>, r);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"type\">int</span> k = <span class=\"number\">0</span>, i = l, j = mid + <span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (i &lt;= mid &amp;&amp; j &lt;= r)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (q[i] &lt;= q[j]) tmp[k ++ ] = q[i ++ ];</span><br><span class=\"line\">        <span class=\"keyword\">else</span> tmp[k ++ ] = q[j ++ ];</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (i &lt;= mid) tmp[k ++ ] = q[i ++ ];</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (j &lt;= r) tmp[k ++ ] = q[j ++ ];</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (i = l, j = <span class=\"number\">0</span>; i &lt;= r; i ++, j ++ ) q[i] = tmp[j];</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> n;</span><br><span class=\"line\">    <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>, &amp;n);</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; n; i ++ ) <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>, &amp;a[i]);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"built_in\">merge_sort</span>(a, <span class=\"number\">0</span>, n - <span class=\"number\">1</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; n; i ++ ) <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d &quot;</span>, a[i]);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">作者：yxc</span><br><span class=\"line\">链接：https:<span class=\"comment\">//www.acwing.com/activity/content/code/content/39790/</span></span><br><span class=\"line\">来源：AcWing</span><br><span class=\"line\">著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</span><br></pre></td></tr></table></figure>\n<hr>\n<h1 id=\"AcWing-788-逆序对的数量\"><a href=\"#AcWing-788-逆序对的数量\" class=\"headerlink\" title=\"AcWing 788. 逆序对的数量\"></a>AcWing 788. 逆序对的数量</h1><h3 id=\"题目来源–788-逆序对的数量\"><a href=\"#题目来源–788-逆序对的数量\" class=\"headerlink\" title=\"题目来源–788. 逆序对的数量\"></a>题目来源–<a href=\"https://www.acwing.com/problem/content/790/\" title=\"逆序对的数量 \">788. 逆序对的数量</a></h3><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">题目描述</span><br><span class=\"line\">\t给定一个长度为 n 的整数数列，请你计算数列中的逆序对的数量。</span><br><span class=\"line\">\t逆序对的定义如下：对于数列的第 i 个和第 j 个元素，如果满足 i&lt;j 且 a[i]&gt;a[j]，则其为一个逆序对；否则不是。</span><br><span class=\"line\"></span><br><span class=\"line\">输入格式</span><br><span class=\"line\">\t第一行包含整数 n，表示数列的长度。</span><br><span class=\"line\">\t第二行包含 n 个整数，表示整个数列。</span><br><span class=\"line\"></span><br><span class=\"line\">输出格式</span><br><span class=\"line\">\t输出一个整数，表示逆序对的个数。</span><br><span class=\"line\"></span><br><span class=\"line\">数据范围</span><br><span class=\"line\">\t<span class=\"number\">1</span>≤n≤<span class=\"number\">100000</span>，</span><br><span class=\"line\">\t</span><br><span class=\"line\">数列中的元素的取值范围 [<span class=\"number\">1</span>,<span class=\"number\">109</span>]。</span><br><span class=\"line\"></span><br><span class=\"line\">输入样例：</span><br><span class=\"line\">\t<span class=\"number\">6</span></span><br><span class=\"line\">\t<span class=\"number\">2</span> <span class=\"number\">3</span> <span class=\"number\">4</span> <span class=\"number\">5</span> <span class=\"number\">6</span> <span class=\"number\">1</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输出样例：</span><br><span class=\"line\">\t<span class=\"number\">5</span></span><br><span class=\"line\">\t</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"代码演示-3\"><a href=\"#代码演示-3\" class=\"headerlink\" title=\"代码演示\"></a>代码演示</h3><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> std;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">typedef</span> <span class=\"type\">long</span> <span class=\"type\">long</span> LL;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">const</span> <span class=\"type\">int</span> N = <span class=\"number\">1e5</span> + <span class=\"number\">10</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">int</span> a[N], tmp[N];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\">LL <span class=\"title\">merge_sort</span><span class=\"params\">(<span class=\"type\">int</span> q[], <span class=\"type\">int</span> l, <span class=\"type\">int</span> r)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (l &gt;= r) <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"type\">int</span> mid = l + r &gt;&gt; <span class=\"number\">1</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    LL res = <span class=\"built_in\">merge_sort</span>(q, l, mid) + <span class=\"built_in\">merge_sort</span>(q, mid + <span class=\"number\">1</span>, r);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"type\">int</span> k = <span class=\"number\">0</span>, i = l, j = mid + <span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (i &lt;= mid &amp;&amp; j &lt;= r)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (q[i] &lt;= q[j]) tmp[k ++ ] = q[i ++ ];</span><br><span class=\"line\">        <span class=\"keyword\">else</span></span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            res += mid - i + <span class=\"number\">1</span>;</span><br><span class=\"line\">            tmp[k ++ ] = q[j ++ ];</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (i &lt;= mid) tmp[k ++ ] = q[i ++ ];</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (j &lt;= r) tmp[k ++ ] = q[j ++ ];</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (i = l, j = <span class=\"number\">0</span>; i &lt;= r; i ++, j ++ ) q[i] = tmp[j];</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> res;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> n;</span><br><span class=\"line\">    <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>, &amp;n);</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; n; i ++ ) <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>, &amp;a[i]);</span><br><span class=\"line\"></span><br><span class=\"line\">    cout &lt;&lt; <span class=\"built_in\">merge_sort</span>(a, <span class=\"number\">0</span>, n - <span class=\"number\">1</span>) &lt;&lt; endl;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">作者：yxc</span><br><span class=\"line\">链接：https:<span class=\"comment\">//www.acwing.com/activity/content/code/content/39791/</span></span><br><span class=\"line\">来源：AcWing</span><br><span class=\"line\">著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h1 id=\"AcWing-789-数的范围\"><a href=\"#AcWing-789-数的范围\" class=\"headerlink\" title=\"AcWing 789. 数的范围\"></a>AcWing 789. 数的范围</h1><h3 id=\"题目来源–789-数的范围\"><a href=\"#题目来源–789-数的范围\" class=\"headerlink\" title=\"题目来源–789. 数的范围\"></a>题目来源–<a href=\"https://www.acwing.com/problem/content/791/\" title=\"数的范围  \">789. 数的范围</a></h3><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">题目描述</span><br><span class=\"line\">\t给定一个按照升序排列的长度为 n 的整数数组，以及 q 个查询。</span><br><span class=\"line\">\t对于每个查询，返回一个元素 k 的起始位置和终止位置（位置从 <span class=\"number\">0</span> 开始计数）。</span><br><span class=\"line\">\t如果数组中不存在该元素，则返回 <span class=\"number\">-1</span> <span class=\"number\">-1</span>。</span><br><span class=\"line\"></span><br><span class=\"line\">输入格式</span><br><span class=\"line\">\t第一行包含整数 n 和 q，表示数组长度和询问个数。</span><br><span class=\"line\">\t第二行包含 n 个整数（均在 <span class=\"number\">1</span>～<span class=\"number\">10000</span> 范围内），表示完整数组。</span><br><span class=\"line\">\t接下来 q 行，每行包含一个整数 k，表示一个询问元素。</span><br><span class=\"line\"></span><br><span class=\"line\">输出格式</span><br><span class=\"line\">\t共 q 行，每行包含两个整数，表示所求元素的起始位置和终止位置。</span><br><span class=\"line\">\t如果数组中不存在该元素，则返回 <span class=\"number\">-1</span> <span class=\"number\">-1</span>。</span><br><span class=\"line\"></span><br><span class=\"line\">数据范围</span><br><span class=\"line\">\t<span class=\"number\">1</span>≤n≤<span class=\"number\">100000</span></span><br><span class=\"line\">\t<span class=\"number\">1</span>≤q≤<span class=\"number\">10000</span></span><br><span class=\"line\">\t<span class=\"number\">1</span>≤k≤<span class=\"number\">10000</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输入样例：</span><br><span class=\"line\">\t<span class=\"number\">6</span> <span class=\"number\">3</span></span><br><span class=\"line\">\t<span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">2</span> <span class=\"number\">3</span> <span class=\"number\">3</span> <span class=\"number\">4</span></span><br><span class=\"line\">\t<span class=\"number\">3</span></span><br><span class=\"line\">\t<span class=\"number\">4</span></span><br><span class=\"line\">\t<span class=\"number\">5</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输出样例：</span><br><span class=\"line\">\t<span class=\"number\">3</span> <span class=\"number\">4</span></span><br><span class=\"line\">\t<span class=\"number\">5</span> <span class=\"number\">5</span></span><br><span class=\"line\">\t<span class=\"number\">-1</span> <span class=\"number\">-1</span></span><br><span class=\"line\">\t</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"代码演示-4\"><a href=\"#代码演示-4\" class=\"headerlink\" title=\"代码演示\"></a>代码演示</h3><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> std;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">const</span> <span class=\"type\">int</span> N = <span class=\"number\">100010</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">int</span> n, m;</span><br><span class=\"line\"><span class=\"type\">int</span> q[N];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d%d&quot;</span>, &amp;n, &amp;m);</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; n; i ++ ) <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>, &amp;q[i]);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">while</span> (m -- )</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"type\">int</span> x;</span><br><span class=\"line\">        <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>, &amp;x);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"type\">int</span> l = <span class=\"number\">0</span>, r = n - <span class=\"number\">1</span>;</span><br><span class=\"line\">        <span class=\"keyword\">while</span> (l &lt; r)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"type\">int</span> mid = l + r &gt;&gt; <span class=\"number\">1</span>;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (q[mid] &gt;= x) r = mid;</span><br><span class=\"line\">            <span class=\"keyword\">else</span> l = mid + <span class=\"number\">1</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (q[l] != x) cout &lt;&lt; <span class=\"string\">&quot;-1 -1&quot;</span> &lt;&lt; endl;</span><br><span class=\"line\">        <span class=\"keyword\">else</span></span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            cout &lt;&lt; l &lt;&lt; <span class=\"string\">&#x27; &#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"type\">int</span> l = <span class=\"number\">0</span>, r = n - <span class=\"number\">1</span>;</span><br><span class=\"line\">            <span class=\"keyword\">while</span> (l &lt; r)</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                <span class=\"type\">int</span> mid = l + r + <span class=\"number\">1</span> &gt;&gt; <span class=\"number\">1</span>;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (q[mid] &lt;= x) l = mid;</span><br><span class=\"line\">                <span class=\"keyword\">else</span> r = mid - <span class=\"number\">1</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">            cout &lt;&lt; l &lt;&lt; endl;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">作者：yxc</span><br><span class=\"line\">链接：https:<span class=\"comment\">//www.acwing.com/activity/content/code/content/39787/</span></span><br><span class=\"line\">来源：AcWing</span><br><span class=\"line\">著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h1 id=\"AcWing-790-数的三次方根\"><a href=\"#AcWing-790-数的三次方根\" class=\"headerlink\" title=\"AcWing 790. 数的三次方根\"></a>AcWing 790. 数的三次方根</h1><h3 id=\"题目来源–790-数的三次方根\"><a href=\"#题目来源–790-数的三次方根\" class=\"headerlink\" title=\"题目来源–790. 数的三次方根\"></a>题目来源–<a href=\"https://www.acwing.com/problem/content/792/\" title=\"数的三次方根  \">790. 数的三次方根</a></h3><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">题目描述</span><br><span class=\"line\">\t给定一个浮点数 n，求它的三次方根。</span><br><span class=\"line\"></span><br><span class=\"line\">输入格式</span><br><span class=\"line\">\t共一行，包含一个浮点数 n。</span><br><span class=\"line\"></span><br><span class=\"line\">输出格式</span><br><span class=\"line\">\t共一行，包含一个浮点数，表示问题的解。</span><br><span class=\"line\">\t注意，结果保留 <span class=\"number\">6</span> 位小数。</span><br><span class=\"line\"></span><br><span class=\"line\">数据范围</span><br><span class=\"line\">\t<span class=\"number\">-10000</span>≤n≤<span class=\"number\">10000</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输入样例：</span><br><span class=\"line\">\t<span class=\"number\">1000.00</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输出样例：</span><br><span class=\"line\">\t<span class=\"number\">10.000000</span></span><br><span class=\"line\">\t</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"代码演示-5\"><a href=\"#代码演示-5\" class=\"headerlink\" title=\"代码演示\"></a>代码演示</h3><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> std;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"type\">double</span> x;</span><br><span class=\"line\">    cin &gt;&gt; x;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"type\">double</span> l = <span class=\"number\">-100</span>, r = <span class=\"number\">100</span>;</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (r - l &gt; <span class=\"number\">1e-8</span>)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"type\">double</span> mid = (l + r) / <span class=\"number\">2</span>;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (mid * mid * mid &gt;= x) r = mid;</span><br><span class=\"line\">        <span class=\"keyword\">else</span> l = mid;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%.6lf\\n&quot;</span>, l);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h1 id=\"AcWing-791-高精度加法\"><a href=\"#AcWing-791-高精度加法\" class=\"headerlink\" title=\"AcWing 791. 高精度加法\"></a>AcWing 791. 高精度加法</h1><h3 id=\"题目来源–791-高精度加法\"><a href=\"#题目来源–791-高精度加法\" class=\"headerlink\" title=\"题目来源–791.高精度加法\"></a>题目来源–<a href=\"https://www.acwing.com/problem/content/793/%22%E9%AB%98%E7%B2%BE%E5%BA%A6%E5%8A%A0%E6%B3%95%22\">791.高精度加法</a></h3><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">题目描述</span><br><span class=\"line\">\t给定两个正整数（不含前导 <span class=\"number\">0</span>），计算它们的和。</span><br><span class=\"line\"></span><br><span class=\"line\">输入格式</span><br><span class=\"line\">\t共两行，每行包含一个整数。</span><br><span class=\"line\"></span><br><span class=\"line\">输出格式</span><br><span class=\"line\">\t共一行，包含所求的和。</span><br><span class=\"line\"></span><br><span class=\"line\">数据范围</span><br><span class=\"line\">\t<span class=\"number\">1</span>≤整数长度≤<span class=\"number\">100000</span></span><br><span class=\"line\">输入样例：</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"number\">12</span></span><br><span class=\"line\">\t<span class=\"number\">23</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输出样例：</span><br><span class=\"line\">\t<span class=\"number\">35</span></span><br><span class=\"line\">\t</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"不圧位代码\"><a href=\"#不圧位代码\" class=\"headerlink\" title=\"不圧位代码\"></a>不圧位代码</h2><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;vector&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> std;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\">vector&lt;<span class=\"type\">int</span>&gt; <span class=\"title\">add</span><span class=\"params\">(vector&lt;<span class=\"type\">int</span>&gt; &amp;A, vector&lt;<span class=\"type\">int</span>&gt; &amp;B)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (A.<span class=\"built_in\">size</span>() &lt; B.<span class=\"built_in\">size</span>()) <span class=\"keyword\">return</span> <span class=\"built_in\">add</span>(B, A);</span><br><span class=\"line\"></span><br><span class=\"line\">    vector&lt;<span class=\"type\">int</span>&gt; C;</span><br><span class=\"line\">    <span class=\"type\">int</span> t = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; A.<span class=\"built_in\">size</span>(); i ++ )</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        t += A[i];</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (i &lt; B.<span class=\"built_in\">size</span>()) t += B[i];</span><br><span class=\"line\">        C.<span class=\"built_in\">push_back</span>(t % <span class=\"number\">10</span>);</span><br><span class=\"line\">        t /= <span class=\"number\">10</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (t) C.<span class=\"built_in\">push_back</span>(t);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> C;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    string a, b;</span><br><span class=\"line\">    vector&lt;<span class=\"type\">int</span>&gt; A, B;</span><br><span class=\"line\">    cin &gt;&gt; a &gt;&gt; b;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = a.<span class=\"built_in\">size</span>() - <span class=\"number\">1</span>; i &gt;= <span class=\"number\">0</span>; i -- ) A.<span class=\"built_in\">push_back</span>(a[i] - <span class=\"string\">&#x27;0&#x27;</span>);</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = b.<span class=\"built_in\">size</span>() - <span class=\"number\">1</span>; i &gt;= <span class=\"number\">0</span>; i -- ) B.<span class=\"built_in\">push_back</span>(b[i] - <span class=\"string\">&#x27;0&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">auto</span> C = <span class=\"built_in\">add</span>(A, B);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = C.<span class=\"built_in\">size</span>() - <span class=\"number\">1</span>; i &gt;= <span class=\"number\">0</span>; i -- ) cout &lt;&lt; C[i];</span><br><span class=\"line\">    cout &lt;&lt; endl;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">作者：yxc</span><br><span class=\"line\">链接：https:<span class=\"comment\">//www.acwing.com/activity/content/code/content/39792/</span></span><br><span class=\"line\">来源：AcWing</span><br><span class=\"line\">著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"压9位的代码\"><a href=\"#压9位的代码\" class=\"headerlink\" title=\"压9位的代码\"></a>压9位的代码</h2><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;vector&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> std;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">const</span> <span class=\"type\">int</span> base = <span class=\"number\">1000000000</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\">vector&lt;<span class=\"type\">int</span>&gt; <span class=\"title\">add</span><span class=\"params\">(vector&lt;<span class=\"type\">int</span>&gt; &amp;A, vector&lt;<span class=\"type\">int</span>&gt; &amp;B)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (A.<span class=\"built_in\">size</span>() &lt; B.<span class=\"built_in\">size</span>()) <span class=\"keyword\">return</span> <span class=\"built_in\">add</span>(B, A);</span><br><span class=\"line\"></span><br><span class=\"line\">    vector&lt;<span class=\"type\">int</span>&gt; C;</span><br><span class=\"line\">    <span class=\"type\">int</span> t = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; A.<span class=\"built_in\">size</span>(); i ++ )</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        t += A[i];</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (i &lt; B.<span class=\"built_in\">size</span>()) t += B[i];</span><br><span class=\"line\">        C.<span class=\"built_in\">push_back</span>(t % base);</span><br><span class=\"line\">        t /= base;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (t) C.<span class=\"built_in\">push_back</span>(t);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> C;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    string a, b;</span><br><span class=\"line\">    vector&lt;<span class=\"type\">int</span>&gt; A, B;</span><br><span class=\"line\">    cin &gt;&gt; a &gt;&gt; b;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = a.<span class=\"built_in\">size</span>() - <span class=\"number\">1</span>, s = <span class=\"number\">0</span>, j = <span class=\"number\">0</span>, t = <span class=\"number\">1</span>; i &gt;= <span class=\"number\">0</span>; i -- )</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        s += (a[i] - <span class=\"string\">&#x27;0&#x27;</span>) * t;</span><br><span class=\"line\">        j ++, t *= <span class=\"number\">10</span>;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (j == <span class=\"number\">9</span> || i == <span class=\"number\">0</span>)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            A.<span class=\"built_in\">push_back</span>(s);</span><br><span class=\"line\">            s = j = <span class=\"number\">0</span>;</span><br><span class=\"line\">            t = <span class=\"number\">1</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = b.<span class=\"built_in\">size</span>() - <span class=\"number\">1</span>, s = <span class=\"number\">0</span>, j = <span class=\"number\">0</span>, t = <span class=\"number\">1</span>; i &gt;= <span class=\"number\">0</span>; i -- )</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        s += (b[i] - <span class=\"string\">&#x27;0&#x27;</span>) * t;</span><br><span class=\"line\">        j ++, t *= <span class=\"number\">10</span>;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (j == <span class=\"number\">9</span> || i == <span class=\"number\">0</span>)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            B.<span class=\"built_in\">push_back</span>(s);</span><br><span class=\"line\">            s = j = <span class=\"number\">0</span>;</span><br><span class=\"line\">            t = <span class=\"number\">1</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">auto</span> C = <span class=\"built_in\">add</span>(A, B);</span><br><span class=\"line\"></span><br><span class=\"line\">    cout &lt;&lt; C.<span class=\"built_in\">back</span>();</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = C.<span class=\"built_in\">size</span>() - <span class=\"number\">2</span>; i &gt;= <span class=\"number\">0</span>; i -- ) <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%09d&quot;</span>, C[i]);</span><br><span class=\"line\">    cout &lt;&lt; endl;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">作者：yxc</span><br><span class=\"line\">链接：https:<span class=\"comment\">//www.acwing.com/activity/content/code/content/39792/</span></span><br><span class=\"line\">来源：AcWing</span><br><span class=\"line\">著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h1 id=\"AcWing-792-高精度减法\"><a href=\"#AcWing-792-高精度减法\" class=\"headerlink\" title=\"AcWing 792. 高精度减法\"></a>AcWing 792. 高精度减法</h1><h3 id=\"题目来源–792-高精度减法\"><a href=\"#题目来源–792-高精度减法\" class=\"headerlink\" title=\"题目来源–792. 高精度减法 \"></a>题目来源–<a href=\"https://www.acwing.com/problem/content/794/\" title=\"高精度减法\">792. 高精度减法 </a></h3><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">题目描述</span><br><span class=\"line\">\t给定两个正整数（不含前导 <span class=\"number\">0</span>），计算它们的差，计算结果可能为负数。</span><br><span class=\"line\"></span><br><span class=\"line\">输入格式</span><br><span class=\"line\">\t共两行，每行包含一个整数。</span><br><span class=\"line\"></span><br><span class=\"line\">输出格式</span><br><span class=\"line\">\t共一行，包含所求的差。</span><br><span class=\"line\"></span><br><span class=\"line\">数据范围</span><br><span class=\"line\">\t<span class=\"number\">1</span>≤整数长度≤<span class=\"number\">105</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输入样例：</span><br><span class=\"line\">\t<span class=\"number\">32</span></span><br><span class=\"line\">\t<span class=\"number\">11</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输出样例：</span><br><span class=\"line\">\t<span class=\"number\">21</span></span><br><span class=\"line\">\t</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"代码演示-6\"><a href=\"#代码演示-6\" class=\"headerlink\" title=\"代码演示\"></a>代码演示</h3><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;vector&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> std;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">bool</span> <span class=\"title\">cmp</span><span class=\"params\">(vector&lt;<span class=\"type\">int</span>&gt; &amp;A, vector&lt;<span class=\"type\">int</span>&gt; &amp;B)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (A.<span class=\"built_in\">size</span>() != B.<span class=\"built_in\">size</span>()) <span class=\"keyword\">return</span> A.<span class=\"built_in\">size</span>() &gt; B.<span class=\"built_in\">size</span>();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = A.<span class=\"built_in\">size</span>() - <span class=\"number\">1</span>; i &gt;= <span class=\"number\">0</span>; i -- )</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (A[i] != B[i])</span><br><span class=\"line\">            <span class=\"keyword\">return</span> A[i] &gt; B[i];</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\">vector&lt;<span class=\"type\">int</span>&gt; <span class=\"title\">sub</span><span class=\"params\">(vector&lt;<span class=\"type\">int</span>&gt; &amp;A, vector&lt;<span class=\"type\">int</span>&gt; &amp;B)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    vector&lt;<span class=\"type\">int</span>&gt; C;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>, t = <span class=\"number\">0</span>; i &lt; A.<span class=\"built_in\">size</span>(); i ++ )</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        t = A[i] - t;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (i &lt; B.<span class=\"built_in\">size</span>()) t -= B[i];</span><br><span class=\"line\">        C.<span class=\"built_in\">push_back</span>((t + <span class=\"number\">10</span>) % <span class=\"number\">10</span>);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (t &lt; <span class=\"number\">0</span>) t = <span class=\"number\">1</span>;</span><br><span class=\"line\">        <span class=\"keyword\">else</span> t = <span class=\"number\">0</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">while</span> (C.<span class=\"built_in\">size</span>() &gt; <span class=\"number\">1</span> &amp;&amp; C.<span class=\"built_in\">back</span>() == <span class=\"number\">0</span>) C.<span class=\"built_in\">pop_back</span>();</span><br><span class=\"line\">    <span class=\"keyword\">return</span> C;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    string a, b;</span><br><span class=\"line\">    vector&lt;<span class=\"type\">int</span>&gt; A, B;</span><br><span class=\"line\">    cin &gt;&gt; a &gt;&gt; b;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = a.<span class=\"built_in\">size</span>() - <span class=\"number\">1</span>; i &gt;= <span class=\"number\">0</span>; i -- ) A.<span class=\"built_in\">push_back</span>(a[i] - <span class=\"string\">&#x27;0&#x27;</span>);</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = b.<span class=\"built_in\">size</span>() - <span class=\"number\">1</span>; i &gt;= <span class=\"number\">0</span>; i -- ) B.<span class=\"built_in\">push_back</span>(b[i] - <span class=\"string\">&#x27;0&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    vector&lt;<span class=\"type\">int</span>&gt; C;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"built_in\">cmp</span>(A, B)) C = <span class=\"built_in\">sub</span>(A, B);</span><br><span class=\"line\">    <span class=\"keyword\">else</span> C = <span class=\"built_in\">sub</span>(B, A), cout &lt;&lt; <span class=\"string\">&#x27;-&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = C.<span class=\"built_in\">size</span>() - <span class=\"number\">1</span>; i &gt;= <span class=\"number\">0</span>; i -- ) cout &lt;&lt; C[i];</span><br><span class=\"line\">    cout &lt;&lt; endl;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">作者：yxc</span><br><span class=\"line\">链接：https:<span class=\"comment\">//www.acwing.com/activity/content/code/content/39793/</span></span><br><span class=\"line\">来源：AcWing</span><br><span class=\"line\">著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h1 id=\"AcWing-793-高精度乘法\"><a href=\"#AcWing-793-高精度乘法\" class=\"headerlink\" title=\"AcWing 793. 高精度乘法\"></a>AcWing 793. 高精度乘法</h1><h3 id=\"题目来源–793-高精度乘法\"><a href=\"#题目来源–793-高精度乘法\" class=\"headerlink\" title=\"题目来源–793. 高精度乘法\"></a>题目来源–<a href=\"https://www.acwing.com/problem/content/795/\" title=\"高精度乘法\">793. 高精度乘法</a></h3><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">题目描述</span><br><span class=\"line\">\t给定两个非负整数（不含前导 <span class=\"number\">0</span>） A 和 B，请你计算 A×B 的值。</span><br><span class=\"line\"></span><br><span class=\"line\">输入格式</span><br><span class=\"line\">\t共两行，第一行包含整数 A，第二行包含整数 B。</span><br><span class=\"line\"></span><br><span class=\"line\">输出格式</span><br><span class=\"line\">\t共一行，包含 A×B 的值。</span><br><span class=\"line\"></span><br><span class=\"line\">数据范围</span><br><span class=\"line\">\t<span class=\"number\">1</span>≤A的长度≤<span class=\"number\">100000</span>,</span><br><span class=\"line\">\t<span class=\"number\">0</span>≤B≤<span class=\"number\">10000</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输入样例：</span><br><span class=\"line\">\t<span class=\"number\">2</span></span><br><span class=\"line\">\t<span class=\"number\">3</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输出样例：</span><br><span class=\"line\">\t<span class=\"number\">6</span></span><br><span class=\"line\">\t</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"代码演示-7\"><a href=\"#代码演示-7\" class=\"headerlink\" title=\"代码演示\"></a>代码演示</h3><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;vector&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> std;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\">vector&lt;<span class=\"type\">int</span>&gt; <span class=\"title\">mul</span><span class=\"params\">(vector&lt;<span class=\"type\">int</span>&gt; &amp;A, <span class=\"type\">int</span> b)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    vector&lt;<span class=\"type\">int</span>&gt; C;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"type\">int</span> t = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; A.<span class=\"built_in\">size</span>() || t; i ++ )</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (i &lt; A.<span class=\"built_in\">size</span>()) t += A[i] * b;</span><br><span class=\"line\">        C.<span class=\"built_in\">push_back</span>(t % <span class=\"number\">10</span>);</span><br><span class=\"line\">        t /= <span class=\"number\">10</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">while</span> (C.<span class=\"built_in\">size</span>() &gt; <span class=\"number\">1</span> &amp;&amp; C.<span class=\"built_in\">back</span>() == <span class=\"number\">0</span>) C.<span class=\"built_in\">pop_back</span>();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> C;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    string a;</span><br><span class=\"line\">    <span class=\"type\">int</span> b;</span><br><span class=\"line\"></span><br><span class=\"line\">    cin &gt;&gt; a &gt;&gt; b;</span><br><span class=\"line\"></span><br><span class=\"line\">    vector&lt;<span class=\"type\">int</span>&gt; A;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = a.<span class=\"built_in\">size</span>() - <span class=\"number\">1</span>; i &gt;= <span class=\"number\">0</span>; i -- ) A.<span class=\"built_in\">push_back</span>(a[i] - <span class=\"string\">&#x27;0&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">auto</span> C = <span class=\"built_in\">mul</span>(A, b);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = C.<span class=\"built_in\">size</span>() - <span class=\"number\">1</span>; i &gt;= <span class=\"number\">0</span>; i -- ) <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d&quot;</span>, C[i]);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">作者：yxc</span><br><span class=\"line\">链接：https:<span class=\"comment\">//www.acwing.com/activity/content/code/content/39794/</span></span><br><span class=\"line\">来源：AcWing</span><br><span class=\"line\">著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h1 id=\"AcWing-794-高精度除法\"><a href=\"#AcWing-794-高精度除法\" class=\"headerlink\" title=\"AcWing 794. 高精度除法\"></a>AcWing 794. 高精度除法</h1><h3 id=\"题目来源–794-高精度除法\"><a href=\"#题目来源–794-高精度除法\" class=\"headerlink\" title=\"题目来源–794. 高精度除法\"></a>题目来源–<a href=\"https://www.acwing.com/problem/content/796/\" title=\"高精度除法\">794. 高精度除法</a></h3><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">题目描述</span><br><span class=\"line\">\t给定两个非负整数（不含前导 <span class=\"number\">0</span>） A，B，请你计算 A/B 的商和余数。</span><br><span class=\"line\"></span><br><span class=\"line\">输入格式</span><br><span class=\"line\">\t共两行，第一行包含整数 A，第二行包含整数 B。</span><br><span class=\"line\"></span><br><span class=\"line\">输出格式</span><br><span class=\"line\">\t共两行，第一行输出所求的商，第二行输出所求余数。</span><br><span class=\"line\"></span><br><span class=\"line\">数据范围</span><br><span class=\"line\">\t<span class=\"number\">1</span>≤A的长度≤<span class=\"number\">100000</span>,</span><br><span class=\"line\">\t<span class=\"number\">1</span>≤B≤<span class=\"number\">10000</span>,</span><br><span class=\"line\">\tB 一定不为 <span class=\"number\">0</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输入样例：</span><br><span class=\"line\">\t<span class=\"number\">7</span></span><br><span class=\"line\">\t<span class=\"number\">2</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输出样例：</span><br><span class=\"line\">\t<span class=\"number\">3</span></span><br><span class=\"line\">\t<span class=\"number\">1</span></span><br><span class=\"line\">\t</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"代码演示-8\"><a href=\"#代码演示-8\" class=\"headerlink\" title=\"代码演示\"></a>代码演示</h3><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;vector&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;algorithm&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> std;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\">vector&lt;<span class=\"type\">int</span>&gt; <span class=\"title\">div</span><span class=\"params\">(vector&lt;<span class=\"type\">int</span>&gt; &amp;A, <span class=\"type\">int</span> b, <span class=\"type\">int</span> &amp;r)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    vector&lt;<span class=\"type\">int</span>&gt; C;</span><br><span class=\"line\">    r = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = A.<span class=\"built_in\">size</span>() - <span class=\"number\">1</span>; i &gt;= <span class=\"number\">0</span>; i -- )</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        r = r * <span class=\"number\">10</span> + A[i];</span><br><span class=\"line\">        C.<span class=\"built_in\">push_back</span>(r / b);</span><br><span class=\"line\">        r %= b;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"built_in\">reverse</span>(C.<span class=\"built_in\">begin</span>(), C.<span class=\"built_in\">end</span>());</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (C.<span class=\"built_in\">size</span>() &gt; <span class=\"number\">1</span> &amp;&amp; C.<span class=\"built_in\">back</span>() == <span class=\"number\">0</span>) C.<span class=\"built_in\">pop_back</span>();</span><br><span class=\"line\">    <span class=\"keyword\">return</span> C;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    string a;</span><br><span class=\"line\">    vector&lt;<span class=\"type\">int</span>&gt; A;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"type\">int</span> B;</span><br><span class=\"line\">    cin &gt;&gt; a &gt;&gt; B;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = a.<span class=\"built_in\">size</span>() - <span class=\"number\">1</span>; i &gt;= <span class=\"number\">0</span>; i -- ) A.<span class=\"built_in\">push_back</span>(a[i] - <span class=\"string\">&#x27;0&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"type\">int</span> r;</span><br><span class=\"line\">    <span class=\"keyword\">auto</span> C = <span class=\"built_in\">div</span>(A, B, r);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = C.<span class=\"built_in\">size</span>() - <span class=\"number\">1</span>; i &gt;= <span class=\"number\">0</span>; i -- ) cout &lt;&lt; C[i];</span><br><span class=\"line\"></span><br><span class=\"line\">    cout &lt;&lt; endl &lt;&lt; r &lt;&lt; endl;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">作者：yxc</span><br><span class=\"line\">链接：https:<span class=\"comment\">//www.acwing.com/activity/content/code/content/39795/</span></span><br><span class=\"line\">来源：AcWing</span><br><span class=\"line\">著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h1 id=\"AcWing-795-前缀和\"><a href=\"#AcWing-795-前缀和\" class=\"headerlink\" title=\"AcWing 795. 前缀和\"></a>AcWing 795. 前缀和</h1><h3 id=\"题目来源–795-前缀和\"><a href=\"#题目来源–795-前缀和\" class=\"headerlink\" title=\"题目来源–795. 前缀和\"></a>题目来源–<a href=\"https://www.acwing.com/problem/content/797/\" title=\"前缀和\">795. 前缀和</a></h3><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">题目描述</span><br><span class=\"line\">\t输入一个长度为 n 的整数序列。</span><br><span class=\"line\">\t接下来再输入 m 个询问，每个询问输入一对 l,r。</span><br><span class=\"line\">\t对于每个询问，输出原序列中从第 l 个数到第 r 个数的和。</span><br><span class=\"line\"></span><br><span class=\"line\">输入格式</span><br><span class=\"line\">\t第一行包含两个整数 n 和 m。</span><br><span class=\"line\">\t第二行包含 n 个整数，表示整数数列。</span><br><span class=\"line\">\t接下来 m 行，每行包含两个整数 l 和 r，表示一个询问的区间范围。</span><br><span class=\"line\"></span><br><span class=\"line\">输出格式</span><br><span class=\"line\">\t共 m 行，每行输出一个询问的结果。</span><br><span class=\"line\"></span><br><span class=\"line\">数据范围</span><br><span class=\"line\">\t<span class=\"number\">1</span>≤l≤r≤n,</span><br><span class=\"line\">\t<span class=\"number\">1</span>≤n,m≤<span class=\"number\">100000</span>,</span><br><span class=\"line\">\t−<span class=\"number\">1000</span>≤数列中元素的值≤<span class=\"number\">1000</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输入样例：</span><br><span class=\"line\">\t<span class=\"number\">5</span> <span class=\"number\">3</span></span><br><span class=\"line\">\t<span class=\"number\">2</span> <span class=\"number\">1</span> <span class=\"number\">3</span> <span class=\"number\">6</span> <span class=\"number\">4</span></span><br><span class=\"line\">\t<span class=\"number\">1</span> <span class=\"number\">2</span></span><br><span class=\"line\">\t<span class=\"number\">1</span> <span class=\"number\">3</span></span><br><span class=\"line\">\t<span class=\"number\">2</span> <span class=\"number\">4</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输出样例：</span><br><span class=\"line\">\t<span class=\"number\">3</span></span><br><span class=\"line\">\t<span class=\"number\">6</span></span><br><span class=\"line\">\t<span class=\"number\">10</span></span><br><span class=\"line\">\t</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"代码演示-9\"><a href=\"#代码演示-9\" class=\"headerlink\" title=\"代码演示\"></a>代码演示</h3><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> std;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">const</span> <span class=\"type\">int</span> N = <span class=\"number\">100010</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">int</span> n, m;</span><br><span class=\"line\"><span class=\"type\">int</span> a[N], s[N];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d%d&quot;</span>, &amp;n, &amp;m);</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">1</span>; i &lt;= n; i ++ ) <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>, &amp;a[i]);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">1</span>; i &lt;= n; i ++ ) s[i] = s[i - <span class=\"number\">1</span>] + a[i]; <span class=\"comment\">// 前缀和的初始化</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">while</span> (m -- )</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"type\">int</span> l, r;</span><br><span class=\"line\">        <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d%d&quot;</span>, &amp;l, &amp;r);</span><br><span class=\"line\">        <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d\\n&quot;</span>, s[r] - s[l - <span class=\"number\">1</span>]); <span class=\"comment\">// 区间和的计算</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">作者：yxc</span><br><span class=\"line\">链接：https:<span class=\"comment\">//www.acwing.com/activity/content/code/content/39796/</span></span><br><span class=\"line\">来源：AcWing</span><br><span class=\"line\">著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h1 id=\"AcWing-796-子矩阵的和\"><a href=\"#AcWing-796-子矩阵的和\" class=\"headerlink\" title=\"AcWing 796. 子矩阵的和\"></a>AcWing 796. 子矩阵的和</h1><h3 id=\"题目来源–796-子矩阵的和\"><a href=\"#题目来源–796-子矩阵的和\" class=\"headerlink\" title=\"题目来源–796. 子矩阵的和\"></a>题目来源–<a href=\"https://www.acwing.com/problem/content/798/\" title=\"子矩阵的和\">796. 子矩阵的和</a></h3><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">题目描述</span><br><span class=\"line\">\t输入一个 n 行 m 列的整数矩阵，再输入 q 个询问，每个询问包含四个整数 x1,y1,x2,y2，表示一个子矩阵的左上角坐标和右下角坐标。</span><br><span class=\"line\">\t对于每个询问输出子矩阵中所有数的和。</span><br><span class=\"line\"></span><br><span class=\"line\">输入格式</span><br><span class=\"line\">\t第一行包含三个整数 n，m，q。</span><br><span class=\"line\">\t接下来 n 行，每行包含 m 个整数，表示整数矩阵。</span><br><span class=\"line\">\t接下来 q 行，每行包含四个整数 x1,y1,x2,y2，表示一组询问。</span><br><span class=\"line\"></span><br><span class=\"line\">输出格式</span><br><span class=\"line\">\t共 q 行，每行输出一个询问的结果。</span><br><span class=\"line\"></span><br><span class=\"line\">数据范围</span><br><span class=\"line\">\t<span class=\"number\">1</span>≤n,m≤<span class=\"number\">1000</span>,</span><br><span class=\"line\">\t<span class=\"number\">1</span>≤q≤<span class=\"number\">200000</span>,</span><br><span class=\"line\">\t<span class=\"number\">1</span>≤x1≤x2≤n,</span><br><span class=\"line\">\t<span class=\"number\">1</span>≤y1≤y2≤m,</span><br><span class=\"line\">\t−<span class=\"number\">1000</span>≤矩阵内元素的值≤<span class=\"number\">1000</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输入样例：</span><br><span class=\"line\">\t<span class=\"number\">3</span> <span class=\"number\">4</span> <span class=\"number\">3</span></span><br><span class=\"line\">\t<span class=\"number\">1</span> <span class=\"number\">7</span> <span class=\"number\">2</span> <span class=\"number\">4</span></span><br><span class=\"line\">\t<span class=\"number\">3</span> <span class=\"number\">6</span> <span class=\"number\">2</span> <span class=\"number\">8</span></span><br><span class=\"line\">\t<span class=\"number\">2</span> <span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span></span><br><span class=\"line\">\t<span class=\"number\">1</span> <span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">2</span></span><br><span class=\"line\">\t<span class=\"number\">2</span> <span class=\"number\">1</span> <span class=\"number\">3</span> <span class=\"number\">4</span></span><br><span class=\"line\">\t<span class=\"number\">1</span> <span class=\"number\">3</span> <span class=\"number\">3</span> <span class=\"number\">4</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输出样例：</span><br><span class=\"line\">\t<span class=\"number\">17</span></span><br><span class=\"line\">\t<span class=\"number\">27</span></span><br><span class=\"line\">\t<span class=\"number\">21</span></span><br><span class=\"line\">\t</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"代码演示-10\"><a href=\"#代码演示-10\" class=\"headerlink\" title=\"代码演示\"></a>代码演示</h3><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> std;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">const</span> <span class=\"type\">int</span> N = <span class=\"number\">1010</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">int</span> n, m, q;</span><br><span class=\"line\"><span class=\"type\">int</span> s[N][N];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d%d%d&quot;</span>, &amp;n, &amp;m, &amp;q);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">1</span>; i &lt;= n; i ++ )</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> j = <span class=\"number\">1</span>; j &lt;= m; j ++ )</span><br><span class=\"line\">            <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>, &amp;s[i][j]);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">1</span>; i &lt;= n; i ++ )</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> j = <span class=\"number\">1</span>; j &lt;= m; j ++ )</span><br><span class=\"line\">            s[i][j] += s[i - <span class=\"number\">1</span>][j] + s[i][j - <span class=\"number\">1</span>] - s[i - <span class=\"number\">1</span>][j - <span class=\"number\">1</span>];</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">while</span> (q -- )</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"type\">int</span> x1, y1, x2, y2;</span><br><span class=\"line\">        <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d%d%d%d&quot;</span>, &amp;x1, &amp;y1, &amp;x2, &amp;y2);</span><br><span class=\"line\">        <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d\\n&quot;</span>, s[x2][y2] - s[x1 - <span class=\"number\">1</span>][y2] - s[x2][y1 - <span class=\"number\">1</span>] + s[x1 - <span class=\"number\">1</span>][y1 - <span class=\"number\">1</span>]);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">作者：yxc</span><br><span class=\"line\">链接：https:<span class=\"comment\">//www.acwing.com/activity/content/code/content/39797/</span></span><br><span class=\"line\">来源：AcWing</span><br><span class=\"line\">著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h1 id=\"AcWing-797-差分\"><a href=\"#AcWing-797-差分\" class=\"headerlink\" title=\"AcWing 797. 差分\"></a>AcWing 797. 差分</h1><h3 id=\"题目来源–797-差分\"><a href=\"#题目来源–797-差分\" class=\"headerlink\" title=\"题目来源–797. 差分\"></a>题目来源–<a href=\"https://www.acwing.com/problem/content/799/\" title=\"差分\">797. 差分</a></h3><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">题目描述</span><br><span class=\"line\">\t输入一个长度为 n 的整数序列。</span><br><span class=\"line\">\t接下来输入 m 个操作，每个操作包含三个整数 l,r,c，表示将序列中 [l,r] 之间的每个数加上 c。</span><br><span class=\"line\">\t请你输出进行完所有操作后的序列。</span><br><span class=\"line\"></span><br><span class=\"line\">输入格式</span><br><span class=\"line\">\t第一行包含两个整数 n 和 m。</span><br><span class=\"line\">\t第二行包含 n 个整数，表示整数序列。</span><br><span class=\"line\">\t接下来 m 行，每行包含三个整数 l，r，c，表示一个操作。</span><br><span class=\"line\"></span><br><span class=\"line\">输出格式</span><br><span class=\"line\">\t共一行，包含 n 个整数，表示最终序列。</span><br><span class=\"line\"></span><br><span class=\"line\">数据范围</span><br><span class=\"line\">\t<span class=\"number\">1</span>≤n,m≤<span class=\"number\">100000</span>,</span><br><span class=\"line\">\t<span class=\"number\">1</span>≤l≤r≤n,</span><br><span class=\"line\">\t−<span class=\"number\">1000</span>≤c≤<span class=\"number\">1000</span>,</span><br><span class=\"line\">\t−<span class=\"number\">1000</span>≤整数序列中元素的值≤<span class=\"number\">1000</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输入样例：</span><br><span class=\"line\">\t<span class=\"number\">6</span> <span class=\"number\">3</span></span><br><span class=\"line\">\t<span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">2</span> <span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">1</span></span><br><span class=\"line\">\t<span class=\"number\">1</span> <span class=\"number\">3</span> <span class=\"number\">1</span></span><br><span class=\"line\">\t<span class=\"number\">3</span> <span class=\"number\">5</span> <span class=\"number\">1</span></span><br><span class=\"line\">\t<span class=\"number\">1</span> <span class=\"number\">6</span> <span class=\"number\">1</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输出样例：</span><br><span class=\"line\">\t<span class=\"number\">3</span> <span class=\"number\">4</span> <span class=\"number\">5</span> <span class=\"number\">3</span> <span class=\"number\">4</span> <span class=\"number\">2</span></span><br><span class=\"line\">\t</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"代码演示-11\"><a href=\"#代码演示-11\" class=\"headerlink\" title=\"代码演示\"></a>代码演示</h3><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> std;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">const</span> <span class=\"type\">int</span> N = <span class=\"number\">100010</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">int</span> n, m;</span><br><span class=\"line\"><span class=\"type\">int</span> a[N], b[N];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">insert</span><span class=\"params\">(<span class=\"type\">int</span> l, <span class=\"type\">int</span> r, <span class=\"type\">int</span> c)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    b[l] += c;</span><br><span class=\"line\">    b[r + <span class=\"number\">1</span>] -= c;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d%d&quot;</span>, &amp;n, &amp;m);</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">1</span>; i &lt;= n; i ++ ) <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>, &amp;a[i]);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">1</span>; i &lt;= n; i ++ ) <span class=\"built_in\">insert</span>(i, i, a[i]);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">while</span> (m -- )</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"type\">int</span> l, r, c;</span><br><span class=\"line\">        <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d%d%d&quot;</span>, &amp;l, &amp;r, &amp;c);</span><br><span class=\"line\">        <span class=\"built_in\">insert</span>(l, r, c);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">1</span>; i &lt;= n; i ++ ) b[i] += b[i - <span class=\"number\">1</span>];</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">1</span>; i &lt;= n; i ++ ) <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d &quot;</span>, b[i]);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">作者：yxc</span><br><span class=\"line\">链接：https:<span class=\"comment\">//www.acwing.com/activity/content/code/content/39799/</span></span><br><span class=\"line\">来源：AcWing</span><br><span class=\"line\">著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h1 id=\"AcWing-798-差分矩阵\"><a href=\"#AcWing-798-差分矩阵\" class=\"headerlink\" title=\"AcWing 798. 差分矩阵\"></a>AcWing 798. 差分矩阵</h1><h3 id=\"题目来源–798-差分矩阵\"><a href=\"#题目来源–798-差分矩阵\" class=\"headerlink\" title=\"题目来源–798. 差分矩阵\"></a>题目来源–<a href=\"https://www.acwing.com/problem/content/800/\" title=\"差分\">798. 差分矩阵</a></h3><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">题目描述</span><br><span class=\"line\">\t输入一个 n 行 m 列的整数矩阵，再输入 q 个操作，每个操作包含五个整数 x1,y1,x2,y2,c，其中 (x1,y1) 和 (x2,y2) 表示一个子矩阵的左上角坐标和右下角坐标。</span><br><span class=\"line\">\t每个操作都要将选中的子矩阵中的每个元素的值加上 c。</span><br><span class=\"line\">\t请你将进行完所有操作后的矩阵输出。</span><br><span class=\"line\"></span><br><span class=\"line\">输入格式</span><br><span class=\"line\">\t第一行包含整数 n,m,q。</span><br><span class=\"line\">\t接下来 n 行，每行包含 m 个整数，表示整数矩阵。</span><br><span class=\"line\">\t接下来 q 行，每行包含 <span class=\"number\">5</span> 个整数 x1,y1,x2,y2,c，表示一个操作。</span><br><span class=\"line\"></span><br><span class=\"line\">输出格式</span><br><span class=\"line\">\t共 n 行，每行 m 个整数，表示所有操作进行完毕后的最终矩阵。</span><br><span class=\"line\"></span><br><span class=\"line\">数据范围</span><br><span class=\"line\">\t<span class=\"number\">1</span>≤n,m≤<span class=\"number\">1000</span>,</span><br><span class=\"line\">\t<span class=\"number\">1</span>≤q≤<span class=\"number\">100000</span>,</span><br><span class=\"line\">\t<span class=\"number\">1</span>≤x1≤x2≤n,</span><br><span class=\"line\">\t<span class=\"number\">1</span>≤y1≤y2≤m,</span><br><span class=\"line\">\t−<span class=\"number\">1000</span>≤c≤<span class=\"number\">1000</span>,</span><br><span class=\"line\">\t−<span class=\"number\">1000</span>≤矩阵内元素的值≤<span class=\"number\">1000</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输入样例：</span><br><span class=\"line\">\t<span class=\"number\">3</span> <span class=\"number\">4</span> <span class=\"number\">3</span></span><br><span class=\"line\">\t<span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">2</span> <span class=\"number\">1</span></span><br><span class=\"line\">\t<span class=\"number\">3</span> <span class=\"number\">2</span> <span class=\"number\">2</span> <span class=\"number\">1</span></span><br><span class=\"line\">\t<span class=\"number\">1</span> <span class=\"number\">1</span> <span class=\"number\">1</span> <span class=\"number\">1</span></span><br><span class=\"line\">\t<span class=\"number\">1</span> <span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">2</span> <span class=\"number\">1</span></span><br><span class=\"line\">\t<span class=\"number\">1</span> <span class=\"number\">3</span> <span class=\"number\">2</span> <span class=\"number\">3</span> <span class=\"number\">2</span></span><br><span class=\"line\">\t<span class=\"number\">3</span> <span class=\"number\">1</span> <span class=\"number\">3</span> <span class=\"number\">4</span> <span class=\"number\">1</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输出样例：</span><br><span class=\"line\">\t<span class=\"number\">2</span> <span class=\"number\">3</span> <span class=\"number\">4</span> <span class=\"number\">1</span></span><br><span class=\"line\">\t<span class=\"number\">4</span> <span class=\"number\">3</span> <span class=\"number\">4</span> <span class=\"number\">1</span></span><br><span class=\"line\">\t<span class=\"number\">2</span> <span class=\"number\">2</span> <span class=\"number\">2</span> <span class=\"number\">2</span></span><br><span class=\"line\">\t</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"代码演示-12\"><a href=\"#代码演示-12\" class=\"headerlink\" title=\"代码演示\"></a>代码演示</h3><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> std;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">const</span> <span class=\"type\">int</span> N = <span class=\"number\">1010</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">int</span> n, m, q;</span><br><span class=\"line\"><span class=\"type\">int</span> a[N][N], b[N][N];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">insert</span><span class=\"params\">(<span class=\"type\">int</span> x1, <span class=\"type\">int</span> y1, <span class=\"type\">int</span> x2, <span class=\"type\">int</span> y2, <span class=\"type\">int</span> c)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    b[x1][y1] += c;</span><br><span class=\"line\">    b[x2 + <span class=\"number\">1</span>][y1] -= c;</span><br><span class=\"line\">    b[x1][y2 + <span class=\"number\">1</span>] -= c;</span><br><span class=\"line\">    b[x2 + <span class=\"number\">1</span>][y2 + <span class=\"number\">1</span>] += c;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d%d%d&quot;</span>, &amp;n, &amp;m, &amp;q);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">1</span>; i &lt;= n; i ++ )</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> j = <span class=\"number\">1</span>; j &lt;= m; j ++ )</span><br><span class=\"line\">            <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>, &amp;a[i][j]);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">1</span>; i &lt;= n; i ++ )</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> j = <span class=\"number\">1</span>; j &lt;= m; j ++ )</span><br><span class=\"line\">            <span class=\"built_in\">insert</span>(i, j, i, j, a[i][j]);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">while</span> (q -- )</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"type\">int</span> x1, y1, x2, y2, c;</span><br><span class=\"line\">        cin &gt;&gt; x1 &gt;&gt; y1 &gt;&gt; x2 &gt;&gt; y2 &gt;&gt; c;</span><br><span class=\"line\">        <span class=\"built_in\">insert</span>(x1, y1, x2, y2, c);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">1</span>; i &lt;= n; i ++ )</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> j = <span class=\"number\">1</span>; j &lt;= m; j ++ )</span><br><span class=\"line\">            b[i][j] += b[i - <span class=\"number\">1</span>][j] + b[i][j - <span class=\"number\">1</span>] - b[i - <span class=\"number\">1</span>][j - <span class=\"number\">1</span>];</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">1</span>; i &lt;= n; i ++ )</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> j = <span class=\"number\">1</span>; j &lt;= m; j ++ ) <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d &quot;</span>, b[i][j]);</span><br><span class=\"line\">        <span class=\"built_in\">puts</span>(<span class=\"string\">&quot;&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">作者：yxc</span><br><span class=\"line\">链接：https:<span class=\"comment\">//www.acwing.com/activity/content/code/content/39800/</span></span><br><span class=\"line\">来源：AcWing</span><br><span class=\"line\">著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h1 id=\"AcWing-799-最长连续不重复子序列\"><a href=\"#AcWing-799-最长连续不重复子序列\" class=\"headerlink\" title=\"AcWing 799. 最长连续不重复子序列\"></a>AcWing 799. 最长连续不重复子序列</h1><h3 id=\"题目来源–799-最长连续不重复子序列\"><a href=\"#题目来源–799-最长连续不重复子序列\" class=\"headerlink\" title=\"题目来源–799. 最长连续不重复子序列\"></a>题目来源–<a href=\"https://www.acwing.com/problem/content/801/\" title=\"最长连续不重复子序列\">799. 最长连续不重复子序列</a></h3><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">题目描述</span><br><span class=\"line\">\t给定一个长度为 n 的整数序列，请找出最长的不包含重复的数的连续区间，输出它的长度。</span><br><span class=\"line\"></span><br><span class=\"line\">输入格式</span><br><span class=\"line\">\t第一行包含整数 n。</span><br><span class=\"line\">\t第二行包含 n 个整数（均在 <span class=\"number\">0</span>∼<span class=\"number\">105</span> 范围内），表示整数序列。</span><br><span class=\"line\"></span><br><span class=\"line\">输出格式</span><br><span class=\"line\">\t共一行，包含一个整数，表示最长的不包含重复的数的连续区间的长度。</span><br><span class=\"line\"></span><br><span class=\"line\">数据范围</span><br><span class=\"line\">\t<span class=\"number\">1</span>≤n≤<span class=\"number\">105</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输入样例：</span><br><span class=\"line\">\t<span class=\"number\">5</span></span><br><span class=\"line\">\t<span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">2</span> <span class=\"number\">3</span> <span class=\"number\">5</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输出样例：</span><br><span class=\"line\">\t<span class=\"number\">3</span></span><br><span class=\"line\">\t</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"代码演示-13\"><a href=\"#代码演示-13\" class=\"headerlink\" title=\"代码演示\"></a>代码演示</h3><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> std;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">const</span> <span class=\"type\">int</span> N = <span class=\"number\">100010</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">int</span> n;</span><br><span class=\"line\"><span class=\"type\">int</span> q[N], s[N];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>, &amp;n);</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; n; i ++ ) <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>, &amp;q[i]);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"type\">int</span> res = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>, j = <span class=\"number\">0</span>; i &lt; n; i ++ )</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        s[q[i]] ++ ;</span><br><span class=\"line\">        <span class=\"keyword\">while</span> (j &lt; i &amp;&amp; s[q[i]] &gt; <span class=\"number\">1</span>) s[q[j ++ ]] -- ;</span><br><span class=\"line\">        res = <span class=\"built_in\">max</span>(res, i - j + <span class=\"number\">1</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    cout &lt;&lt; res &lt;&lt; endl;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">作者：yxc</span><br><span class=\"line\">链接：https:<span class=\"comment\">//www.acwing.com/activity/content/code/content/40066/</span></span><br><span class=\"line\">来源：AcWing</span><br><span class=\"line\">著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h1 id=\"AcWing-800-数组元素的目标和\"><a href=\"#AcWing-800-数组元素的目标和\" class=\"headerlink\" title=\"AcWing 800. 数组元素的目标和\"></a>AcWing 800. 数组元素的目标和</h1><h3 id=\"题目来源–800-数组元素的目标和\"><a href=\"#题目来源–800-数组元素的目标和\" class=\"headerlink\" title=\"题目来源–800. 数组元素的目标和\"></a>题目来源–<a href=\"https://www.acwing.com/problem/content/802/\" title=\"数组元素的目标和\">800. 数组元素的目标和</a></h3><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">题目描述</span><br><span class=\"line\">\t给定两个升序排序的有序数组 A 和 B，以及一个目标值 x。</span><br><span class=\"line\">\t数组下标从 <span class=\"number\">0</span> 开始。</span><br><span class=\"line\">\t请你求出满足 A[i]+B[j]=x 的数对 (i,j)。</span><br><span class=\"line\">\t数据保证有唯一解。</span><br><span class=\"line\"></span><br><span class=\"line\">输入格式</span><br><span class=\"line\">\t第一行包含三个整数 n,m,x，分别表示 A 的长度，B 的长度以及目标值 x。</span><br><span class=\"line\">\t第二行包含 n 个整数，表示数组 A。</span><br><span class=\"line\">\t第三行包含 m 个整数，表示数组 B。</span><br><span class=\"line\"></span><br><span class=\"line\">输出格式</span><br><span class=\"line\">\t共一行，包含两个整数 i 和 j。</span><br><span class=\"line\"></span><br><span class=\"line\">数据范围</span><br><span class=\"line\">\t数组长度不超过 <span class=\"number\">105</span>。</span><br><span class=\"line\">\t同一数组内元素各不相同。</span><br><span class=\"line\">\t<span class=\"number\">1</span>≤数组元素≤<span class=\"number\">109</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输入样例：</span><br><span class=\"line\">\t<span class=\"number\">4</span> <span class=\"number\">5</span> <span class=\"number\">6</span></span><br><span class=\"line\">\t<span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">4</span> <span class=\"number\">7</span></span><br><span class=\"line\">\t<span class=\"number\">3</span> <span class=\"number\">4</span> <span class=\"number\">6</span> <span class=\"number\">8</span> <span class=\"number\">9</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输出样例：</span><br><span class=\"line\">\t<span class=\"number\">1</span> <span class=\"number\">1</span></span><br><span class=\"line\">\t</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"代码演示-14\"><a href=\"#代码演示-14\" class=\"headerlink\" title=\"代码演示\"></a>代码演示</h3><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> std;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">const</span> <span class=\"type\">int</span> N = <span class=\"number\">1e5</span> + <span class=\"number\">10</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">int</span> n, m, x;</span><br><span class=\"line\"><span class=\"type\">int</span> a[N], b[N];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d%d%d&quot;</span>, &amp;n, &amp;m, &amp;x);</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; n; i ++ ) <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>, &amp;a[i]);</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; m; i ++ ) <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>, &amp;b[i]);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>, j = m - <span class=\"number\">1</span>; i &lt; n; i ++ )</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">while</span> (j &gt;= <span class=\"number\">0</span> &amp;&amp; a[i] + b[j] &gt; x) j -- ;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (j &gt;= <span class=\"number\">0</span> &amp;&amp; a[i] + b[j] == x) cout &lt;&lt; i &lt;&lt; <span class=\"string\">&#x27; &#x27;</span> &lt;&lt; j &lt;&lt; endl;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">作者：yxc</span><br><span class=\"line\">链接：https:<span class=\"comment\">//www.acwing.com/activity/content/code/content/40069/</span></span><br><span class=\"line\">来源：AcWing</span><br><span class=\"line\">著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h1 id=\"AcWing-801-二进制中1的个数\"><a href=\"#AcWing-801-二进制中1的个数\" class=\"headerlink\" title=\"AcWing 801. 二进制中1的个数\"></a>AcWing 801. 二进制中1的个数</h1><h3 id=\"题目来源–801-二进制中1的个数\"><a href=\"#题目来源–801-二进制中1的个数\" class=\"headerlink\" title=\"题目来源–801. 二进制中1的个数\"></a>题目来源–<a href=\"https://www.acwing.com/problem/content/803/\" title=\"判断子序列\">801. 二进制中1的个数</a></h3><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">题目描述</span><br><span class=\"line\">\t给定一个长度为 n 的数列，请你求出数列中每个数的二进制表示中 <span class=\"number\">1</span> 的个数。</span><br><span class=\"line\"></span><br><span class=\"line\">输入格式</span><br><span class=\"line\">\t第一行包含整数 n。</span><br><span class=\"line\">\t第二行包含 n 个整数，表示整个数列。</span><br><span class=\"line\"></span><br><span class=\"line\">输出格式</span><br><span class=\"line\">\t共一行，包含 n 个整数，其中的第 i 个数表示数列中的第 i 个数的二进制表示中 <span class=\"number\">1</span> 的个数。</span><br><span class=\"line\"></span><br><span class=\"line\">数据范围</span><br><span class=\"line\">\t<span class=\"number\">1</span>≤n≤<span class=\"number\">100000</span>,</span><br><span class=\"line\">\t<span class=\"number\">0</span>≤数列中元素的值≤<span class=\"number\">109</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输入样例：</span><br><span class=\"line\">\t<span class=\"number\">5</span></span><br><span class=\"line\">\t<span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span> <span class=\"number\">4</span> <span class=\"number\">5</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输出样例：</span><br><span class=\"line\">\t<span class=\"number\">1</span> <span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">1</span> <span class=\"number\">2</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"代码演示-15\"><a href=\"#代码演示-15\" class=\"headerlink\" title=\"代码演示\"></a>代码演示</h3><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> std;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> n;</span><br><span class=\"line\">    <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>, &amp;n);</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (n -- )</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"type\">int</span> x, s = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>, &amp;x);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = x; i; i -= i &amp; -i) s ++ ;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d &quot;</span>, s);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h1 id=\"AcWing-802-区间和\"><a href=\"#AcWing-802-区间和\" class=\"headerlink\" title=\"AcWing 802. 区间和\"></a>AcWing 802. 区间和</h1><h3 id=\"题目来源–802-区间和\"><a href=\"#题目来源–802-区间和\" class=\"headerlink\" title=\"题目来源–802. 区间和\"></a>题目来源–<a href=\"https://www.acwing.com/problem/content/804/\" title=\"区间和\">802. 区间和</a></h3><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">题目描述</span><br><span class=\"line\">\t假定有一个无限长的数轴，数轴上每个坐标上的数都是 <span class=\"number\">0</span>。</span><br><span class=\"line\">\t现在，我们首先进行 n 次操作，每次操作将某一位置 x 上的数加 c。</span><br><span class=\"line\">\t接下来，进行 m 次询问，每个询问包含两个整数 l 和 r，你需要求出在区间 [l,r] 之间的所有数的和。</span><br><span class=\"line\"></span><br><span class=\"line\">输入格式</span><br><span class=\"line\">\t第一行包含两个整数 n 和 m。</span><br><span class=\"line\">\t接下来 n 行，每行包含两个整数 x 和 c。</span><br><span class=\"line\">\t再接下来 m 行，每行包含两个整数 l 和 r。</span><br><span class=\"line\"></span><br><span class=\"line\">输出格式</span><br><span class=\"line\">\t共 m 行，每行输出一个询问中所求的区间内数字和。</span><br><span class=\"line\"></span><br><span class=\"line\">数据范围</span><br><span class=\"line\">\t−<span class=\"number\">109</span>≤x≤<span class=\"number\">109</span>,</span><br><span class=\"line\">\t<span class=\"number\">1</span>≤n,m≤<span class=\"number\">105</span>,</span><br><span class=\"line\">\t−<span class=\"number\">109</span>≤l≤r≤<span class=\"number\">109</span>,</span><br><span class=\"line\">\t−<span class=\"number\">10000</span>≤c≤<span class=\"number\">10000</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输入样例：</span><br><span class=\"line\">\t<span class=\"number\">3</span> <span class=\"number\">3</span></span><br><span class=\"line\">\t<span class=\"number\">1</span> <span class=\"number\">2</span></span><br><span class=\"line\">\t<span class=\"number\">3</span> <span class=\"number\">6</span></span><br><span class=\"line\">\t<span class=\"number\">7</span> <span class=\"number\">5</span></span><br><span class=\"line\">\t<span class=\"number\">1</span> <span class=\"number\">3</span></span><br><span class=\"line\">\t<span class=\"number\">4</span> <span class=\"number\">6</span></span><br><span class=\"line\">\t<span class=\"number\">7</span> <span class=\"number\">8</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输出样例：</span><br><span class=\"line\">\t<span class=\"number\">8</span></span><br><span class=\"line\">\t<span class=\"number\">0</span></span><br><span class=\"line\">\t<span class=\"number\">5</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"代码演示-16\"><a href=\"#代码演示-16\" class=\"headerlink\" title=\"代码演示\"></a>代码演示</h3><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;vector&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;algorithm&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> std;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">typedef</span> pair&lt;<span class=\"type\">int</span>, <span class=\"type\">int</span>&gt; PII;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">const</span> <span class=\"type\">int</span> N = <span class=\"number\">300010</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">int</span> n, m;</span><br><span class=\"line\"><span class=\"type\">int</span> a[N], s[N];</span><br><span class=\"line\"></span><br><span class=\"line\">vector&lt;<span class=\"type\">int</span>&gt; alls;</span><br><span class=\"line\">vector&lt;PII&gt; add, query;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">find</span><span class=\"params\">(<span class=\"type\">int</span> x)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> l = <span class=\"number\">0</span>, r = alls.<span class=\"built_in\">size</span>() - <span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (l &lt; r)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"type\">int</span> mid = l + r &gt;&gt; <span class=\"number\">1</span>;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (alls[mid] &gt;= x) r = mid;</span><br><span class=\"line\">        <span class=\"keyword\">else</span> l = mid + <span class=\"number\">1</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> r + <span class=\"number\">1</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    cin &gt;&gt; n &gt;&gt; m;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; n; i ++ )</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"type\">int</span> x, c;</span><br><span class=\"line\">        cin &gt;&gt; x &gt;&gt; c;</span><br><span class=\"line\">        add.<span class=\"built_in\">push_back</span>(&#123;x, c&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">        alls.<span class=\"built_in\">push_back</span>(x);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; m; i ++ )</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"type\">int</span> l, r;</span><br><span class=\"line\">        cin &gt;&gt; l &gt;&gt; r;</span><br><span class=\"line\">        query.<span class=\"built_in\">push_back</span>(&#123;l, r&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">        alls.<span class=\"built_in\">push_back</span>(l);</span><br><span class=\"line\">        alls.<span class=\"built_in\">push_back</span>(r);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 去重</span></span><br><span class=\"line\">    <span class=\"built_in\">sort</span>(alls.<span class=\"built_in\">begin</span>(), alls.<span class=\"built_in\">end</span>());</span><br><span class=\"line\">    alls.<span class=\"built_in\">erase</span>(<span class=\"built_in\">unique</span>(alls.<span class=\"built_in\">begin</span>(), alls.<span class=\"built_in\">end</span>()), alls.<span class=\"built_in\">end</span>());</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 处理插入</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">auto</span> item : add)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"type\">int</span> x = <span class=\"built_in\">find</span>(item.first);</span><br><span class=\"line\">        a[x] += item.second;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 预处理前缀和</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">1</span>; i &lt;= alls.<span class=\"built_in\">size</span>(); i ++ ) s[i] = s[i - <span class=\"number\">1</span>] + a[i];</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 处理询问</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">auto</span> item : query)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"type\">int</span> l = <span class=\"built_in\">find</span>(item.first), r = <span class=\"built_in\">find</span>(item.second);</span><br><span class=\"line\">        cout &lt;&lt; s[r] - s[l - <span class=\"number\">1</span>] &lt;&lt; endl;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">作者：yxc</span><br><span class=\"line\">链接：https:<span class=\"comment\">//www.acwing.com/activity/content/code/content/40105/</span></span><br><span class=\"line\">来源：AcWing</span><br><span class=\"line\">著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h1 id=\"AcWing-2816-判断子序列\"><a href=\"#AcWing-2816-判断子序列\" class=\"headerlink\" title=\"AcWing 2816. 判断子序列\"></a>AcWing 2816. 判断子序列</h1><h3 id=\"题目来源–2816-判断子序列\"><a href=\"#题目来源–2816-判断子序列\" class=\"headerlink\" title=\"题目来源–2816. 判断子序列\"></a>题目来源–<a href=\"https://www.acwing.com/problem/content/2818/\" title=\"判断子序列\">2816. 判断子序列</a></h3><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">题目描述</span><br><span class=\"line\">\t给定一个长度为 n 的整数序列 a1,a2,…,an 以及一个长度为 m 的整数序列 b1,b2,…,bm。</span><br><span class=\"line\">\t请你判断 a 序列是否为 b 序列的子序列。</span><br><span class=\"line\">\t子序列指序列的一部分项按原有次序排列而得的序列，例如序列 &#123;a1,a3,a5&#125; 是序列 &#123;a1,a2,a3,a4,a5&#125; 的一个子序列。</span><br><span class=\"line\"></span><br><span class=\"line\">输入格式</span><br><span class=\"line\">\t第一行包含两个整数 n,m。</span><br><span class=\"line\">\t第二行包含 n 个整数，表示 a1,a2,…,an。</span><br><span class=\"line\">\t第三行包含 m 个整数，表示 b1,b2,…,bm。</span><br><span class=\"line\"></span><br><span class=\"line\">输出格式</span><br><span class=\"line\">\t如果 a 序列是 b 序列的子序列，输出一行 Yes。</span><br><span class=\"line\">\t否则，输出 No。</span><br><span class=\"line\"></span><br><span class=\"line\">数据范围</span><br><span class=\"line\">\t<span class=\"number\">1</span>≤n≤m≤<span class=\"number\">105</span>,</span><br><span class=\"line\">\t−<span class=\"number\">109</span>≤ai,bi≤<span class=\"number\">109</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输入样例：</span><br><span class=\"line\">\t<span class=\"number\">3</span> <span class=\"number\">5</span></span><br><span class=\"line\">\t<span class=\"number\">1</span> <span class=\"number\">3</span> <span class=\"number\">5</span></span><br><span class=\"line\">\t<span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span> <span class=\"number\">4</span> <span class=\"number\">5</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输出样例：</span><br><span class=\"line\">\tYes</span><br><span class=\"line\"></span><br><span class=\"line\">\t</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"代码演示-17\"><a href=\"#代码演示-17\" class=\"headerlink\" title=\"代码演示\"></a>代码演示</h3><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;cstring&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> std;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">const</span> <span class=\"type\">int</span> N = <span class=\"number\">100010</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">int</span> n, m;</span><br><span class=\"line\"><span class=\"type\">int</span> a[N], b[N];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d%d&quot;</span>, &amp;n, &amp;m);</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; n; i ++ ) <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>, &amp;a[i]);</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; m; i ++ ) <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>, &amp;b[i]);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"type\">int</span> i = <span class=\"number\">0</span>, j = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (i &lt; n &amp;&amp; j &lt; m)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (a[i] == b[j]) i ++ ;</span><br><span class=\"line\">        j ++ ;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (i == n) <span class=\"built_in\">puts</span>(<span class=\"string\">&quot;Yes&quot;</span>);</span><br><span class=\"line\">    <span class=\"keyword\">else</span> <span class=\"built_in\">puts</span>(<span class=\"string\">&quot;No&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">作者：yxc</span><br><span class=\"line\">链接：https:<span class=\"comment\">//www.acwing.com/activity/content/code/content/589289/</span></span><br><span class=\"line\">来源：AcWing</span><br><span class=\"line\">著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</span><br></pre></td></tr></table></figure>","site":{"data":{"link":[{"class_name":"友情链接","class_desc":"那些人，那些事","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]},{"class_name":"网站","class_desc":"值得推荐的网站","link_list":[{"name":"Youtube","link":"https://www.youtube.com/","avatar":"https://i.loli.net/2020/05/14/9ZkGg8v3azHJfM1.png","descr":"视频网站"},{"name":"Weibo","link":"https://www.weibo.com/","avatar":"https://i.loli.net/2020/05/14/TLJBum386vcnI1P.png","descr":"中国最大社交分享平台"},{"name":"Twitter","link":"https://twitter.com/","avatar":"https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png","descr":"社交分享平台"}]}]}},"cover":"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7","excerpt":"","more":"<h1 id=\"AcWing-785-快速排序\"><a href=\"#AcWing-785-快速排序\" class=\"headerlink\" title=\"AcWing 785. 快速排序\"></a>AcWing 785. 快速排序</h1><h3 id=\"题目来源–785-快速排序\"><a href=\"#题目来源–785-快速排序\" class=\"headerlink\" title=\"题目来源–785. 快速排序\"></a>题目来源–<a href=\"https://www.acwing.com/problem/content/787/\" title=\"快速排序\">785. 快速排序</a></h3><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">题目描述：</span><br><span class=\"line\">    给定你一个长度为 n 的整数数列。</span><br><span class=\"line\">    请你使用快速排序对这个数列按照从小到大进行排序。</span><br><span class=\"line\">    并将排好序的数列按顺序输出。</span><br><span class=\"line\"></span><br><span class=\"line\">输入格式</span><br><span class=\"line\">    输入共两行，第一行包含整数 n。</span><br><span class=\"line\">    第二行包含 n 个整数（所有整数均在 <span class=\"number\">1</span>∼<span class=\"number\">109</span> 范围内），表示整个数列。</span><br><span class=\"line\">\t</span><br><span class=\"line\">输出格式</span><br><span class=\"line\">\t输出共一行，包含 n 个整数，表示排好序的数列。</span><br><span class=\"line\"></span><br><span class=\"line\">数据范围</span><br><span class=\"line\">\t<span class=\"number\">1</span>≤n≤<span class=\"number\">100000</span></span><br><span class=\"line\"></span><br><span class=\"line\">输入样例：</span><br><span class=\"line\">    <span class=\"number\">5</span></span><br><span class=\"line\">    <span class=\"number\">3</span> <span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">4</span> <span class=\"number\">5</span></span><br><span class=\"line\"></span><br><span class=\"line\">输出样例：</span><br><span class=\"line\">    <span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span> <span class=\"number\">4</span> <span class=\"number\">5</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"代码演示\"><a href=\"#代码演示\" class=\"headerlink\" title=\"代码演示\"></a>代码演示</h3><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> std;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">const</span> <span class=\"type\">int</span> N = <span class=\"number\">100010</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">int</span> q[N];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">quick_sort</span><span class=\"params\">(<span class=\"type\">int</span> q[], <span class=\"type\">int</span> l, <span class=\"type\">int</span> r)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (l &gt;= r) <span class=\"keyword\">return</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"type\">int</span> i = l - <span class=\"number\">1</span>, j = r + <span class=\"number\">1</span>, x = q[l + r &gt;&gt; <span class=\"number\">1</span>];</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (i &lt; j)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">do</span> i ++ ; <span class=\"keyword\">while</span> (q[i] &lt; x);</span><br><span class=\"line\">        <span class=\"keyword\">do</span> j -- ; <span class=\"keyword\">while</span> (q[j] &gt; x);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (i &lt; j) <span class=\"built_in\">swap</span>(q[i], q[j]);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"built_in\">quick_sort</span>(q, l, j);</span><br><span class=\"line\">    <span class=\"built_in\">quick_sort</span>(q, j + <span class=\"number\">1</span>, r);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> n;</span><br><span class=\"line\">    <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>, &amp;n);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; n; i ++ ) <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>, &amp;q[i]);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"built_in\">quick_sort</span>(q, <span class=\"number\">0</span>, n - <span class=\"number\">1</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; n; i ++ ) <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d &quot;</span>, q[i]);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">作者：yxc</span><br><span class=\"line\">链接：https:<span class=\"comment\">//www.acwing.com/activity/content/code/content/39784/</span></span><br><span class=\"line\">来源：AcWing</span><br><span class=\"line\">著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h1 id=\"AcWing-786-第k个数\"><a href=\"#AcWing-786-第k个数\" class=\"headerlink\" title=\"AcWing 786. 第k个数\"></a>AcWing 786. 第k个数</h1><h3 id=\"题目来源–786-第k个数\"><a href=\"#题目来源–786-第k个数\" class=\"headerlink\" title=\"题目来源–786. 第k个数\"></a>题目来源–<a href=\"https://www.acwing.com/problem/content/788/\" title=\"第k个数\">786. 第k个数</a></h3><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">题目描述</span><br><span class=\"line\">\t给定一个长度为 n 的整数数列，以及一个整数 k，请用快速选择算法求出数列从小到大排序后的第 k 个数。</span><br><span class=\"line\"></span><br><span class=\"line\">输入格式</span><br><span class=\"line\">\t第一行包含两个整数 n 和 k。</span><br><span class=\"line\">\t第二行包含 n 个整数（所有整数均在 <span class=\"number\">1</span>～<span class=\"number\">109</span> 范围内），表示整数数列。</span><br><span class=\"line\"></span><br><span class=\"line\">输出格式</span><br><span class=\"line\">\t输出一个整数，表示数列的第 k 小数。</span><br><span class=\"line\"></span><br><span class=\"line\">数据范围</span><br><span class=\"line\">\t<span class=\"number\">1</span>≤n≤<span class=\"number\">100000</span>,</span><br><span class=\"line\">\t<span class=\"number\">1</span>≤k≤n</span><br><span class=\"line\">输入样例：</span><br><span class=\"line\">\t<span class=\"number\">5</span> <span class=\"number\">3</span></span><br><span class=\"line\">\t<span class=\"number\">2</span> <span class=\"number\">4</span> <span class=\"number\">1</span> <span class=\"number\">5</span> <span class=\"number\">3</span></span><br><span class=\"line\">输出样例：</span><br><span class=\"line\">\t</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"代码演示-1\"><a href=\"#代码演示-1\" class=\"headerlink\" title=\"代码演示\"></a>代码演示</h3><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> std;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">const</span> <span class=\"type\">int</span> N = <span class=\"number\">100010</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">int</span> q[N];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">quick_sort</span><span class=\"params\">(<span class=\"type\">int</span> q[], <span class=\"type\">int</span> l, <span class=\"type\">int</span> r, <span class=\"type\">int</span> k)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (l &gt;= r) <span class=\"keyword\">return</span> q[l];</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"type\">int</span> i = l - <span class=\"number\">1</span>, j = r + <span class=\"number\">1</span>, x = q[l + r &gt;&gt; <span class=\"number\">1</span>];</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (i &lt; j)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">do</span> i ++ ; <span class=\"keyword\">while</span> (q[i] &lt; x);</span><br><span class=\"line\">        <span class=\"keyword\">do</span> j -- ; <span class=\"keyword\">while</span> (q[j] &gt; x);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (i &lt; j) <span class=\"built_in\">swap</span>(q[i], q[j]);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (j - l + <span class=\"number\">1</span> &gt;= k) <span class=\"keyword\">return</span> <span class=\"built_in\">quick_sort</span>(q, l, j, k);</span><br><span class=\"line\">    <span class=\"keyword\">else</span> <span class=\"keyword\">return</span> <span class=\"built_in\">quick_sort</span>(q, j + <span class=\"number\">1</span>, r, k - (j - l + <span class=\"number\">1</span>));</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> n, k;</span><br><span class=\"line\">    <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d%d&quot;</span>, &amp;n, &amp;k);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; n; i ++ ) <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>, &amp;q[i]);</span><br><span class=\"line\"></span><br><span class=\"line\">    cout &lt;&lt; <span class=\"built_in\">quick_sort</span>(q, <span class=\"number\">0</span>, n - <span class=\"number\">1</span>, k) &lt;&lt; endl;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">作者：yxc</span><br><span class=\"line\">链接：https:<span class=\"comment\">//www.acwing.com/activity/content/code/content/39785/</span></span><br><span class=\"line\">来源：AcWing</span><br><span class=\"line\">著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h1 id=\"AcWing-787-归并排序\"><a href=\"#AcWing-787-归并排序\" class=\"headerlink\" title=\"AcWing 787. 归并排序\"></a>AcWing 787. 归并排序</h1><h3 id=\"题目来源–787-归并排序\"><a href=\"#题目来源–787-归并排序\" class=\"headerlink\" title=\"题目来源–787. 归并排序\"></a>题目来源–<a href=\"https://www.acwing.com/problem/content/789/\" title=\"归并排序\">787. 归并排序</a></h3><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">题目描述</span><br><span class=\"line\">\t给定你一个长度为 n 的整数数列。</span><br><span class=\"line\">\t请你使用归并排序对这个数列按照从小到大进行排序。</span><br><span class=\"line\">\t并将排好序的数列按顺序输出。</span><br><span class=\"line\"></span><br><span class=\"line\">输入格式</span><br><span class=\"line\">\t输入共两行，第一行包含整数 n。</span><br><span class=\"line\">\t第二行包含 n 个整数（所有整数均在 <span class=\"number\">1</span>∼<span class=\"number\">109</span> 范围内），表示整个数列。</span><br><span class=\"line\"></span><br><span class=\"line\">输出格式</span><br><span class=\"line\">\t输出共一行，包含 n 个整数，表示排好序的数列。</span><br><span class=\"line\"></span><br><span class=\"line\">数据范围</span><br><span class=\"line\">\t<span class=\"number\">1</span>≤n≤<span class=\"number\">100000</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输入样例：</span><br><span class=\"line\">\t<span class=\"number\">5</span></span><br><span class=\"line\">\t<span class=\"number\">3</span> <span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">4</span> <span class=\"number\">5</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输出样例：</span><br><span class=\"line\">\t<span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span> <span class=\"number\">4</span> <span class=\"number\">5</span></span><br><span class=\"line\">\t</span><br></pre></td></tr></table></figure>\n<h3 id=\"代码演示-2\"><a href=\"#代码演示-2\" class=\"headerlink\" title=\"代码演示\"></a>代码演示</h3><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> std;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">const</span> <span class=\"type\">int</span> N = <span class=\"number\">1e5</span> + <span class=\"number\">10</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">int</span> a[N], tmp[N];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">merge_sort</span><span class=\"params\">(<span class=\"type\">int</span> q[], <span class=\"type\">int</span> l, <span class=\"type\">int</span> r)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (l &gt;= r) <span class=\"keyword\">return</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"type\">int</span> mid = l + r &gt;&gt; <span class=\"number\">1</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"built_in\">merge_sort</span>(q, l, mid), <span class=\"built_in\">merge_sort</span>(q, mid + <span class=\"number\">1</span>, r);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"type\">int</span> k = <span class=\"number\">0</span>, i = l, j = mid + <span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (i &lt;= mid &amp;&amp; j &lt;= r)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (q[i] &lt;= q[j]) tmp[k ++ ] = q[i ++ ];</span><br><span class=\"line\">        <span class=\"keyword\">else</span> tmp[k ++ ] = q[j ++ ];</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (i &lt;= mid) tmp[k ++ ] = q[i ++ ];</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (j &lt;= r) tmp[k ++ ] = q[j ++ ];</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (i = l, j = <span class=\"number\">0</span>; i &lt;= r; i ++, j ++ ) q[i] = tmp[j];</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> n;</span><br><span class=\"line\">    <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>, &amp;n);</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; n; i ++ ) <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>, &amp;a[i]);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"built_in\">merge_sort</span>(a, <span class=\"number\">0</span>, n - <span class=\"number\">1</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; n; i ++ ) <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d &quot;</span>, a[i]);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">作者：yxc</span><br><span class=\"line\">链接：https:<span class=\"comment\">//www.acwing.com/activity/content/code/content/39790/</span></span><br><span class=\"line\">来源：AcWing</span><br><span class=\"line\">著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</span><br></pre></td></tr></table></figure>\n<hr>\n<h1 id=\"AcWing-788-逆序对的数量\"><a href=\"#AcWing-788-逆序对的数量\" class=\"headerlink\" title=\"AcWing 788. 逆序对的数量\"></a>AcWing 788. 逆序对的数量</h1><h3 id=\"题目来源–788-逆序对的数量\"><a href=\"#题目来源–788-逆序对的数量\" class=\"headerlink\" title=\"题目来源–788. 逆序对的数量\"></a>题目来源–<a href=\"https://www.acwing.com/problem/content/790/\" title=\"逆序对的数量 \">788. 逆序对的数量</a></h3><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">题目描述</span><br><span class=\"line\">\t给定一个长度为 n 的整数数列，请你计算数列中的逆序对的数量。</span><br><span class=\"line\">\t逆序对的定义如下：对于数列的第 i 个和第 j 个元素，如果满足 i&lt;j 且 a[i]&gt;a[j]，则其为一个逆序对；否则不是。</span><br><span class=\"line\"></span><br><span class=\"line\">输入格式</span><br><span class=\"line\">\t第一行包含整数 n，表示数列的长度。</span><br><span class=\"line\">\t第二行包含 n 个整数，表示整个数列。</span><br><span class=\"line\"></span><br><span class=\"line\">输出格式</span><br><span class=\"line\">\t输出一个整数，表示逆序对的个数。</span><br><span class=\"line\"></span><br><span class=\"line\">数据范围</span><br><span class=\"line\">\t<span class=\"number\">1</span>≤n≤<span class=\"number\">100000</span>，</span><br><span class=\"line\">\t</span><br><span class=\"line\">数列中的元素的取值范围 [<span class=\"number\">1</span>,<span class=\"number\">109</span>]。</span><br><span class=\"line\"></span><br><span class=\"line\">输入样例：</span><br><span class=\"line\">\t<span class=\"number\">6</span></span><br><span class=\"line\">\t<span class=\"number\">2</span> <span class=\"number\">3</span> <span class=\"number\">4</span> <span class=\"number\">5</span> <span class=\"number\">6</span> <span class=\"number\">1</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输出样例：</span><br><span class=\"line\">\t<span class=\"number\">5</span></span><br><span class=\"line\">\t</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"代码演示-3\"><a href=\"#代码演示-3\" class=\"headerlink\" title=\"代码演示\"></a>代码演示</h3><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> std;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">typedef</span> <span class=\"type\">long</span> <span class=\"type\">long</span> LL;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">const</span> <span class=\"type\">int</span> N = <span class=\"number\">1e5</span> + <span class=\"number\">10</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">int</span> a[N], tmp[N];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\">LL <span class=\"title\">merge_sort</span><span class=\"params\">(<span class=\"type\">int</span> q[], <span class=\"type\">int</span> l, <span class=\"type\">int</span> r)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (l &gt;= r) <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"type\">int</span> mid = l + r &gt;&gt; <span class=\"number\">1</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    LL res = <span class=\"built_in\">merge_sort</span>(q, l, mid) + <span class=\"built_in\">merge_sort</span>(q, mid + <span class=\"number\">1</span>, r);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"type\">int</span> k = <span class=\"number\">0</span>, i = l, j = mid + <span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (i &lt;= mid &amp;&amp; j &lt;= r)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (q[i] &lt;= q[j]) tmp[k ++ ] = q[i ++ ];</span><br><span class=\"line\">        <span class=\"keyword\">else</span></span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            res += mid - i + <span class=\"number\">1</span>;</span><br><span class=\"line\">            tmp[k ++ ] = q[j ++ ];</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (i &lt;= mid) tmp[k ++ ] = q[i ++ ];</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (j &lt;= r) tmp[k ++ ] = q[j ++ ];</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (i = l, j = <span class=\"number\">0</span>; i &lt;= r; i ++, j ++ ) q[i] = tmp[j];</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> res;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> n;</span><br><span class=\"line\">    <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>, &amp;n);</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; n; i ++ ) <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>, &amp;a[i]);</span><br><span class=\"line\"></span><br><span class=\"line\">    cout &lt;&lt; <span class=\"built_in\">merge_sort</span>(a, <span class=\"number\">0</span>, n - <span class=\"number\">1</span>) &lt;&lt; endl;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">作者：yxc</span><br><span class=\"line\">链接：https:<span class=\"comment\">//www.acwing.com/activity/content/code/content/39791/</span></span><br><span class=\"line\">来源：AcWing</span><br><span class=\"line\">著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h1 id=\"AcWing-789-数的范围\"><a href=\"#AcWing-789-数的范围\" class=\"headerlink\" title=\"AcWing 789. 数的范围\"></a>AcWing 789. 数的范围</h1><h3 id=\"题目来源–789-数的范围\"><a href=\"#题目来源–789-数的范围\" class=\"headerlink\" title=\"题目来源–789. 数的范围\"></a>题目来源–<a href=\"https://www.acwing.com/problem/content/791/\" title=\"数的范围  \">789. 数的范围</a></h3><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">题目描述</span><br><span class=\"line\">\t给定一个按照升序排列的长度为 n 的整数数组，以及 q 个查询。</span><br><span class=\"line\">\t对于每个查询，返回一个元素 k 的起始位置和终止位置（位置从 <span class=\"number\">0</span> 开始计数）。</span><br><span class=\"line\">\t如果数组中不存在该元素，则返回 <span class=\"number\">-1</span> <span class=\"number\">-1</span>。</span><br><span class=\"line\"></span><br><span class=\"line\">输入格式</span><br><span class=\"line\">\t第一行包含整数 n 和 q，表示数组长度和询问个数。</span><br><span class=\"line\">\t第二行包含 n 个整数（均在 <span class=\"number\">1</span>～<span class=\"number\">10000</span> 范围内），表示完整数组。</span><br><span class=\"line\">\t接下来 q 行，每行包含一个整数 k，表示一个询问元素。</span><br><span class=\"line\"></span><br><span class=\"line\">输出格式</span><br><span class=\"line\">\t共 q 行，每行包含两个整数，表示所求元素的起始位置和终止位置。</span><br><span class=\"line\">\t如果数组中不存在该元素，则返回 <span class=\"number\">-1</span> <span class=\"number\">-1</span>。</span><br><span class=\"line\"></span><br><span class=\"line\">数据范围</span><br><span class=\"line\">\t<span class=\"number\">1</span>≤n≤<span class=\"number\">100000</span></span><br><span class=\"line\">\t<span class=\"number\">1</span>≤q≤<span class=\"number\">10000</span></span><br><span class=\"line\">\t<span class=\"number\">1</span>≤k≤<span class=\"number\">10000</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输入样例：</span><br><span class=\"line\">\t<span class=\"number\">6</span> <span class=\"number\">3</span></span><br><span class=\"line\">\t<span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">2</span> <span class=\"number\">3</span> <span class=\"number\">3</span> <span class=\"number\">4</span></span><br><span class=\"line\">\t<span class=\"number\">3</span></span><br><span class=\"line\">\t<span class=\"number\">4</span></span><br><span class=\"line\">\t<span class=\"number\">5</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输出样例：</span><br><span class=\"line\">\t<span class=\"number\">3</span> <span class=\"number\">4</span></span><br><span class=\"line\">\t<span class=\"number\">5</span> <span class=\"number\">5</span></span><br><span class=\"line\">\t<span class=\"number\">-1</span> <span class=\"number\">-1</span></span><br><span class=\"line\">\t</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"代码演示-4\"><a href=\"#代码演示-4\" class=\"headerlink\" title=\"代码演示\"></a>代码演示</h3><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> std;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">const</span> <span class=\"type\">int</span> N = <span class=\"number\">100010</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">int</span> n, m;</span><br><span class=\"line\"><span class=\"type\">int</span> q[N];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d%d&quot;</span>, &amp;n, &amp;m);</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; n; i ++ ) <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>, &amp;q[i]);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">while</span> (m -- )</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"type\">int</span> x;</span><br><span class=\"line\">        <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>, &amp;x);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"type\">int</span> l = <span class=\"number\">0</span>, r = n - <span class=\"number\">1</span>;</span><br><span class=\"line\">        <span class=\"keyword\">while</span> (l &lt; r)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"type\">int</span> mid = l + r &gt;&gt; <span class=\"number\">1</span>;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (q[mid] &gt;= x) r = mid;</span><br><span class=\"line\">            <span class=\"keyword\">else</span> l = mid + <span class=\"number\">1</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (q[l] != x) cout &lt;&lt; <span class=\"string\">&quot;-1 -1&quot;</span> &lt;&lt; endl;</span><br><span class=\"line\">        <span class=\"keyword\">else</span></span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            cout &lt;&lt; l &lt;&lt; <span class=\"string\">&#x27; &#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"type\">int</span> l = <span class=\"number\">0</span>, r = n - <span class=\"number\">1</span>;</span><br><span class=\"line\">            <span class=\"keyword\">while</span> (l &lt; r)</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                <span class=\"type\">int</span> mid = l + r + <span class=\"number\">1</span> &gt;&gt; <span class=\"number\">1</span>;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (q[mid] &lt;= x) l = mid;</span><br><span class=\"line\">                <span class=\"keyword\">else</span> r = mid - <span class=\"number\">1</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">            cout &lt;&lt; l &lt;&lt; endl;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">作者：yxc</span><br><span class=\"line\">链接：https:<span class=\"comment\">//www.acwing.com/activity/content/code/content/39787/</span></span><br><span class=\"line\">来源：AcWing</span><br><span class=\"line\">著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h1 id=\"AcWing-790-数的三次方根\"><a href=\"#AcWing-790-数的三次方根\" class=\"headerlink\" title=\"AcWing 790. 数的三次方根\"></a>AcWing 790. 数的三次方根</h1><h3 id=\"题目来源–790-数的三次方根\"><a href=\"#题目来源–790-数的三次方根\" class=\"headerlink\" title=\"题目来源–790. 数的三次方根\"></a>题目来源–<a href=\"https://www.acwing.com/problem/content/792/\" title=\"数的三次方根  \">790. 数的三次方根</a></h3><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">题目描述</span><br><span class=\"line\">\t给定一个浮点数 n，求它的三次方根。</span><br><span class=\"line\"></span><br><span class=\"line\">输入格式</span><br><span class=\"line\">\t共一行，包含一个浮点数 n。</span><br><span class=\"line\"></span><br><span class=\"line\">输出格式</span><br><span class=\"line\">\t共一行，包含一个浮点数，表示问题的解。</span><br><span class=\"line\">\t注意，结果保留 <span class=\"number\">6</span> 位小数。</span><br><span class=\"line\"></span><br><span class=\"line\">数据范围</span><br><span class=\"line\">\t<span class=\"number\">-10000</span>≤n≤<span class=\"number\">10000</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输入样例：</span><br><span class=\"line\">\t<span class=\"number\">1000.00</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输出样例：</span><br><span class=\"line\">\t<span class=\"number\">10.000000</span></span><br><span class=\"line\">\t</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"代码演示-5\"><a href=\"#代码演示-5\" class=\"headerlink\" title=\"代码演示\"></a>代码演示</h3><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> std;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"type\">double</span> x;</span><br><span class=\"line\">    cin &gt;&gt; x;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"type\">double</span> l = <span class=\"number\">-100</span>, r = <span class=\"number\">100</span>;</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (r - l &gt; <span class=\"number\">1e-8</span>)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"type\">double</span> mid = (l + r) / <span class=\"number\">2</span>;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (mid * mid * mid &gt;= x) r = mid;</span><br><span class=\"line\">        <span class=\"keyword\">else</span> l = mid;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%.6lf\\n&quot;</span>, l);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h1 id=\"AcWing-791-高精度加法\"><a href=\"#AcWing-791-高精度加法\" class=\"headerlink\" title=\"AcWing 791. 高精度加法\"></a>AcWing 791. 高精度加法</h1><h3 id=\"题目来源–791-高精度加法\"><a href=\"#题目来源–791-高精度加法\" class=\"headerlink\" title=\"题目来源–791.高精度加法\"></a>题目来源–<a href=\"https://www.acwing.com/problem/content/793/%22%E9%AB%98%E7%B2%BE%E5%BA%A6%E5%8A%A0%E6%B3%95%22\">791.高精度加法</a></h3><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">题目描述</span><br><span class=\"line\">\t给定两个正整数（不含前导 <span class=\"number\">0</span>），计算它们的和。</span><br><span class=\"line\"></span><br><span class=\"line\">输入格式</span><br><span class=\"line\">\t共两行，每行包含一个整数。</span><br><span class=\"line\"></span><br><span class=\"line\">输出格式</span><br><span class=\"line\">\t共一行，包含所求的和。</span><br><span class=\"line\"></span><br><span class=\"line\">数据范围</span><br><span class=\"line\">\t<span class=\"number\">1</span>≤整数长度≤<span class=\"number\">100000</span></span><br><span class=\"line\">输入样例：</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"number\">12</span></span><br><span class=\"line\">\t<span class=\"number\">23</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输出样例：</span><br><span class=\"line\">\t<span class=\"number\">35</span></span><br><span class=\"line\">\t</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"不圧位代码\"><a href=\"#不圧位代码\" class=\"headerlink\" title=\"不圧位代码\"></a>不圧位代码</h2><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;vector&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> std;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\">vector&lt;<span class=\"type\">int</span>&gt; <span class=\"title\">add</span><span class=\"params\">(vector&lt;<span class=\"type\">int</span>&gt; &amp;A, vector&lt;<span class=\"type\">int</span>&gt; &amp;B)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (A.<span class=\"built_in\">size</span>() &lt; B.<span class=\"built_in\">size</span>()) <span class=\"keyword\">return</span> <span class=\"built_in\">add</span>(B, A);</span><br><span class=\"line\"></span><br><span class=\"line\">    vector&lt;<span class=\"type\">int</span>&gt; C;</span><br><span class=\"line\">    <span class=\"type\">int</span> t = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; A.<span class=\"built_in\">size</span>(); i ++ )</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        t += A[i];</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (i &lt; B.<span class=\"built_in\">size</span>()) t += B[i];</span><br><span class=\"line\">        C.<span class=\"built_in\">push_back</span>(t % <span class=\"number\">10</span>);</span><br><span class=\"line\">        t /= <span class=\"number\">10</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (t) C.<span class=\"built_in\">push_back</span>(t);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> C;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    string a, b;</span><br><span class=\"line\">    vector&lt;<span class=\"type\">int</span>&gt; A, B;</span><br><span class=\"line\">    cin &gt;&gt; a &gt;&gt; b;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = a.<span class=\"built_in\">size</span>() - <span class=\"number\">1</span>; i &gt;= <span class=\"number\">0</span>; i -- ) A.<span class=\"built_in\">push_back</span>(a[i] - <span class=\"string\">&#x27;0&#x27;</span>);</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = b.<span class=\"built_in\">size</span>() - <span class=\"number\">1</span>; i &gt;= <span class=\"number\">0</span>; i -- ) B.<span class=\"built_in\">push_back</span>(b[i] - <span class=\"string\">&#x27;0&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">auto</span> C = <span class=\"built_in\">add</span>(A, B);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = C.<span class=\"built_in\">size</span>() - <span class=\"number\">1</span>; i &gt;= <span class=\"number\">0</span>; i -- ) cout &lt;&lt; C[i];</span><br><span class=\"line\">    cout &lt;&lt; endl;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">作者：yxc</span><br><span class=\"line\">链接：https:<span class=\"comment\">//www.acwing.com/activity/content/code/content/39792/</span></span><br><span class=\"line\">来源：AcWing</span><br><span class=\"line\">著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"压9位的代码\"><a href=\"#压9位的代码\" class=\"headerlink\" title=\"压9位的代码\"></a>压9位的代码</h2><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;vector&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> std;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">const</span> <span class=\"type\">int</span> base = <span class=\"number\">1000000000</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\">vector&lt;<span class=\"type\">int</span>&gt; <span class=\"title\">add</span><span class=\"params\">(vector&lt;<span class=\"type\">int</span>&gt; &amp;A, vector&lt;<span class=\"type\">int</span>&gt; &amp;B)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (A.<span class=\"built_in\">size</span>() &lt; B.<span class=\"built_in\">size</span>()) <span class=\"keyword\">return</span> <span class=\"built_in\">add</span>(B, A);</span><br><span class=\"line\"></span><br><span class=\"line\">    vector&lt;<span class=\"type\">int</span>&gt; C;</span><br><span class=\"line\">    <span class=\"type\">int</span> t = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; A.<span class=\"built_in\">size</span>(); i ++ )</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        t += A[i];</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (i &lt; B.<span class=\"built_in\">size</span>()) t += B[i];</span><br><span class=\"line\">        C.<span class=\"built_in\">push_back</span>(t % base);</span><br><span class=\"line\">        t /= base;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (t) C.<span class=\"built_in\">push_back</span>(t);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> C;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    string a, b;</span><br><span class=\"line\">    vector&lt;<span class=\"type\">int</span>&gt; A, B;</span><br><span class=\"line\">    cin &gt;&gt; a &gt;&gt; b;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = a.<span class=\"built_in\">size</span>() - <span class=\"number\">1</span>, s = <span class=\"number\">0</span>, j = <span class=\"number\">0</span>, t = <span class=\"number\">1</span>; i &gt;= <span class=\"number\">0</span>; i -- )</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        s += (a[i] - <span class=\"string\">&#x27;0&#x27;</span>) * t;</span><br><span class=\"line\">        j ++, t *= <span class=\"number\">10</span>;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (j == <span class=\"number\">9</span> || i == <span class=\"number\">0</span>)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            A.<span class=\"built_in\">push_back</span>(s);</span><br><span class=\"line\">            s = j = <span class=\"number\">0</span>;</span><br><span class=\"line\">            t = <span class=\"number\">1</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = b.<span class=\"built_in\">size</span>() - <span class=\"number\">1</span>, s = <span class=\"number\">0</span>, j = <span class=\"number\">0</span>, t = <span class=\"number\">1</span>; i &gt;= <span class=\"number\">0</span>; i -- )</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        s += (b[i] - <span class=\"string\">&#x27;0&#x27;</span>) * t;</span><br><span class=\"line\">        j ++, t *= <span class=\"number\">10</span>;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (j == <span class=\"number\">9</span> || i == <span class=\"number\">0</span>)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            B.<span class=\"built_in\">push_back</span>(s);</span><br><span class=\"line\">            s = j = <span class=\"number\">0</span>;</span><br><span class=\"line\">            t = <span class=\"number\">1</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">auto</span> C = <span class=\"built_in\">add</span>(A, B);</span><br><span class=\"line\"></span><br><span class=\"line\">    cout &lt;&lt; C.<span class=\"built_in\">back</span>();</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = C.<span class=\"built_in\">size</span>() - <span class=\"number\">2</span>; i &gt;= <span class=\"number\">0</span>; i -- ) <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%09d&quot;</span>, C[i]);</span><br><span class=\"line\">    cout &lt;&lt; endl;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">作者：yxc</span><br><span class=\"line\">链接：https:<span class=\"comment\">//www.acwing.com/activity/content/code/content/39792/</span></span><br><span class=\"line\">来源：AcWing</span><br><span class=\"line\">著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h1 id=\"AcWing-792-高精度减法\"><a href=\"#AcWing-792-高精度减法\" class=\"headerlink\" title=\"AcWing 792. 高精度减法\"></a>AcWing 792. 高精度减法</h1><h3 id=\"题目来源–792-高精度减法\"><a href=\"#题目来源–792-高精度减法\" class=\"headerlink\" title=\"题目来源–792. 高精度减法 \"></a>题目来源–<a href=\"https://www.acwing.com/problem/content/794/\" title=\"高精度减法\">792. 高精度减法 </a></h3><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">题目描述</span><br><span class=\"line\">\t给定两个正整数（不含前导 <span class=\"number\">0</span>），计算它们的差，计算结果可能为负数。</span><br><span class=\"line\"></span><br><span class=\"line\">输入格式</span><br><span class=\"line\">\t共两行，每行包含一个整数。</span><br><span class=\"line\"></span><br><span class=\"line\">输出格式</span><br><span class=\"line\">\t共一行，包含所求的差。</span><br><span class=\"line\"></span><br><span class=\"line\">数据范围</span><br><span class=\"line\">\t<span class=\"number\">1</span>≤整数长度≤<span class=\"number\">105</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输入样例：</span><br><span class=\"line\">\t<span class=\"number\">32</span></span><br><span class=\"line\">\t<span class=\"number\">11</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输出样例：</span><br><span class=\"line\">\t<span class=\"number\">21</span></span><br><span class=\"line\">\t</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"代码演示-6\"><a href=\"#代码演示-6\" class=\"headerlink\" title=\"代码演示\"></a>代码演示</h3><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;vector&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> std;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">bool</span> <span class=\"title\">cmp</span><span class=\"params\">(vector&lt;<span class=\"type\">int</span>&gt; &amp;A, vector&lt;<span class=\"type\">int</span>&gt; &amp;B)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (A.<span class=\"built_in\">size</span>() != B.<span class=\"built_in\">size</span>()) <span class=\"keyword\">return</span> A.<span class=\"built_in\">size</span>() &gt; B.<span class=\"built_in\">size</span>();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = A.<span class=\"built_in\">size</span>() - <span class=\"number\">1</span>; i &gt;= <span class=\"number\">0</span>; i -- )</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (A[i] != B[i])</span><br><span class=\"line\">            <span class=\"keyword\">return</span> A[i] &gt; B[i];</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\">vector&lt;<span class=\"type\">int</span>&gt; <span class=\"title\">sub</span><span class=\"params\">(vector&lt;<span class=\"type\">int</span>&gt; &amp;A, vector&lt;<span class=\"type\">int</span>&gt; &amp;B)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    vector&lt;<span class=\"type\">int</span>&gt; C;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>, t = <span class=\"number\">0</span>; i &lt; A.<span class=\"built_in\">size</span>(); i ++ )</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        t = A[i] - t;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (i &lt; B.<span class=\"built_in\">size</span>()) t -= B[i];</span><br><span class=\"line\">        C.<span class=\"built_in\">push_back</span>((t + <span class=\"number\">10</span>) % <span class=\"number\">10</span>);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (t &lt; <span class=\"number\">0</span>) t = <span class=\"number\">1</span>;</span><br><span class=\"line\">        <span class=\"keyword\">else</span> t = <span class=\"number\">0</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">while</span> (C.<span class=\"built_in\">size</span>() &gt; <span class=\"number\">1</span> &amp;&amp; C.<span class=\"built_in\">back</span>() == <span class=\"number\">0</span>) C.<span class=\"built_in\">pop_back</span>();</span><br><span class=\"line\">    <span class=\"keyword\">return</span> C;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    string a, b;</span><br><span class=\"line\">    vector&lt;<span class=\"type\">int</span>&gt; A, B;</span><br><span class=\"line\">    cin &gt;&gt; a &gt;&gt; b;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = a.<span class=\"built_in\">size</span>() - <span class=\"number\">1</span>; i &gt;= <span class=\"number\">0</span>; i -- ) A.<span class=\"built_in\">push_back</span>(a[i] - <span class=\"string\">&#x27;0&#x27;</span>);</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = b.<span class=\"built_in\">size</span>() - <span class=\"number\">1</span>; i &gt;= <span class=\"number\">0</span>; i -- ) B.<span class=\"built_in\">push_back</span>(b[i] - <span class=\"string\">&#x27;0&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    vector&lt;<span class=\"type\">int</span>&gt; C;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"built_in\">cmp</span>(A, B)) C = <span class=\"built_in\">sub</span>(A, B);</span><br><span class=\"line\">    <span class=\"keyword\">else</span> C = <span class=\"built_in\">sub</span>(B, A), cout &lt;&lt; <span class=\"string\">&#x27;-&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = C.<span class=\"built_in\">size</span>() - <span class=\"number\">1</span>; i &gt;= <span class=\"number\">0</span>; i -- ) cout &lt;&lt; C[i];</span><br><span class=\"line\">    cout &lt;&lt; endl;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">作者：yxc</span><br><span class=\"line\">链接：https:<span class=\"comment\">//www.acwing.com/activity/content/code/content/39793/</span></span><br><span class=\"line\">来源：AcWing</span><br><span class=\"line\">著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h1 id=\"AcWing-793-高精度乘法\"><a href=\"#AcWing-793-高精度乘法\" class=\"headerlink\" title=\"AcWing 793. 高精度乘法\"></a>AcWing 793. 高精度乘法</h1><h3 id=\"题目来源–793-高精度乘法\"><a href=\"#题目来源–793-高精度乘法\" class=\"headerlink\" title=\"题目来源–793. 高精度乘法\"></a>题目来源–<a href=\"https://www.acwing.com/problem/content/795/\" title=\"高精度乘法\">793. 高精度乘法</a></h3><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">题目描述</span><br><span class=\"line\">\t给定两个非负整数（不含前导 <span class=\"number\">0</span>） A 和 B，请你计算 A×B 的值。</span><br><span class=\"line\"></span><br><span class=\"line\">输入格式</span><br><span class=\"line\">\t共两行，第一行包含整数 A，第二行包含整数 B。</span><br><span class=\"line\"></span><br><span class=\"line\">输出格式</span><br><span class=\"line\">\t共一行，包含 A×B 的值。</span><br><span class=\"line\"></span><br><span class=\"line\">数据范围</span><br><span class=\"line\">\t<span class=\"number\">1</span>≤A的长度≤<span class=\"number\">100000</span>,</span><br><span class=\"line\">\t<span class=\"number\">0</span>≤B≤<span class=\"number\">10000</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输入样例：</span><br><span class=\"line\">\t<span class=\"number\">2</span></span><br><span class=\"line\">\t<span class=\"number\">3</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输出样例：</span><br><span class=\"line\">\t<span class=\"number\">6</span></span><br><span class=\"line\">\t</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"代码演示-7\"><a href=\"#代码演示-7\" class=\"headerlink\" title=\"代码演示\"></a>代码演示</h3><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;vector&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> std;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\">vector&lt;<span class=\"type\">int</span>&gt; <span class=\"title\">mul</span><span class=\"params\">(vector&lt;<span class=\"type\">int</span>&gt; &amp;A, <span class=\"type\">int</span> b)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    vector&lt;<span class=\"type\">int</span>&gt; C;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"type\">int</span> t = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; A.<span class=\"built_in\">size</span>() || t; i ++ )</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (i &lt; A.<span class=\"built_in\">size</span>()) t += A[i] * b;</span><br><span class=\"line\">        C.<span class=\"built_in\">push_back</span>(t % <span class=\"number\">10</span>);</span><br><span class=\"line\">        t /= <span class=\"number\">10</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">while</span> (C.<span class=\"built_in\">size</span>() &gt; <span class=\"number\">1</span> &amp;&amp; C.<span class=\"built_in\">back</span>() == <span class=\"number\">0</span>) C.<span class=\"built_in\">pop_back</span>();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> C;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    string a;</span><br><span class=\"line\">    <span class=\"type\">int</span> b;</span><br><span class=\"line\"></span><br><span class=\"line\">    cin &gt;&gt; a &gt;&gt; b;</span><br><span class=\"line\"></span><br><span class=\"line\">    vector&lt;<span class=\"type\">int</span>&gt; A;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = a.<span class=\"built_in\">size</span>() - <span class=\"number\">1</span>; i &gt;= <span class=\"number\">0</span>; i -- ) A.<span class=\"built_in\">push_back</span>(a[i] - <span class=\"string\">&#x27;0&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">auto</span> C = <span class=\"built_in\">mul</span>(A, b);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = C.<span class=\"built_in\">size</span>() - <span class=\"number\">1</span>; i &gt;= <span class=\"number\">0</span>; i -- ) <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d&quot;</span>, C[i]);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">作者：yxc</span><br><span class=\"line\">链接：https:<span class=\"comment\">//www.acwing.com/activity/content/code/content/39794/</span></span><br><span class=\"line\">来源：AcWing</span><br><span class=\"line\">著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h1 id=\"AcWing-794-高精度除法\"><a href=\"#AcWing-794-高精度除法\" class=\"headerlink\" title=\"AcWing 794. 高精度除法\"></a>AcWing 794. 高精度除法</h1><h3 id=\"题目来源–794-高精度除法\"><a href=\"#题目来源–794-高精度除法\" class=\"headerlink\" title=\"题目来源–794. 高精度除法\"></a>题目来源–<a href=\"https://www.acwing.com/problem/content/796/\" title=\"高精度除法\">794. 高精度除法</a></h3><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">题目描述</span><br><span class=\"line\">\t给定两个非负整数（不含前导 <span class=\"number\">0</span>） A，B，请你计算 A/B 的商和余数。</span><br><span class=\"line\"></span><br><span class=\"line\">输入格式</span><br><span class=\"line\">\t共两行，第一行包含整数 A，第二行包含整数 B。</span><br><span class=\"line\"></span><br><span class=\"line\">输出格式</span><br><span class=\"line\">\t共两行，第一行输出所求的商，第二行输出所求余数。</span><br><span class=\"line\"></span><br><span class=\"line\">数据范围</span><br><span class=\"line\">\t<span class=\"number\">1</span>≤A的长度≤<span class=\"number\">100000</span>,</span><br><span class=\"line\">\t<span class=\"number\">1</span>≤B≤<span class=\"number\">10000</span>,</span><br><span class=\"line\">\tB 一定不为 <span class=\"number\">0</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输入样例：</span><br><span class=\"line\">\t<span class=\"number\">7</span></span><br><span class=\"line\">\t<span class=\"number\">2</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输出样例：</span><br><span class=\"line\">\t<span class=\"number\">3</span></span><br><span class=\"line\">\t<span class=\"number\">1</span></span><br><span class=\"line\">\t</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"代码演示-8\"><a href=\"#代码演示-8\" class=\"headerlink\" title=\"代码演示\"></a>代码演示</h3><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;vector&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;algorithm&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> std;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\">vector&lt;<span class=\"type\">int</span>&gt; <span class=\"title\">div</span><span class=\"params\">(vector&lt;<span class=\"type\">int</span>&gt; &amp;A, <span class=\"type\">int</span> b, <span class=\"type\">int</span> &amp;r)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    vector&lt;<span class=\"type\">int</span>&gt; C;</span><br><span class=\"line\">    r = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = A.<span class=\"built_in\">size</span>() - <span class=\"number\">1</span>; i &gt;= <span class=\"number\">0</span>; i -- )</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        r = r * <span class=\"number\">10</span> + A[i];</span><br><span class=\"line\">        C.<span class=\"built_in\">push_back</span>(r / b);</span><br><span class=\"line\">        r %= b;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"built_in\">reverse</span>(C.<span class=\"built_in\">begin</span>(), C.<span class=\"built_in\">end</span>());</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (C.<span class=\"built_in\">size</span>() &gt; <span class=\"number\">1</span> &amp;&amp; C.<span class=\"built_in\">back</span>() == <span class=\"number\">0</span>) C.<span class=\"built_in\">pop_back</span>();</span><br><span class=\"line\">    <span class=\"keyword\">return</span> C;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    string a;</span><br><span class=\"line\">    vector&lt;<span class=\"type\">int</span>&gt; A;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"type\">int</span> B;</span><br><span class=\"line\">    cin &gt;&gt; a &gt;&gt; B;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = a.<span class=\"built_in\">size</span>() - <span class=\"number\">1</span>; i &gt;= <span class=\"number\">0</span>; i -- ) A.<span class=\"built_in\">push_back</span>(a[i] - <span class=\"string\">&#x27;0&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"type\">int</span> r;</span><br><span class=\"line\">    <span class=\"keyword\">auto</span> C = <span class=\"built_in\">div</span>(A, B, r);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = C.<span class=\"built_in\">size</span>() - <span class=\"number\">1</span>; i &gt;= <span class=\"number\">0</span>; i -- ) cout &lt;&lt; C[i];</span><br><span class=\"line\"></span><br><span class=\"line\">    cout &lt;&lt; endl &lt;&lt; r &lt;&lt; endl;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">作者：yxc</span><br><span class=\"line\">链接：https:<span class=\"comment\">//www.acwing.com/activity/content/code/content/39795/</span></span><br><span class=\"line\">来源：AcWing</span><br><span class=\"line\">著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h1 id=\"AcWing-795-前缀和\"><a href=\"#AcWing-795-前缀和\" class=\"headerlink\" title=\"AcWing 795. 前缀和\"></a>AcWing 795. 前缀和</h1><h3 id=\"题目来源–795-前缀和\"><a href=\"#题目来源–795-前缀和\" class=\"headerlink\" title=\"题目来源–795. 前缀和\"></a>题目来源–<a href=\"https://www.acwing.com/problem/content/797/\" title=\"前缀和\">795. 前缀和</a></h3><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">题目描述</span><br><span class=\"line\">\t输入一个长度为 n 的整数序列。</span><br><span class=\"line\">\t接下来再输入 m 个询问，每个询问输入一对 l,r。</span><br><span class=\"line\">\t对于每个询问，输出原序列中从第 l 个数到第 r 个数的和。</span><br><span class=\"line\"></span><br><span class=\"line\">输入格式</span><br><span class=\"line\">\t第一行包含两个整数 n 和 m。</span><br><span class=\"line\">\t第二行包含 n 个整数，表示整数数列。</span><br><span class=\"line\">\t接下来 m 行，每行包含两个整数 l 和 r，表示一个询问的区间范围。</span><br><span class=\"line\"></span><br><span class=\"line\">输出格式</span><br><span class=\"line\">\t共 m 行，每行输出一个询问的结果。</span><br><span class=\"line\"></span><br><span class=\"line\">数据范围</span><br><span class=\"line\">\t<span class=\"number\">1</span>≤l≤r≤n,</span><br><span class=\"line\">\t<span class=\"number\">1</span>≤n,m≤<span class=\"number\">100000</span>,</span><br><span class=\"line\">\t−<span class=\"number\">1000</span>≤数列中元素的值≤<span class=\"number\">1000</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输入样例：</span><br><span class=\"line\">\t<span class=\"number\">5</span> <span class=\"number\">3</span></span><br><span class=\"line\">\t<span class=\"number\">2</span> <span class=\"number\">1</span> <span class=\"number\">3</span> <span class=\"number\">6</span> <span class=\"number\">4</span></span><br><span class=\"line\">\t<span class=\"number\">1</span> <span class=\"number\">2</span></span><br><span class=\"line\">\t<span class=\"number\">1</span> <span class=\"number\">3</span></span><br><span class=\"line\">\t<span class=\"number\">2</span> <span class=\"number\">4</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输出样例：</span><br><span class=\"line\">\t<span class=\"number\">3</span></span><br><span class=\"line\">\t<span class=\"number\">6</span></span><br><span class=\"line\">\t<span class=\"number\">10</span></span><br><span class=\"line\">\t</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"代码演示-9\"><a href=\"#代码演示-9\" class=\"headerlink\" title=\"代码演示\"></a>代码演示</h3><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> std;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">const</span> <span class=\"type\">int</span> N = <span class=\"number\">100010</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">int</span> n, m;</span><br><span class=\"line\"><span class=\"type\">int</span> a[N], s[N];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d%d&quot;</span>, &amp;n, &amp;m);</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">1</span>; i &lt;= n; i ++ ) <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>, &amp;a[i]);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">1</span>; i &lt;= n; i ++ ) s[i] = s[i - <span class=\"number\">1</span>] + a[i]; <span class=\"comment\">// 前缀和的初始化</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">while</span> (m -- )</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"type\">int</span> l, r;</span><br><span class=\"line\">        <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d%d&quot;</span>, &amp;l, &amp;r);</span><br><span class=\"line\">        <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d\\n&quot;</span>, s[r] - s[l - <span class=\"number\">1</span>]); <span class=\"comment\">// 区间和的计算</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">作者：yxc</span><br><span class=\"line\">链接：https:<span class=\"comment\">//www.acwing.com/activity/content/code/content/39796/</span></span><br><span class=\"line\">来源：AcWing</span><br><span class=\"line\">著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h1 id=\"AcWing-796-子矩阵的和\"><a href=\"#AcWing-796-子矩阵的和\" class=\"headerlink\" title=\"AcWing 796. 子矩阵的和\"></a>AcWing 796. 子矩阵的和</h1><h3 id=\"题目来源–796-子矩阵的和\"><a href=\"#题目来源–796-子矩阵的和\" class=\"headerlink\" title=\"题目来源–796. 子矩阵的和\"></a>题目来源–<a href=\"https://www.acwing.com/problem/content/798/\" title=\"子矩阵的和\">796. 子矩阵的和</a></h3><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">题目描述</span><br><span class=\"line\">\t输入一个 n 行 m 列的整数矩阵，再输入 q 个询问，每个询问包含四个整数 x1,y1,x2,y2，表示一个子矩阵的左上角坐标和右下角坐标。</span><br><span class=\"line\">\t对于每个询问输出子矩阵中所有数的和。</span><br><span class=\"line\"></span><br><span class=\"line\">输入格式</span><br><span class=\"line\">\t第一行包含三个整数 n，m，q。</span><br><span class=\"line\">\t接下来 n 行，每行包含 m 个整数，表示整数矩阵。</span><br><span class=\"line\">\t接下来 q 行，每行包含四个整数 x1,y1,x2,y2，表示一组询问。</span><br><span class=\"line\"></span><br><span class=\"line\">输出格式</span><br><span class=\"line\">\t共 q 行，每行输出一个询问的结果。</span><br><span class=\"line\"></span><br><span class=\"line\">数据范围</span><br><span class=\"line\">\t<span class=\"number\">1</span>≤n,m≤<span class=\"number\">1000</span>,</span><br><span class=\"line\">\t<span class=\"number\">1</span>≤q≤<span class=\"number\">200000</span>,</span><br><span class=\"line\">\t<span class=\"number\">1</span>≤x1≤x2≤n,</span><br><span class=\"line\">\t<span class=\"number\">1</span>≤y1≤y2≤m,</span><br><span class=\"line\">\t−<span class=\"number\">1000</span>≤矩阵内元素的值≤<span class=\"number\">1000</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输入样例：</span><br><span class=\"line\">\t<span class=\"number\">3</span> <span class=\"number\">4</span> <span class=\"number\">3</span></span><br><span class=\"line\">\t<span class=\"number\">1</span> <span class=\"number\">7</span> <span class=\"number\">2</span> <span class=\"number\">4</span></span><br><span class=\"line\">\t<span class=\"number\">3</span> <span class=\"number\">6</span> <span class=\"number\">2</span> <span class=\"number\">8</span></span><br><span class=\"line\">\t<span class=\"number\">2</span> <span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span></span><br><span class=\"line\">\t<span class=\"number\">1</span> <span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">2</span></span><br><span class=\"line\">\t<span class=\"number\">2</span> <span class=\"number\">1</span> <span class=\"number\">3</span> <span class=\"number\">4</span></span><br><span class=\"line\">\t<span class=\"number\">1</span> <span class=\"number\">3</span> <span class=\"number\">3</span> <span class=\"number\">4</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输出样例：</span><br><span class=\"line\">\t<span class=\"number\">17</span></span><br><span class=\"line\">\t<span class=\"number\">27</span></span><br><span class=\"line\">\t<span class=\"number\">21</span></span><br><span class=\"line\">\t</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"代码演示-10\"><a href=\"#代码演示-10\" class=\"headerlink\" title=\"代码演示\"></a>代码演示</h3><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> std;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">const</span> <span class=\"type\">int</span> N = <span class=\"number\">1010</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">int</span> n, m, q;</span><br><span class=\"line\"><span class=\"type\">int</span> s[N][N];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d%d%d&quot;</span>, &amp;n, &amp;m, &amp;q);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">1</span>; i &lt;= n; i ++ )</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> j = <span class=\"number\">1</span>; j &lt;= m; j ++ )</span><br><span class=\"line\">            <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>, &amp;s[i][j]);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">1</span>; i &lt;= n; i ++ )</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> j = <span class=\"number\">1</span>; j &lt;= m; j ++ )</span><br><span class=\"line\">            s[i][j] += s[i - <span class=\"number\">1</span>][j] + s[i][j - <span class=\"number\">1</span>] - s[i - <span class=\"number\">1</span>][j - <span class=\"number\">1</span>];</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">while</span> (q -- )</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"type\">int</span> x1, y1, x2, y2;</span><br><span class=\"line\">        <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d%d%d%d&quot;</span>, &amp;x1, &amp;y1, &amp;x2, &amp;y2);</span><br><span class=\"line\">        <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d\\n&quot;</span>, s[x2][y2] - s[x1 - <span class=\"number\">1</span>][y2] - s[x2][y1 - <span class=\"number\">1</span>] + s[x1 - <span class=\"number\">1</span>][y1 - <span class=\"number\">1</span>]);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">作者：yxc</span><br><span class=\"line\">链接：https:<span class=\"comment\">//www.acwing.com/activity/content/code/content/39797/</span></span><br><span class=\"line\">来源：AcWing</span><br><span class=\"line\">著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h1 id=\"AcWing-797-差分\"><a href=\"#AcWing-797-差分\" class=\"headerlink\" title=\"AcWing 797. 差分\"></a>AcWing 797. 差分</h1><h3 id=\"题目来源–797-差分\"><a href=\"#题目来源–797-差分\" class=\"headerlink\" title=\"题目来源–797. 差分\"></a>题目来源–<a href=\"https://www.acwing.com/problem/content/799/\" title=\"差分\">797. 差分</a></h3><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">题目描述</span><br><span class=\"line\">\t输入一个长度为 n 的整数序列。</span><br><span class=\"line\">\t接下来输入 m 个操作，每个操作包含三个整数 l,r,c，表示将序列中 [l,r] 之间的每个数加上 c。</span><br><span class=\"line\">\t请你输出进行完所有操作后的序列。</span><br><span class=\"line\"></span><br><span class=\"line\">输入格式</span><br><span class=\"line\">\t第一行包含两个整数 n 和 m。</span><br><span class=\"line\">\t第二行包含 n 个整数，表示整数序列。</span><br><span class=\"line\">\t接下来 m 行，每行包含三个整数 l，r，c，表示一个操作。</span><br><span class=\"line\"></span><br><span class=\"line\">输出格式</span><br><span class=\"line\">\t共一行，包含 n 个整数，表示最终序列。</span><br><span class=\"line\"></span><br><span class=\"line\">数据范围</span><br><span class=\"line\">\t<span class=\"number\">1</span>≤n,m≤<span class=\"number\">100000</span>,</span><br><span class=\"line\">\t<span class=\"number\">1</span>≤l≤r≤n,</span><br><span class=\"line\">\t−<span class=\"number\">1000</span>≤c≤<span class=\"number\">1000</span>,</span><br><span class=\"line\">\t−<span class=\"number\">1000</span>≤整数序列中元素的值≤<span class=\"number\">1000</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输入样例：</span><br><span class=\"line\">\t<span class=\"number\">6</span> <span class=\"number\">3</span></span><br><span class=\"line\">\t<span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">2</span> <span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">1</span></span><br><span class=\"line\">\t<span class=\"number\">1</span> <span class=\"number\">3</span> <span class=\"number\">1</span></span><br><span class=\"line\">\t<span class=\"number\">3</span> <span class=\"number\">5</span> <span class=\"number\">1</span></span><br><span class=\"line\">\t<span class=\"number\">1</span> <span class=\"number\">6</span> <span class=\"number\">1</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输出样例：</span><br><span class=\"line\">\t<span class=\"number\">3</span> <span class=\"number\">4</span> <span class=\"number\">5</span> <span class=\"number\">3</span> <span class=\"number\">4</span> <span class=\"number\">2</span></span><br><span class=\"line\">\t</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"代码演示-11\"><a href=\"#代码演示-11\" class=\"headerlink\" title=\"代码演示\"></a>代码演示</h3><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> std;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">const</span> <span class=\"type\">int</span> N = <span class=\"number\">100010</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">int</span> n, m;</span><br><span class=\"line\"><span class=\"type\">int</span> a[N], b[N];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">insert</span><span class=\"params\">(<span class=\"type\">int</span> l, <span class=\"type\">int</span> r, <span class=\"type\">int</span> c)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    b[l] += c;</span><br><span class=\"line\">    b[r + <span class=\"number\">1</span>] -= c;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d%d&quot;</span>, &amp;n, &amp;m);</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">1</span>; i &lt;= n; i ++ ) <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>, &amp;a[i]);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">1</span>; i &lt;= n; i ++ ) <span class=\"built_in\">insert</span>(i, i, a[i]);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">while</span> (m -- )</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"type\">int</span> l, r, c;</span><br><span class=\"line\">        <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d%d%d&quot;</span>, &amp;l, &amp;r, &amp;c);</span><br><span class=\"line\">        <span class=\"built_in\">insert</span>(l, r, c);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">1</span>; i &lt;= n; i ++ ) b[i] += b[i - <span class=\"number\">1</span>];</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">1</span>; i &lt;= n; i ++ ) <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d &quot;</span>, b[i]);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">作者：yxc</span><br><span class=\"line\">链接：https:<span class=\"comment\">//www.acwing.com/activity/content/code/content/39799/</span></span><br><span class=\"line\">来源：AcWing</span><br><span class=\"line\">著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h1 id=\"AcWing-798-差分矩阵\"><a href=\"#AcWing-798-差分矩阵\" class=\"headerlink\" title=\"AcWing 798. 差分矩阵\"></a>AcWing 798. 差分矩阵</h1><h3 id=\"题目来源–798-差分矩阵\"><a href=\"#题目来源–798-差分矩阵\" class=\"headerlink\" title=\"题目来源–798. 差分矩阵\"></a>题目来源–<a href=\"https://www.acwing.com/problem/content/800/\" title=\"差分\">798. 差分矩阵</a></h3><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">题目描述</span><br><span class=\"line\">\t输入一个 n 行 m 列的整数矩阵，再输入 q 个操作，每个操作包含五个整数 x1,y1,x2,y2,c，其中 (x1,y1) 和 (x2,y2) 表示一个子矩阵的左上角坐标和右下角坐标。</span><br><span class=\"line\">\t每个操作都要将选中的子矩阵中的每个元素的值加上 c。</span><br><span class=\"line\">\t请你将进行完所有操作后的矩阵输出。</span><br><span class=\"line\"></span><br><span class=\"line\">输入格式</span><br><span class=\"line\">\t第一行包含整数 n,m,q。</span><br><span class=\"line\">\t接下来 n 行，每行包含 m 个整数，表示整数矩阵。</span><br><span class=\"line\">\t接下来 q 行，每行包含 <span class=\"number\">5</span> 个整数 x1,y1,x2,y2,c，表示一个操作。</span><br><span class=\"line\"></span><br><span class=\"line\">输出格式</span><br><span class=\"line\">\t共 n 行，每行 m 个整数，表示所有操作进行完毕后的最终矩阵。</span><br><span class=\"line\"></span><br><span class=\"line\">数据范围</span><br><span class=\"line\">\t<span class=\"number\">1</span>≤n,m≤<span class=\"number\">1000</span>,</span><br><span class=\"line\">\t<span class=\"number\">1</span>≤q≤<span class=\"number\">100000</span>,</span><br><span class=\"line\">\t<span class=\"number\">1</span>≤x1≤x2≤n,</span><br><span class=\"line\">\t<span class=\"number\">1</span>≤y1≤y2≤m,</span><br><span class=\"line\">\t−<span class=\"number\">1000</span>≤c≤<span class=\"number\">1000</span>,</span><br><span class=\"line\">\t−<span class=\"number\">1000</span>≤矩阵内元素的值≤<span class=\"number\">1000</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输入样例：</span><br><span class=\"line\">\t<span class=\"number\">3</span> <span class=\"number\">4</span> <span class=\"number\">3</span></span><br><span class=\"line\">\t<span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">2</span> <span class=\"number\">1</span></span><br><span class=\"line\">\t<span class=\"number\">3</span> <span class=\"number\">2</span> <span class=\"number\">2</span> <span class=\"number\">1</span></span><br><span class=\"line\">\t<span class=\"number\">1</span> <span class=\"number\">1</span> <span class=\"number\">1</span> <span class=\"number\">1</span></span><br><span class=\"line\">\t<span class=\"number\">1</span> <span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">2</span> <span class=\"number\">1</span></span><br><span class=\"line\">\t<span class=\"number\">1</span> <span class=\"number\">3</span> <span class=\"number\">2</span> <span class=\"number\">3</span> <span class=\"number\">2</span></span><br><span class=\"line\">\t<span class=\"number\">3</span> <span class=\"number\">1</span> <span class=\"number\">3</span> <span class=\"number\">4</span> <span class=\"number\">1</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输出样例：</span><br><span class=\"line\">\t<span class=\"number\">2</span> <span class=\"number\">3</span> <span class=\"number\">4</span> <span class=\"number\">1</span></span><br><span class=\"line\">\t<span class=\"number\">4</span> <span class=\"number\">3</span> <span class=\"number\">4</span> <span class=\"number\">1</span></span><br><span class=\"line\">\t<span class=\"number\">2</span> <span class=\"number\">2</span> <span class=\"number\">2</span> <span class=\"number\">2</span></span><br><span class=\"line\">\t</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"代码演示-12\"><a href=\"#代码演示-12\" class=\"headerlink\" title=\"代码演示\"></a>代码演示</h3><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> std;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">const</span> <span class=\"type\">int</span> N = <span class=\"number\">1010</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">int</span> n, m, q;</span><br><span class=\"line\"><span class=\"type\">int</span> a[N][N], b[N][N];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">insert</span><span class=\"params\">(<span class=\"type\">int</span> x1, <span class=\"type\">int</span> y1, <span class=\"type\">int</span> x2, <span class=\"type\">int</span> y2, <span class=\"type\">int</span> c)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    b[x1][y1] += c;</span><br><span class=\"line\">    b[x2 + <span class=\"number\">1</span>][y1] -= c;</span><br><span class=\"line\">    b[x1][y2 + <span class=\"number\">1</span>] -= c;</span><br><span class=\"line\">    b[x2 + <span class=\"number\">1</span>][y2 + <span class=\"number\">1</span>] += c;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d%d%d&quot;</span>, &amp;n, &amp;m, &amp;q);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">1</span>; i &lt;= n; i ++ )</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> j = <span class=\"number\">1</span>; j &lt;= m; j ++ )</span><br><span class=\"line\">            <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>, &amp;a[i][j]);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">1</span>; i &lt;= n; i ++ )</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> j = <span class=\"number\">1</span>; j &lt;= m; j ++ )</span><br><span class=\"line\">            <span class=\"built_in\">insert</span>(i, j, i, j, a[i][j]);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">while</span> (q -- )</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"type\">int</span> x1, y1, x2, y2, c;</span><br><span class=\"line\">        cin &gt;&gt; x1 &gt;&gt; y1 &gt;&gt; x2 &gt;&gt; y2 &gt;&gt; c;</span><br><span class=\"line\">        <span class=\"built_in\">insert</span>(x1, y1, x2, y2, c);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">1</span>; i &lt;= n; i ++ )</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> j = <span class=\"number\">1</span>; j &lt;= m; j ++ )</span><br><span class=\"line\">            b[i][j] += b[i - <span class=\"number\">1</span>][j] + b[i][j - <span class=\"number\">1</span>] - b[i - <span class=\"number\">1</span>][j - <span class=\"number\">1</span>];</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">1</span>; i &lt;= n; i ++ )</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> j = <span class=\"number\">1</span>; j &lt;= m; j ++ ) <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d &quot;</span>, b[i][j]);</span><br><span class=\"line\">        <span class=\"built_in\">puts</span>(<span class=\"string\">&quot;&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">作者：yxc</span><br><span class=\"line\">链接：https:<span class=\"comment\">//www.acwing.com/activity/content/code/content/39800/</span></span><br><span class=\"line\">来源：AcWing</span><br><span class=\"line\">著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h1 id=\"AcWing-799-最长连续不重复子序列\"><a href=\"#AcWing-799-最长连续不重复子序列\" class=\"headerlink\" title=\"AcWing 799. 最长连续不重复子序列\"></a>AcWing 799. 最长连续不重复子序列</h1><h3 id=\"题目来源–799-最长连续不重复子序列\"><a href=\"#题目来源–799-最长连续不重复子序列\" class=\"headerlink\" title=\"题目来源–799. 最长连续不重复子序列\"></a>题目来源–<a href=\"https://www.acwing.com/problem/content/801/\" title=\"最长连续不重复子序列\">799. 最长连续不重复子序列</a></h3><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">题目描述</span><br><span class=\"line\">\t给定一个长度为 n 的整数序列，请找出最长的不包含重复的数的连续区间，输出它的长度。</span><br><span class=\"line\"></span><br><span class=\"line\">输入格式</span><br><span class=\"line\">\t第一行包含整数 n。</span><br><span class=\"line\">\t第二行包含 n 个整数（均在 <span class=\"number\">0</span>∼<span class=\"number\">105</span> 范围内），表示整数序列。</span><br><span class=\"line\"></span><br><span class=\"line\">输出格式</span><br><span class=\"line\">\t共一行，包含一个整数，表示最长的不包含重复的数的连续区间的长度。</span><br><span class=\"line\"></span><br><span class=\"line\">数据范围</span><br><span class=\"line\">\t<span class=\"number\">1</span>≤n≤<span class=\"number\">105</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输入样例：</span><br><span class=\"line\">\t<span class=\"number\">5</span></span><br><span class=\"line\">\t<span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">2</span> <span class=\"number\">3</span> <span class=\"number\">5</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输出样例：</span><br><span class=\"line\">\t<span class=\"number\">3</span></span><br><span class=\"line\">\t</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"代码演示-13\"><a href=\"#代码演示-13\" class=\"headerlink\" title=\"代码演示\"></a>代码演示</h3><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> std;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">const</span> <span class=\"type\">int</span> N = <span class=\"number\">100010</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">int</span> n;</span><br><span class=\"line\"><span class=\"type\">int</span> q[N], s[N];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>, &amp;n);</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; n; i ++ ) <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>, &amp;q[i]);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"type\">int</span> res = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>, j = <span class=\"number\">0</span>; i &lt; n; i ++ )</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        s[q[i]] ++ ;</span><br><span class=\"line\">        <span class=\"keyword\">while</span> (j &lt; i &amp;&amp; s[q[i]] &gt; <span class=\"number\">1</span>) s[q[j ++ ]] -- ;</span><br><span class=\"line\">        res = <span class=\"built_in\">max</span>(res, i - j + <span class=\"number\">1</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    cout &lt;&lt; res &lt;&lt; endl;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">作者：yxc</span><br><span class=\"line\">链接：https:<span class=\"comment\">//www.acwing.com/activity/content/code/content/40066/</span></span><br><span class=\"line\">来源：AcWing</span><br><span class=\"line\">著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h1 id=\"AcWing-800-数组元素的目标和\"><a href=\"#AcWing-800-数组元素的目标和\" class=\"headerlink\" title=\"AcWing 800. 数组元素的目标和\"></a>AcWing 800. 数组元素的目标和</h1><h3 id=\"题目来源–800-数组元素的目标和\"><a href=\"#题目来源–800-数组元素的目标和\" class=\"headerlink\" title=\"题目来源–800. 数组元素的目标和\"></a>题目来源–<a href=\"https://www.acwing.com/problem/content/802/\" title=\"数组元素的目标和\">800. 数组元素的目标和</a></h3><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">题目描述</span><br><span class=\"line\">\t给定两个升序排序的有序数组 A 和 B，以及一个目标值 x。</span><br><span class=\"line\">\t数组下标从 <span class=\"number\">0</span> 开始。</span><br><span class=\"line\">\t请你求出满足 A[i]+B[j]=x 的数对 (i,j)。</span><br><span class=\"line\">\t数据保证有唯一解。</span><br><span class=\"line\"></span><br><span class=\"line\">输入格式</span><br><span class=\"line\">\t第一行包含三个整数 n,m,x，分别表示 A 的长度，B 的长度以及目标值 x。</span><br><span class=\"line\">\t第二行包含 n 个整数，表示数组 A。</span><br><span class=\"line\">\t第三行包含 m 个整数，表示数组 B。</span><br><span class=\"line\"></span><br><span class=\"line\">输出格式</span><br><span class=\"line\">\t共一行，包含两个整数 i 和 j。</span><br><span class=\"line\"></span><br><span class=\"line\">数据范围</span><br><span class=\"line\">\t数组长度不超过 <span class=\"number\">105</span>。</span><br><span class=\"line\">\t同一数组内元素各不相同。</span><br><span class=\"line\">\t<span class=\"number\">1</span>≤数组元素≤<span class=\"number\">109</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输入样例：</span><br><span class=\"line\">\t<span class=\"number\">4</span> <span class=\"number\">5</span> <span class=\"number\">6</span></span><br><span class=\"line\">\t<span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">4</span> <span class=\"number\">7</span></span><br><span class=\"line\">\t<span class=\"number\">3</span> <span class=\"number\">4</span> <span class=\"number\">6</span> <span class=\"number\">8</span> <span class=\"number\">9</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输出样例：</span><br><span class=\"line\">\t<span class=\"number\">1</span> <span class=\"number\">1</span></span><br><span class=\"line\">\t</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"代码演示-14\"><a href=\"#代码演示-14\" class=\"headerlink\" title=\"代码演示\"></a>代码演示</h3><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> std;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">const</span> <span class=\"type\">int</span> N = <span class=\"number\">1e5</span> + <span class=\"number\">10</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">int</span> n, m, x;</span><br><span class=\"line\"><span class=\"type\">int</span> a[N], b[N];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d%d%d&quot;</span>, &amp;n, &amp;m, &amp;x);</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; n; i ++ ) <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>, &amp;a[i]);</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; m; i ++ ) <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>, &amp;b[i]);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>, j = m - <span class=\"number\">1</span>; i &lt; n; i ++ )</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">while</span> (j &gt;= <span class=\"number\">0</span> &amp;&amp; a[i] + b[j] &gt; x) j -- ;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (j &gt;= <span class=\"number\">0</span> &amp;&amp; a[i] + b[j] == x) cout &lt;&lt; i &lt;&lt; <span class=\"string\">&#x27; &#x27;</span> &lt;&lt; j &lt;&lt; endl;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">作者：yxc</span><br><span class=\"line\">链接：https:<span class=\"comment\">//www.acwing.com/activity/content/code/content/40069/</span></span><br><span class=\"line\">来源：AcWing</span><br><span class=\"line\">著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h1 id=\"AcWing-801-二进制中1的个数\"><a href=\"#AcWing-801-二进制中1的个数\" class=\"headerlink\" title=\"AcWing 801. 二进制中1的个数\"></a>AcWing 801. 二进制中1的个数</h1><h3 id=\"题目来源–801-二进制中1的个数\"><a href=\"#题目来源–801-二进制中1的个数\" class=\"headerlink\" title=\"题目来源–801. 二进制中1的个数\"></a>题目来源–<a href=\"https://www.acwing.com/problem/content/803/\" title=\"判断子序列\">801. 二进制中1的个数</a></h3><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">题目描述</span><br><span class=\"line\">\t给定一个长度为 n 的数列，请你求出数列中每个数的二进制表示中 <span class=\"number\">1</span> 的个数。</span><br><span class=\"line\"></span><br><span class=\"line\">输入格式</span><br><span class=\"line\">\t第一行包含整数 n。</span><br><span class=\"line\">\t第二行包含 n 个整数，表示整个数列。</span><br><span class=\"line\"></span><br><span class=\"line\">输出格式</span><br><span class=\"line\">\t共一行，包含 n 个整数，其中的第 i 个数表示数列中的第 i 个数的二进制表示中 <span class=\"number\">1</span> 的个数。</span><br><span class=\"line\"></span><br><span class=\"line\">数据范围</span><br><span class=\"line\">\t<span class=\"number\">1</span>≤n≤<span class=\"number\">100000</span>,</span><br><span class=\"line\">\t<span class=\"number\">0</span>≤数列中元素的值≤<span class=\"number\">109</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输入样例：</span><br><span class=\"line\">\t<span class=\"number\">5</span></span><br><span class=\"line\">\t<span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span> <span class=\"number\">4</span> <span class=\"number\">5</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输出样例：</span><br><span class=\"line\">\t<span class=\"number\">1</span> <span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">1</span> <span class=\"number\">2</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"代码演示-15\"><a href=\"#代码演示-15\" class=\"headerlink\" title=\"代码演示\"></a>代码演示</h3><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> std;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> n;</span><br><span class=\"line\">    <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>, &amp;n);</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (n -- )</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"type\">int</span> x, s = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>, &amp;x);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = x; i; i -= i &amp; -i) s ++ ;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d &quot;</span>, s);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h1 id=\"AcWing-802-区间和\"><a href=\"#AcWing-802-区间和\" class=\"headerlink\" title=\"AcWing 802. 区间和\"></a>AcWing 802. 区间和</h1><h3 id=\"题目来源–802-区间和\"><a href=\"#题目来源–802-区间和\" class=\"headerlink\" title=\"题目来源–802. 区间和\"></a>题目来源–<a href=\"https://www.acwing.com/problem/content/804/\" title=\"区间和\">802. 区间和</a></h3><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">题目描述</span><br><span class=\"line\">\t假定有一个无限长的数轴，数轴上每个坐标上的数都是 <span class=\"number\">0</span>。</span><br><span class=\"line\">\t现在，我们首先进行 n 次操作，每次操作将某一位置 x 上的数加 c。</span><br><span class=\"line\">\t接下来，进行 m 次询问，每个询问包含两个整数 l 和 r，你需要求出在区间 [l,r] 之间的所有数的和。</span><br><span class=\"line\"></span><br><span class=\"line\">输入格式</span><br><span class=\"line\">\t第一行包含两个整数 n 和 m。</span><br><span class=\"line\">\t接下来 n 行，每行包含两个整数 x 和 c。</span><br><span class=\"line\">\t再接下来 m 行，每行包含两个整数 l 和 r。</span><br><span class=\"line\"></span><br><span class=\"line\">输出格式</span><br><span class=\"line\">\t共 m 行，每行输出一个询问中所求的区间内数字和。</span><br><span class=\"line\"></span><br><span class=\"line\">数据范围</span><br><span class=\"line\">\t−<span class=\"number\">109</span>≤x≤<span class=\"number\">109</span>,</span><br><span class=\"line\">\t<span class=\"number\">1</span>≤n,m≤<span class=\"number\">105</span>,</span><br><span class=\"line\">\t−<span class=\"number\">109</span>≤l≤r≤<span class=\"number\">109</span>,</span><br><span class=\"line\">\t−<span class=\"number\">10000</span>≤c≤<span class=\"number\">10000</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输入样例：</span><br><span class=\"line\">\t<span class=\"number\">3</span> <span class=\"number\">3</span></span><br><span class=\"line\">\t<span class=\"number\">1</span> <span class=\"number\">2</span></span><br><span class=\"line\">\t<span class=\"number\">3</span> <span class=\"number\">6</span></span><br><span class=\"line\">\t<span class=\"number\">7</span> <span class=\"number\">5</span></span><br><span class=\"line\">\t<span class=\"number\">1</span> <span class=\"number\">3</span></span><br><span class=\"line\">\t<span class=\"number\">4</span> <span class=\"number\">6</span></span><br><span class=\"line\">\t<span class=\"number\">7</span> <span class=\"number\">8</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输出样例：</span><br><span class=\"line\">\t<span class=\"number\">8</span></span><br><span class=\"line\">\t<span class=\"number\">0</span></span><br><span class=\"line\">\t<span class=\"number\">5</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"代码演示-16\"><a href=\"#代码演示-16\" class=\"headerlink\" title=\"代码演示\"></a>代码演示</h3><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;vector&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;algorithm&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> std;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">typedef</span> pair&lt;<span class=\"type\">int</span>, <span class=\"type\">int</span>&gt; PII;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">const</span> <span class=\"type\">int</span> N = <span class=\"number\">300010</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">int</span> n, m;</span><br><span class=\"line\"><span class=\"type\">int</span> a[N], s[N];</span><br><span class=\"line\"></span><br><span class=\"line\">vector&lt;<span class=\"type\">int</span>&gt; alls;</span><br><span class=\"line\">vector&lt;PII&gt; add, query;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">find</span><span class=\"params\">(<span class=\"type\">int</span> x)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> l = <span class=\"number\">0</span>, r = alls.<span class=\"built_in\">size</span>() - <span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (l &lt; r)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"type\">int</span> mid = l + r &gt;&gt; <span class=\"number\">1</span>;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (alls[mid] &gt;= x) r = mid;</span><br><span class=\"line\">        <span class=\"keyword\">else</span> l = mid + <span class=\"number\">1</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> r + <span class=\"number\">1</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    cin &gt;&gt; n &gt;&gt; m;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; n; i ++ )</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"type\">int</span> x, c;</span><br><span class=\"line\">        cin &gt;&gt; x &gt;&gt; c;</span><br><span class=\"line\">        add.<span class=\"built_in\">push_back</span>(&#123;x, c&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">        alls.<span class=\"built_in\">push_back</span>(x);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; m; i ++ )</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"type\">int</span> l, r;</span><br><span class=\"line\">        cin &gt;&gt; l &gt;&gt; r;</span><br><span class=\"line\">        query.<span class=\"built_in\">push_back</span>(&#123;l, r&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">        alls.<span class=\"built_in\">push_back</span>(l);</span><br><span class=\"line\">        alls.<span class=\"built_in\">push_back</span>(r);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 去重</span></span><br><span class=\"line\">    <span class=\"built_in\">sort</span>(alls.<span class=\"built_in\">begin</span>(), alls.<span class=\"built_in\">end</span>());</span><br><span class=\"line\">    alls.<span class=\"built_in\">erase</span>(<span class=\"built_in\">unique</span>(alls.<span class=\"built_in\">begin</span>(), alls.<span class=\"built_in\">end</span>()), alls.<span class=\"built_in\">end</span>());</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 处理插入</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">auto</span> item : add)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"type\">int</span> x = <span class=\"built_in\">find</span>(item.first);</span><br><span class=\"line\">        a[x] += item.second;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 预处理前缀和</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">1</span>; i &lt;= alls.<span class=\"built_in\">size</span>(); i ++ ) s[i] = s[i - <span class=\"number\">1</span>] + a[i];</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 处理询问</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">auto</span> item : query)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"type\">int</span> l = <span class=\"built_in\">find</span>(item.first), r = <span class=\"built_in\">find</span>(item.second);</span><br><span class=\"line\">        cout &lt;&lt; s[r] - s[l - <span class=\"number\">1</span>] &lt;&lt; endl;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">作者：yxc</span><br><span class=\"line\">链接：https:<span class=\"comment\">//www.acwing.com/activity/content/code/content/40105/</span></span><br><span class=\"line\">来源：AcWing</span><br><span class=\"line\">著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h1 id=\"AcWing-2816-判断子序列\"><a href=\"#AcWing-2816-判断子序列\" class=\"headerlink\" title=\"AcWing 2816. 判断子序列\"></a>AcWing 2816. 判断子序列</h1><h3 id=\"题目来源–2816-判断子序列\"><a href=\"#题目来源–2816-判断子序列\" class=\"headerlink\" title=\"题目来源–2816. 判断子序列\"></a>题目来源–<a href=\"https://www.acwing.com/problem/content/2818/\" title=\"判断子序列\">2816. 判断子序列</a></h3><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">题目描述</span><br><span class=\"line\">\t给定一个长度为 n 的整数序列 a1,a2,…,an 以及一个长度为 m 的整数序列 b1,b2,…,bm。</span><br><span class=\"line\">\t请你判断 a 序列是否为 b 序列的子序列。</span><br><span class=\"line\">\t子序列指序列的一部分项按原有次序排列而得的序列，例如序列 &#123;a1,a3,a5&#125; 是序列 &#123;a1,a2,a3,a4,a5&#125; 的一个子序列。</span><br><span class=\"line\"></span><br><span class=\"line\">输入格式</span><br><span class=\"line\">\t第一行包含两个整数 n,m。</span><br><span class=\"line\">\t第二行包含 n 个整数，表示 a1,a2,…,an。</span><br><span class=\"line\">\t第三行包含 m 个整数，表示 b1,b2,…,bm。</span><br><span class=\"line\"></span><br><span class=\"line\">输出格式</span><br><span class=\"line\">\t如果 a 序列是 b 序列的子序列，输出一行 Yes。</span><br><span class=\"line\">\t否则，输出 No。</span><br><span class=\"line\"></span><br><span class=\"line\">数据范围</span><br><span class=\"line\">\t<span class=\"number\">1</span>≤n≤m≤<span class=\"number\">105</span>,</span><br><span class=\"line\">\t−<span class=\"number\">109</span>≤ai,bi≤<span class=\"number\">109</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输入样例：</span><br><span class=\"line\">\t<span class=\"number\">3</span> <span class=\"number\">5</span></span><br><span class=\"line\">\t<span class=\"number\">1</span> <span class=\"number\">3</span> <span class=\"number\">5</span></span><br><span class=\"line\">\t<span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span> <span class=\"number\">4</span> <span class=\"number\">5</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输出样例：</span><br><span class=\"line\">\tYes</span><br><span class=\"line\"></span><br><span class=\"line\">\t</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"代码演示-17\"><a href=\"#代码演示-17\" class=\"headerlink\" title=\"代码演示\"></a>代码演示</h3><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;cstring&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> std;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">const</span> <span class=\"type\">int</span> N = <span class=\"number\">100010</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">int</span> n, m;</span><br><span class=\"line\"><span class=\"type\">int</span> a[N], b[N];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d%d&quot;</span>, &amp;n, &amp;m);</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; n; i ++ ) <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>, &amp;a[i]);</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; m; i ++ ) <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>, &amp;b[i]);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"type\">int</span> i = <span class=\"number\">0</span>, j = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (i &lt; n &amp;&amp; j &lt; m)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (a[i] == b[j]) i ++ ;</span><br><span class=\"line\">        j ++ ;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (i == n) <span class=\"built_in\">puts</span>(<span class=\"string\">&quot;Yes&quot;</span>);</span><br><span class=\"line\">    <span class=\"keyword\">else</span> <span class=\"built_in\">puts</span>(<span class=\"string\">&quot;No&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">作者：yxc</span><br><span class=\"line\">链接：https:<span class=\"comment\">//www.acwing.com/activity/content/code/content/589289/</span></span><br><span class=\"line\">来源：AcWing</span><br><span class=\"line\">著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</span><br></pre></td></tr></table></figure>"},{"title":"AcWing 827. 双链表","date":"2022-09-23T03:50:02.622Z","_content":"\n# AcWing 827. 双链表    \n### 题目来源--[827. 双链表](https://www.acwing.com/problem/content/829/ \"双链表\")\n\n- - -\n```c++\n\n题目描述\n\t实现一个双链表，双链表初始为空，支持 5 种操作：\n\t在最左侧插入一个数；\n\t在最右侧插入一个数；\n\t将第 k 个插入的数删除；\n\t在第 k 个插入的数左侧插入一个数；\n\t在第 k 个插入的数右侧插入一个数\n\t现在要对该链表进行 M 次操作，进行完所有操作后，从左到右输出整个链表。\n\t注意:题目中第 k 个插入的数并不是指当前链表的第 k 个数。例如操作过程中一共插入了 n 个数，则按照插入的时间顺序，这 n 个数依次为：第 1 个插入的数，第 2 个插入的数，…第 n 个插入的数。\n\n输入格式\n\t第一行包含整数 M，表示操作次数。\n\t接下来 M 行，每行包含一个操作命令，操作命令可能为以下几种：\n\tL x，表示在链表的最左端插入数 x。\n\tR x，表示在链表的最右端插入数 x。\n\tD k，表示将第 k 个插入的数删除。\n\tIL k x，表示在第 k 个插入的数左侧插入一个数。\n\tIR k x，表示在第 k 个插入的数右侧插入一个数。\n\t\n输出格式\n\t共一行，将整个链表从左到右输出。\n\n数据范围\n\t1≤M≤100000\n\t所有操作保证合法。\n\n输入样例：\n\t10\n\tR 7\n\tD 1\n\tL 3\n\tIL 2 10\n\tD 3\n\tIL 2 7\n\tL 8\n\tR 9\n\tIL 4 7\n\tIR 2 2\n\t\n输出样例：\n\t8 7 7 3 2 9\n\n\t\n```\n- - -\n## 代码演示\n```c++\n#include <iostream>\n\nusing namespace std;\n\nconst int N = 100010;\n\nint m;\nint e[N], l[N], r[N], idx;\n\n// 在节点a的右边插入一个数x\nvoid insert(int a, int x)\n{\n    e[idx] = x;\n    l[idx] = a, r[idx] = r[a];\n    l[r[a]] = idx, r[a] = idx ++ ;\n}\n\n// 删除节点a\nvoid remove(int a)\n{\n    l[r[a]] = l[a];\n    r[l[a]] = r[a];\n}\n\nint main()\n{\n    cin >> m;\n\n    // 0是左端点，1是右端点\n    r[0] = 1, l[1] = 0;\n    idx = 2;\n\n    while (m -- )\n    {\n        string op;\n        cin >> op;\n        int k, x;\n        if (op == \"L\")\n        {\n            cin >> x;\n            insert(0, x);\n        }\n        else if (op == \"R\")\n        {\n            cin >> x;\n            insert(l[1], x);\n        }\n        else if (op == \"D\")\n        {\n            cin >> k;\n            remove(k + 1);\n        }\n        else if (op == \"IL\")\n        {\n            cin >> k >> x;\n            insert(l[k + 1], x);\n        }\n        else\n        {\n            cin >> k >> x;\n            insert(k + 1, x);\n        }\n    }\n\n    for (int i = r[0]; i != 1; i = r[i]) cout << e[i] << ' ';\n    cout << endl;\n\n    return 0;\n}\n\n作者：yxc\n链接：https://www.acwing.com/activity/content/code/content/42982/\n来源：AcWing\n著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。\n```","source":"_posts/AcWing/算法基础课/2、数据结构/AcWing-827-双链表.md","raw":"---\ntitle: AcWing 827. 双链表   \ndate: \ntags: \n\t- Acwing \n\t- 双链表\ncategories: \n\t- [AcWing,算法基础课,2、数据结构]\n---\n\n# AcWing 827. 双链表    \n### 题目来源--[827. 双链表](https://www.acwing.com/problem/content/829/ \"双链表\")\n\n- - -\n```c++\n\n题目描述\n\t实现一个双链表，双链表初始为空，支持 5 种操作：\n\t在最左侧插入一个数；\n\t在最右侧插入一个数；\n\t将第 k 个插入的数删除；\n\t在第 k 个插入的数左侧插入一个数；\n\t在第 k 个插入的数右侧插入一个数\n\t现在要对该链表进行 M 次操作，进行完所有操作后，从左到右输出整个链表。\n\t注意:题目中第 k 个插入的数并不是指当前链表的第 k 个数。例如操作过程中一共插入了 n 个数，则按照插入的时间顺序，这 n 个数依次为：第 1 个插入的数，第 2 个插入的数，…第 n 个插入的数。\n\n输入格式\n\t第一行包含整数 M，表示操作次数。\n\t接下来 M 行，每行包含一个操作命令，操作命令可能为以下几种：\n\tL x，表示在链表的最左端插入数 x。\n\tR x，表示在链表的最右端插入数 x。\n\tD k，表示将第 k 个插入的数删除。\n\tIL k x，表示在第 k 个插入的数左侧插入一个数。\n\tIR k x，表示在第 k 个插入的数右侧插入一个数。\n\t\n输出格式\n\t共一行，将整个链表从左到右输出。\n\n数据范围\n\t1≤M≤100000\n\t所有操作保证合法。\n\n输入样例：\n\t10\n\tR 7\n\tD 1\n\tL 3\n\tIL 2 10\n\tD 3\n\tIL 2 7\n\tL 8\n\tR 9\n\tIL 4 7\n\tIR 2 2\n\t\n输出样例：\n\t8 7 7 3 2 9\n\n\t\n```\n- - -\n## 代码演示\n```c++\n#include <iostream>\n\nusing namespace std;\n\nconst int N = 100010;\n\nint m;\nint e[N], l[N], r[N], idx;\n\n// 在节点a的右边插入一个数x\nvoid insert(int a, int x)\n{\n    e[idx] = x;\n    l[idx] = a, r[idx] = r[a];\n    l[r[a]] = idx, r[a] = idx ++ ;\n}\n\n// 删除节点a\nvoid remove(int a)\n{\n    l[r[a]] = l[a];\n    r[l[a]] = r[a];\n}\n\nint main()\n{\n    cin >> m;\n\n    // 0是左端点，1是右端点\n    r[0] = 1, l[1] = 0;\n    idx = 2;\n\n    while (m -- )\n    {\n        string op;\n        cin >> op;\n        int k, x;\n        if (op == \"L\")\n        {\n            cin >> x;\n            insert(0, x);\n        }\n        else if (op == \"R\")\n        {\n            cin >> x;\n            insert(l[1], x);\n        }\n        else if (op == \"D\")\n        {\n            cin >> k;\n            remove(k + 1);\n        }\n        else if (op == \"IL\")\n        {\n            cin >> k >> x;\n            insert(l[k + 1], x);\n        }\n        else\n        {\n            cin >> k >> x;\n            insert(k + 1, x);\n        }\n    }\n\n    for (int i = r[0]; i != 1; i = r[i]) cout << e[i] << ' ';\n    cout << endl;\n\n    return 0;\n}\n\n作者：yxc\n链接：https://www.acwing.com/activity/content/code/content/42982/\n来源：AcWing\n著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。\n```","slug":"AcWing/算法基础课/2、数据结构/AcWing-827-双链表","published":1,"updated":"2022-09-23T03:50:02.622Z","comments":1,"layout":"post","photos":[],"link":"","_id":"claryulcb000n5ojr5fmq5bti","content":"<h1 id=\"AcWing-827-双链表\"><a href=\"#AcWing-827-双链表\" class=\"headerlink\" title=\"AcWing 827. 双链表\"></a>AcWing 827. 双链表</h1><h3 id=\"题目来源–827-双链表\"><a href=\"#题目来源–827-双链表\" class=\"headerlink\" title=\"题目来源–827. 双链表\"></a>题目来源–<a href=\"https://www.acwing.com/problem/content/829/\" title=\"双链表\">827. 双链表</a></h3><hr>\n<figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">题目描述</span><br><span class=\"line\">\t实现一个双链表，双链表初始为空，支持 <span class=\"number\">5</span> 种操作：</span><br><span class=\"line\">\t在最左侧插入一个数；</span><br><span class=\"line\">\t在最右侧插入一个数；</span><br><span class=\"line\">\t将第 k 个插入的数删除；</span><br><span class=\"line\">\t在第 k 个插入的数左侧插入一个数；</span><br><span class=\"line\">\t在第 k 个插入的数右侧插入一个数</span><br><span class=\"line\">\t现在要对该链表进行 M 次操作，进行完所有操作后，从左到右输出整个链表。</span><br><span class=\"line\">\t注意:题目中第 k 个插入的数并不是指当前链表的第 k 个数。例如操作过程中一共插入了 n 个数，则按照插入的时间顺序，这 n 个数依次为：第 <span class=\"number\">1</span> 个插入的数，第 <span class=\"number\">2</span> 个插入的数，…第 n 个插入的数。</span><br><span class=\"line\"></span><br><span class=\"line\">输入格式</span><br><span class=\"line\">\t第一行包含整数 M，表示操作次数。</span><br><span class=\"line\">\t接下来 M 行，每行包含一个操作命令，操作命令可能为以下几种：</span><br><span class=\"line\">\tL x，表示在链表的最左端插入数 x。</span><br><span class=\"line\">\tR x，表示在链表的最右端插入数 x。</span><br><span class=\"line\">\tD k，表示将第 k 个插入的数删除。</span><br><span class=\"line\">\tIL k x，表示在第 k 个插入的数左侧插入一个数。</span><br><span class=\"line\">\tIR k x，表示在第 k 个插入的数右侧插入一个数。</span><br><span class=\"line\">\t</span><br><span class=\"line\">输出格式</span><br><span class=\"line\">\t共一行，将整个链表从左到右输出。</span><br><span class=\"line\"></span><br><span class=\"line\">数据范围</span><br><span class=\"line\">\t<span class=\"number\">1</span>≤M≤<span class=\"number\">100000</span></span><br><span class=\"line\">\t所有操作保证合法。</span><br><span class=\"line\"></span><br><span class=\"line\">输入样例：</span><br><span class=\"line\">\t<span class=\"number\">10</span></span><br><span class=\"line\">\tR <span class=\"number\">7</span></span><br><span class=\"line\">\tD <span class=\"number\">1</span></span><br><span class=\"line\">\tL <span class=\"number\">3</span></span><br><span class=\"line\">\tIL <span class=\"number\">2</span> <span class=\"number\">10</span></span><br><span class=\"line\">\tD <span class=\"number\">3</span></span><br><span class=\"line\">\tIL <span class=\"number\">2</span> <span class=\"number\">7</span></span><br><span class=\"line\">\tL <span class=\"number\">8</span></span><br><span class=\"line\">\tR <span class=\"number\">9</span></span><br><span class=\"line\">\tIL <span class=\"number\">4</span> <span class=\"number\">7</span></span><br><span class=\"line\">\tIR <span class=\"number\">2</span> <span class=\"number\">2</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输出样例：</span><br><span class=\"line\">\t<span class=\"number\">8</span> <span class=\"number\">7</span> <span class=\"number\">7</span> <span class=\"number\">3</span> <span class=\"number\">2</span> <span class=\"number\">9</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t</span><br></pre></td></tr></table></figure>\n<hr>\n<h2 id=\"代码演示\"><a href=\"#代码演示\" class=\"headerlink\" title=\"代码演示\"></a>代码演示</h2><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> std;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">const</span> <span class=\"type\">int</span> N = <span class=\"number\">100010</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">int</span> m;</span><br><span class=\"line\"><span class=\"type\">int</span> e[N], l[N], r[N], idx;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 在节点a的右边插入一个数x</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">insert</span><span class=\"params\">(<span class=\"type\">int</span> a, <span class=\"type\">int</span> x)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    e[idx] = x;</span><br><span class=\"line\">    l[idx] = a, r[idx] = r[a];</span><br><span class=\"line\">    l[r[a]] = idx, r[a] = idx ++ ;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 删除节点a</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">remove</span><span class=\"params\">(<span class=\"type\">int</span> a)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    l[r[a]] = l[a];</span><br><span class=\"line\">    r[l[a]] = r[a];</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    cin &gt;&gt; m;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 0是左端点，1是右端点</span></span><br><span class=\"line\">    r[<span class=\"number\">0</span>] = <span class=\"number\">1</span>, l[<span class=\"number\">1</span>] = <span class=\"number\">0</span>;</span><br><span class=\"line\">    idx = <span class=\"number\">2</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">while</span> (m -- )</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        string op;</span><br><span class=\"line\">        cin &gt;&gt; op;</span><br><span class=\"line\">        <span class=\"type\">int</span> k, x;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (op == <span class=\"string\">&quot;L&quot;</span>)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            cin &gt;&gt; x;</span><br><span class=\"line\">            <span class=\"built_in\">insert</span>(<span class=\"number\">0</span>, x);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (op == <span class=\"string\">&quot;R&quot;</span>)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            cin &gt;&gt; x;</span><br><span class=\"line\">            <span class=\"built_in\">insert</span>(l[<span class=\"number\">1</span>], x);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (op == <span class=\"string\">&quot;D&quot;</span>)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            cin &gt;&gt; k;</span><br><span class=\"line\">            <span class=\"built_in\">remove</span>(k + <span class=\"number\">1</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (op == <span class=\"string\">&quot;IL&quot;</span>)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            cin &gt;&gt; k &gt;&gt; x;</span><br><span class=\"line\">            <span class=\"built_in\">insert</span>(l[k + <span class=\"number\">1</span>], x);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">else</span></span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            cin &gt;&gt; k &gt;&gt; x;</span><br><span class=\"line\">            <span class=\"built_in\">insert</span>(k + <span class=\"number\">1</span>, x);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = r[<span class=\"number\">0</span>]; i != <span class=\"number\">1</span>; i = r[i]) cout &lt;&lt; e[i] &lt;&lt; <span class=\"string\">&#x27; &#x27;</span>;</span><br><span class=\"line\">    cout &lt;&lt; endl;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">作者：yxc</span><br><span class=\"line\">链接：https:<span class=\"comment\">//www.acwing.com/activity/content/code/content/42982/</span></span><br><span class=\"line\">来源：AcWing</span><br><span class=\"line\">著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</span><br></pre></td></tr></table></figure>","site":{"data":{"link":[{"class_name":"友情链接","class_desc":"那些人，那些事","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]},{"class_name":"网站","class_desc":"值得推荐的网站","link_list":[{"name":"Youtube","link":"https://www.youtube.com/","avatar":"https://i.loli.net/2020/05/14/9ZkGg8v3azHJfM1.png","descr":"视频网站"},{"name":"Weibo","link":"https://www.weibo.com/","avatar":"https://i.loli.net/2020/05/14/TLJBum386vcnI1P.png","descr":"中国最大社交分享平台"},{"name":"Twitter","link":"https://twitter.com/","avatar":"https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png","descr":"社交分享平台"}]}]}},"cover":"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7","excerpt":"","more":"<h1 id=\"AcWing-827-双链表\"><a href=\"#AcWing-827-双链表\" class=\"headerlink\" title=\"AcWing 827. 双链表\"></a>AcWing 827. 双链表</h1><h3 id=\"题目来源–827-双链表\"><a href=\"#题目来源–827-双链表\" class=\"headerlink\" title=\"题目来源–827. 双链表\"></a>题目来源–<a href=\"https://www.acwing.com/problem/content/829/\" title=\"双链表\">827. 双链表</a></h3><hr>\n<figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">题目描述</span><br><span class=\"line\">\t实现一个双链表，双链表初始为空，支持 <span class=\"number\">5</span> 种操作：</span><br><span class=\"line\">\t在最左侧插入一个数；</span><br><span class=\"line\">\t在最右侧插入一个数；</span><br><span class=\"line\">\t将第 k 个插入的数删除；</span><br><span class=\"line\">\t在第 k 个插入的数左侧插入一个数；</span><br><span class=\"line\">\t在第 k 个插入的数右侧插入一个数</span><br><span class=\"line\">\t现在要对该链表进行 M 次操作，进行完所有操作后，从左到右输出整个链表。</span><br><span class=\"line\">\t注意:题目中第 k 个插入的数并不是指当前链表的第 k 个数。例如操作过程中一共插入了 n 个数，则按照插入的时间顺序，这 n 个数依次为：第 <span class=\"number\">1</span> 个插入的数，第 <span class=\"number\">2</span> 个插入的数，…第 n 个插入的数。</span><br><span class=\"line\"></span><br><span class=\"line\">输入格式</span><br><span class=\"line\">\t第一行包含整数 M，表示操作次数。</span><br><span class=\"line\">\t接下来 M 行，每行包含一个操作命令，操作命令可能为以下几种：</span><br><span class=\"line\">\tL x，表示在链表的最左端插入数 x。</span><br><span class=\"line\">\tR x，表示在链表的最右端插入数 x。</span><br><span class=\"line\">\tD k，表示将第 k 个插入的数删除。</span><br><span class=\"line\">\tIL k x，表示在第 k 个插入的数左侧插入一个数。</span><br><span class=\"line\">\tIR k x，表示在第 k 个插入的数右侧插入一个数。</span><br><span class=\"line\">\t</span><br><span class=\"line\">输出格式</span><br><span class=\"line\">\t共一行，将整个链表从左到右输出。</span><br><span class=\"line\"></span><br><span class=\"line\">数据范围</span><br><span class=\"line\">\t<span class=\"number\">1</span>≤M≤<span class=\"number\">100000</span></span><br><span class=\"line\">\t所有操作保证合法。</span><br><span class=\"line\"></span><br><span class=\"line\">输入样例：</span><br><span class=\"line\">\t<span class=\"number\">10</span></span><br><span class=\"line\">\tR <span class=\"number\">7</span></span><br><span class=\"line\">\tD <span class=\"number\">1</span></span><br><span class=\"line\">\tL <span class=\"number\">3</span></span><br><span class=\"line\">\tIL <span class=\"number\">2</span> <span class=\"number\">10</span></span><br><span class=\"line\">\tD <span class=\"number\">3</span></span><br><span class=\"line\">\tIL <span class=\"number\">2</span> <span class=\"number\">7</span></span><br><span class=\"line\">\tL <span class=\"number\">8</span></span><br><span class=\"line\">\tR <span class=\"number\">9</span></span><br><span class=\"line\">\tIL <span class=\"number\">4</span> <span class=\"number\">7</span></span><br><span class=\"line\">\tIR <span class=\"number\">2</span> <span class=\"number\">2</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输出样例：</span><br><span class=\"line\">\t<span class=\"number\">8</span> <span class=\"number\">7</span> <span class=\"number\">7</span> <span class=\"number\">3</span> <span class=\"number\">2</span> <span class=\"number\">9</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t</span><br></pre></td></tr></table></figure>\n<hr>\n<h2 id=\"代码演示\"><a href=\"#代码演示\" class=\"headerlink\" title=\"代码演示\"></a>代码演示</h2><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> std;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">const</span> <span class=\"type\">int</span> N = <span class=\"number\">100010</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">int</span> m;</span><br><span class=\"line\"><span class=\"type\">int</span> e[N], l[N], r[N], idx;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 在节点a的右边插入一个数x</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">insert</span><span class=\"params\">(<span class=\"type\">int</span> a, <span class=\"type\">int</span> x)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    e[idx] = x;</span><br><span class=\"line\">    l[idx] = a, r[idx] = r[a];</span><br><span class=\"line\">    l[r[a]] = idx, r[a] = idx ++ ;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 删除节点a</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">remove</span><span class=\"params\">(<span class=\"type\">int</span> a)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    l[r[a]] = l[a];</span><br><span class=\"line\">    r[l[a]] = r[a];</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    cin &gt;&gt; m;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 0是左端点，1是右端点</span></span><br><span class=\"line\">    r[<span class=\"number\">0</span>] = <span class=\"number\">1</span>, l[<span class=\"number\">1</span>] = <span class=\"number\">0</span>;</span><br><span class=\"line\">    idx = <span class=\"number\">2</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">while</span> (m -- )</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        string op;</span><br><span class=\"line\">        cin &gt;&gt; op;</span><br><span class=\"line\">        <span class=\"type\">int</span> k, x;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (op == <span class=\"string\">&quot;L&quot;</span>)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            cin &gt;&gt; x;</span><br><span class=\"line\">            <span class=\"built_in\">insert</span>(<span class=\"number\">0</span>, x);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (op == <span class=\"string\">&quot;R&quot;</span>)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            cin &gt;&gt; x;</span><br><span class=\"line\">            <span class=\"built_in\">insert</span>(l[<span class=\"number\">1</span>], x);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (op == <span class=\"string\">&quot;D&quot;</span>)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            cin &gt;&gt; k;</span><br><span class=\"line\">            <span class=\"built_in\">remove</span>(k + <span class=\"number\">1</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (op == <span class=\"string\">&quot;IL&quot;</span>)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            cin &gt;&gt; k &gt;&gt; x;</span><br><span class=\"line\">            <span class=\"built_in\">insert</span>(l[k + <span class=\"number\">1</span>], x);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">else</span></span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            cin &gt;&gt; k &gt;&gt; x;</span><br><span class=\"line\">            <span class=\"built_in\">insert</span>(k + <span class=\"number\">1</span>, x);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = r[<span class=\"number\">0</span>]; i != <span class=\"number\">1</span>; i = r[i]) cout &lt;&lt; e[i] &lt;&lt; <span class=\"string\">&#x27; &#x27;</span>;</span><br><span class=\"line\">    cout &lt;&lt; endl;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">作者：yxc</span><br><span class=\"line\">链接：https:<span class=\"comment\">//www.acwing.com/activity/content/code/content/42982/</span></span><br><span class=\"line\">来源：AcWing</span><br><span class=\"line\">著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</span><br></pre></td></tr></table></figure>"},{"title":"AcWing 828. 模拟栈","date":"2022-09-23T03:50:02.623Z","_content":"\n# AcWing 828. 模拟栈    \n### 题目来源--[828. 模拟栈](https://www.acwing.com/problem/content/830/ \"模拟栈\")\n\n- - -\n```c++\n\n题目描述\n\t实现一个栈，栈初始为空，支持四种操作：\n\tpush x – 向栈顶插入一个数 x；\n\tpop – 从栈顶弹出一个数；\n\tempty – 判断栈是否为空；\n\tquery – 查询栈顶元素。\n\t现在要对栈进行 M 个操作，其中的每个操作 3 和操作 4 都要输出相应的结果。\n\n输入格式\n\t第一行包含整数 M，表示操作次数。\n\t接下来 M 行，每行包含一个操作命令，操作命令为 push x，pop，empty，query 中的一种。\n\n输出格式\n\t对于每个 empty 和 query 操作都要输出一个查询结果，每个结果占一行。\n\t其中，empty 操作的查询结果为 YES 或 NO，query 操作的查询结果为一个整数，表示栈顶元素的值。\n\n数据范围\n\t1≤M≤100000,\n\t1≤x≤109\n\t所有操作保证合法。\n\n输入样例：\n\t10\n\tpush 5\n\tquery\n\tpush 6\n\tpop\n\tquery\n\tpop\n\tempty\n\tpush 4\n\tquery\n\tempty\n\t\n输出样例：\n\t5\n\t5\n\tYES\n\t4\n\tNO\n\n\t\n```\n- - -\n## 代码演示\n```c++\n#include <iostream>\n\nusing namespace std;\n\nconst int N = 100010;\n\nint m;\nint stk[N], tt;\n\nint main()\n{\n    cin >> m;\n    while (m -- )\n    {\n        string op;\n        int x;\n\n        cin >> op;\n        if (op == \"push\")\n        {\n            cin >> x;\n            stk[ ++ tt] = x;\n        }\n        else if (op == \"pop\") tt -- ;\n        else if (op == \"empty\") cout << (tt ? \"NO\" : \"YES\") << endl;\n        else cout << stk[tt] << endl;\n    }\n\n    return 0;\n}\n\n作者：yxc\n链接：https://www.acwing.com/activity/content/code/content/43103/\n来源：AcWing\n著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。\n```","source":"_posts/AcWing/算法基础课/2、数据结构/AcWing-828-模拟栈.md","raw":"---\ntitle: AcWing 828. 模拟栈    \ndate: \ntags: \n\t- Acwing \n\t- 栈\ncategories: \n\t- [AcWing,算法基础课,2、数据结构]\n---\n\n# AcWing 828. 模拟栈    \n### 题目来源--[828. 模拟栈](https://www.acwing.com/problem/content/830/ \"模拟栈\")\n\n- - -\n```c++\n\n题目描述\n\t实现一个栈，栈初始为空，支持四种操作：\n\tpush x – 向栈顶插入一个数 x；\n\tpop – 从栈顶弹出一个数；\n\tempty – 判断栈是否为空；\n\tquery – 查询栈顶元素。\n\t现在要对栈进行 M 个操作，其中的每个操作 3 和操作 4 都要输出相应的结果。\n\n输入格式\n\t第一行包含整数 M，表示操作次数。\n\t接下来 M 行，每行包含一个操作命令，操作命令为 push x，pop，empty，query 中的一种。\n\n输出格式\n\t对于每个 empty 和 query 操作都要输出一个查询结果，每个结果占一行。\n\t其中，empty 操作的查询结果为 YES 或 NO，query 操作的查询结果为一个整数，表示栈顶元素的值。\n\n数据范围\n\t1≤M≤100000,\n\t1≤x≤109\n\t所有操作保证合法。\n\n输入样例：\n\t10\n\tpush 5\n\tquery\n\tpush 6\n\tpop\n\tquery\n\tpop\n\tempty\n\tpush 4\n\tquery\n\tempty\n\t\n输出样例：\n\t5\n\t5\n\tYES\n\t4\n\tNO\n\n\t\n```\n- - -\n## 代码演示\n```c++\n#include <iostream>\n\nusing namespace std;\n\nconst int N = 100010;\n\nint m;\nint stk[N], tt;\n\nint main()\n{\n    cin >> m;\n    while (m -- )\n    {\n        string op;\n        int x;\n\n        cin >> op;\n        if (op == \"push\")\n        {\n            cin >> x;\n            stk[ ++ tt] = x;\n        }\n        else if (op == \"pop\") tt -- ;\n        else if (op == \"empty\") cout << (tt ? \"NO\" : \"YES\") << endl;\n        else cout << stk[tt] << endl;\n    }\n\n    return 0;\n}\n\n作者：yxc\n链接：https://www.acwing.com/activity/content/code/content/43103/\n来源：AcWing\n著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。\n```","slug":"AcWing/算法基础课/2、数据结构/AcWing-828-模拟栈","published":1,"updated":"2022-09-23T03:50:02.623Z","comments":1,"layout":"post","photos":[],"link":"","_id":"claryulcc000q5ojr25yuhw07","content":"<h1 id=\"AcWing-828-模拟栈\"><a href=\"#AcWing-828-模拟栈\" class=\"headerlink\" title=\"AcWing 828. 模拟栈\"></a>AcWing 828. 模拟栈</h1><h3 id=\"题目来源–828-模拟栈\"><a href=\"#题目来源–828-模拟栈\" class=\"headerlink\" title=\"题目来源–828. 模拟栈\"></a>题目来源–<a href=\"https://www.acwing.com/problem/content/830/\" title=\"模拟栈\">828. 模拟栈</a></h3><hr>\n<figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">题目描述</span><br><span class=\"line\">\t实现一个栈，栈初始为空，支持四种操作：</span><br><span class=\"line\">\tpush x – 向栈顶插入一个数 x；</span><br><span class=\"line\">\tpop – 从栈顶弹出一个数；</span><br><span class=\"line\">\tempty – 判断栈是否为空；</span><br><span class=\"line\">\tquery – 查询栈顶元素。</span><br><span class=\"line\">\t现在要对栈进行 M 个操作，其中的每个操作 <span class=\"number\">3</span> 和操作 <span class=\"number\">4</span> 都要输出相应的结果。</span><br><span class=\"line\"></span><br><span class=\"line\">输入格式</span><br><span class=\"line\">\t第一行包含整数 M，表示操作次数。</span><br><span class=\"line\">\t接下来 M 行，每行包含一个操作命令，操作命令为 push x，pop，empty，query 中的一种。</span><br><span class=\"line\"></span><br><span class=\"line\">输出格式</span><br><span class=\"line\">\t对于每个 empty 和 query 操作都要输出一个查询结果，每个结果占一行。</span><br><span class=\"line\">\t其中，empty 操作的查询结果为 YES 或 NO，query 操作的查询结果为一个整数，表示栈顶元素的值。</span><br><span class=\"line\"></span><br><span class=\"line\">数据范围</span><br><span class=\"line\">\t<span class=\"number\">1</span>≤M≤<span class=\"number\">100000</span>,</span><br><span class=\"line\">\t<span class=\"number\">1</span>≤x≤<span class=\"number\">109</span></span><br><span class=\"line\">\t所有操作保证合法。</span><br><span class=\"line\"></span><br><span class=\"line\">输入样例：</span><br><span class=\"line\">\t<span class=\"number\">10</span></span><br><span class=\"line\">\tpush <span class=\"number\">5</span></span><br><span class=\"line\">\tquery</span><br><span class=\"line\">\tpush <span class=\"number\">6</span></span><br><span class=\"line\">\tpop</span><br><span class=\"line\">\tquery</span><br><span class=\"line\">\tpop</span><br><span class=\"line\">\tempty</span><br><span class=\"line\">\tpush <span class=\"number\">4</span></span><br><span class=\"line\">\tquery</span><br><span class=\"line\">\tempty</span><br><span class=\"line\">\t</span><br><span class=\"line\">输出样例：</span><br><span class=\"line\">\t<span class=\"number\">5</span></span><br><span class=\"line\">\t<span class=\"number\">5</span></span><br><span class=\"line\">\tYES</span><br><span class=\"line\">\t<span class=\"number\">4</span></span><br><span class=\"line\">\tNO</span><br><span class=\"line\"></span><br><span class=\"line\">\t</span><br></pre></td></tr></table></figure>\n<hr>\n<h2 id=\"代码演示\"><a href=\"#代码演示\" class=\"headerlink\" title=\"代码演示\"></a>代码演示</h2><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> std;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">const</span> <span class=\"type\">int</span> N = <span class=\"number\">100010</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">int</span> m;</span><br><span class=\"line\"><span class=\"type\">int</span> stk[N], tt;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    cin &gt;&gt; m;</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (m -- )</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        string op;</span><br><span class=\"line\">        <span class=\"type\">int</span> x;</span><br><span class=\"line\"></span><br><span class=\"line\">        cin &gt;&gt; op;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (op == <span class=\"string\">&quot;push&quot;</span>)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            cin &gt;&gt; x;</span><br><span class=\"line\">            stk[ ++ tt] = x;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (op == <span class=\"string\">&quot;pop&quot;</span>) tt -- ;</span><br><span class=\"line\">        <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (op == <span class=\"string\">&quot;empty&quot;</span>) cout &lt;&lt; (tt ? <span class=\"string\">&quot;NO&quot;</span> : <span class=\"string\">&quot;YES&quot;</span>) &lt;&lt; endl;</span><br><span class=\"line\">        <span class=\"keyword\">else</span> cout &lt;&lt; stk[tt] &lt;&lt; endl;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">作者：yxc</span><br><span class=\"line\">链接：https:<span class=\"comment\">//www.acwing.com/activity/content/code/content/43103/</span></span><br><span class=\"line\">来源：AcWing</span><br><span class=\"line\">著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</span><br></pre></td></tr></table></figure>","site":{"data":{"link":[{"class_name":"友情链接","class_desc":"那些人，那些事","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]},{"class_name":"网站","class_desc":"值得推荐的网站","link_list":[{"name":"Youtube","link":"https://www.youtube.com/","avatar":"https://i.loli.net/2020/05/14/9ZkGg8v3azHJfM1.png","descr":"视频网站"},{"name":"Weibo","link":"https://www.weibo.com/","avatar":"https://i.loli.net/2020/05/14/TLJBum386vcnI1P.png","descr":"中国最大社交分享平台"},{"name":"Twitter","link":"https://twitter.com/","avatar":"https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png","descr":"社交分享平台"}]}]}},"cover":"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7","excerpt":"","more":"<h1 id=\"AcWing-828-模拟栈\"><a href=\"#AcWing-828-模拟栈\" class=\"headerlink\" title=\"AcWing 828. 模拟栈\"></a>AcWing 828. 模拟栈</h1><h3 id=\"题目来源–828-模拟栈\"><a href=\"#题目来源–828-模拟栈\" class=\"headerlink\" title=\"题目来源–828. 模拟栈\"></a>题目来源–<a href=\"https://www.acwing.com/problem/content/830/\" title=\"模拟栈\">828. 模拟栈</a></h3><hr>\n<figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">题目描述</span><br><span class=\"line\">\t实现一个栈，栈初始为空，支持四种操作：</span><br><span class=\"line\">\tpush x – 向栈顶插入一个数 x；</span><br><span class=\"line\">\tpop – 从栈顶弹出一个数；</span><br><span class=\"line\">\tempty – 判断栈是否为空；</span><br><span class=\"line\">\tquery – 查询栈顶元素。</span><br><span class=\"line\">\t现在要对栈进行 M 个操作，其中的每个操作 <span class=\"number\">3</span> 和操作 <span class=\"number\">4</span> 都要输出相应的结果。</span><br><span class=\"line\"></span><br><span class=\"line\">输入格式</span><br><span class=\"line\">\t第一行包含整数 M，表示操作次数。</span><br><span class=\"line\">\t接下来 M 行，每行包含一个操作命令，操作命令为 push x，pop，empty，query 中的一种。</span><br><span class=\"line\"></span><br><span class=\"line\">输出格式</span><br><span class=\"line\">\t对于每个 empty 和 query 操作都要输出一个查询结果，每个结果占一行。</span><br><span class=\"line\">\t其中，empty 操作的查询结果为 YES 或 NO，query 操作的查询结果为一个整数，表示栈顶元素的值。</span><br><span class=\"line\"></span><br><span class=\"line\">数据范围</span><br><span class=\"line\">\t<span class=\"number\">1</span>≤M≤<span class=\"number\">100000</span>,</span><br><span class=\"line\">\t<span class=\"number\">1</span>≤x≤<span class=\"number\">109</span></span><br><span class=\"line\">\t所有操作保证合法。</span><br><span class=\"line\"></span><br><span class=\"line\">输入样例：</span><br><span class=\"line\">\t<span class=\"number\">10</span></span><br><span class=\"line\">\tpush <span class=\"number\">5</span></span><br><span class=\"line\">\tquery</span><br><span class=\"line\">\tpush <span class=\"number\">6</span></span><br><span class=\"line\">\tpop</span><br><span class=\"line\">\tquery</span><br><span class=\"line\">\tpop</span><br><span class=\"line\">\tempty</span><br><span class=\"line\">\tpush <span class=\"number\">4</span></span><br><span class=\"line\">\tquery</span><br><span class=\"line\">\tempty</span><br><span class=\"line\">\t</span><br><span class=\"line\">输出样例：</span><br><span class=\"line\">\t<span class=\"number\">5</span></span><br><span class=\"line\">\t<span class=\"number\">5</span></span><br><span class=\"line\">\tYES</span><br><span class=\"line\">\t<span class=\"number\">4</span></span><br><span class=\"line\">\tNO</span><br><span class=\"line\"></span><br><span class=\"line\">\t</span><br></pre></td></tr></table></figure>\n<hr>\n<h2 id=\"代码演示\"><a href=\"#代码演示\" class=\"headerlink\" title=\"代码演示\"></a>代码演示</h2><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> std;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">const</span> <span class=\"type\">int</span> N = <span class=\"number\">100010</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">int</span> m;</span><br><span class=\"line\"><span class=\"type\">int</span> stk[N], tt;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    cin &gt;&gt; m;</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (m -- )</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        string op;</span><br><span class=\"line\">        <span class=\"type\">int</span> x;</span><br><span class=\"line\"></span><br><span class=\"line\">        cin &gt;&gt; op;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (op == <span class=\"string\">&quot;push&quot;</span>)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            cin &gt;&gt; x;</span><br><span class=\"line\">            stk[ ++ tt] = x;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (op == <span class=\"string\">&quot;pop&quot;</span>) tt -- ;</span><br><span class=\"line\">        <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (op == <span class=\"string\">&quot;empty&quot;</span>) cout &lt;&lt; (tt ? <span class=\"string\">&quot;NO&quot;</span> : <span class=\"string\">&quot;YES&quot;</span>) &lt;&lt; endl;</span><br><span class=\"line\">        <span class=\"keyword\">else</span> cout &lt;&lt; stk[tt] &lt;&lt; endl;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">作者：yxc</span><br><span class=\"line\">链接：https:<span class=\"comment\">//www.acwing.com/activity/content/code/content/43103/</span></span><br><span class=\"line\">来源：AcWing</span><br><span class=\"line\">著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</span><br></pre></td></tr></table></figure>"},{"title":"AcWing 826. 单链表","date":"2022-09-23T03:50:02.623Z","_content":"\n# AcWing 826. 单链表    \n### 题目来源--[826. 单链表](https://www.acwing.com/problem/content/828/ \"单链表\")\n\n- - -\n```c++\n\n题目描述\n\t实现一个单链表，链表初始为空，支持三种操作：\n\t向链表头插入一个数；\n\t删除第 k 个插入的数后面的数；\n\t在第 k 个插入的数后插入一个数。\n\t现在要对该链表进行 M 次操作，进行完所有操作后，从头到尾输出整个链表。\n\t注意:题目中第 k 个插入的数并不是指当前链表的第 k 个数。例如操作过程中一共插入了 n 个数，则按照插入的时间顺序，这 n 个数依次为：第 1 个插入的数，第 2 个插入的数，…第 n 个插入的数。\n\n输入格式\n\t第一行包含整数 M，表示操作次数。\n\t接下来 M 行，每行包含一个操作命令，操作命令可能为以下几种：\n\tH x，表示向链表头插入一个数 x。\n\tD k，表示删除第 k 个插入的数后面的数（当 k 为 0 时，表示删除头结点）。\n\tI k x，表示在第 k 个插入的数后面插入一个数 x（此操作中 k 均大于 0）。\n\t\n输出格式\n\t共一行，将整个链表从头到尾输出。\n\t\n数据范围\n\t1≤M≤100000\n\t所有操作保证合法。\n\n输入样例：\n\t10\n\tH 9\n\tI 1 1\n\tD 1\n\tD 0\n\tH 6\n\tI 3 6\n\tI 4 5\n\tI 4 5\n\tI 3 4\n\tD 6\n\t\n输出样例：\n\t6 4 6 5\n\n\t\n```\n- - -\n## 代码演示\n```c++\n#include <iostream>\n\nusing namespace std;\n\nconst int N = 100010;\n\n\n// head 表示头结点的下标\n// e[i] 表示节点i的值\n// ne[i] 表示节点i的next指针是多少\n// idx 存储当前已经用到了哪个点\nint head, e[N], ne[N], idx;\n\n// 初始化\nvoid init()\n{\n    head = -1;\n    idx = 0;\n}\n\n// 将x插到头结点\nvoid add_to_head(int x)\n{\n    e[idx] = x, ne[idx] = head, head = idx ++ ;\n}\n\n// 将x插到下标是k的点后面\nvoid add(int k, int x)\n{\n    e[idx] = x, ne[idx] = ne[k], ne[k] = idx ++ ;\n}\n\n// 将下标是k的点后面的点删掉\nvoid remove(int k)\n{\n    ne[k] = ne[ne[k]];\n}\n\nint main()\n{\n    int m;\n    cin >> m;\n\n    init();\n\n    while (m -- )\n    {\n        int k, x;\n        char op;\n\n        cin >> op;\n        if (op == 'H')\n        {\n            cin >> x;\n            add_to_head(x);\n        }\n        else if (op == 'D')\n        {\n            cin >> k;\n            if (!k) head = ne[head];\n            else remove(k - 1);\n        }\n        else\n        {\n            cin >> k >> x;\n            add(k - 1, x);\n        }\n    }\n\n    for (int i = head; i != -1; i = ne[i]) cout << e[i] << ' ';\n    cout << endl;\n\n    return 0;\n}\n\n作者：yxc\n链接：https://www.acwing.com/activity/content/code/content/42977/\n来源：AcWing\n著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。\n```","source":"_posts/AcWing/算法基础课/2、数据结构/AcWing-836-单链表.md","raw":"---\ntitle: AcWing 826. 单链表    \ndate: \ntags: \n\t- Acwing \n\t- 单链表\ncategories: \n\t- [AcWing,算法基础课,2、数据结构]\n---\n\n# AcWing 826. 单链表    \n### 题目来源--[826. 单链表](https://www.acwing.com/problem/content/828/ \"单链表\")\n\n- - -\n```c++\n\n题目描述\n\t实现一个单链表，链表初始为空，支持三种操作：\n\t向链表头插入一个数；\n\t删除第 k 个插入的数后面的数；\n\t在第 k 个插入的数后插入一个数。\n\t现在要对该链表进行 M 次操作，进行完所有操作后，从头到尾输出整个链表。\n\t注意:题目中第 k 个插入的数并不是指当前链表的第 k 个数。例如操作过程中一共插入了 n 个数，则按照插入的时间顺序，这 n 个数依次为：第 1 个插入的数，第 2 个插入的数，…第 n 个插入的数。\n\n输入格式\n\t第一行包含整数 M，表示操作次数。\n\t接下来 M 行，每行包含一个操作命令，操作命令可能为以下几种：\n\tH x，表示向链表头插入一个数 x。\n\tD k，表示删除第 k 个插入的数后面的数（当 k 为 0 时，表示删除头结点）。\n\tI k x，表示在第 k 个插入的数后面插入一个数 x（此操作中 k 均大于 0）。\n\t\n输出格式\n\t共一行，将整个链表从头到尾输出。\n\t\n数据范围\n\t1≤M≤100000\n\t所有操作保证合法。\n\n输入样例：\n\t10\n\tH 9\n\tI 1 1\n\tD 1\n\tD 0\n\tH 6\n\tI 3 6\n\tI 4 5\n\tI 4 5\n\tI 3 4\n\tD 6\n\t\n输出样例：\n\t6 4 6 5\n\n\t\n```\n- - -\n## 代码演示\n```c++\n#include <iostream>\n\nusing namespace std;\n\nconst int N = 100010;\n\n\n// head 表示头结点的下标\n// e[i] 表示节点i的值\n// ne[i] 表示节点i的next指针是多少\n// idx 存储当前已经用到了哪个点\nint head, e[N], ne[N], idx;\n\n// 初始化\nvoid init()\n{\n    head = -1;\n    idx = 0;\n}\n\n// 将x插到头结点\nvoid add_to_head(int x)\n{\n    e[idx] = x, ne[idx] = head, head = idx ++ ;\n}\n\n// 将x插到下标是k的点后面\nvoid add(int k, int x)\n{\n    e[idx] = x, ne[idx] = ne[k], ne[k] = idx ++ ;\n}\n\n// 将下标是k的点后面的点删掉\nvoid remove(int k)\n{\n    ne[k] = ne[ne[k]];\n}\n\nint main()\n{\n    int m;\n    cin >> m;\n\n    init();\n\n    while (m -- )\n    {\n        int k, x;\n        char op;\n\n        cin >> op;\n        if (op == 'H')\n        {\n            cin >> x;\n            add_to_head(x);\n        }\n        else if (op == 'D')\n        {\n            cin >> k;\n            if (!k) head = ne[head];\n            else remove(k - 1);\n        }\n        else\n        {\n            cin >> k >> x;\n            add(k - 1, x);\n        }\n    }\n\n    for (int i = head; i != -1; i = ne[i]) cout << e[i] << ' ';\n    cout << endl;\n\n    return 0;\n}\n\n作者：yxc\n链接：https://www.acwing.com/activity/content/code/content/42977/\n来源：AcWing\n著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。\n```","slug":"AcWing/算法基础课/2、数据结构/AcWing-836-单链表","published":1,"updated":"2022-09-23T03:50:02.623Z","comments":1,"layout":"post","photos":[],"link":"","_id":"claryulcd000s5ojr3hls3eds","content":"<h1 id=\"AcWing-826-单链表\"><a href=\"#AcWing-826-单链表\" class=\"headerlink\" title=\"AcWing 826. 单链表\"></a>AcWing 826. 单链表</h1><h3 id=\"题目来源–826-单链表\"><a href=\"#题目来源–826-单链表\" class=\"headerlink\" title=\"题目来源–826. 单链表\"></a>题目来源–<a href=\"https://www.acwing.com/problem/content/828/\" title=\"单链表\">826. 单链表</a></h3><hr>\n<figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">题目描述</span><br><span class=\"line\">\t实现一个单链表，链表初始为空，支持三种操作：</span><br><span class=\"line\">\t向链表头插入一个数；</span><br><span class=\"line\">\t删除第 k 个插入的数后面的数；</span><br><span class=\"line\">\t在第 k 个插入的数后插入一个数。</span><br><span class=\"line\">\t现在要对该链表进行 M 次操作，进行完所有操作后，从头到尾输出整个链表。</span><br><span class=\"line\">\t注意:题目中第 k 个插入的数并不是指当前链表的第 k 个数。例如操作过程中一共插入了 n 个数，则按照插入的时间顺序，这 n 个数依次为：第 <span class=\"number\">1</span> 个插入的数，第 <span class=\"number\">2</span> 个插入的数，…第 n 个插入的数。</span><br><span class=\"line\"></span><br><span class=\"line\">输入格式</span><br><span class=\"line\">\t第一行包含整数 M，表示操作次数。</span><br><span class=\"line\">\t接下来 M 行，每行包含一个操作命令，操作命令可能为以下几种：</span><br><span class=\"line\">\tH x，表示向链表头插入一个数 x。</span><br><span class=\"line\">\tD k，表示删除第 k 个插入的数后面的数（当 k 为 <span class=\"number\">0</span> 时，表示删除头结点）。</span><br><span class=\"line\">\tI k x，表示在第 k 个插入的数后面插入一个数 x（此操作中 k 均大于 <span class=\"number\">0</span>）。</span><br><span class=\"line\">\t</span><br><span class=\"line\">输出格式</span><br><span class=\"line\">\t共一行，将整个链表从头到尾输出。</span><br><span class=\"line\">\t</span><br><span class=\"line\">数据范围</span><br><span class=\"line\">\t<span class=\"number\">1</span>≤M≤<span class=\"number\">100000</span></span><br><span class=\"line\">\t所有操作保证合法。</span><br><span class=\"line\"></span><br><span class=\"line\">输入样例：</span><br><span class=\"line\">\t<span class=\"number\">10</span></span><br><span class=\"line\">\tH <span class=\"number\">9</span></span><br><span class=\"line\">\tI <span class=\"number\">1</span> <span class=\"number\">1</span></span><br><span class=\"line\">\tD <span class=\"number\">1</span></span><br><span class=\"line\">\tD <span class=\"number\">0</span></span><br><span class=\"line\">\tH <span class=\"number\">6</span></span><br><span class=\"line\">\tI <span class=\"number\">3</span> <span class=\"number\">6</span></span><br><span class=\"line\">\tI <span class=\"number\">4</span> <span class=\"number\">5</span></span><br><span class=\"line\">\tI <span class=\"number\">4</span> <span class=\"number\">5</span></span><br><span class=\"line\">\tI <span class=\"number\">3</span> <span class=\"number\">4</span></span><br><span class=\"line\">\tD <span class=\"number\">6</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输出样例：</span><br><span class=\"line\">\t<span class=\"number\">6</span> <span class=\"number\">4</span> <span class=\"number\">6</span> <span class=\"number\">5</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t</span><br></pre></td></tr></table></figure>\n<hr>\n<h2 id=\"代码演示\"><a href=\"#代码演示\" class=\"headerlink\" title=\"代码演示\"></a>代码演示</h2><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> std;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">const</span> <span class=\"type\">int</span> N = <span class=\"number\">100010</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// head 表示头结点的下标</span></span><br><span class=\"line\"><span class=\"comment\">// e[i] 表示节点i的值</span></span><br><span class=\"line\"><span class=\"comment\">// ne[i] 表示节点i的next指针是多少</span></span><br><span class=\"line\"><span class=\"comment\">// idx 存储当前已经用到了哪个点</span></span><br><span class=\"line\"><span class=\"type\">int</span> head, e[N], ne[N], idx;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 初始化</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">init</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    head = <span class=\"number\">-1</span>;</span><br><span class=\"line\">    idx = <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 将x插到头结点</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">add_to_head</span><span class=\"params\">(<span class=\"type\">int</span> x)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    e[idx] = x, ne[idx] = head, head = idx ++ ;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 将x插到下标是k的点后面</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">add</span><span class=\"params\">(<span class=\"type\">int</span> k, <span class=\"type\">int</span> x)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    e[idx] = x, ne[idx] = ne[k], ne[k] = idx ++ ;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 将下标是k的点后面的点删掉</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">remove</span><span class=\"params\">(<span class=\"type\">int</span> k)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    ne[k] = ne[ne[k]];</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> m;</span><br><span class=\"line\">    cin &gt;&gt; m;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"built_in\">init</span>();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">while</span> (m -- )</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"type\">int</span> k, x;</span><br><span class=\"line\">        <span class=\"type\">char</span> op;</span><br><span class=\"line\"></span><br><span class=\"line\">        cin &gt;&gt; op;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (op == <span class=\"string\">&#x27;H&#x27;</span>)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            cin &gt;&gt; x;</span><br><span class=\"line\">            <span class=\"built_in\">add_to_head</span>(x);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (op == <span class=\"string\">&#x27;D&#x27;</span>)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            cin &gt;&gt; k;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (!k) head = ne[head];</span><br><span class=\"line\">            <span class=\"keyword\">else</span> <span class=\"built_in\">remove</span>(k - <span class=\"number\">1</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">else</span></span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            cin &gt;&gt; k &gt;&gt; x;</span><br><span class=\"line\">            <span class=\"built_in\">add</span>(k - <span class=\"number\">1</span>, x);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = head; i != <span class=\"number\">-1</span>; i = ne[i]) cout &lt;&lt; e[i] &lt;&lt; <span class=\"string\">&#x27; &#x27;</span>;</span><br><span class=\"line\">    cout &lt;&lt; endl;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">作者：yxc</span><br><span class=\"line\">链接：https:<span class=\"comment\">//www.acwing.com/activity/content/code/content/42977/</span></span><br><span class=\"line\">来源：AcWing</span><br><span class=\"line\">著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</span><br></pre></td></tr></table></figure>","site":{"data":{"link":[{"class_name":"友情链接","class_desc":"那些人，那些事","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]},{"class_name":"网站","class_desc":"值得推荐的网站","link_list":[{"name":"Youtube","link":"https://www.youtube.com/","avatar":"https://i.loli.net/2020/05/14/9ZkGg8v3azHJfM1.png","descr":"视频网站"},{"name":"Weibo","link":"https://www.weibo.com/","avatar":"https://i.loli.net/2020/05/14/TLJBum386vcnI1P.png","descr":"中国最大社交分享平台"},{"name":"Twitter","link":"https://twitter.com/","avatar":"https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png","descr":"社交分享平台"}]}]}},"cover":"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7","excerpt":"","more":"<h1 id=\"AcWing-826-单链表\"><a href=\"#AcWing-826-单链表\" class=\"headerlink\" title=\"AcWing 826. 单链表\"></a>AcWing 826. 单链表</h1><h3 id=\"题目来源–826-单链表\"><a href=\"#题目来源–826-单链表\" class=\"headerlink\" title=\"题目来源–826. 单链表\"></a>题目来源–<a href=\"https://www.acwing.com/problem/content/828/\" title=\"单链表\">826. 单链表</a></h3><hr>\n<figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">题目描述</span><br><span class=\"line\">\t实现一个单链表，链表初始为空，支持三种操作：</span><br><span class=\"line\">\t向链表头插入一个数；</span><br><span class=\"line\">\t删除第 k 个插入的数后面的数；</span><br><span class=\"line\">\t在第 k 个插入的数后插入一个数。</span><br><span class=\"line\">\t现在要对该链表进行 M 次操作，进行完所有操作后，从头到尾输出整个链表。</span><br><span class=\"line\">\t注意:题目中第 k 个插入的数并不是指当前链表的第 k 个数。例如操作过程中一共插入了 n 个数，则按照插入的时间顺序，这 n 个数依次为：第 <span class=\"number\">1</span> 个插入的数，第 <span class=\"number\">2</span> 个插入的数，…第 n 个插入的数。</span><br><span class=\"line\"></span><br><span class=\"line\">输入格式</span><br><span class=\"line\">\t第一行包含整数 M，表示操作次数。</span><br><span class=\"line\">\t接下来 M 行，每行包含一个操作命令，操作命令可能为以下几种：</span><br><span class=\"line\">\tH x，表示向链表头插入一个数 x。</span><br><span class=\"line\">\tD k，表示删除第 k 个插入的数后面的数（当 k 为 <span class=\"number\">0</span> 时，表示删除头结点）。</span><br><span class=\"line\">\tI k x，表示在第 k 个插入的数后面插入一个数 x（此操作中 k 均大于 <span class=\"number\">0</span>）。</span><br><span class=\"line\">\t</span><br><span class=\"line\">输出格式</span><br><span class=\"line\">\t共一行，将整个链表从头到尾输出。</span><br><span class=\"line\">\t</span><br><span class=\"line\">数据范围</span><br><span class=\"line\">\t<span class=\"number\">1</span>≤M≤<span class=\"number\">100000</span></span><br><span class=\"line\">\t所有操作保证合法。</span><br><span class=\"line\"></span><br><span class=\"line\">输入样例：</span><br><span class=\"line\">\t<span class=\"number\">10</span></span><br><span class=\"line\">\tH <span class=\"number\">9</span></span><br><span class=\"line\">\tI <span class=\"number\">1</span> <span class=\"number\">1</span></span><br><span class=\"line\">\tD <span class=\"number\">1</span></span><br><span class=\"line\">\tD <span class=\"number\">0</span></span><br><span class=\"line\">\tH <span class=\"number\">6</span></span><br><span class=\"line\">\tI <span class=\"number\">3</span> <span class=\"number\">6</span></span><br><span class=\"line\">\tI <span class=\"number\">4</span> <span class=\"number\">5</span></span><br><span class=\"line\">\tI <span class=\"number\">4</span> <span class=\"number\">5</span></span><br><span class=\"line\">\tI <span class=\"number\">3</span> <span class=\"number\">4</span></span><br><span class=\"line\">\tD <span class=\"number\">6</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输出样例：</span><br><span class=\"line\">\t<span class=\"number\">6</span> <span class=\"number\">4</span> <span class=\"number\">6</span> <span class=\"number\">5</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t</span><br></pre></td></tr></table></figure>\n<hr>\n<h2 id=\"代码演示\"><a href=\"#代码演示\" class=\"headerlink\" title=\"代码演示\"></a>代码演示</h2><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> std;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">const</span> <span class=\"type\">int</span> N = <span class=\"number\">100010</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// head 表示头结点的下标</span></span><br><span class=\"line\"><span class=\"comment\">// e[i] 表示节点i的值</span></span><br><span class=\"line\"><span class=\"comment\">// ne[i] 表示节点i的next指针是多少</span></span><br><span class=\"line\"><span class=\"comment\">// idx 存储当前已经用到了哪个点</span></span><br><span class=\"line\"><span class=\"type\">int</span> head, e[N], ne[N], idx;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 初始化</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">init</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    head = <span class=\"number\">-1</span>;</span><br><span class=\"line\">    idx = <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 将x插到头结点</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">add_to_head</span><span class=\"params\">(<span class=\"type\">int</span> x)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    e[idx] = x, ne[idx] = head, head = idx ++ ;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 将x插到下标是k的点后面</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">add</span><span class=\"params\">(<span class=\"type\">int</span> k, <span class=\"type\">int</span> x)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    e[idx] = x, ne[idx] = ne[k], ne[k] = idx ++ ;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 将下标是k的点后面的点删掉</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">remove</span><span class=\"params\">(<span class=\"type\">int</span> k)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    ne[k] = ne[ne[k]];</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> m;</span><br><span class=\"line\">    cin &gt;&gt; m;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"built_in\">init</span>();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">while</span> (m -- )</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"type\">int</span> k, x;</span><br><span class=\"line\">        <span class=\"type\">char</span> op;</span><br><span class=\"line\"></span><br><span class=\"line\">        cin &gt;&gt; op;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (op == <span class=\"string\">&#x27;H&#x27;</span>)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            cin &gt;&gt; x;</span><br><span class=\"line\">            <span class=\"built_in\">add_to_head</span>(x);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (op == <span class=\"string\">&#x27;D&#x27;</span>)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            cin &gt;&gt; k;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (!k) head = ne[head];</span><br><span class=\"line\">            <span class=\"keyword\">else</span> <span class=\"built_in\">remove</span>(k - <span class=\"number\">1</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">else</span></span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            cin &gt;&gt; k &gt;&gt; x;</span><br><span class=\"line\">            <span class=\"built_in\">add</span>(k - <span class=\"number\">1</span>, x);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = head; i != <span class=\"number\">-1</span>; i = ne[i]) cout &lt;&lt; e[i] &lt;&lt; <span class=\"string\">&#x27; &#x27;</span>;</span><br><span class=\"line\">    cout &lt;&lt; endl;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">作者：yxc</span><br><span class=\"line\">链接：https:<span class=\"comment\">//www.acwing.com/activity/content/code/content/42977/</span></span><br><span class=\"line\">来源：AcWing</span><br><span class=\"line\">著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</span><br></pre></td></tr></table></figure>"},{"title":"AcWing 154. 滑动窗口","date":"2022-09-23T03:50:02.624Z","_content":"\n# AcWing 154. 滑动窗口    \n### 题目来源--[154. 滑动窗口](https://www.acwing.com/problem/content/156/ \"滑动窗口\")\n\n``` c++\n题目描述\n\t给定一个大小为 n≤106 的数组。\n\t有一个大小为 k 的滑动窗口，它从数组的最左边移动到最右边。\n\t你只能在窗口中看到 k 个数字。\n\t每次滑动窗口向右移动一个位置。\n\t以下是一个例子：\n\t该数组为 [1 3 -1 -3 5 3 6 7]，k 为 3。\n```\n|窗口位置 | 最小值 | 最大值|\n|\t:-:\t  |\t  :-:    |   :-:   |\n|[1 3 -1] -3 5 3 6 7|-1 |3|\n|1 [3 -1 -3] 5 3 6 7|-3 |3|\n|1 3 [-1 -3 5] 3 6 7|-3\t|5|\n|1 3 -1 [-3 5 3] 6 7|-3\t|5|\n|1 3 -1 -3 [5 3 6] 7|3\t|6|\n|1 3 -1 -3 5 [3 6 7]|3\t|7|\n\t\n```c++\n\t你的任务是确定滑动窗口位于每个位置时，窗口中的最大值和最小值。\n\n输入格式\n\t输入包含两行。\n\t第一行包含两个整数 n 和 k，分别代表数组长度和滑动窗口的长度。\n\t第二行有 n 个整数，代表数组的具体数值。\n\t同行数据之间用空格隔开。\n\n输出格式\n\t输出包含两个。\n\t第一行输出，从左至右，每个位置滑动窗口中的最小值。\n\t第二行输出，从左至右，每个位置滑动窗口中的最大值。\n\n输入样例：\n\t8 3\n\t1 3 -1 -3 5 3 6 7\n\t\n输出样例：\n\t-1 -3 -3 -3 3 3\n\t3 3 5 5 6 7\n```\n\n## 代码演示\n```c++\n#include <iostream>\n\nusing namespace std;\n\nconst int N = 1000010;\n\nint a[N], q[N];\n\nint main()\n{\n    int n, k;\n    scanf(\"%d%d\", &n, &k);\n    for (int i = 0; i < n; i ++ ) scanf(\"%d\", &a[i]);\n\n    int hh = 0, tt = -1;\n    for (int i = 0; i < n; i ++ )\n    {\n        if (hh <= tt && i - k + 1 > q[hh]) hh ++ ;\n\n        while (hh <= tt && a[q[tt]] >= a[i]) tt -- ;\n        q[ ++ tt] = i;\n\n        if (i >= k - 1) printf(\"%d \", a[q[hh]]);\n    }\n\n    puts(\"\");\n\n    hh = 0, tt = -1;\n    for (int i = 0; i < n; i ++ )\n    {\n        if (hh <= tt && i - k + 1 > q[hh]) hh ++ ;\n\n        while (hh <= tt && a[q[tt]] <= a[i]) tt -- ;\n        q[ ++ tt] = i;\n\n        if (i >= k - 1) printf(\"%d \", a[q[hh]]);\n    }\n\n    puts(\"\");\n\n    return 0;\n}\n\n作者：yxc\n链接：https://www.acwing.com/activity/content/code/content/43107/\n来源：AcWing\n著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。\n```","source":"_posts/AcWing/算法基础课/2、数据结构/AcWing154滑动窗口.md","raw":"---\ntitle: AcWing 154. 滑动窗口      \ndate: \ntags: \n\t- Acwing \n\t- 单调队列\ncategories: \n\t- [AcWing,算法基础课,2、数据结构]\n---\n\n# AcWing 154. 滑动窗口    \n### 题目来源--[154. 滑动窗口](https://www.acwing.com/problem/content/156/ \"滑动窗口\")\n\n``` c++\n题目描述\n\t给定一个大小为 n≤106 的数组。\n\t有一个大小为 k 的滑动窗口，它从数组的最左边移动到最右边。\n\t你只能在窗口中看到 k 个数字。\n\t每次滑动窗口向右移动一个位置。\n\t以下是一个例子：\n\t该数组为 [1 3 -1 -3 5 3 6 7]，k 为 3。\n```\n|窗口位置 | 最小值 | 最大值|\n|\t:-:\t  |\t  :-:    |   :-:   |\n|[1 3 -1] -3 5 3 6 7|-1 |3|\n|1 [3 -1 -3] 5 3 6 7|-3 |3|\n|1 3 [-1 -3 5] 3 6 7|-3\t|5|\n|1 3 -1 [-3 5 3] 6 7|-3\t|5|\n|1 3 -1 -3 [5 3 6] 7|3\t|6|\n|1 3 -1 -3 5 [3 6 7]|3\t|7|\n\t\n```c++\n\t你的任务是确定滑动窗口位于每个位置时，窗口中的最大值和最小值。\n\n输入格式\n\t输入包含两行。\n\t第一行包含两个整数 n 和 k，分别代表数组长度和滑动窗口的长度。\n\t第二行有 n 个整数，代表数组的具体数值。\n\t同行数据之间用空格隔开。\n\n输出格式\n\t输出包含两个。\n\t第一行输出，从左至右，每个位置滑动窗口中的最小值。\n\t第二行输出，从左至右，每个位置滑动窗口中的最大值。\n\n输入样例：\n\t8 3\n\t1 3 -1 -3 5 3 6 7\n\t\n输出样例：\n\t-1 -3 -3 -3 3 3\n\t3 3 5 5 6 7\n```\n\n## 代码演示\n```c++\n#include <iostream>\n\nusing namespace std;\n\nconst int N = 1000010;\n\nint a[N], q[N];\n\nint main()\n{\n    int n, k;\n    scanf(\"%d%d\", &n, &k);\n    for (int i = 0; i < n; i ++ ) scanf(\"%d\", &a[i]);\n\n    int hh = 0, tt = -1;\n    for (int i = 0; i < n; i ++ )\n    {\n        if (hh <= tt && i - k + 1 > q[hh]) hh ++ ;\n\n        while (hh <= tt && a[q[tt]] >= a[i]) tt -- ;\n        q[ ++ tt] = i;\n\n        if (i >= k - 1) printf(\"%d \", a[q[hh]]);\n    }\n\n    puts(\"\");\n\n    hh = 0, tt = -1;\n    for (int i = 0; i < n; i ++ )\n    {\n        if (hh <= tt && i - k + 1 > q[hh]) hh ++ ;\n\n        while (hh <= tt && a[q[tt]] <= a[i]) tt -- ;\n        q[ ++ tt] = i;\n\n        if (i >= k - 1) printf(\"%d \", a[q[hh]]);\n    }\n\n    puts(\"\");\n\n    return 0;\n}\n\n作者：yxc\n链接：https://www.acwing.com/activity/content/code/content/43107/\n来源：AcWing\n著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。\n```","slug":"AcWing/算法基础课/2、数据结构/AcWing154滑动窗口","published":1,"updated":"2022-09-23T03:50:02.624Z","comments":1,"layout":"post","photos":[],"link":"","_id":"claryulcd000v5ojrc5r6fitw","content":"<h1 id=\"AcWing-154-滑动窗口\"><a href=\"#AcWing-154-滑动窗口\" class=\"headerlink\" title=\"AcWing 154. 滑动窗口\"></a>AcWing 154. 滑动窗口</h1><h3 id=\"题目来源–154-滑动窗口\"><a href=\"#题目来源–154-滑动窗口\" class=\"headerlink\" title=\"题目来源–154. 滑动窗口\"></a>题目来源–<a href=\"https://www.acwing.com/problem/content/156/\" title=\"滑动窗口\">154. 滑动窗口</a></h3><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">题目描述</span><br><span class=\"line\">\t给定一个大小为 n≤<span class=\"number\">106</span> 的数组。</span><br><span class=\"line\">\t有一个大小为 k 的滑动窗口，它从数组的最左边移动到最右边。</span><br><span class=\"line\">\t你只能在窗口中看到 k 个数字。</span><br><span class=\"line\">\t每次滑动窗口向右移动一个位置。</span><br><span class=\"line\">\t以下是一个例子：</span><br><span class=\"line\">\t该数组为 [<span class=\"number\">1</span> <span class=\"number\">3</span> <span class=\"number\">-1</span> <span class=\"number\">-3</span> <span class=\"number\">5</span> <span class=\"number\">3</span> <span class=\"number\">6</span> <span class=\"number\">7</span>]，k 为 <span class=\"number\">3</span>。</span><br></pre></td></tr></table></figure>\n<table>\n<thead>\n<tr>\n<th align=\"center\">窗口位置</th>\n<th align=\"center\">最小值</th>\n<th align=\"center\">最大值</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\">[1 3 -1] -3 5 3 6 7</td>\n<td align=\"center\">-1</td>\n<td align=\"center\">3</td>\n</tr>\n<tr>\n<td align=\"center\">1 [3 -1 -3] 5 3 6 7</td>\n<td align=\"center\">-3</td>\n<td align=\"center\">3</td>\n</tr>\n<tr>\n<td align=\"center\">1 3 [-1 -3 5] 3 6 7</td>\n<td align=\"center\">-3</td>\n<td align=\"center\">5</td>\n</tr>\n<tr>\n<td align=\"center\">1 3 -1 [-3 5 3] 6 7</td>\n<td align=\"center\">-3</td>\n<td align=\"center\">5</td>\n</tr>\n<tr>\n<td align=\"center\">1 3 -1 -3 [5 3 6] 7</td>\n<td align=\"center\">3</td>\n<td align=\"center\">6</td>\n</tr>\n<tr>\n<td align=\"center\">1 3 -1 -3 5 [3 6 7]</td>\n<td align=\"center\">3</td>\n<td align=\"center\">7</td>\n</tr>\n<tr>\n<td align=\"center\"></td>\n<td align=\"center\"></td>\n<td align=\"center\"></td>\n</tr>\n</tbody></table>\n<figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">\t你的任务是确定滑动窗口位于每个位置时，窗口中的最大值和最小值。</span><br><span class=\"line\"></span><br><span class=\"line\">输入格式</span><br><span class=\"line\">\t输入包含两行。</span><br><span class=\"line\">\t第一行包含两个整数 n 和 k，分别代表数组长度和滑动窗口的长度。</span><br><span class=\"line\">\t第二行有 n 个整数，代表数组的具体数值。</span><br><span class=\"line\">\t同行数据之间用空格隔开。</span><br><span class=\"line\"></span><br><span class=\"line\">输出格式</span><br><span class=\"line\">\t输出包含两个。</span><br><span class=\"line\">\t第一行输出，从左至右，每个位置滑动窗口中的最小值。</span><br><span class=\"line\">\t第二行输出，从左至右，每个位置滑动窗口中的最大值。</span><br><span class=\"line\"></span><br><span class=\"line\">输入样例：</span><br><span class=\"line\">\t<span class=\"number\">8</span> <span class=\"number\">3</span></span><br><span class=\"line\">\t<span class=\"number\">1</span> <span class=\"number\">3</span> <span class=\"number\">-1</span> <span class=\"number\">-3</span> <span class=\"number\">5</span> <span class=\"number\">3</span> <span class=\"number\">6</span> <span class=\"number\">7</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输出样例：</span><br><span class=\"line\">\t<span class=\"number\">-1</span> <span class=\"number\">-3</span> <span class=\"number\">-3</span> <span class=\"number\">-3</span> <span class=\"number\">3</span> <span class=\"number\">3</span></span><br><span class=\"line\">\t<span class=\"number\">3</span> <span class=\"number\">3</span> <span class=\"number\">5</span> <span class=\"number\">5</span> <span class=\"number\">6</span> <span class=\"number\">7</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"代码演示\"><a href=\"#代码演示\" class=\"headerlink\" title=\"代码演示\"></a>代码演示</h2><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> std;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">const</span> <span class=\"type\">int</span> N = <span class=\"number\">1000010</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">int</span> a[N], q[N];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> n, k;</span><br><span class=\"line\">    <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d%d&quot;</span>, &amp;n, &amp;k);</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; n; i ++ ) <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>, &amp;a[i]);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"type\">int</span> hh = <span class=\"number\">0</span>, tt = <span class=\"number\">-1</span>;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; n; i ++ )</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (hh &lt;= tt &amp;&amp; i - k + <span class=\"number\">1</span> &gt; q[hh]) hh ++ ;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">while</span> (hh &lt;= tt &amp;&amp; a[q[tt]] &gt;= a[i]) tt -- ;</span><br><span class=\"line\">        q[ ++ tt] = i;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (i &gt;= k - <span class=\"number\">1</span>) <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d &quot;</span>, a[q[hh]]);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"built_in\">puts</span>(<span class=\"string\">&quot;&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    hh = <span class=\"number\">0</span>, tt = <span class=\"number\">-1</span>;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; n; i ++ )</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (hh &lt;= tt &amp;&amp; i - k + <span class=\"number\">1</span> &gt; q[hh]) hh ++ ;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">while</span> (hh &lt;= tt &amp;&amp; a[q[tt]] &lt;= a[i]) tt -- ;</span><br><span class=\"line\">        q[ ++ tt] = i;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (i &gt;= k - <span class=\"number\">1</span>) <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d &quot;</span>, a[q[hh]]);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"built_in\">puts</span>(<span class=\"string\">&quot;&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">作者：yxc</span><br><span class=\"line\">链接：https:<span class=\"comment\">//www.acwing.com/activity/content/code/content/43107/</span></span><br><span class=\"line\">来源：AcWing</span><br><span class=\"line\">著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</span><br></pre></td></tr></table></figure>","site":{"data":{"link":[{"class_name":"友情链接","class_desc":"那些人，那些事","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]},{"class_name":"网站","class_desc":"值得推荐的网站","link_list":[{"name":"Youtube","link":"https://www.youtube.com/","avatar":"https://i.loli.net/2020/05/14/9ZkGg8v3azHJfM1.png","descr":"视频网站"},{"name":"Weibo","link":"https://www.weibo.com/","avatar":"https://i.loli.net/2020/05/14/TLJBum386vcnI1P.png","descr":"中国最大社交分享平台"},{"name":"Twitter","link":"https://twitter.com/","avatar":"https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png","descr":"社交分享平台"}]}]}},"cover":"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7","excerpt":"","more":"<h1 id=\"AcWing-154-滑动窗口\"><a href=\"#AcWing-154-滑动窗口\" class=\"headerlink\" title=\"AcWing 154. 滑动窗口\"></a>AcWing 154. 滑动窗口</h1><h3 id=\"题目来源–154-滑动窗口\"><a href=\"#题目来源–154-滑动窗口\" class=\"headerlink\" title=\"题目来源–154. 滑动窗口\"></a>题目来源–<a href=\"https://www.acwing.com/problem/content/156/\" title=\"滑动窗口\">154. 滑动窗口</a></h3><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">题目描述</span><br><span class=\"line\">\t给定一个大小为 n≤<span class=\"number\">106</span> 的数组。</span><br><span class=\"line\">\t有一个大小为 k 的滑动窗口，它从数组的最左边移动到最右边。</span><br><span class=\"line\">\t你只能在窗口中看到 k 个数字。</span><br><span class=\"line\">\t每次滑动窗口向右移动一个位置。</span><br><span class=\"line\">\t以下是一个例子：</span><br><span class=\"line\">\t该数组为 [<span class=\"number\">1</span> <span class=\"number\">3</span> <span class=\"number\">-1</span> <span class=\"number\">-3</span> <span class=\"number\">5</span> <span class=\"number\">3</span> <span class=\"number\">6</span> <span class=\"number\">7</span>]，k 为 <span class=\"number\">3</span>。</span><br></pre></td></tr></table></figure>\n<table>\n<thead>\n<tr>\n<th align=\"center\">窗口位置</th>\n<th align=\"center\">最小值</th>\n<th align=\"center\">最大值</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\">[1 3 -1] -3 5 3 6 7</td>\n<td align=\"center\">-1</td>\n<td align=\"center\">3</td>\n</tr>\n<tr>\n<td align=\"center\">1 [3 -1 -3] 5 3 6 7</td>\n<td align=\"center\">-3</td>\n<td align=\"center\">3</td>\n</tr>\n<tr>\n<td align=\"center\">1 3 [-1 -3 5] 3 6 7</td>\n<td align=\"center\">-3</td>\n<td align=\"center\">5</td>\n</tr>\n<tr>\n<td align=\"center\">1 3 -1 [-3 5 3] 6 7</td>\n<td align=\"center\">-3</td>\n<td align=\"center\">5</td>\n</tr>\n<tr>\n<td align=\"center\">1 3 -1 -3 [5 3 6] 7</td>\n<td align=\"center\">3</td>\n<td align=\"center\">6</td>\n</tr>\n<tr>\n<td align=\"center\">1 3 -1 -3 5 [3 6 7]</td>\n<td align=\"center\">3</td>\n<td align=\"center\">7</td>\n</tr>\n<tr>\n<td align=\"center\"></td>\n<td align=\"center\"></td>\n<td align=\"center\"></td>\n</tr>\n</tbody></table>\n<figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">\t你的任务是确定滑动窗口位于每个位置时，窗口中的最大值和最小值。</span><br><span class=\"line\"></span><br><span class=\"line\">输入格式</span><br><span class=\"line\">\t输入包含两行。</span><br><span class=\"line\">\t第一行包含两个整数 n 和 k，分别代表数组长度和滑动窗口的长度。</span><br><span class=\"line\">\t第二行有 n 个整数，代表数组的具体数值。</span><br><span class=\"line\">\t同行数据之间用空格隔开。</span><br><span class=\"line\"></span><br><span class=\"line\">输出格式</span><br><span class=\"line\">\t输出包含两个。</span><br><span class=\"line\">\t第一行输出，从左至右，每个位置滑动窗口中的最小值。</span><br><span class=\"line\">\t第二行输出，从左至右，每个位置滑动窗口中的最大值。</span><br><span class=\"line\"></span><br><span class=\"line\">输入样例：</span><br><span class=\"line\">\t<span class=\"number\">8</span> <span class=\"number\">3</span></span><br><span class=\"line\">\t<span class=\"number\">1</span> <span class=\"number\">3</span> <span class=\"number\">-1</span> <span class=\"number\">-3</span> <span class=\"number\">5</span> <span class=\"number\">3</span> <span class=\"number\">6</span> <span class=\"number\">7</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输出样例：</span><br><span class=\"line\">\t<span class=\"number\">-1</span> <span class=\"number\">-3</span> <span class=\"number\">-3</span> <span class=\"number\">-3</span> <span class=\"number\">3</span> <span class=\"number\">3</span></span><br><span class=\"line\">\t<span class=\"number\">3</span> <span class=\"number\">3</span> <span class=\"number\">5</span> <span class=\"number\">5</span> <span class=\"number\">6</span> <span class=\"number\">7</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"代码演示\"><a href=\"#代码演示\" class=\"headerlink\" title=\"代码演示\"></a>代码演示</h2><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> std;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">const</span> <span class=\"type\">int</span> N = <span class=\"number\">1000010</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">int</span> a[N], q[N];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> n, k;</span><br><span class=\"line\">    <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d%d&quot;</span>, &amp;n, &amp;k);</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; n; i ++ ) <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>, &amp;a[i]);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"type\">int</span> hh = <span class=\"number\">0</span>, tt = <span class=\"number\">-1</span>;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; n; i ++ )</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (hh &lt;= tt &amp;&amp; i - k + <span class=\"number\">1</span> &gt; q[hh]) hh ++ ;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">while</span> (hh &lt;= tt &amp;&amp; a[q[tt]] &gt;= a[i]) tt -- ;</span><br><span class=\"line\">        q[ ++ tt] = i;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (i &gt;= k - <span class=\"number\">1</span>) <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d &quot;</span>, a[q[hh]]);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"built_in\">puts</span>(<span class=\"string\">&quot;&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    hh = <span class=\"number\">0</span>, tt = <span class=\"number\">-1</span>;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; n; i ++ )</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (hh &lt;= tt &amp;&amp; i - k + <span class=\"number\">1</span> &gt; q[hh]) hh ++ ;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">while</span> (hh &lt;= tt &amp;&amp; a[q[tt]] &lt;= a[i]) tt -- ;</span><br><span class=\"line\">        q[ ++ tt] = i;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (i &gt;= k - <span class=\"number\">1</span>) <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d &quot;</span>, a[q[hh]]);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"built_in\">puts</span>(<span class=\"string\">&quot;&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">作者：yxc</span><br><span class=\"line\">链接：https:<span class=\"comment\">//www.acwing.com/activity/content/code/content/43107/</span></span><br><span class=\"line\">来源：AcWing</span><br><span class=\"line\">著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</span><br></pre></td></tr></table></figure>"},{"title":"AcWing 829. 模拟队列","date":"2022-09-23T03:50:02.625Z","_content":"\n# AcWing 829. 模拟队列    \n### 题目来源--[829. 模拟队列](https://www.acwing.com/problem/content/831/ \"模拟队列\")\n\n- - -\n```c++\n\n题目描述\n\t实现一个队列，队列初始为空，支持四种操作：\n\tpush x – 向队尾插入一个数 x；\n\tpop – 从队头弹出一个数；\n\tempty – 判断队列是否为空；\n\tquery – 查询队头元素。\n\t现在要对队列进行 M 个操作，其中的每个操作 3 和操作 4 都要输出相应的结果。\n\n输入格式\n\t第一行包含整数 M，表示操作次数。\n\t接下来 M 行，每行包含一个操作命令，操作命令为 push x，pop，empty，query 中的一种。\n\n输出格式\n\t对于每个 empty 和 query 操作都要输出一个查询结果，每个结果占一行。\n\t其中，empty 操作的查询结果为 YES 或 NO，query 操作的查询结果为一个整数，表示队头元素的值。\n\n数据范围\n\t1≤M≤100000,\n\t1≤x≤109,\n\t所有操作保证合法。\n\n输入样例：\n\t10\n\tpush 6\n\tempty\n\tquery\n\tpop\n\tempty\n\tpush 3\n\tpush 4\n\tpop\n\tquery\n\tpush 6\n\t\n输出样例：\n\tNO\n\t6\n\tYES\n\t4\n\n\t\n```\n- - -\n## 代码演示\n```c++\n#include <iostream>\n\nusing namespace std;\n\nconst int N = 100010;\n\nint m;\nint q[N], hh, tt = -1;\n\nint main()\n{\n    cin >> m;\n\n    while (m -- )\n    {\n        string op;\n        int x;\n\n        cin >> op;\n        if (op == \"push\")\n        {\n            cin >> x;\n            q[ ++ tt] = x;\n        }\n        else if (op == \"pop\") hh ++ ;\n        else if (op == \"empty\") cout << (hh <= tt ? \"NO\" : \"YES\") << endl;\n        else cout << q[hh] << endl;\n    }\n\n    return 0;\n}\n\n作者：yxc\n链接：https://www.acwing.com/activity/content/code/content/43104/\n来源：AcWing\n著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。\n```","source":"_posts/AcWing/算法基础课/2、数据结构/AcWing829模拟队列.md","raw":"---\ntitle: AcWing 829. 模拟队列    \ndate: \ntags: \n\t- Acwing \n\t- 队列\ncategories: \n\t- [AcWing,算法基础课,2、数据结构]\n---\n\n# AcWing 829. 模拟队列    \n### 题目来源--[829. 模拟队列](https://www.acwing.com/problem/content/831/ \"模拟队列\")\n\n- - -\n```c++\n\n题目描述\n\t实现一个队列，队列初始为空，支持四种操作：\n\tpush x – 向队尾插入一个数 x；\n\tpop – 从队头弹出一个数；\n\tempty – 判断队列是否为空；\n\tquery – 查询队头元素。\n\t现在要对队列进行 M 个操作，其中的每个操作 3 和操作 4 都要输出相应的结果。\n\n输入格式\n\t第一行包含整数 M，表示操作次数。\n\t接下来 M 行，每行包含一个操作命令，操作命令为 push x，pop，empty，query 中的一种。\n\n输出格式\n\t对于每个 empty 和 query 操作都要输出一个查询结果，每个结果占一行。\n\t其中，empty 操作的查询结果为 YES 或 NO，query 操作的查询结果为一个整数，表示队头元素的值。\n\n数据范围\n\t1≤M≤100000,\n\t1≤x≤109,\n\t所有操作保证合法。\n\n输入样例：\n\t10\n\tpush 6\n\tempty\n\tquery\n\tpop\n\tempty\n\tpush 3\n\tpush 4\n\tpop\n\tquery\n\tpush 6\n\t\n输出样例：\n\tNO\n\t6\n\tYES\n\t4\n\n\t\n```\n- - -\n## 代码演示\n```c++\n#include <iostream>\n\nusing namespace std;\n\nconst int N = 100010;\n\nint m;\nint q[N], hh, tt = -1;\n\nint main()\n{\n    cin >> m;\n\n    while (m -- )\n    {\n        string op;\n        int x;\n\n        cin >> op;\n        if (op == \"push\")\n        {\n            cin >> x;\n            q[ ++ tt] = x;\n        }\n        else if (op == \"pop\") hh ++ ;\n        else if (op == \"empty\") cout << (hh <= tt ? \"NO\" : \"YES\") << endl;\n        else cout << q[hh] << endl;\n    }\n\n    return 0;\n}\n\n作者：yxc\n链接：https://www.acwing.com/activity/content/code/content/43104/\n来源：AcWing\n著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。\n```","slug":"AcWing/算法基础课/2、数据结构/AcWing829模拟队列","published":1,"updated":"2022-09-23T03:50:02.625Z","comments":1,"layout":"post","photos":[],"link":"","_id":"claryulce000w5ojr19wb2rg1","content":"<h1 id=\"AcWing-829-模拟队列\"><a href=\"#AcWing-829-模拟队列\" class=\"headerlink\" title=\"AcWing 829. 模拟队列\"></a>AcWing 829. 模拟队列</h1><h3 id=\"题目来源–829-模拟队列\"><a href=\"#题目来源–829-模拟队列\" class=\"headerlink\" title=\"题目来源–829. 模拟队列\"></a>题目来源–<a href=\"https://www.acwing.com/problem/content/831/\" title=\"模拟队列\">829. 模拟队列</a></h3><hr>\n<figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">题目描述</span><br><span class=\"line\">\t实现一个队列，队列初始为空，支持四种操作：</span><br><span class=\"line\">\tpush x – 向队尾插入一个数 x；</span><br><span class=\"line\">\tpop – 从队头弹出一个数；</span><br><span class=\"line\">\tempty – 判断队列是否为空；</span><br><span class=\"line\">\tquery – 查询队头元素。</span><br><span class=\"line\">\t现在要对队列进行 M 个操作，其中的每个操作 <span class=\"number\">3</span> 和操作 <span class=\"number\">4</span> 都要输出相应的结果。</span><br><span class=\"line\"></span><br><span class=\"line\">输入格式</span><br><span class=\"line\">\t第一行包含整数 M，表示操作次数。</span><br><span class=\"line\">\t接下来 M 行，每行包含一个操作命令，操作命令为 push x，pop，empty，query 中的一种。</span><br><span class=\"line\"></span><br><span class=\"line\">输出格式</span><br><span class=\"line\">\t对于每个 empty 和 query 操作都要输出一个查询结果，每个结果占一行。</span><br><span class=\"line\">\t其中，empty 操作的查询结果为 YES 或 NO，query 操作的查询结果为一个整数，表示队头元素的值。</span><br><span class=\"line\"></span><br><span class=\"line\">数据范围</span><br><span class=\"line\">\t<span class=\"number\">1</span>≤M≤<span class=\"number\">100000</span>,</span><br><span class=\"line\">\t<span class=\"number\">1</span>≤x≤<span class=\"number\">109</span>,</span><br><span class=\"line\">\t所有操作保证合法。</span><br><span class=\"line\"></span><br><span class=\"line\">输入样例：</span><br><span class=\"line\">\t<span class=\"number\">10</span></span><br><span class=\"line\">\tpush <span class=\"number\">6</span></span><br><span class=\"line\">\tempty</span><br><span class=\"line\">\tquery</span><br><span class=\"line\">\tpop</span><br><span class=\"line\">\tempty</span><br><span class=\"line\">\tpush <span class=\"number\">3</span></span><br><span class=\"line\">\tpush <span class=\"number\">4</span></span><br><span class=\"line\">\tpop</span><br><span class=\"line\">\tquery</span><br><span class=\"line\">\tpush <span class=\"number\">6</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输出样例：</span><br><span class=\"line\">\tNO</span><br><span class=\"line\">\t<span class=\"number\">6</span></span><br><span class=\"line\">\tYES</span><br><span class=\"line\">\t<span class=\"number\">4</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t</span><br></pre></td></tr></table></figure>\n<hr>\n<h2 id=\"代码演示\"><a href=\"#代码演示\" class=\"headerlink\" title=\"代码演示\"></a>代码演示</h2><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> std;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">const</span> <span class=\"type\">int</span> N = <span class=\"number\">100010</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">int</span> m;</span><br><span class=\"line\"><span class=\"type\">int</span> q[N], hh, tt = <span class=\"number\">-1</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    cin &gt;&gt; m;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">while</span> (m -- )</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        string op;</span><br><span class=\"line\">        <span class=\"type\">int</span> x;</span><br><span class=\"line\"></span><br><span class=\"line\">        cin &gt;&gt; op;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (op == <span class=\"string\">&quot;push&quot;</span>)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            cin &gt;&gt; x;</span><br><span class=\"line\">            q[ ++ tt] = x;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (op == <span class=\"string\">&quot;pop&quot;</span>) hh ++ ;</span><br><span class=\"line\">        <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (op == <span class=\"string\">&quot;empty&quot;</span>) cout &lt;&lt; (hh &lt;= tt ? <span class=\"string\">&quot;NO&quot;</span> : <span class=\"string\">&quot;YES&quot;</span>) &lt;&lt; endl;</span><br><span class=\"line\">        <span class=\"keyword\">else</span> cout &lt;&lt; q[hh] &lt;&lt; endl;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">作者：yxc</span><br><span class=\"line\">链接：https:<span class=\"comment\">//www.acwing.com/activity/content/code/content/43104/</span></span><br><span class=\"line\">来源：AcWing</span><br><span class=\"line\">著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</span><br></pre></td></tr></table></figure>","site":{"data":{"link":[{"class_name":"友情链接","class_desc":"那些人，那些事","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]},{"class_name":"网站","class_desc":"值得推荐的网站","link_list":[{"name":"Youtube","link":"https://www.youtube.com/","avatar":"https://i.loli.net/2020/05/14/9ZkGg8v3azHJfM1.png","descr":"视频网站"},{"name":"Weibo","link":"https://www.weibo.com/","avatar":"https://i.loli.net/2020/05/14/TLJBum386vcnI1P.png","descr":"中国最大社交分享平台"},{"name":"Twitter","link":"https://twitter.com/","avatar":"https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png","descr":"社交分享平台"}]}]}},"cover":"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7","excerpt":"","more":"<h1 id=\"AcWing-829-模拟队列\"><a href=\"#AcWing-829-模拟队列\" class=\"headerlink\" title=\"AcWing 829. 模拟队列\"></a>AcWing 829. 模拟队列</h1><h3 id=\"题目来源–829-模拟队列\"><a href=\"#题目来源–829-模拟队列\" class=\"headerlink\" title=\"题目来源–829. 模拟队列\"></a>题目来源–<a href=\"https://www.acwing.com/problem/content/831/\" title=\"模拟队列\">829. 模拟队列</a></h3><hr>\n<figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">题目描述</span><br><span class=\"line\">\t实现一个队列，队列初始为空，支持四种操作：</span><br><span class=\"line\">\tpush x – 向队尾插入一个数 x；</span><br><span class=\"line\">\tpop – 从队头弹出一个数；</span><br><span class=\"line\">\tempty – 判断队列是否为空；</span><br><span class=\"line\">\tquery – 查询队头元素。</span><br><span class=\"line\">\t现在要对队列进行 M 个操作，其中的每个操作 <span class=\"number\">3</span> 和操作 <span class=\"number\">4</span> 都要输出相应的结果。</span><br><span class=\"line\"></span><br><span class=\"line\">输入格式</span><br><span class=\"line\">\t第一行包含整数 M，表示操作次数。</span><br><span class=\"line\">\t接下来 M 行，每行包含一个操作命令，操作命令为 push x，pop，empty，query 中的一种。</span><br><span class=\"line\"></span><br><span class=\"line\">输出格式</span><br><span class=\"line\">\t对于每个 empty 和 query 操作都要输出一个查询结果，每个结果占一行。</span><br><span class=\"line\">\t其中，empty 操作的查询结果为 YES 或 NO，query 操作的查询结果为一个整数，表示队头元素的值。</span><br><span class=\"line\"></span><br><span class=\"line\">数据范围</span><br><span class=\"line\">\t<span class=\"number\">1</span>≤M≤<span class=\"number\">100000</span>,</span><br><span class=\"line\">\t<span class=\"number\">1</span>≤x≤<span class=\"number\">109</span>,</span><br><span class=\"line\">\t所有操作保证合法。</span><br><span class=\"line\"></span><br><span class=\"line\">输入样例：</span><br><span class=\"line\">\t<span class=\"number\">10</span></span><br><span class=\"line\">\tpush <span class=\"number\">6</span></span><br><span class=\"line\">\tempty</span><br><span class=\"line\">\tquery</span><br><span class=\"line\">\tpop</span><br><span class=\"line\">\tempty</span><br><span class=\"line\">\tpush <span class=\"number\">3</span></span><br><span class=\"line\">\tpush <span class=\"number\">4</span></span><br><span class=\"line\">\tpop</span><br><span class=\"line\">\tquery</span><br><span class=\"line\">\tpush <span class=\"number\">6</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输出样例：</span><br><span class=\"line\">\tNO</span><br><span class=\"line\">\t<span class=\"number\">6</span></span><br><span class=\"line\">\tYES</span><br><span class=\"line\">\t<span class=\"number\">4</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t</span><br></pre></td></tr></table></figure>\n<hr>\n<h2 id=\"代码演示\"><a href=\"#代码演示\" class=\"headerlink\" title=\"代码演示\"></a>代码演示</h2><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> std;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">const</span> <span class=\"type\">int</span> N = <span class=\"number\">100010</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">int</span> m;</span><br><span class=\"line\"><span class=\"type\">int</span> q[N], hh, tt = <span class=\"number\">-1</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    cin &gt;&gt; m;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">while</span> (m -- )</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        string op;</span><br><span class=\"line\">        <span class=\"type\">int</span> x;</span><br><span class=\"line\"></span><br><span class=\"line\">        cin &gt;&gt; op;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (op == <span class=\"string\">&quot;push&quot;</span>)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            cin &gt;&gt; x;</span><br><span class=\"line\">            q[ ++ tt] = x;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (op == <span class=\"string\">&quot;pop&quot;</span>) hh ++ ;</span><br><span class=\"line\">        <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (op == <span class=\"string\">&quot;empty&quot;</span>) cout &lt;&lt; (hh &lt;= tt ? <span class=\"string\">&quot;NO&quot;</span> : <span class=\"string\">&quot;YES&quot;</span>) &lt;&lt; endl;</span><br><span class=\"line\">        <span class=\"keyword\">else</span> cout &lt;&lt; q[hh] &lt;&lt; endl;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">作者：yxc</span><br><span class=\"line\">链接：https:<span class=\"comment\">//www.acwing.com/activity/content/code/content/43104/</span></span><br><span class=\"line\">来源：AcWing</span><br><span class=\"line\">著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</span><br></pre></td></tr></table></figure>"},{"title":"AcWing 830. 单调栈","date":"2022-09-23T03:50:02.626Z","_content":"\n# AcWing 830. 单调栈    \n### 题目来源--[830. 单调栈](https://www.acwing.com/problem/content/832/ \"单调栈\")\n\n- - -\n```c++\n\n题目描述\n\t给定一个长度为 N 的整数数列，输出每个数左边第一个比它小的数，如果不存在则输出 −1。\n\n输入格式\n\t第一行包含整数 N，表示数列长度。\n\t第二行包含 N 个整数，表示整数数列。\n\n输出格式\n\t共一行，包含 N 个整数，其中第 i 个数表示第 i 个数的左边第一个比它小的数，如果不存在则输出 −1。\n\n数据范围\n\t1≤N≤105\n\t1≤数列中元素≤109\n\t\n输入样例：\n\t5\n\t3 4 2 7 5\n\t\n输出样例：\n\t-1 3 -1 2 2\n\n\t\n```\n- - -\n## 代码演示\n```c++\n#include <iostream>\nusing namespace std;\nconst int N = 100010;\nint stk[N], tt;\n\nint main()\n{\n    int n;\n    cin >> n;\n    while (n -- )\n    {\n        int x;\n        scanf(\"%d\", &x);\n        while (tt && stk[tt] >= x) tt -- ;//如果栈顶元素大于当前待入栈元素，则出栈\n        if (!tt) printf(\"-1 \");//如果栈空，则没有比该元素小的值。\n        else printf(\"%d \", stk[tt]);//栈顶元素就是左侧第一个比它小的元素。\n        stk[ ++ tt] = x;\n    }\n    return 0;\n}\n\n作者：Hasity\n链接：https://www.acwing.com/solution/content/27437/\n来源：AcWing\n著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。\n```","source":"_posts/AcWing/算法基础课/2、数据结构/AcWing830单调栈.md","raw":"---\ntitle: AcWing 830. 单调栈      \ndate: \ntags: \n\t- Acwing \n\t- 单调栈\ncategories: \n\t- [AcWing,算法基础课,2、数据结构]\n---\n\n# AcWing 830. 单调栈    \n### 题目来源--[830. 单调栈](https://www.acwing.com/problem/content/832/ \"单调栈\")\n\n- - -\n```c++\n\n题目描述\n\t给定一个长度为 N 的整数数列，输出每个数左边第一个比它小的数，如果不存在则输出 −1。\n\n输入格式\n\t第一行包含整数 N，表示数列长度。\n\t第二行包含 N 个整数，表示整数数列。\n\n输出格式\n\t共一行，包含 N 个整数，其中第 i 个数表示第 i 个数的左边第一个比它小的数，如果不存在则输出 −1。\n\n数据范围\n\t1≤N≤105\n\t1≤数列中元素≤109\n\t\n输入样例：\n\t5\n\t3 4 2 7 5\n\t\n输出样例：\n\t-1 3 -1 2 2\n\n\t\n```\n- - -\n## 代码演示\n```c++\n#include <iostream>\nusing namespace std;\nconst int N = 100010;\nint stk[N], tt;\n\nint main()\n{\n    int n;\n    cin >> n;\n    while (n -- )\n    {\n        int x;\n        scanf(\"%d\", &x);\n        while (tt && stk[tt] >= x) tt -- ;//如果栈顶元素大于当前待入栈元素，则出栈\n        if (!tt) printf(\"-1 \");//如果栈空，则没有比该元素小的值。\n        else printf(\"%d \", stk[tt]);//栈顶元素就是左侧第一个比它小的元素。\n        stk[ ++ tt] = x;\n    }\n    return 0;\n}\n\n作者：Hasity\n链接：https://www.acwing.com/solution/content/27437/\n来源：AcWing\n著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。\n```","slug":"AcWing/算法基础课/2、数据结构/AcWing830单调栈","published":1,"updated":"2022-09-23T03:50:02.626Z","comments":1,"layout":"post","photos":[],"link":"","_id":"claryulcg00115ojr6b4ua7is","content":"<h1 id=\"AcWing-830-单调栈\"><a href=\"#AcWing-830-单调栈\" class=\"headerlink\" title=\"AcWing 830. 单调栈\"></a>AcWing 830. 单调栈</h1><h3 id=\"题目来源–830-单调栈\"><a href=\"#题目来源–830-单调栈\" class=\"headerlink\" title=\"题目来源–830. 单调栈\"></a>题目来源–<a href=\"https://www.acwing.com/problem/content/832/\" title=\"单调栈\">830. 单调栈</a></h3><hr>\n<figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">题目描述</span><br><span class=\"line\">\t给定一个长度为 N 的整数数列，输出每个数左边第一个比它小的数，如果不存在则输出 −<span class=\"number\">1</span>。</span><br><span class=\"line\"></span><br><span class=\"line\">输入格式</span><br><span class=\"line\">\t第一行包含整数 N，表示数列长度。</span><br><span class=\"line\">\t第二行包含 N 个整数，表示整数数列。</span><br><span class=\"line\"></span><br><span class=\"line\">输出格式</span><br><span class=\"line\">\t共一行，包含 N 个整数，其中第 i 个数表示第 i 个数的左边第一个比它小的数，如果不存在则输出 −<span class=\"number\">1</span>。</span><br><span class=\"line\"></span><br><span class=\"line\">数据范围</span><br><span class=\"line\">\t<span class=\"number\">1</span>≤N≤<span class=\"number\">105</span></span><br><span class=\"line\">\t<span class=\"number\">1</span>≤数列中元素≤<span class=\"number\">109</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输入样例：</span><br><span class=\"line\">\t<span class=\"number\">5</span></span><br><span class=\"line\">\t<span class=\"number\">3</span> <span class=\"number\">4</span> <span class=\"number\">2</span> <span class=\"number\">7</span> <span class=\"number\">5</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输出样例：</span><br><span class=\"line\">\t<span class=\"number\">-1</span> <span class=\"number\">3</span> <span class=\"number\">-1</span> <span class=\"number\">2</span> <span class=\"number\">2</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t</span><br></pre></td></tr></table></figure>\n<hr>\n<h2 id=\"代码演示\"><a href=\"#代码演示\" class=\"headerlink\" title=\"代码演示\"></a>代码演示</h2><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> std;</span><br><span class=\"line\"><span class=\"type\">const</span> <span class=\"type\">int</span> N = <span class=\"number\">100010</span>;</span><br><span class=\"line\"><span class=\"type\">int</span> stk[N], tt;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> n;</span><br><span class=\"line\">    cin &gt;&gt; n;</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (n -- )</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"type\">int</span> x;</span><br><span class=\"line\">        <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>, &amp;x);</span><br><span class=\"line\">        <span class=\"keyword\">while</span> (tt &amp;&amp; stk[tt] &gt;= x) tt -- ;<span class=\"comment\">//如果栈顶元素大于当前待入栈元素，则出栈</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!tt) <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;-1 &quot;</span>);<span class=\"comment\">//如果栈空，则没有比该元素小的值。</span></span><br><span class=\"line\">        <span class=\"keyword\">else</span> <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d &quot;</span>, stk[tt]);<span class=\"comment\">//栈顶元素就是左侧第一个比它小的元素。</span></span><br><span class=\"line\">        stk[ ++ tt] = x;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">作者：Hasity</span><br><span class=\"line\">链接：https:<span class=\"comment\">//www.acwing.com/solution/content/27437/</span></span><br><span class=\"line\">来源：AcWing</span><br><span class=\"line\">著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</span><br></pre></td></tr></table></figure>","site":{"data":{"link":[{"class_name":"友情链接","class_desc":"那些人，那些事","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]},{"class_name":"网站","class_desc":"值得推荐的网站","link_list":[{"name":"Youtube","link":"https://www.youtube.com/","avatar":"https://i.loli.net/2020/05/14/9ZkGg8v3azHJfM1.png","descr":"视频网站"},{"name":"Weibo","link":"https://www.weibo.com/","avatar":"https://i.loli.net/2020/05/14/TLJBum386vcnI1P.png","descr":"中国最大社交分享平台"},{"name":"Twitter","link":"https://twitter.com/","avatar":"https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png","descr":"社交分享平台"}]}]}},"cover":"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7","excerpt":"","more":"<h1 id=\"AcWing-830-单调栈\"><a href=\"#AcWing-830-单调栈\" class=\"headerlink\" title=\"AcWing 830. 单调栈\"></a>AcWing 830. 单调栈</h1><h3 id=\"题目来源–830-单调栈\"><a href=\"#题目来源–830-单调栈\" class=\"headerlink\" title=\"题目来源–830. 单调栈\"></a>题目来源–<a href=\"https://www.acwing.com/problem/content/832/\" title=\"单调栈\">830. 单调栈</a></h3><hr>\n<figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">题目描述</span><br><span class=\"line\">\t给定一个长度为 N 的整数数列，输出每个数左边第一个比它小的数，如果不存在则输出 −<span class=\"number\">1</span>。</span><br><span class=\"line\"></span><br><span class=\"line\">输入格式</span><br><span class=\"line\">\t第一行包含整数 N，表示数列长度。</span><br><span class=\"line\">\t第二行包含 N 个整数，表示整数数列。</span><br><span class=\"line\"></span><br><span class=\"line\">输出格式</span><br><span class=\"line\">\t共一行，包含 N 个整数，其中第 i 个数表示第 i 个数的左边第一个比它小的数，如果不存在则输出 −<span class=\"number\">1</span>。</span><br><span class=\"line\"></span><br><span class=\"line\">数据范围</span><br><span class=\"line\">\t<span class=\"number\">1</span>≤N≤<span class=\"number\">105</span></span><br><span class=\"line\">\t<span class=\"number\">1</span>≤数列中元素≤<span class=\"number\">109</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输入样例：</span><br><span class=\"line\">\t<span class=\"number\">5</span></span><br><span class=\"line\">\t<span class=\"number\">3</span> <span class=\"number\">4</span> <span class=\"number\">2</span> <span class=\"number\">7</span> <span class=\"number\">5</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输出样例：</span><br><span class=\"line\">\t<span class=\"number\">-1</span> <span class=\"number\">3</span> <span class=\"number\">-1</span> <span class=\"number\">2</span> <span class=\"number\">2</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t</span><br></pre></td></tr></table></figure>\n<hr>\n<h2 id=\"代码演示\"><a href=\"#代码演示\" class=\"headerlink\" title=\"代码演示\"></a>代码演示</h2><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> std;</span><br><span class=\"line\"><span class=\"type\">const</span> <span class=\"type\">int</span> N = <span class=\"number\">100010</span>;</span><br><span class=\"line\"><span class=\"type\">int</span> stk[N], tt;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> n;</span><br><span class=\"line\">    cin &gt;&gt; n;</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (n -- )</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"type\">int</span> x;</span><br><span class=\"line\">        <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>, &amp;x);</span><br><span class=\"line\">        <span class=\"keyword\">while</span> (tt &amp;&amp; stk[tt] &gt;= x) tt -- ;<span class=\"comment\">//如果栈顶元素大于当前待入栈元素，则出栈</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!tt) <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;-1 &quot;</span>);<span class=\"comment\">//如果栈空，则没有比该元素小的值。</span></span><br><span class=\"line\">        <span class=\"keyword\">else</span> <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d &quot;</span>, stk[tt]);<span class=\"comment\">//栈顶元素就是左侧第一个比它小的元素。</span></span><br><span class=\"line\">        stk[ ++ tt] = x;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">作者：Hasity</span><br><span class=\"line\">链接：https:<span class=\"comment\">//www.acwing.com/solution/content/27437/</span></span><br><span class=\"line\">来源：AcWing</span><br><span class=\"line\">著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</span><br></pre></td></tr></table></figure>"},{"title":"AcWing 831. KMP字符串","date":"2022-09-23T03:50:02.626Z","_content":"\n# AcWing 831. KMP字符串    \n### 题目来源--[831. KMP字符串](https://www.acwing.com/problem/content/833/ \"KMP字符串\")\n\n``` c++\n题目描述\n\t给定一个字符串 S，以及一个模式串 P，所有字符串中只包含大小写英文字母以及阿拉伯数字。\n\t模式串 P 在字符串 S 中多次作为子串出现。\n\t求出模式串 P 在字符串 S 中所有出现的位置的起始下标。\n\n输入格式\n\t第一行输入整数 N，表示字符串 P 的长度。\n\t第二行输入字符串 P。\n\t第三行输入整数 M，表示字符串 S 的长度。\n\t第四行输入字符串 S。\n\n输出格式\n\t共一行，输出所有出现位置的起始下标（下标从 0 开始计数），整数之间用空格隔开。\n\n数据范围\n\t1≤N≤105\n\t1≤M≤106\n\t\n输入样例：\n\t3\n\taba\n\t5\n\tababa\n\t\n输出样例：\n\t0 2\n\t\n```\n\n## 代码演示\n```c++\n#include <iostream>\n\nusing namespace std;\n\nconst int N = 100010, M = 1000010;\n\nint n, m;\nint ne[N];\nchar s[M], p[N];\n\nint main()\n{\n    cin >> n >> p + 1 >> m >> s + 1;\n\n    for (int i = 2, j = 0; i <= n; i ++ )\n    {\n        while (j && p[i] != p[j + 1]) j = ne[j];\n        if (p[i] == p[j + 1]) j ++ ;\n        ne[i] = j;\n    }\n\n    for (int i = 1, j = 0; i <= m; i ++ )\n    {\n        while (j && s[i] != p[j + 1]) j = ne[j];\n        if (s[i] == p[j + 1]) j ++ ;\n        if (j == n)\n        {\n            printf(\"%d \", i - n);\n            j = ne[j];\n        }\n    }\n\n    return 0;\n}\n\n作者：yxc\n链接：https://www.acwing.com/activity/content/code/content/43108/\n来源：AcWing\n著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。\n```","source":"_posts/AcWing/算法基础课/2、数据结构/AcWing831KMP字符串.md","raw":"---\ntitle: AcWing 831. KMP字符串      \ndate: \ntags: \n\t- Acwing \n\t- KMP\ncategories: \n\t- [AcWing,算法基础课,2、数据结构]\n---\n\n# AcWing 831. KMP字符串    \n### 题目来源--[831. KMP字符串](https://www.acwing.com/problem/content/833/ \"KMP字符串\")\n\n``` c++\n题目描述\n\t给定一个字符串 S，以及一个模式串 P，所有字符串中只包含大小写英文字母以及阿拉伯数字。\n\t模式串 P 在字符串 S 中多次作为子串出现。\n\t求出模式串 P 在字符串 S 中所有出现的位置的起始下标。\n\n输入格式\n\t第一行输入整数 N，表示字符串 P 的长度。\n\t第二行输入字符串 P。\n\t第三行输入整数 M，表示字符串 S 的长度。\n\t第四行输入字符串 S。\n\n输出格式\n\t共一行，输出所有出现位置的起始下标（下标从 0 开始计数），整数之间用空格隔开。\n\n数据范围\n\t1≤N≤105\n\t1≤M≤106\n\t\n输入样例：\n\t3\n\taba\n\t5\n\tababa\n\t\n输出样例：\n\t0 2\n\t\n```\n\n## 代码演示\n```c++\n#include <iostream>\n\nusing namespace std;\n\nconst int N = 100010, M = 1000010;\n\nint n, m;\nint ne[N];\nchar s[M], p[N];\n\nint main()\n{\n    cin >> n >> p + 1 >> m >> s + 1;\n\n    for (int i = 2, j = 0; i <= n; i ++ )\n    {\n        while (j && p[i] != p[j + 1]) j = ne[j];\n        if (p[i] == p[j + 1]) j ++ ;\n        ne[i] = j;\n    }\n\n    for (int i = 1, j = 0; i <= m; i ++ )\n    {\n        while (j && s[i] != p[j + 1]) j = ne[j];\n        if (s[i] == p[j + 1]) j ++ ;\n        if (j == n)\n        {\n            printf(\"%d \", i - n);\n            j = ne[j];\n        }\n    }\n\n    return 0;\n}\n\n作者：yxc\n链接：https://www.acwing.com/activity/content/code/content/43108/\n来源：AcWing\n著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。\n```","slug":"AcWing/算法基础课/2、数据结构/AcWing831KMP字符串","published":1,"updated":"2022-09-23T03:50:02.627Z","comments":1,"layout":"post","photos":[],"link":"","_id":"claryulch00135ojrgo2ncfv2","content":"<h1 id=\"AcWing-831-KMP字符串\"><a href=\"#AcWing-831-KMP字符串\" class=\"headerlink\" title=\"AcWing 831. KMP字符串\"></a>AcWing 831. KMP字符串</h1><h3 id=\"题目来源–831-KMP字符串\"><a href=\"#题目来源–831-KMP字符串\" class=\"headerlink\" title=\"题目来源–831. KMP字符串\"></a>题目来源–<a href=\"https://www.acwing.com/problem/content/833/\" title=\"KMP字符串\">831. KMP字符串</a></h3><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">题目描述</span><br><span class=\"line\">\t给定一个字符串 S，以及一个模式串 P，所有字符串中只包含大小写英文字母以及阿拉伯数字。</span><br><span class=\"line\">\t模式串 P 在字符串 S 中多次作为子串出现。</span><br><span class=\"line\">\t求出模式串 P 在字符串 S 中所有出现的位置的起始下标。</span><br><span class=\"line\"></span><br><span class=\"line\">输入格式</span><br><span class=\"line\">\t第一行输入整数 N，表示字符串 P 的长度。</span><br><span class=\"line\">\t第二行输入字符串 P。</span><br><span class=\"line\">\t第三行输入整数 M，表示字符串 S 的长度。</span><br><span class=\"line\">\t第四行输入字符串 S。</span><br><span class=\"line\"></span><br><span class=\"line\">输出格式</span><br><span class=\"line\">\t共一行，输出所有出现位置的起始下标（下标从 <span class=\"number\">0</span> 开始计数），整数之间用空格隔开。</span><br><span class=\"line\"></span><br><span class=\"line\">数据范围</span><br><span class=\"line\">\t<span class=\"number\">1</span>≤N≤<span class=\"number\">105</span></span><br><span class=\"line\">\t<span class=\"number\">1</span>≤M≤<span class=\"number\">106</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输入样例：</span><br><span class=\"line\">\t<span class=\"number\">3</span></span><br><span class=\"line\">\taba</span><br><span class=\"line\">\t<span class=\"number\">5</span></span><br><span class=\"line\">\tababa</span><br><span class=\"line\">\t</span><br><span class=\"line\">输出样例：</span><br><span class=\"line\">\t<span class=\"number\">0</span> <span class=\"number\">2</span></span><br><span class=\"line\">\t</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"代码演示\"><a href=\"#代码演示\" class=\"headerlink\" title=\"代码演示\"></a>代码演示</h2><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> std;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">const</span> <span class=\"type\">int</span> N = <span class=\"number\">100010</span>, M = <span class=\"number\">1000010</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">int</span> n, m;</span><br><span class=\"line\"><span class=\"type\">int</span> ne[N];</span><br><span class=\"line\"><span class=\"type\">char</span> s[M], p[N];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    cin &gt;&gt; n &gt;&gt; p + <span class=\"number\">1</span> &gt;&gt; m &gt;&gt; s + <span class=\"number\">1</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">2</span>, j = <span class=\"number\">0</span>; i &lt;= n; i ++ )</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">while</span> (j &amp;&amp; p[i] != p[j + <span class=\"number\">1</span>]) j = ne[j];</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (p[i] == p[j + <span class=\"number\">1</span>]) j ++ ;</span><br><span class=\"line\">        ne[i] = j;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">1</span>, j = <span class=\"number\">0</span>; i &lt;= m; i ++ )</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">while</span> (j &amp;&amp; s[i] != p[j + <span class=\"number\">1</span>]) j = ne[j];</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (s[i] == p[j + <span class=\"number\">1</span>]) j ++ ;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (j == n)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d &quot;</span>, i - n);</span><br><span class=\"line\">            j = ne[j];</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">作者：yxc</span><br><span class=\"line\">链接：https:<span class=\"comment\">//www.acwing.com/activity/content/code/content/43108/</span></span><br><span class=\"line\">来源：AcWing</span><br><span class=\"line\">著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</span><br></pre></td></tr></table></figure>","site":{"data":{"link":[{"class_name":"友情链接","class_desc":"那些人，那些事","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]},{"class_name":"网站","class_desc":"值得推荐的网站","link_list":[{"name":"Youtube","link":"https://www.youtube.com/","avatar":"https://i.loli.net/2020/05/14/9ZkGg8v3azHJfM1.png","descr":"视频网站"},{"name":"Weibo","link":"https://www.weibo.com/","avatar":"https://i.loli.net/2020/05/14/TLJBum386vcnI1P.png","descr":"中国最大社交分享平台"},{"name":"Twitter","link":"https://twitter.com/","avatar":"https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png","descr":"社交分享平台"}]}]}},"cover":"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7","excerpt":"","more":"<h1 id=\"AcWing-831-KMP字符串\"><a href=\"#AcWing-831-KMP字符串\" class=\"headerlink\" title=\"AcWing 831. KMP字符串\"></a>AcWing 831. KMP字符串</h1><h3 id=\"题目来源–831-KMP字符串\"><a href=\"#题目来源–831-KMP字符串\" class=\"headerlink\" title=\"题目来源–831. KMP字符串\"></a>题目来源–<a href=\"https://www.acwing.com/problem/content/833/\" title=\"KMP字符串\">831. KMP字符串</a></h3><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">题目描述</span><br><span class=\"line\">\t给定一个字符串 S，以及一个模式串 P，所有字符串中只包含大小写英文字母以及阿拉伯数字。</span><br><span class=\"line\">\t模式串 P 在字符串 S 中多次作为子串出现。</span><br><span class=\"line\">\t求出模式串 P 在字符串 S 中所有出现的位置的起始下标。</span><br><span class=\"line\"></span><br><span class=\"line\">输入格式</span><br><span class=\"line\">\t第一行输入整数 N，表示字符串 P 的长度。</span><br><span class=\"line\">\t第二行输入字符串 P。</span><br><span class=\"line\">\t第三行输入整数 M，表示字符串 S 的长度。</span><br><span class=\"line\">\t第四行输入字符串 S。</span><br><span class=\"line\"></span><br><span class=\"line\">输出格式</span><br><span class=\"line\">\t共一行，输出所有出现位置的起始下标（下标从 <span class=\"number\">0</span> 开始计数），整数之间用空格隔开。</span><br><span class=\"line\"></span><br><span class=\"line\">数据范围</span><br><span class=\"line\">\t<span class=\"number\">1</span>≤N≤<span class=\"number\">105</span></span><br><span class=\"line\">\t<span class=\"number\">1</span>≤M≤<span class=\"number\">106</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输入样例：</span><br><span class=\"line\">\t<span class=\"number\">3</span></span><br><span class=\"line\">\taba</span><br><span class=\"line\">\t<span class=\"number\">5</span></span><br><span class=\"line\">\tababa</span><br><span class=\"line\">\t</span><br><span class=\"line\">输出样例：</span><br><span class=\"line\">\t<span class=\"number\">0</span> <span class=\"number\">2</span></span><br><span class=\"line\">\t</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"代码演示\"><a href=\"#代码演示\" class=\"headerlink\" title=\"代码演示\"></a>代码演示</h2><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> std;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">const</span> <span class=\"type\">int</span> N = <span class=\"number\">100010</span>, M = <span class=\"number\">1000010</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">int</span> n, m;</span><br><span class=\"line\"><span class=\"type\">int</span> ne[N];</span><br><span class=\"line\"><span class=\"type\">char</span> s[M], p[N];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    cin &gt;&gt; n &gt;&gt; p + <span class=\"number\">1</span> &gt;&gt; m &gt;&gt; s + <span class=\"number\">1</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">2</span>, j = <span class=\"number\">0</span>; i &lt;= n; i ++ )</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">while</span> (j &amp;&amp; p[i] != p[j + <span class=\"number\">1</span>]) j = ne[j];</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (p[i] == p[j + <span class=\"number\">1</span>]) j ++ ;</span><br><span class=\"line\">        ne[i] = j;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">1</span>, j = <span class=\"number\">0</span>; i &lt;= m; i ++ )</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">while</span> (j &amp;&amp; s[i] != p[j + <span class=\"number\">1</span>]) j = ne[j];</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (s[i] == p[j + <span class=\"number\">1</span>]) j ++ ;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (j == n)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d &quot;</span>, i - n);</span><br><span class=\"line\">            j = ne[j];</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">作者：yxc</span><br><span class=\"line\">链接：https:<span class=\"comment\">//www.acwing.com/activity/content/code/content/43108/</span></span><br><span class=\"line\">来源：AcWing</span><br><span class=\"line\">著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</span><br></pre></td></tr></table></figure>"},{"title":"AcWing 835. Trie字符串统计","date":"2022-09-23T03:50:02.627Z","_content":"\n# AcWing 835. Trie字符串统计    \n### 题目来源--[835. Trie字符串统计](https://www.acwing.com/problem/content/837/ \"Trie字符串统计\")\n\n``` c++\n题目描述\n\t维护一个字符串集合，支持两种操作：\n\tI x 向集合中插入一个字符串 x；\n\tQ x 询问一个字符串在集合中出现了多少次。\n\t共有 N 个操作，输入的字符串总长度不超过 105，字符串仅包含小写英文字母。\n\n输入格式\n\t第一行包含整数 N，表示操作数。\n\t接下来 N 行，每行包含一个操作指令，指令为 I x 或 Q x 中的一种。\n\n输出格式\n\t对于每个询问指令 Q x，都要输出一个整数作为结果，表示 x 在集合中出现的次数。\n\t每个结果占一行。\n\n数据范围\n\t1≤N≤2∗104\n\t\n输入样例：\n\t5\n\tI abc\n\tQ abc\n\tQ ab\n\tI ab\n\tQ ab\n\t\n输出样例：\n\t1\n\t0\n\t1\n\t\n```\n\n## 代码演示\n```c++\n#include <iostream>\n\nusing namespace std;\n\nconst int N = 100010;\n\nint son[N][26], cnt[N], idx;\nchar str[N];\n\nvoid insert(char *str)\n{\n    int p = 0;\n    for (int i = 0; str[i]; i ++ )\n    {\n        int u = str[i] - 'a';\n        if (!son[p][u]) son[p][u] = ++ idx;\n        p = son[p][u];\n    }\n    cnt[p] ++ ;\n}\n\nint query(char *str)\n{\n    int p = 0;\n    for (int i = 0; str[i]; i ++ )\n    {\n        int u = str[i] - 'a';\n        if (!son[p][u]) return 0;\n        p = son[p][u];\n    }\n    return cnt[p];\n}\n\nint main()\n{\n    int n;\n    scanf(\"%d\", &n);\n    while (n -- )\n    {\n        char op[2];\n        scanf(\"%s%s\", op, str);\n        if (*op == 'I') insert(str);\n        else printf(\"%d\\n\", query(str));\n    }\n\n    return 0;\n}\n\n作者：yxc\n链接：https://www.acwing.com/activity/content/code/content/45282/\n来源：AcWing\n著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。\n```","source":"_posts/AcWing/算法基础课/2、数据结构/AcWing835Trie字符串统计.md","raw":"---\ntitle: AcWing 835. Trie字符串统计      \ndate: \ntags: \n\t- Acwing \n\t- Trie\ncategories: \n\t- [AcWing,算法基础课,2、数据结构]\n---\n\n# AcWing 835. Trie字符串统计    \n### 题目来源--[835. Trie字符串统计](https://www.acwing.com/problem/content/837/ \"Trie字符串统计\")\n\n``` c++\n题目描述\n\t维护一个字符串集合，支持两种操作：\n\tI x 向集合中插入一个字符串 x；\n\tQ x 询问一个字符串在集合中出现了多少次。\n\t共有 N 个操作，输入的字符串总长度不超过 105，字符串仅包含小写英文字母。\n\n输入格式\n\t第一行包含整数 N，表示操作数。\n\t接下来 N 行，每行包含一个操作指令，指令为 I x 或 Q x 中的一种。\n\n输出格式\n\t对于每个询问指令 Q x，都要输出一个整数作为结果，表示 x 在集合中出现的次数。\n\t每个结果占一行。\n\n数据范围\n\t1≤N≤2∗104\n\t\n输入样例：\n\t5\n\tI abc\n\tQ abc\n\tQ ab\n\tI ab\n\tQ ab\n\t\n输出样例：\n\t1\n\t0\n\t1\n\t\n```\n\n## 代码演示\n```c++\n#include <iostream>\n\nusing namespace std;\n\nconst int N = 100010;\n\nint son[N][26], cnt[N], idx;\nchar str[N];\n\nvoid insert(char *str)\n{\n    int p = 0;\n    for (int i = 0; str[i]; i ++ )\n    {\n        int u = str[i] - 'a';\n        if (!son[p][u]) son[p][u] = ++ idx;\n        p = son[p][u];\n    }\n    cnt[p] ++ ;\n}\n\nint query(char *str)\n{\n    int p = 0;\n    for (int i = 0; str[i]; i ++ )\n    {\n        int u = str[i] - 'a';\n        if (!son[p][u]) return 0;\n        p = son[p][u];\n    }\n    return cnt[p];\n}\n\nint main()\n{\n    int n;\n    scanf(\"%d\", &n);\n    while (n -- )\n    {\n        char op[2];\n        scanf(\"%s%s\", op, str);\n        if (*op == 'I') insert(str);\n        else printf(\"%d\\n\", query(str));\n    }\n\n    return 0;\n}\n\n作者：yxc\n链接：https://www.acwing.com/activity/content/code/content/45282/\n来源：AcWing\n著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。\n```","slug":"AcWing/算法基础课/2、数据结构/AcWing835Trie字符串统计","published":1,"updated":"2022-09-23T03:50:02.627Z","comments":1,"layout":"post","photos":[],"link":"","_id":"claryulch00165ojr9ozh6x4j","content":"<h1 id=\"AcWing-835-Trie字符串统计\"><a href=\"#AcWing-835-Trie字符串统计\" class=\"headerlink\" title=\"AcWing 835. Trie字符串统计\"></a>AcWing 835. Trie字符串统计</h1><h3 id=\"题目来源–835-Trie字符串统计\"><a href=\"#题目来源–835-Trie字符串统计\" class=\"headerlink\" title=\"题目来源–835. Trie字符串统计\"></a>题目来源–<a href=\"https://www.acwing.com/problem/content/837/\" title=\"Trie字符串统计\">835. Trie字符串统计</a></h3><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">题目描述</span><br><span class=\"line\">\t维护一个字符串集合，支持两种操作：</span><br><span class=\"line\">\tI x 向集合中插入一个字符串 x；</span><br><span class=\"line\">\tQ x 询问一个字符串在集合中出现了多少次。</span><br><span class=\"line\">\t共有 N 个操作，输入的字符串总长度不超过 <span class=\"number\">105</span>，字符串仅包含小写英文字母。</span><br><span class=\"line\"></span><br><span class=\"line\">输入格式</span><br><span class=\"line\">\t第一行包含整数 N，表示操作数。</span><br><span class=\"line\">\t接下来 N 行，每行包含一个操作指令，指令为 I x 或 Q x 中的一种。</span><br><span class=\"line\"></span><br><span class=\"line\">输出格式</span><br><span class=\"line\">\t对于每个询问指令 Q x，都要输出一个整数作为结果，表示 x 在集合中出现的次数。</span><br><span class=\"line\">\t每个结果占一行。</span><br><span class=\"line\"></span><br><span class=\"line\">数据范围</span><br><span class=\"line\">\t<span class=\"number\">1</span>≤N≤<span class=\"number\">2</span>∗<span class=\"number\">104</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输入样例：</span><br><span class=\"line\">\t<span class=\"number\">5</span></span><br><span class=\"line\">\tI abc</span><br><span class=\"line\">\tQ abc</span><br><span class=\"line\">\tQ ab</span><br><span class=\"line\">\tI ab</span><br><span class=\"line\">\tQ ab</span><br><span class=\"line\">\t</span><br><span class=\"line\">输出样例：</span><br><span class=\"line\">\t<span class=\"number\">1</span></span><br><span class=\"line\">\t<span class=\"number\">0</span></span><br><span class=\"line\">\t<span class=\"number\">1</span></span><br><span class=\"line\">\t</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"代码演示\"><a href=\"#代码演示\" class=\"headerlink\" title=\"代码演示\"></a>代码演示</h2><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> std;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">const</span> <span class=\"type\">int</span> N = <span class=\"number\">100010</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">int</span> son[N][<span class=\"number\">26</span>], cnt[N], idx;</span><br><span class=\"line\"><span class=\"type\">char</span> str[N];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">insert</span><span class=\"params\">(<span class=\"type\">char</span> *str)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> p = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; str[i]; i ++ )</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"type\">int</span> u = str[i] - <span class=\"string\">&#x27;a&#x27;</span>;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!son[p][u]) son[p][u] = ++ idx;</span><br><span class=\"line\">        p = son[p][u];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    cnt[p] ++ ;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">query</span><span class=\"params\">(<span class=\"type\">char</span> *str)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> p = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; str[i]; i ++ )</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"type\">int</span> u = str[i] - <span class=\"string\">&#x27;a&#x27;</span>;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!son[p][u]) <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">        p = son[p][u];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> cnt[p];</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> n;</span><br><span class=\"line\">    <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>, &amp;n);</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (n -- )</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"type\">char</span> op[<span class=\"number\">2</span>];</span><br><span class=\"line\">        <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%s%s&quot;</span>, op, str);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (*op == <span class=\"string\">&#x27;I&#x27;</span>) <span class=\"built_in\">insert</span>(str);</span><br><span class=\"line\">        <span class=\"keyword\">else</span> <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d\\n&quot;</span>, <span class=\"built_in\">query</span>(str));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">作者：yxc</span><br><span class=\"line\">链接：https:<span class=\"comment\">//www.acwing.com/activity/content/code/content/45282/</span></span><br><span class=\"line\">来源：AcWing</span><br><span class=\"line\">著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</span><br></pre></td></tr></table></figure>","site":{"data":{"link":[{"class_name":"友情链接","class_desc":"那些人，那些事","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]},{"class_name":"网站","class_desc":"值得推荐的网站","link_list":[{"name":"Youtube","link":"https://www.youtube.com/","avatar":"https://i.loli.net/2020/05/14/9ZkGg8v3azHJfM1.png","descr":"视频网站"},{"name":"Weibo","link":"https://www.weibo.com/","avatar":"https://i.loli.net/2020/05/14/TLJBum386vcnI1P.png","descr":"中国最大社交分享平台"},{"name":"Twitter","link":"https://twitter.com/","avatar":"https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png","descr":"社交分享平台"}]}]}},"cover":"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7","excerpt":"","more":"<h1 id=\"AcWing-835-Trie字符串统计\"><a href=\"#AcWing-835-Trie字符串统计\" class=\"headerlink\" title=\"AcWing 835. Trie字符串统计\"></a>AcWing 835. Trie字符串统计</h1><h3 id=\"题目来源–835-Trie字符串统计\"><a href=\"#题目来源–835-Trie字符串统计\" class=\"headerlink\" title=\"题目来源–835. Trie字符串统计\"></a>题目来源–<a href=\"https://www.acwing.com/problem/content/837/\" title=\"Trie字符串统计\">835. Trie字符串统计</a></h3><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">题目描述</span><br><span class=\"line\">\t维护一个字符串集合，支持两种操作：</span><br><span class=\"line\">\tI x 向集合中插入一个字符串 x；</span><br><span class=\"line\">\tQ x 询问一个字符串在集合中出现了多少次。</span><br><span class=\"line\">\t共有 N 个操作，输入的字符串总长度不超过 <span class=\"number\">105</span>，字符串仅包含小写英文字母。</span><br><span class=\"line\"></span><br><span class=\"line\">输入格式</span><br><span class=\"line\">\t第一行包含整数 N，表示操作数。</span><br><span class=\"line\">\t接下来 N 行，每行包含一个操作指令，指令为 I x 或 Q x 中的一种。</span><br><span class=\"line\"></span><br><span class=\"line\">输出格式</span><br><span class=\"line\">\t对于每个询问指令 Q x，都要输出一个整数作为结果，表示 x 在集合中出现的次数。</span><br><span class=\"line\">\t每个结果占一行。</span><br><span class=\"line\"></span><br><span class=\"line\">数据范围</span><br><span class=\"line\">\t<span class=\"number\">1</span>≤N≤<span class=\"number\">2</span>∗<span class=\"number\">104</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输入样例：</span><br><span class=\"line\">\t<span class=\"number\">5</span></span><br><span class=\"line\">\tI abc</span><br><span class=\"line\">\tQ abc</span><br><span class=\"line\">\tQ ab</span><br><span class=\"line\">\tI ab</span><br><span class=\"line\">\tQ ab</span><br><span class=\"line\">\t</span><br><span class=\"line\">输出样例：</span><br><span class=\"line\">\t<span class=\"number\">1</span></span><br><span class=\"line\">\t<span class=\"number\">0</span></span><br><span class=\"line\">\t<span class=\"number\">1</span></span><br><span class=\"line\">\t</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"代码演示\"><a href=\"#代码演示\" class=\"headerlink\" title=\"代码演示\"></a>代码演示</h2><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> std;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">const</span> <span class=\"type\">int</span> N = <span class=\"number\">100010</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">int</span> son[N][<span class=\"number\">26</span>], cnt[N], idx;</span><br><span class=\"line\"><span class=\"type\">char</span> str[N];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">insert</span><span class=\"params\">(<span class=\"type\">char</span> *str)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> p = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; str[i]; i ++ )</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"type\">int</span> u = str[i] - <span class=\"string\">&#x27;a&#x27;</span>;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!son[p][u]) son[p][u] = ++ idx;</span><br><span class=\"line\">        p = son[p][u];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    cnt[p] ++ ;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">query</span><span class=\"params\">(<span class=\"type\">char</span> *str)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> p = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; str[i]; i ++ )</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"type\">int</span> u = str[i] - <span class=\"string\">&#x27;a&#x27;</span>;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!son[p][u]) <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">        p = son[p][u];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> cnt[p];</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> n;</span><br><span class=\"line\">    <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>, &amp;n);</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (n -- )</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"type\">char</span> op[<span class=\"number\">2</span>];</span><br><span class=\"line\">        <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%s%s&quot;</span>, op, str);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (*op == <span class=\"string\">&#x27;I&#x27;</span>) <span class=\"built_in\">insert</span>(str);</span><br><span class=\"line\">        <span class=\"keyword\">else</span> <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d\\n&quot;</span>, <span class=\"built_in\">query</span>(str));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">作者：yxc</span><br><span class=\"line\">链接：https:<span class=\"comment\">//www.acwing.com/activity/content/code/content/45282/</span></span><br><span class=\"line\">来源：AcWing</span><br><span class=\"line\">著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</span><br></pre></td></tr></table></figure>"},{"title":"AcWing 836. 合并集合","date":"2022-09-23T03:50:02.628Z","_content":"\n# AcWing 836. 合并集合    \n### 题目来源--[836. 合并集合](https://www.acwing.com/problem/content/838/ \"合并集合\")\n\n``` c++\n题目描述\n\t一共有 n 个数，编号是 1∼n，最开始每个数各自在一个集合中。\n\t现在要进行 m 个操作，操作共有两种：\n\tM a b，将编号为 a 和 b 的两个数所在的集合合并，如果两个数已经在同一个集合中，则忽略这个操作；\n\tQ a b，询问编号为 a 和 b 的两个数是否在同一个集合中；\n\t\n输入格式\n\t第一行输入整数 n 和 m。\n\t接下来 m 行，每行包含一个操作指令，指令为 M a b 或 Q a b 中的一种。\n\n输出格式\n\t对于每个询问指令 Q a b，都要输出一个结果，如果 a 和 b 在同一集合内，则输出 Yes，否则输出 No。\n\t每个结果占一行。\n\n数据范围\n\t1≤n,m≤10^5\n\t\n输入样例：\n\t4 5\n\tM 1 2\n\tM 3 4\n\tQ 1 2\n\tQ 1 3\n\tQ 3 4\n\t\n输出样例：\n\tYes\n\tNo\n\tYes\n\t\n```\n\n## 代码演示\n```c++\n#include <iostream>\n\nusing namespace std;\n\nconst int N = 100010;\n\nint p[N];\n\nint find(int x)\n{\n    if (p[x] != x) p[x] = find(p[x]);\n    return p[x];\n}\n\nint main()\n{\n    int n, m;\n    scanf(\"%d%d\", &n, &m);\n    for (int i = 1; i <= n; i ++ ) p[i] = i;\n\n    while (m -- )\n    {\n        char op[2];\n        int a, b;\n        scanf(\"%s%d%d\", op, &a, &b);\n        if (*op == 'M') p[find(a)] = find(b);\n        else\n        {\n            if (find(a) == find(b)) puts(\"Yes\");\n            else puts(\"No\");\n        }\n    }\n\n    return 0;\n}\n\n作者：yxc\n链接：https://www.acwing.com/activity/content/code/content/45287/\n来源：AcWing\n著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。\n```","source":"_posts/AcWing/算法基础课/2、数据结构/AcWing836合并集合.md","raw":"---\ntitle: AcWing 836. 合并集合      \ndate: \ntags: \n\t- Acwing \n\t- 并查集\ncategories: \n\t- [AcWing,算法基础课,2、数据结构]\n---\n\n# AcWing 836. 合并集合    \n### 题目来源--[836. 合并集合](https://www.acwing.com/problem/content/838/ \"合并集合\")\n\n``` c++\n题目描述\n\t一共有 n 个数，编号是 1∼n，最开始每个数各自在一个集合中。\n\t现在要进行 m 个操作，操作共有两种：\n\tM a b，将编号为 a 和 b 的两个数所在的集合合并，如果两个数已经在同一个集合中，则忽略这个操作；\n\tQ a b，询问编号为 a 和 b 的两个数是否在同一个集合中；\n\t\n输入格式\n\t第一行输入整数 n 和 m。\n\t接下来 m 行，每行包含一个操作指令，指令为 M a b 或 Q a b 中的一种。\n\n输出格式\n\t对于每个询问指令 Q a b，都要输出一个结果，如果 a 和 b 在同一集合内，则输出 Yes，否则输出 No。\n\t每个结果占一行。\n\n数据范围\n\t1≤n,m≤10^5\n\t\n输入样例：\n\t4 5\n\tM 1 2\n\tM 3 4\n\tQ 1 2\n\tQ 1 3\n\tQ 3 4\n\t\n输出样例：\n\tYes\n\tNo\n\tYes\n\t\n```\n\n## 代码演示\n```c++\n#include <iostream>\n\nusing namespace std;\n\nconst int N = 100010;\n\nint p[N];\n\nint find(int x)\n{\n    if (p[x] != x) p[x] = find(p[x]);\n    return p[x];\n}\n\nint main()\n{\n    int n, m;\n    scanf(\"%d%d\", &n, &m);\n    for (int i = 1; i <= n; i ++ ) p[i] = i;\n\n    while (m -- )\n    {\n        char op[2];\n        int a, b;\n        scanf(\"%s%d%d\", op, &a, &b);\n        if (*op == 'M') p[find(a)] = find(b);\n        else\n        {\n            if (find(a) == find(b)) puts(\"Yes\");\n            else puts(\"No\");\n        }\n    }\n\n    return 0;\n}\n\n作者：yxc\n链接：https://www.acwing.com/activity/content/code/content/45287/\n来源：AcWing\n著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。\n```","slug":"AcWing/算法基础课/2、数据结构/AcWing836合并集合","published":1,"updated":"2022-09-23T03:50:02.628Z","comments":1,"layout":"post","photos":[],"link":"","_id":"claryulci00195ojr999n8hy6","content":"<h1 id=\"AcWing-836-合并集合\"><a href=\"#AcWing-836-合并集合\" class=\"headerlink\" title=\"AcWing 836. 合并集合\"></a>AcWing 836. 合并集合</h1><h3 id=\"题目来源–836-合并集合\"><a href=\"#题目来源–836-合并集合\" class=\"headerlink\" title=\"题目来源–836. 合并集合\"></a>题目来源–<a href=\"https://www.acwing.com/problem/content/838/\" title=\"合并集合\">836. 合并集合</a></h3><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">题目描述</span><br><span class=\"line\">\t一共有 n 个数，编号是 <span class=\"number\">1</span>∼n，最开始每个数各自在一个集合中。</span><br><span class=\"line\">\t现在要进行 m 个操作，操作共有两种：</span><br><span class=\"line\">\tM a b，将编号为 a 和 b 的两个数所在的集合合并，如果两个数已经在同一个集合中，则忽略这个操作；</span><br><span class=\"line\">\tQ a b，询问编号为 a 和 b 的两个数是否在同一个集合中；</span><br><span class=\"line\">\t</span><br><span class=\"line\">输入格式</span><br><span class=\"line\">\t第一行输入整数 n 和 m。</span><br><span class=\"line\">\t接下来 m 行，每行包含一个操作指令，指令为 M a b 或 Q a b 中的一种。</span><br><span class=\"line\"></span><br><span class=\"line\">输出格式</span><br><span class=\"line\">\t对于每个询问指令 Q a b，都要输出一个结果，如果 a 和 b 在同一集合内，则输出 Yes，否则输出 No。</span><br><span class=\"line\">\t每个结果占一行。</span><br><span class=\"line\"></span><br><span class=\"line\">数据范围</span><br><span class=\"line\">\t<span class=\"number\">1</span>≤n,m≤<span class=\"number\">10</span>^<span class=\"number\">5</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输入样例：</span><br><span class=\"line\">\t<span class=\"number\">4</span> <span class=\"number\">5</span></span><br><span class=\"line\">\tM <span class=\"number\">1</span> <span class=\"number\">2</span></span><br><span class=\"line\">\tM <span class=\"number\">3</span> <span class=\"number\">4</span></span><br><span class=\"line\">\tQ <span class=\"number\">1</span> <span class=\"number\">2</span></span><br><span class=\"line\">\tQ <span class=\"number\">1</span> <span class=\"number\">3</span></span><br><span class=\"line\">\tQ <span class=\"number\">3</span> <span class=\"number\">4</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输出样例：</span><br><span class=\"line\">\tYes</span><br><span class=\"line\">\tNo</span><br><span class=\"line\">\tYes</span><br><span class=\"line\">\t</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"代码演示\"><a href=\"#代码演示\" class=\"headerlink\" title=\"代码演示\"></a>代码演示</h2><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> std;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">const</span> <span class=\"type\">int</span> N = <span class=\"number\">100010</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">int</span> p[N];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">find</span><span class=\"params\">(<span class=\"type\">int</span> x)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (p[x] != x) p[x] = <span class=\"built_in\">find</span>(p[x]);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> p[x];</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> n, m;</span><br><span class=\"line\">    <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d%d&quot;</span>, &amp;n, &amp;m);</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">1</span>; i &lt;= n; i ++ ) p[i] = i;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">while</span> (m -- )</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"type\">char</span> op[<span class=\"number\">2</span>];</span><br><span class=\"line\">        <span class=\"type\">int</span> a, b;</span><br><span class=\"line\">        <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%s%d%d&quot;</span>, op, &amp;a, &amp;b);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (*op == <span class=\"string\">&#x27;M&#x27;</span>) p[<span class=\"built_in\">find</span>(a)] = <span class=\"built_in\">find</span>(b);</span><br><span class=\"line\">        <span class=\"keyword\">else</span></span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (<span class=\"built_in\">find</span>(a) == <span class=\"built_in\">find</span>(b)) <span class=\"built_in\">puts</span>(<span class=\"string\">&quot;Yes&quot;</span>);</span><br><span class=\"line\">            <span class=\"keyword\">else</span> <span class=\"built_in\">puts</span>(<span class=\"string\">&quot;No&quot;</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">作者：yxc</span><br><span class=\"line\">链接：https:<span class=\"comment\">//www.acwing.com/activity/content/code/content/45287/</span></span><br><span class=\"line\">来源：AcWing</span><br><span class=\"line\">著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</span><br></pre></td></tr></table></figure>","site":{"data":{"link":[{"class_name":"友情链接","class_desc":"那些人，那些事","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]},{"class_name":"网站","class_desc":"值得推荐的网站","link_list":[{"name":"Youtube","link":"https://www.youtube.com/","avatar":"https://i.loli.net/2020/05/14/9ZkGg8v3azHJfM1.png","descr":"视频网站"},{"name":"Weibo","link":"https://www.weibo.com/","avatar":"https://i.loli.net/2020/05/14/TLJBum386vcnI1P.png","descr":"中国最大社交分享平台"},{"name":"Twitter","link":"https://twitter.com/","avatar":"https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png","descr":"社交分享平台"}]}]}},"cover":"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7","excerpt":"","more":"<h1 id=\"AcWing-836-合并集合\"><a href=\"#AcWing-836-合并集合\" class=\"headerlink\" title=\"AcWing 836. 合并集合\"></a>AcWing 836. 合并集合</h1><h3 id=\"题目来源–836-合并集合\"><a href=\"#题目来源–836-合并集合\" class=\"headerlink\" title=\"题目来源–836. 合并集合\"></a>题目来源–<a href=\"https://www.acwing.com/problem/content/838/\" title=\"合并集合\">836. 合并集合</a></h3><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">题目描述</span><br><span class=\"line\">\t一共有 n 个数，编号是 <span class=\"number\">1</span>∼n，最开始每个数各自在一个集合中。</span><br><span class=\"line\">\t现在要进行 m 个操作，操作共有两种：</span><br><span class=\"line\">\tM a b，将编号为 a 和 b 的两个数所在的集合合并，如果两个数已经在同一个集合中，则忽略这个操作；</span><br><span class=\"line\">\tQ a b，询问编号为 a 和 b 的两个数是否在同一个集合中；</span><br><span class=\"line\">\t</span><br><span class=\"line\">输入格式</span><br><span class=\"line\">\t第一行输入整数 n 和 m。</span><br><span class=\"line\">\t接下来 m 行，每行包含一个操作指令，指令为 M a b 或 Q a b 中的一种。</span><br><span class=\"line\"></span><br><span class=\"line\">输出格式</span><br><span class=\"line\">\t对于每个询问指令 Q a b，都要输出一个结果，如果 a 和 b 在同一集合内，则输出 Yes，否则输出 No。</span><br><span class=\"line\">\t每个结果占一行。</span><br><span class=\"line\"></span><br><span class=\"line\">数据范围</span><br><span class=\"line\">\t<span class=\"number\">1</span>≤n,m≤<span class=\"number\">10</span>^<span class=\"number\">5</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输入样例：</span><br><span class=\"line\">\t<span class=\"number\">4</span> <span class=\"number\">5</span></span><br><span class=\"line\">\tM <span class=\"number\">1</span> <span class=\"number\">2</span></span><br><span class=\"line\">\tM <span class=\"number\">3</span> <span class=\"number\">4</span></span><br><span class=\"line\">\tQ <span class=\"number\">1</span> <span class=\"number\">2</span></span><br><span class=\"line\">\tQ <span class=\"number\">1</span> <span class=\"number\">3</span></span><br><span class=\"line\">\tQ <span class=\"number\">3</span> <span class=\"number\">4</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输出样例：</span><br><span class=\"line\">\tYes</span><br><span class=\"line\">\tNo</span><br><span class=\"line\">\tYes</span><br><span class=\"line\">\t</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"代码演示\"><a href=\"#代码演示\" class=\"headerlink\" title=\"代码演示\"></a>代码演示</h2><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> std;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">const</span> <span class=\"type\">int</span> N = <span class=\"number\">100010</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">int</span> p[N];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">find</span><span class=\"params\">(<span class=\"type\">int</span> x)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (p[x] != x) p[x] = <span class=\"built_in\">find</span>(p[x]);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> p[x];</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> n, m;</span><br><span class=\"line\">    <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d%d&quot;</span>, &amp;n, &amp;m);</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">1</span>; i &lt;= n; i ++ ) p[i] = i;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">while</span> (m -- )</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"type\">char</span> op[<span class=\"number\">2</span>];</span><br><span class=\"line\">        <span class=\"type\">int</span> a, b;</span><br><span class=\"line\">        <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%s%d%d&quot;</span>, op, &amp;a, &amp;b);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (*op == <span class=\"string\">&#x27;M&#x27;</span>) p[<span class=\"built_in\">find</span>(a)] = <span class=\"built_in\">find</span>(b);</span><br><span class=\"line\">        <span class=\"keyword\">else</span></span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (<span class=\"built_in\">find</span>(a) == <span class=\"built_in\">find</span>(b)) <span class=\"built_in\">puts</span>(<span class=\"string\">&quot;Yes&quot;</span>);</span><br><span class=\"line\">            <span class=\"keyword\">else</span> <span class=\"built_in\">puts</span>(<span class=\"string\">&quot;No&quot;</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">作者：yxc</span><br><span class=\"line\">链接：https:<span class=\"comment\">//www.acwing.com/activity/content/code/content/45287/</span></span><br><span class=\"line\">来源：AcWing</span><br><span class=\"line\">著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</span><br></pre></td></tr></table></figure>"},{"title":"AcWing 839. 模拟堆","date":"2022-09-23T03:50:02.630Z","_content":"\n# AcWing 839. 模拟堆    \n### 题目来源--[839. 模拟堆](https://www.acwing.com/problem/content/841/ \"模拟堆\")\n\n``` c++\n题目描述\n\t维护一个集合，初始时集合为空，支持如下几种操作：\n\tI x，插入一个数 x；\n\tPM，输出当前集合中的最小值；\n\tDM，删除当前集合中的最小值（数据保证此时的最小值唯一）；\n\tD k，删除第 k 个插入的数；\n\tC k x，修改第 k 个插入的数，将其变为 x；\n\t现在要进行 N 次操作，对于所有第 2 个操作，输出当前集合的最小值。\n\n输入格式\n\t第一行包含整数 N。\n\t接下来 N 行，每行包含一个操作指令，操作指令为 I x，PM，DM，D k 或 C k x 中的一种。\n\n输出格式\n\t对于每个输出指令 PM，输出一个结果，表示当前集合中的最小值。\n\t每个结果占一行。\n\n数据范围\n\t1≤N≤105\n\t−109≤x≤109\n\t数据保证合法。\n\n输入样例：\n\t8\n\tI -10\n\tPM\n\tI -10\n\tD 1\n\tC 2 8\n\tI 6\n\tPM\n\tDM\n\t\n输出样例：\n\t-10\n\t6\n\t\n```\n\n## 代码演示\n```c++\n#include <iostream>\n#include <algorithm>\n#include <string.h>\n\nusing namespace std;\n\nconst int N = 100010;\n\nint h[N], ph[N], hp[N], cnt;\n\nvoid heap_swap(int a, int b)\n{\n    swap(ph[hp[a]],ph[hp[b]]);\n    swap(hp[a], hp[b]);\n    swap(h[a], h[b]);\n}\n\nvoid down(int u)\n{\n    int t = u;\n    if (u * 2 <= cnt && h[u * 2] < h[t]) t = u * 2;\n    if (u * 2 + 1 <= cnt && h[u * 2 + 1] < h[t]) t = u * 2 + 1;\n    if (u != t)\n    {\n        heap_swap(u, t);\n        down(t);\n    }\n}\n\nvoid up(int u)\n{\n    while (u / 2 && h[u] < h[u / 2])\n    {\n        heap_swap(u, u / 2);\n        u >>= 1;\n    }\n}\n\nint main()\n{\n    int n, m = 0;\n    scanf(\"%d\", &n);\n    while (n -- )\n    {\n        char op[5];\n        int k, x;\n        scanf(\"%s\", op);\n        if (!strcmp(op, \"I\"))\n        {\n            scanf(\"%d\", &x);\n            cnt ++ ;\n            m ++ ;\n            ph[m] = cnt, hp[cnt] = m;\n            h[cnt] = x;\n            up(cnt);\n        }\n        else if (!strcmp(op, \"PM\")) printf(\"%d\\n\", h[1]);\n        else if (!strcmp(op, \"DM\"))\n        {\n            heap_swap(1, cnt);\n            cnt -- ;\n            down(1);\n        }\n        else if (!strcmp(op, \"D\"))\n        {\n            scanf(\"%d\", &k);\n            k = ph[k];\n            heap_swap(k, cnt);\n            cnt -- ;\n            up(k);\n            down(k);\n        }\n        else\n        {\n            scanf(\"%d%d\", &k, &x);\n            k = ph[k];\n            h[k] = x;\n            up(k);\n            down(k);\n        }\n    }\n\n    return 0;\n}\n\n作者：yxc\n链接：https://www.acwing.com/activity/content/code/content/45305/\n来源：AcWing\n著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。\n```","source":"_posts/AcWing/算法基础课/2、数据结构/AcWing839模拟堆.md","raw":"---\ntitle: AcWing 839. 模拟堆      \ndate: \ntags: \n\t- Acwing \n\t- 堆\ncategories: \n\t- [AcWing,算法基础课,2、数据结构]\n---\n\n# AcWing 839. 模拟堆    \n### 题目来源--[839. 模拟堆](https://www.acwing.com/problem/content/841/ \"模拟堆\")\n\n``` c++\n题目描述\n\t维护一个集合，初始时集合为空，支持如下几种操作：\n\tI x，插入一个数 x；\n\tPM，输出当前集合中的最小值；\n\tDM，删除当前集合中的最小值（数据保证此时的最小值唯一）；\n\tD k，删除第 k 个插入的数；\n\tC k x，修改第 k 个插入的数，将其变为 x；\n\t现在要进行 N 次操作，对于所有第 2 个操作，输出当前集合的最小值。\n\n输入格式\n\t第一行包含整数 N。\n\t接下来 N 行，每行包含一个操作指令，操作指令为 I x，PM，DM，D k 或 C k x 中的一种。\n\n输出格式\n\t对于每个输出指令 PM，输出一个结果，表示当前集合中的最小值。\n\t每个结果占一行。\n\n数据范围\n\t1≤N≤105\n\t−109≤x≤109\n\t数据保证合法。\n\n输入样例：\n\t8\n\tI -10\n\tPM\n\tI -10\n\tD 1\n\tC 2 8\n\tI 6\n\tPM\n\tDM\n\t\n输出样例：\n\t-10\n\t6\n\t\n```\n\n## 代码演示\n```c++\n#include <iostream>\n#include <algorithm>\n#include <string.h>\n\nusing namespace std;\n\nconst int N = 100010;\n\nint h[N], ph[N], hp[N], cnt;\n\nvoid heap_swap(int a, int b)\n{\n    swap(ph[hp[a]],ph[hp[b]]);\n    swap(hp[a], hp[b]);\n    swap(h[a], h[b]);\n}\n\nvoid down(int u)\n{\n    int t = u;\n    if (u * 2 <= cnt && h[u * 2] < h[t]) t = u * 2;\n    if (u * 2 + 1 <= cnt && h[u * 2 + 1] < h[t]) t = u * 2 + 1;\n    if (u != t)\n    {\n        heap_swap(u, t);\n        down(t);\n    }\n}\n\nvoid up(int u)\n{\n    while (u / 2 && h[u] < h[u / 2])\n    {\n        heap_swap(u, u / 2);\n        u >>= 1;\n    }\n}\n\nint main()\n{\n    int n, m = 0;\n    scanf(\"%d\", &n);\n    while (n -- )\n    {\n        char op[5];\n        int k, x;\n        scanf(\"%s\", op);\n        if (!strcmp(op, \"I\"))\n        {\n            scanf(\"%d\", &x);\n            cnt ++ ;\n            m ++ ;\n            ph[m] = cnt, hp[cnt] = m;\n            h[cnt] = x;\n            up(cnt);\n        }\n        else if (!strcmp(op, \"PM\")) printf(\"%d\\n\", h[1]);\n        else if (!strcmp(op, \"DM\"))\n        {\n            heap_swap(1, cnt);\n            cnt -- ;\n            down(1);\n        }\n        else if (!strcmp(op, \"D\"))\n        {\n            scanf(\"%d\", &k);\n            k = ph[k];\n            heap_swap(k, cnt);\n            cnt -- ;\n            up(k);\n            down(k);\n        }\n        else\n        {\n            scanf(\"%d%d\", &k, &x);\n            k = ph[k];\n            h[k] = x;\n            up(k);\n            down(k);\n        }\n    }\n\n    return 0;\n}\n\n作者：yxc\n链接：https://www.acwing.com/activity/content/code/content/45305/\n来源：AcWing\n著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。\n```","slug":"AcWing/算法基础课/2、数据结构/AcWing839模拟堆","published":1,"updated":"2022-09-23T03:50:02.631Z","comments":1,"layout":"post","photos":[],"link":"","_id":"claryulcj001c5ojr1l2ib1jq","content":"<h1 id=\"AcWing-839-模拟堆\"><a href=\"#AcWing-839-模拟堆\" class=\"headerlink\" title=\"AcWing 839. 模拟堆\"></a>AcWing 839. 模拟堆</h1><h3 id=\"题目来源–839-模拟堆\"><a href=\"#题目来源–839-模拟堆\" class=\"headerlink\" title=\"题目来源–839. 模拟堆\"></a>题目来源–<a href=\"https://www.acwing.com/problem/content/841/\" title=\"模拟堆\">839. 模拟堆</a></h3><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">题目描述</span><br><span class=\"line\">\t维护一个集合，初始时集合为空，支持如下几种操作：</span><br><span class=\"line\">\tI x，插入一个数 x；</span><br><span class=\"line\">\tPM，输出当前集合中的最小值；</span><br><span class=\"line\">\tDM，删除当前集合中的最小值（数据保证此时的最小值唯一）；</span><br><span class=\"line\">\tD k，删除第 k 个插入的数；</span><br><span class=\"line\">\tC k x，修改第 k 个插入的数，将其变为 x；</span><br><span class=\"line\">\t现在要进行 N 次操作，对于所有第 <span class=\"number\">2</span> 个操作，输出当前集合的最小值。</span><br><span class=\"line\"></span><br><span class=\"line\">输入格式</span><br><span class=\"line\">\t第一行包含整数 N。</span><br><span class=\"line\">\t接下来 N 行，每行包含一个操作指令，操作指令为 I x，PM，DM，D k 或 C k x 中的一种。</span><br><span class=\"line\"></span><br><span class=\"line\">输出格式</span><br><span class=\"line\">\t对于每个输出指令 PM，输出一个结果，表示当前集合中的最小值。</span><br><span class=\"line\">\t每个结果占一行。</span><br><span class=\"line\"></span><br><span class=\"line\">数据范围</span><br><span class=\"line\">\t<span class=\"number\">1</span>≤N≤<span class=\"number\">105</span></span><br><span class=\"line\">\t−<span class=\"number\">109</span>≤x≤<span class=\"number\">109</span></span><br><span class=\"line\">\t数据保证合法。</span><br><span class=\"line\"></span><br><span class=\"line\">输入样例：</span><br><span class=\"line\">\t<span class=\"number\">8</span></span><br><span class=\"line\">\tI <span class=\"number\">-10</span></span><br><span class=\"line\">\tPM</span><br><span class=\"line\">\tI <span class=\"number\">-10</span></span><br><span class=\"line\">\tD <span class=\"number\">1</span></span><br><span class=\"line\">\tC <span class=\"number\">2</span> <span class=\"number\">8</span></span><br><span class=\"line\">\tI <span class=\"number\">6</span></span><br><span class=\"line\">\tPM</span><br><span class=\"line\">\tDM</span><br><span class=\"line\">\t</span><br><span class=\"line\">输出样例：</span><br><span class=\"line\">\t<span class=\"number\">-10</span></span><br><span class=\"line\">\t<span class=\"number\">6</span></span><br><span class=\"line\">\t</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"代码演示\"><a href=\"#代码演示\" class=\"headerlink\" title=\"代码演示\"></a>代码演示</h2><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;algorithm&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;string.h&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> std;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">const</span> <span class=\"type\">int</span> N = <span class=\"number\">100010</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">int</span> h[N], ph[N], hp[N], cnt;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">heap_swap</span><span class=\"params\">(<span class=\"type\">int</span> a, <span class=\"type\">int</span> b)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">swap</span>(ph[hp[a]],ph[hp[b]]);</span><br><span class=\"line\">    <span class=\"built_in\">swap</span>(hp[a], hp[b]);</span><br><span class=\"line\">    <span class=\"built_in\">swap</span>(h[a], h[b]);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">down</span><span class=\"params\">(<span class=\"type\">int</span> u)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> t = u;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (u * <span class=\"number\">2</span> &lt;= cnt &amp;&amp; h[u * <span class=\"number\">2</span>] &lt; h[t]) t = u * <span class=\"number\">2</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (u * <span class=\"number\">2</span> + <span class=\"number\">1</span> &lt;= cnt &amp;&amp; h[u * <span class=\"number\">2</span> + <span class=\"number\">1</span>] &lt; h[t]) t = u * <span class=\"number\">2</span> + <span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (u != t)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"built_in\">heap_swap</span>(u, t);</span><br><span class=\"line\">        <span class=\"built_in\">down</span>(t);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">up</span><span class=\"params\">(<span class=\"type\">int</span> u)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (u / <span class=\"number\">2</span> &amp;&amp; h[u] &lt; h[u / <span class=\"number\">2</span>])</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"built_in\">heap_swap</span>(u, u / <span class=\"number\">2</span>);</span><br><span class=\"line\">        u &gt;&gt;= <span class=\"number\">1</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> n, m = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>, &amp;n);</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (n -- )</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"type\">char</span> op[<span class=\"number\">5</span>];</span><br><span class=\"line\">        <span class=\"type\">int</span> k, x;</span><br><span class=\"line\">        <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%s&quot;</span>, op);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!<span class=\"built_in\">strcmp</span>(op, <span class=\"string\">&quot;I&quot;</span>))</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>, &amp;x);</span><br><span class=\"line\">            cnt ++ ;</span><br><span class=\"line\">            m ++ ;</span><br><span class=\"line\">            ph[m] = cnt, hp[cnt] = m;</span><br><span class=\"line\">            h[cnt] = x;</span><br><span class=\"line\">            <span class=\"built_in\">up</span>(cnt);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (!<span class=\"built_in\">strcmp</span>(op, <span class=\"string\">&quot;PM&quot;</span>)) <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d\\n&quot;</span>, h[<span class=\"number\">1</span>]);</span><br><span class=\"line\">        <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (!<span class=\"built_in\">strcmp</span>(op, <span class=\"string\">&quot;DM&quot;</span>))</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"built_in\">heap_swap</span>(<span class=\"number\">1</span>, cnt);</span><br><span class=\"line\">            cnt -- ;</span><br><span class=\"line\">            <span class=\"built_in\">down</span>(<span class=\"number\">1</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (!<span class=\"built_in\">strcmp</span>(op, <span class=\"string\">&quot;D&quot;</span>))</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>, &amp;k);</span><br><span class=\"line\">            k = ph[k];</span><br><span class=\"line\">            <span class=\"built_in\">heap_swap</span>(k, cnt);</span><br><span class=\"line\">            cnt -- ;</span><br><span class=\"line\">            <span class=\"built_in\">up</span>(k);</span><br><span class=\"line\">            <span class=\"built_in\">down</span>(k);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">else</span></span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d%d&quot;</span>, &amp;k, &amp;x);</span><br><span class=\"line\">            k = ph[k];</span><br><span class=\"line\">            h[k] = x;</span><br><span class=\"line\">            <span class=\"built_in\">up</span>(k);</span><br><span class=\"line\">            <span class=\"built_in\">down</span>(k);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">作者：yxc</span><br><span class=\"line\">链接：https:<span class=\"comment\">//www.acwing.com/activity/content/code/content/45305/</span></span><br><span class=\"line\">来源：AcWing</span><br><span class=\"line\">著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</span><br></pre></td></tr></table></figure>","site":{"data":{"link":[{"class_name":"友情链接","class_desc":"那些人，那些事","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]},{"class_name":"网站","class_desc":"值得推荐的网站","link_list":[{"name":"Youtube","link":"https://www.youtube.com/","avatar":"https://i.loli.net/2020/05/14/9ZkGg8v3azHJfM1.png","descr":"视频网站"},{"name":"Weibo","link":"https://www.weibo.com/","avatar":"https://i.loli.net/2020/05/14/TLJBum386vcnI1P.png","descr":"中国最大社交分享平台"},{"name":"Twitter","link":"https://twitter.com/","avatar":"https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png","descr":"社交分享平台"}]}]}},"cover":"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7","excerpt":"","more":"<h1 id=\"AcWing-839-模拟堆\"><a href=\"#AcWing-839-模拟堆\" class=\"headerlink\" title=\"AcWing 839. 模拟堆\"></a>AcWing 839. 模拟堆</h1><h3 id=\"题目来源–839-模拟堆\"><a href=\"#题目来源–839-模拟堆\" class=\"headerlink\" title=\"题目来源–839. 模拟堆\"></a>题目来源–<a href=\"https://www.acwing.com/problem/content/841/\" title=\"模拟堆\">839. 模拟堆</a></h3><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">题目描述</span><br><span class=\"line\">\t维护一个集合，初始时集合为空，支持如下几种操作：</span><br><span class=\"line\">\tI x，插入一个数 x；</span><br><span class=\"line\">\tPM，输出当前集合中的最小值；</span><br><span class=\"line\">\tDM，删除当前集合中的最小值（数据保证此时的最小值唯一）；</span><br><span class=\"line\">\tD k，删除第 k 个插入的数；</span><br><span class=\"line\">\tC k x，修改第 k 个插入的数，将其变为 x；</span><br><span class=\"line\">\t现在要进行 N 次操作，对于所有第 <span class=\"number\">2</span> 个操作，输出当前集合的最小值。</span><br><span class=\"line\"></span><br><span class=\"line\">输入格式</span><br><span class=\"line\">\t第一行包含整数 N。</span><br><span class=\"line\">\t接下来 N 行，每行包含一个操作指令，操作指令为 I x，PM，DM，D k 或 C k x 中的一种。</span><br><span class=\"line\"></span><br><span class=\"line\">输出格式</span><br><span class=\"line\">\t对于每个输出指令 PM，输出一个结果，表示当前集合中的最小值。</span><br><span class=\"line\">\t每个结果占一行。</span><br><span class=\"line\"></span><br><span class=\"line\">数据范围</span><br><span class=\"line\">\t<span class=\"number\">1</span>≤N≤<span class=\"number\">105</span></span><br><span class=\"line\">\t−<span class=\"number\">109</span>≤x≤<span class=\"number\">109</span></span><br><span class=\"line\">\t数据保证合法。</span><br><span class=\"line\"></span><br><span class=\"line\">输入样例：</span><br><span class=\"line\">\t<span class=\"number\">8</span></span><br><span class=\"line\">\tI <span class=\"number\">-10</span></span><br><span class=\"line\">\tPM</span><br><span class=\"line\">\tI <span class=\"number\">-10</span></span><br><span class=\"line\">\tD <span class=\"number\">1</span></span><br><span class=\"line\">\tC <span class=\"number\">2</span> <span class=\"number\">8</span></span><br><span class=\"line\">\tI <span class=\"number\">6</span></span><br><span class=\"line\">\tPM</span><br><span class=\"line\">\tDM</span><br><span class=\"line\">\t</span><br><span class=\"line\">输出样例：</span><br><span class=\"line\">\t<span class=\"number\">-10</span></span><br><span class=\"line\">\t<span class=\"number\">6</span></span><br><span class=\"line\">\t</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"代码演示\"><a href=\"#代码演示\" class=\"headerlink\" title=\"代码演示\"></a>代码演示</h2><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;algorithm&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;string.h&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> std;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">const</span> <span class=\"type\">int</span> N = <span class=\"number\">100010</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">int</span> h[N], ph[N], hp[N], cnt;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">heap_swap</span><span class=\"params\">(<span class=\"type\">int</span> a, <span class=\"type\">int</span> b)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">swap</span>(ph[hp[a]],ph[hp[b]]);</span><br><span class=\"line\">    <span class=\"built_in\">swap</span>(hp[a], hp[b]);</span><br><span class=\"line\">    <span class=\"built_in\">swap</span>(h[a], h[b]);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">down</span><span class=\"params\">(<span class=\"type\">int</span> u)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> t = u;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (u * <span class=\"number\">2</span> &lt;= cnt &amp;&amp; h[u * <span class=\"number\">2</span>] &lt; h[t]) t = u * <span class=\"number\">2</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (u * <span class=\"number\">2</span> + <span class=\"number\">1</span> &lt;= cnt &amp;&amp; h[u * <span class=\"number\">2</span> + <span class=\"number\">1</span>] &lt; h[t]) t = u * <span class=\"number\">2</span> + <span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (u != t)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"built_in\">heap_swap</span>(u, t);</span><br><span class=\"line\">        <span class=\"built_in\">down</span>(t);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">up</span><span class=\"params\">(<span class=\"type\">int</span> u)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (u / <span class=\"number\">2</span> &amp;&amp; h[u] &lt; h[u / <span class=\"number\">2</span>])</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"built_in\">heap_swap</span>(u, u / <span class=\"number\">2</span>);</span><br><span class=\"line\">        u &gt;&gt;= <span class=\"number\">1</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> n, m = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>, &amp;n);</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (n -- )</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"type\">char</span> op[<span class=\"number\">5</span>];</span><br><span class=\"line\">        <span class=\"type\">int</span> k, x;</span><br><span class=\"line\">        <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%s&quot;</span>, op);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!<span class=\"built_in\">strcmp</span>(op, <span class=\"string\">&quot;I&quot;</span>))</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>, &amp;x);</span><br><span class=\"line\">            cnt ++ ;</span><br><span class=\"line\">            m ++ ;</span><br><span class=\"line\">            ph[m] = cnt, hp[cnt] = m;</span><br><span class=\"line\">            h[cnt] = x;</span><br><span class=\"line\">            <span class=\"built_in\">up</span>(cnt);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (!<span class=\"built_in\">strcmp</span>(op, <span class=\"string\">&quot;PM&quot;</span>)) <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d\\n&quot;</span>, h[<span class=\"number\">1</span>]);</span><br><span class=\"line\">        <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (!<span class=\"built_in\">strcmp</span>(op, <span class=\"string\">&quot;DM&quot;</span>))</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"built_in\">heap_swap</span>(<span class=\"number\">1</span>, cnt);</span><br><span class=\"line\">            cnt -- ;</span><br><span class=\"line\">            <span class=\"built_in\">down</span>(<span class=\"number\">1</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (!<span class=\"built_in\">strcmp</span>(op, <span class=\"string\">&quot;D&quot;</span>))</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>, &amp;k);</span><br><span class=\"line\">            k = ph[k];</span><br><span class=\"line\">            <span class=\"built_in\">heap_swap</span>(k, cnt);</span><br><span class=\"line\">            cnt -- ;</span><br><span class=\"line\">            <span class=\"built_in\">up</span>(k);</span><br><span class=\"line\">            <span class=\"built_in\">down</span>(k);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">else</span></span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d%d&quot;</span>, &amp;k, &amp;x);</span><br><span class=\"line\">            k = ph[k];</span><br><span class=\"line\">            h[k] = x;</span><br><span class=\"line\">            <span class=\"built_in\">up</span>(k);</span><br><span class=\"line\">            <span class=\"built_in\">down</span>(k);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">作者：yxc</span><br><span class=\"line\">链接：https:<span class=\"comment\">//www.acwing.com/activity/content/code/content/45305/</span></span><br><span class=\"line\">来源：AcWing</span><br><span class=\"line\">著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</span><br></pre></td></tr></table></figure>"},{"title":"AcWing 840. 模拟散列表","date":"2022-09-23T03:50:02.631Z","_content":"\n# AcWing 840. 模拟散列表    \n### 题目来源--[840. 模拟散列表](https://www.acwing.com/problem/content/842/ \"模拟散列表\")\n\n``` c++\n题目描述\n\t维护一个集合，支持如下几种操作：\n\tI x，插入一个数 x；\n\tQ x，询问数 x 是否在集合中出现过；\n\t现在要进行 N 次操作，对于每个询问操作输出对应的结果。\n\n输入格式\n\t第一行包含整数 N，表示操作数量。\n\t接下来 N 行，每行包含一个操作指令，操作指令为 I x，Q x 中的一种。\n\n输出格式\n\t对于每个询问指令 Q x，输出一个询问结果，如果 x 在集合中出现过，则输出 Yes，否则输出 No。\n\t每个结果占一行。\n\n数据范围\n\t1≤N≤105\n\t−109≤x≤109\n\t\n输入样例：\n\t5\n\tI 1\n\tI 2\n\tI 3\n\tQ 2\n\tQ 5\n\t\n输出样例：\n\tYes\n\tNo\n\t\n```\n\n## 代码演示\n#### 开放寻址法\n```c++\n#include <cstring>\n#include <iostream>\n\nusing namespace std;\n\nconst int N = 200003, null = 0x3f3f3f3f;\n\nint h[N];\n\nint find(int x)\n{\n    int t = (x % N + N) % N;\n    while (h[t] != null && h[t] != x)\n    {\n        t ++ ;\n        if (t == N) t = 0;\n    }\n    return t;\n}\n\nint main()\n{\n    memset(h, 0x3f, sizeof h);\n\n    int n;\n    scanf(\"%d\", &n);\n\n    while (n -- )\n    {\n        char op[2];\n        int x;\n        scanf(\"%s%d\", op, &x);\n        if (*op == 'I') h[find(x)] = x;\n        else\n        {\n            if (h[find(x)] == null) puts(\"No\");\n            else puts(\"Yes\");\n        }\n    }\n\n    return 0;\n}\n\n作者：yxc\n链接：https://www.acwing.com/activity/content/code/content/45308/\n来源：AcWing\n著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。\n```\n\n#### 拉链法\n```C++\n#include <cstring>\n#include <iostream>\n\nusing namespace std;\n\nconst int N = 100003;\n\nint h[N], e[N], ne[N], idx;\n\nvoid insert(int x)\n{\n    int k = (x % N + N) % N;\n    e[idx] = x;\n    ne[idx] = h[k];\n    h[k] = idx ++ ;\n}\n\nbool find(int x)\n{\n    int k = (x % N + N) % N;\n    for (int i = h[k]; i != -1; i = ne[i])\n        if (e[i] == x)\n            return true;\n\n    return false;\n}\n\nint main()\n{\n    int n;\n    scanf(\"%d\", &n);\n\n    memset(h, -1, sizeof h);\n\n    while (n -- )\n    {\n        char op[2];\n        int x;\n        scanf(\"%s%d\", op, &x);\n\n        if (*op == 'I') insert(x);\n        else\n        {\n            if (find(x)) puts(\"Yes\");\n            else puts(\"No\");\n        }\n    }\n\n    return 0;\n}\n\n作者：yxc\n链接：https://www.acwing.com/activity/content/code/content/45308/\n来源：AcWing\n著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。\n\n```","source":"_posts/AcWing/算法基础课/2、数据结构/AcWing840模拟散列表.md","raw":"---\ntitle: AcWing 840. 模拟散列表      \ndate: \ntags: \n\t- Acwing \n\t- 哈希表\ncategories: \n\t- [AcWing,算法基础课,2、数据结构]\n---\n\n# AcWing 840. 模拟散列表    \n### 题目来源--[840. 模拟散列表](https://www.acwing.com/problem/content/842/ \"模拟散列表\")\n\n``` c++\n题目描述\n\t维护一个集合，支持如下几种操作：\n\tI x，插入一个数 x；\n\tQ x，询问数 x 是否在集合中出现过；\n\t现在要进行 N 次操作，对于每个询问操作输出对应的结果。\n\n输入格式\n\t第一行包含整数 N，表示操作数量。\n\t接下来 N 行，每行包含一个操作指令，操作指令为 I x，Q x 中的一种。\n\n输出格式\n\t对于每个询问指令 Q x，输出一个询问结果，如果 x 在集合中出现过，则输出 Yes，否则输出 No。\n\t每个结果占一行。\n\n数据范围\n\t1≤N≤105\n\t−109≤x≤109\n\t\n输入样例：\n\t5\n\tI 1\n\tI 2\n\tI 3\n\tQ 2\n\tQ 5\n\t\n输出样例：\n\tYes\n\tNo\n\t\n```\n\n## 代码演示\n#### 开放寻址法\n```c++\n#include <cstring>\n#include <iostream>\n\nusing namespace std;\n\nconst int N = 200003, null = 0x3f3f3f3f;\n\nint h[N];\n\nint find(int x)\n{\n    int t = (x % N + N) % N;\n    while (h[t] != null && h[t] != x)\n    {\n        t ++ ;\n        if (t == N) t = 0;\n    }\n    return t;\n}\n\nint main()\n{\n    memset(h, 0x3f, sizeof h);\n\n    int n;\n    scanf(\"%d\", &n);\n\n    while (n -- )\n    {\n        char op[2];\n        int x;\n        scanf(\"%s%d\", op, &x);\n        if (*op == 'I') h[find(x)] = x;\n        else\n        {\n            if (h[find(x)] == null) puts(\"No\");\n            else puts(\"Yes\");\n        }\n    }\n\n    return 0;\n}\n\n作者：yxc\n链接：https://www.acwing.com/activity/content/code/content/45308/\n来源：AcWing\n著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。\n```\n\n#### 拉链法\n```C++\n#include <cstring>\n#include <iostream>\n\nusing namespace std;\n\nconst int N = 100003;\n\nint h[N], e[N], ne[N], idx;\n\nvoid insert(int x)\n{\n    int k = (x % N + N) % N;\n    e[idx] = x;\n    ne[idx] = h[k];\n    h[k] = idx ++ ;\n}\n\nbool find(int x)\n{\n    int k = (x % N + N) % N;\n    for (int i = h[k]; i != -1; i = ne[i])\n        if (e[i] == x)\n            return true;\n\n    return false;\n}\n\nint main()\n{\n    int n;\n    scanf(\"%d\", &n);\n\n    memset(h, -1, sizeof h);\n\n    while (n -- )\n    {\n        char op[2];\n        int x;\n        scanf(\"%s%d\", op, &x);\n\n        if (*op == 'I') insert(x);\n        else\n        {\n            if (find(x)) puts(\"Yes\");\n            else puts(\"No\");\n        }\n    }\n\n    return 0;\n}\n\n作者：yxc\n链接：https://www.acwing.com/activity/content/code/content/45308/\n来源：AcWing\n著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。\n\n```","slug":"AcWing/算法基础课/2、数据结构/AcWing840模拟散列表","published":1,"updated":"2022-09-23T03:50:02.631Z","comments":1,"layout":"post","photos":[],"link":"","_id":"claryulck001f5ojrcm15brd5","content":"<h1 id=\"AcWing-840-模拟散列表\"><a href=\"#AcWing-840-模拟散列表\" class=\"headerlink\" title=\"AcWing 840. 模拟散列表\"></a>AcWing 840. 模拟散列表</h1><h3 id=\"题目来源–840-模拟散列表\"><a href=\"#题目来源–840-模拟散列表\" class=\"headerlink\" title=\"题目来源–840. 模拟散列表\"></a>题目来源–<a href=\"https://www.acwing.com/problem/content/842/\" title=\"模拟散列表\">840. 模拟散列表</a></h3><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">题目描述</span><br><span class=\"line\">\t维护一个集合，支持如下几种操作：</span><br><span class=\"line\">\tI x，插入一个数 x；</span><br><span class=\"line\">\tQ x，询问数 x 是否在集合中出现过；</span><br><span class=\"line\">\t现在要进行 N 次操作，对于每个询问操作输出对应的结果。</span><br><span class=\"line\"></span><br><span class=\"line\">输入格式</span><br><span class=\"line\">\t第一行包含整数 N，表示操作数量。</span><br><span class=\"line\">\t接下来 N 行，每行包含一个操作指令，操作指令为 I x，Q x 中的一种。</span><br><span class=\"line\"></span><br><span class=\"line\">输出格式</span><br><span class=\"line\">\t对于每个询问指令 Q x，输出一个询问结果，如果 x 在集合中出现过，则输出 Yes，否则输出 No。</span><br><span class=\"line\">\t每个结果占一行。</span><br><span class=\"line\"></span><br><span class=\"line\">数据范围</span><br><span class=\"line\">\t<span class=\"number\">1</span>≤N≤<span class=\"number\">105</span></span><br><span class=\"line\">\t−<span class=\"number\">109</span>≤x≤<span class=\"number\">109</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输入样例：</span><br><span class=\"line\">\t<span class=\"number\">5</span></span><br><span class=\"line\">\tI <span class=\"number\">1</span></span><br><span class=\"line\">\tI <span class=\"number\">2</span></span><br><span class=\"line\">\tI <span class=\"number\">3</span></span><br><span class=\"line\">\tQ <span class=\"number\">2</span></span><br><span class=\"line\">\tQ <span class=\"number\">5</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输出样例：</span><br><span class=\"line\">\tYes</span><br><span class=\"line\">\tNo</span><br><span class=\"line\">\t</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"代码演示\"><a href=\"#代码演示\" class=\"headerlink\" title=\"代码演示\"></a>代码演示</h2><h4 id=\"开放寻址法\"><a href=\"#开放寻址法\" class=\"headerlink\" title=\"开放寻址法\"></a>开放寻址法</h4><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;cstring&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> std;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">const</span> <span class=\"type\">int</span> N = <span class=\"number\">200003</span>, null = <span class=\"number\">0x3f3f3f3f</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">int</span> h[N];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">find</span><span class=\"params\">(<span class=\"type\">int</span> x)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> t = (x % N + N) % N;</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (h[t] != null &amp;&amp; h[t] != x)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        t ++ ;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (t == N) t = <span class=\"number\">0</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> t;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">memset</span>(h, <span class=\"number\">0x3f</span>, <span class=\"keyword\">sizeof</span> h);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"type\">int</span> n;</span><br><span class=\"line\">    <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>, &amp;n);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">while</span> (n -- )</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"type\">char</span> op[<span class=\"number\">2</span>];</span><br><span class=\"line\">        <span class=\"type\">int</span> x;</span><br><span class=\"line\">        <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%s%d&quot;</span>, op, &amp;x);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (*op == <span class=\"string\">&#x27;I&#x27;</span>) h[<span class=\"built_in\">find</span>(x)] = x;</span><br><span class=\"line\">        <span class=\"keyword\">else</span></span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (h[<span class=\"built_in\">find</span>(x)] == null) <span class=\"built_in\">puts</span>(<span class=\"string\">&quot;No&quot;</span>);</span><br><span class=\"line\">            <span class=\"keyword\">else</span> <span class=\"built_in\">puts</span>(<span class=\"string\">&quot;Yes&quot;</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">作者：yxc</span><br><span class=\"line\">链接：https:<span class=\"comment\">//www.acwing.com/activity/content/code/content/45308/</span></span><br><span class=\"line\">来源：AcWing</span><br><span class=\"line\">著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"拉链法\"><a href=\"#拉链法\" class=\"headerlink\" title=\"拉链法\"></a>拉链法</h4><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;cstring&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> std;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">const</span> <span class=\"type\">int</span> N = <span class=\"number\">100003</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">int</span> h[N], e[N], ne[N], idx;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">insert</span><span class=\"params\">(<span class=\"type\">int</span> x)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> k = (x % N + N) % N;</span><br><span class=\"line\">    e[idx] = x;</span><br><span class=\"line\">    ne[idx] = h[k];</span><br><span class=\"line\">    h[k] = idx ++ ;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">bool</span> <span class=\"title\">find</span><span class=\"params\">(<span class=\"type\">int</span> x)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> k = (x % N + N) % N;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = h[k]; i != <span class=\"number\">-1</span>; i = ne[i])</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (e[i] == x)</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> n;</span><br><span class=\"line\">    <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>, &amp;n);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"built_in\">memset</span>(h, <span class=\"number\">-1</span>, <span class=\"keyword\">sizeof</span> h);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">while</span> (n -- )</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"type\">char</span> op[<span class=\"number\">2</span>];</span><br><span class=\"line\">        <span class=\"type\">int</span> x;</span><br><span class=\"line\">        <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%s%d&quot;</span>, op, &amp;x);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (*op == <span class=\"string\">&#x27;I&#x27;</span>) <span class=\"built_in\">insert</span>(x);</span><br><span class=\"line\">        <span class=\"keyword\">else</span></span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (<span class=\"built_in\">find</span>(x)) <span class=\"built_in\">puts</span>(<span class=\"string\">&quot;Yes&quot;</span>);</span><br><span class=\"line\">            <span class=\"keyword\">else</span> <span class=\"built_in\">puts</span>(<span class=\"string\">&quot;No&quot;</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">作者：yxc</span><br><span class=\"line\">链接：https:<span class=\"comment\">//www.acwing.com/activity/content/code/content/45308/</span></span><br><span class=\"line\">来源：AcWing</span><br><span class=\"line\">著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>","site":{"data":{"link":[{"class_name":"友情链接","class_desc":"那些人，那些事","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]},{"class_name":"网站","class_desc":"值得推荐的网站","link_list":[{"name":"Youtube","link":"https://www.youtube.com/","avatar":"https://i.loli.net/2020/05/14/9ZkGg8v3azHJfM1.png","descr":"视频网站"},{"name":"Weibo","link":"https://www.weibo.com/","avatar":"https://i.loli.net/2020/05/14/TLJBum386vcnI1P.png","descr":"中国最大社交分享平台"},{"name":"Twitter","link":"https://twitter.com/","avatar":"https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png","descr":"社交分享平台"}]}]}},"cover":"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7","excerpt":"","more":"<h1 id=\"AcWing-840-模拟散列表\"><a href=\"#AcWing-840-模拟散列表\" class=\"headerlink\" title=\"AcWing 840. 模拟散列表\"></a>AcWing 840. 模拟散列表</h1><h3 id=\"题目来源–840-模拟散列表\"><a href=\"#题目来源–840-模拟散列表\" class=\"headerlink\" title=\"题目来源–840. 模拟散列表\"></a>题目来源–<a href=\"https://www.acwing.com/problem/content/842/\" title=\"模拟散列表\">840. 模拟散列表</a></h3><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">题目描述</span><br><span class=\"line\">\t维护一个集合，支持如下几种操作：</span><br><span class=\"line\">\tI x，插入一个数 x；</span><br><span class=\"line\">\tQ x，询问数 x 是否在集合中出现过；</span><br><span class=\"line\">\t现在要进行 N 次操作，对于每个询问操作输出对应的结果。</span><br><span class=\"line\"></span><br><span class=\"line\">输入格式</span><br><span class=\"line\">\t第一行包含整数 N，表示操作数量。</span><br><span class=\"line\">\t接下来 N 行，每行包含一个操作指令，操作指令为 I x，Q x 中的一种。</span><br><span class=\"line\"></span><br><span class=\"line\">输出格式</span><br><span class=\"line\">\t对于每个询问指令 Q x，输出一个询问结果，如果 x 在集合中出现过，则输出 Yes，否则输出 No。</span><br><span class=\"line\">\t每个结果占一行。</span><br><span class=\"line\"></span><br><span class=\"line\">数据范围</span><br><span class=\"line\">\t<span class=\"number\">1</span>≤N≤<span class=\"number\">105</span></span><br><span class=\"line\">\t−<span class=\"number\">109</span>≤x≤<span class=\"number\">109</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输入样例：</span><br><span class=\"line\">\t<span class=\"number\">5</span></span><br><span class=\"line\">\tI <span class=\"number\">1</span></span><br><span class=\"line\">\tI <span class=\"number\">2</span></span><br><span class=\"line\">\tI <span class=\"number\">3</span></span><br><span class=\"line\">\tQ <span class=\"number\">2</span></span><br><span class=\"line\">\tQ <span class=\"number\">5</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输出样例：</span><br><span class=\"line\">\tYes</span><br><span class=\"line\">\tNo</span><br><span class=\"line\">\t</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"代码演示\"><a href=\"#代码演示\" class=\"headerlink\" title=\"代码演示\"></a>代码演示</h2><h4 id=\"开放寻址法\"><a href=\"#开放寻址法\" class=\"headerlink\" title=\"开放寻址法\"></a>开放寻址法</h4><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;cstring&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> std;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">const</span> <span class=\"type\">int</span> N = <span class=\"number\">200003</span>, null = <span class=\"number\">0x3f3f3f3f</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">int</span> h[N];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">find</span><span class=\"params\">(<span class=\"type\">int</span> x)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> t = (x % N + N) % N;</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (h[t] != null &amp;&amp; h[t] != x)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        t ++ ;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (t == N) t = <span class=\"number\">0</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> t;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">memset</span>(h, <span class=\"number\">0x3f</span>, <span class=\"keyword\">sizeof</span> h);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"type\">int</span> n;</span><br><span class=\"line\">    <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>, &amp;n);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">while</span> (n -- )</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"type\">char</span> op[<span class=\"number\">2</span>];</span><br><span class=\"line\">        <span class=\"type\">int</span> x;</span><br><span class=\"line\">        <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%s%d&quot;</span>, op, &amp;x);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (*op == <span class=\"string\">&#x27;I&#x27;</span>) h[<span class=\"built_in\">find</span>(x)] = x;</span><br><span class=\"line\">        <span class=\"keyword\">else</span></span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (h[<span class=\"built_in\">find</span>(x)] == null) <span class=\"built_in\">puts</span>(<span class=\"string\">&quot;No&quot;</span>);</span><br><span class=\"line\">            <span class=\"keyword\">else</span> <span class=\"built_in\">puts</span>(<span class=\"string\">&quot;Yes&quot;</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">作者：yxc</span><br><span class=\"line\">链接：https:<span class=\"comment\">//www.acwing.com/activity/content/code/content/45308/</span></span><br><span class=\"line\">来源：AcWing</span><br><span class=\"line\">著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"拉链法\"><a href=\"#拉链法\" class=\"headerlink\" title=\"拉链法\"></a>拉链法</h4><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;cstring&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> std;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">const</span> <span class=\"type\">int</span> N = <span class=\"number\">100003</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">int</span> h[N], e[N], ne[N], idx;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">insert</span><span class=\"params\">(<span class=\"type\">int</span> x)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> k = (x % N + N) % N;</span><br><span class=\"line\">    e[idx] = x;</span><br><span class=\"line\">    ne[idx] = h[k];</span><br><span class=\"line\">    h[k] = idx ++ ;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">bool</span> <span class=\"title\">find</span><span class=\"params\">(<span class=\"type\">int</span> x)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> k = (x % N + N) % N;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = h[k]; i != <span class=\"number\">-1</span>; i = ne[i])</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (e[i] == x)</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> n;</span><br><span class=\"line\">    <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>, &amp;n);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"built_in\">memset</span>(h, <span class=\"number\">-1</span>, <span class=\"keyword\">sizeof</span> h);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">while</span> (n -- )</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"type\">char</span> op[<span class=\"number\">2</span>];</span><br><span class=\"line\">        <span class=\"type\">int</span> x;</span><br><span class=\"line\">        <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%s%d&quot;</span>, op, &amp;x);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (*op == <span class=\"string\">&#x27;I&#x27;</span>) <span class=\"built_in\">insert</span>(x);</span><br><span class=\"line\">        <span class=\"keyword\">else</span></span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (<span class=\"built_in\">find</span>(x)) <span class=\"built_in\">puts</span>(<span class=\"string\">&quot;Yes&quot;</span>);</span><br><span class=\"line\">            <span class=\"keyword\">else</span> <span class=\"built_in\">puts</span>(<span class=\"string\">&quot;No&quot;</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">作者：yxc</span><br><span class=\"line\">链接：https:<span class=\"comment\">//www.acwing.com/activity/content/code/content/45308/</span></span><br><span class=\"line\">来源：AcWing</span><br><span class=\"line\">著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>"},{"title":"AcWing 842. 排列数字","date":"2022-09-23T03:50:02.633Z","_content":"\n# AcWing 842. 排列数字    \n### 题目来源--[842. 排列数字](https://www.acwing.com/problem/content/844/ \"排列数字\")\n\n``` c++\n题目描述\n\t给定一个整数 n，将数字 1∼n 排成一排，将会有很多种排列方法。\n\t现在，请你按照字典序将所有的排列方法输出。\n\n输入格式\n\t共一行，包含一个整数 n。\n\n输出格式\n\t按字典序输出所有排列方案，每个方案占一行。\n\n数据范围\n\t1≤n≤7\n\t\n输入样例：\n\t3\n\t\n输出样例：\n\t1 2 3\n\t1 3 2\n\t2 1 3\n\t2 3 1\n\t3 1 2\n\t3 2 1\t\n```\n\n## 代码演示\n\n```c++\n#include <iostream>\n\nusing namespace std;\n\nconst int N = 10;\n\nint n;\nint path[N];\n\nvoid dfs(int u, int state)\n{\n    if (u == n)\n    {\n        for (int i = 0; i < n; i ++ ) printf(\"%d \", path[i]);\n        puts(\"\");\n\n        return;\n    }\n\n    for (int i = 0; i < n; i ++ )\n        if (!(state >> i & 1))\n        {\n            path[u] = i + 1;\n            dfs(u + 1, state + (1 << i));\n        }\n}\n\nint main()\n{\n    scanf(\"%d\", &n);\n\n    dfs(0, 0);\n\n    return 0;\n}\n\n作者：yxc\n链接：https://www.acwing.com/activity/content/code/content/47087/\n来源：AcWing\n著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。\n\n```","source":"_posts/AcWing/算法基础课/3、搜索与图论/AcWing842排列数字.md","raw":"---\ntitle: AcWing 842. 排列数字      \ndate: \ntags: \n\t- Acwing \n\t- DFS\ncategories: \n\t- [AcWing,算法基础课,2、数据结构]\n---\n\n# AcWing 842. 排列数字    \n### 题目来源--[842. 排列数字](https://www.acwing.com/problem/content/844/ \"排列数字\")\n\n``` c++\n题目描述\n\t给定一个整数 n，将数字 1∼n 排成一排，将会有很多种排列方法。\n\t现在，请你按照字典序将所有的排列方法输出。\n\n输入格式\n\t共一行，包含一个整数 n。\n\n输出格式\n\t按字典序输出所有排列方案，每个方案占一行。\n\n数据范围\n\t1≤n≤7\n\t\n输入样例：\n\t3\n\t\n输出样例：\n\t1 2 3\n\t1 3 2\n\t2 1 3\n\t2 3 1\n\t3 1 2\n\t3 2 1\t\n```\n\n## 代码演示\n\n```c++\n#include <iostream>\n\nusing namespace std;\n\nconst int N = 10;\n\nint n;\nint path[N];\n\nvoid dfs(int u, int state)\n{\n    if (u == n)\n    {\n        for (int i = 0; i < n; i ++ ) printf(\"%d \", path[i]);\n        puts(\"\");\n\n        return;\n    }\n\n    for (int i = 0; i < n; i ++ )\n        if (!(state >> i & 1))\n        {\n            path[u] = i + 1;\n            dfs(u + 1, state + (1 << i));\n        }\n}\n\nint main()\n{\n    scanf(\"%d\", &n);\n\n    dfs(0, 0);\n\n    return 0;\n}\n\n作者：yxc\n链接：https://www.acwing.com/activity/content/code/content/47087/\n来源：AcWing\n著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。\n\n```","slug":"AcWing/算法基础课/3、搜索与图论/AcWing842排列数字","published":1,"updated":"2022-09-23T03:50:02.633Z","comments":1,"layout":"post","photos":[],"link":"","_id":"claryulcl001i5ojr8imm86fz","content":"<h1 id=\"AcWing-842-排列数字\"><a href=\"#AcWing-842-排列数字\" class=\"headerlink\" title=\"AcWing 842. 排列数字\"></a>AcWing 842. 排列数字</h1><h3 id=\"题目来源–842-排列数字\"><a href=\"#题目来源–842-排列数字\" class=\"headerlink\" title=\"题目来源–842. 排列数字\"></a>题目来源–<a href=\"https://www.acwing.com/problem/content/844/\" title=\"排列数字\">842. 排列数字</a></h3><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">题目描述</span><br><span class=\"line\">\t给定一个整数 n，将数字 <span class=\"number\">1</span>∼n 排成一排，将会有很多种排列方法。</span><br><span class=\"line\">\t现在，请你按照字典序将所有的排列方法输出。</span><br><span class=\"line\"></span><br><span class=\"line\">输入格式</span><br><span class=\"line\">\t共一行，包含一个整数 n。</span><br><span class=\"line\"></span><br><span class=\"line\">输出格式</span><br><span class=\"line\">\t按字典序输出所有排列方案，每个方案占一行。</span><br><span class=\"line\"></span><br><span class=\"line\">数据范围</span><br><span class=\"line\">\t<span class=\"number\">1</span>≤n≤<span class=\"number\">7</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输入样例：</span><br><span class=\"line\">\t<span class=\"number\">3</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输出样例：</span><br><span class=\"line\">\t<span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span></span><br><span class=\"line\">\t<span class=\"number\">1</span> <span class=\"number\">3</span> <span class=\"number\">2</span></span><br><span class=\"line\">\t<span class=\"number\">2</span> <span class=\"number\">1</span> <span class=\"number\">3</span></span><br><span class=\"line\">\t<span class=\"number\">2</span> <span class=\"number\">3</span> <span class=\"number\">1</span></span><br><span class=\"line\">\t<span class=\"number\">3</span> <span class=\"number\">1</span> <span class=\"number\">2</span></span><br><span class=\"line\">\t<span class=\"number\">3</span> <span class=\"number\">2</span> <span class=\"number\">1</span>\t</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"代码演示\"><a href=\"#代码演示\" class=\"headerlink\" title=\"代码演示\"></a>代码演示</h2><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> std;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">const</span> <span class=\"type\">int</span> N = <span class=\"number\">10</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">int</span> n;</span><br><span class=\"line\"><span class=\"type\">int</span> path[N];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">dfs</span><span class=\"params\">(<span class=\"type\">int</span> u, <span class=\"type\">int</span> state)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (u == n)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; n; i ++ ) <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d &quot;</span>, path[i]);</span><br><span class=\"line\">        <span class=\"built_in\">puts</span>(<span class=\"string\">&quot;&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; n; i ++ )</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!(state &gt;&gt; i &amp; <span class=\"number\">1</span>))</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            path[u] = i + <span class=\"number\">1</span>;</span><br><span class=\"line\">            <span class=\"built_in\">dfs</span>(u + <span class=\"number\">1</span>, state + (<span class=\"number\">1</span> &lt;&lt; i));</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>, &amp;n);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"built_in\">dfs</span>(<span class=\"number\">0</span>, <span class=\"number\">0</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">作者：yxc</span><br><span class=\"line\">链接：https:<span class=\"comment\">//www.acwing.com/activity/content/code/content/47087/</span></span><br><span class=\"line\">来源：AcWing</span><br><span class=\"line\">著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>","site":{"data":{"link":[{"class_name":"友情链接","class_desc":"那些人，那些事","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]},{"class_name":"网站","class_desc":"值得推荐的网站","link_list":[{"name":"Youtube","link":"https://www.youtube.com/","avatar":"https://i.loli.net/2020/05/14/9ZkGg8v3azHJfM1.png","descr":"视频网站"},{"name":"Weibo","link":"https://www.weibo.com/","avatar":"https://i.loli.net/2020/05/14/TLJBum386vcnI1P.png","descr":"中国最大社交分享平台"},{"name":"Twitter","link":"https://twitter.com/","avatar":"https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png","descr":"社交分享平台"}]}]}},"cover":"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7","excerpt":"","more":"<h1 id=\"AcWing-842-排列数字\"><a href=\"#AcWing-842-排列数字\" class=\"headerlink\" title=\"AcWing 842. 排列数字\"></a>AcWing 842. 排列数字</h1><h3 id=\"题目来源–842-排列数字\"><a href=\"#题目来源–842-排列数字\" class=\"headerlink\" title=\"题目来源–842. 排列数字\"></a>题目来源–<a href=\"https://www.acwing.com/problem/content/844/\" title=\"排列数字\">842. 排列数字</a></h3><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">题目描述</span><br><span class=\"line\">\t给定一个整数 n，将数字 <span class=\"number\">1</span>∼n 排成一排，将会有很多种排列方法。</span><br><span class=\"line\">\t现在，请你按照字典序将所有的排列方法输出。</span><br><span class=\"line\"></span><br><span class=\"line\">输入格式</span><br><span class=\"line\">\t共一行，包含一个整数 n。</span><br><span class=\"line\"></span><br><span class=\"line\">输出格式</span><br><span class=\"line\">\t按字典序输出所有排列方案，每个方案占一行。</span><br><span class=\"line\"></span><br><span class=\"line\">数据范围</span><br><span class=\"line\">\t<span class=\"number\">1</span>≤n≤<span class=\"number\">7</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输入样例：</span><br><span class=\"line\">\t<span class=\"number\">3</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输出样例：</span><br><span class=\"line\">\t<span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span></span><br><span class=\"line\">\t<span class=\"number\">1</span> <span class=\"number\">3</span> <span class=\"number\">2</span></span><br><span class=\"line\">\t<span class=\"number\">2</span> <span class=\"number\">1</span> <span class=\"number\">3</span></span><br><span class=\"line\">\t<span class=\"number\">2</span> <span class=\"number\">3</span> <span class=\"number\">1</span></span><br><span class=\"line\">\t<span class=\"number\">3</span> <span class=\"number\">1</span> <span class=\"number\">2</span></span><br><span class=\"line\">\t<span class=\"number\">3</span> <span class=\"number\">2</span> <span class=\"number\">1</span>\t</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"代码演示\"><a href=\"#代码演示\" class=\"headerlink\" title=\"代码演示\"></a>代码演示</h2><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> std;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">const</span> <span class=\"type\">int</span> N = <span class=\"number\">10</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">int</span> n;</span><br><span class=\"line\"><span class=\"type\">int</span> path[N];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">dfs</span><span class=\"params\">(<span class=\"type\">int</span> u, <span class=\"type\">int</span> state)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (u == n)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; n; i ++ ) <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d &quot;</span>, path[i]);</span><br><span class=\"line\">        <span class=\"built_in\">puts</span>(<span class=\"string\">&quot;&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; n; i ++ )</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!(state &gt;&gt; i &amp; <span class=\"number\">1</span>))</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            path[u] = i + <span class=\"number\">1</span>;</span><br><span class=\"line\">            <span class=\"built_in\">dfs</span>(u + <span class=\"number\">1</span>, state + (<span class=\"number\">1</span> &lt;&lt; i));</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>, &amp;n);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"built_in\">dfs</span>(<span class=\"number\">0</span>, <span class=\"number\">0</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">作者：yxc</span><br><span class=\"line\">链接：https:<span class=\"comment\">//www.acwing.com/activity/content/code/content/47087/</span></span><br><span class=\"line\">来源：AcWing</span><br><span class=\"line\">著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>"},{"title":"AcWing 843. n-皇后问题","date":"2022-09-23T03:50:02.634Z","_content":"\n# AcWing 843. n-皇后问题     \n### 题目来源--[843. n-皇后问题](https://www.acwing.com/problem/content/844/ \"n-皇后问题\")\n\n``` c++\n题目描述\n\tn−皇后问题是指将 n 个皇后放在 n×n 的国际象棋棋盘上，使得皇后不能相互攻击到，即任意两个皇后都不能处于同一行、同一列或同一斜线上。\n\t现在给定整数 n，请你输出所有的满足条件的棋子摆法。\n\n输入格式\n\t共一行，包含整数 n。\n\n输出格式\n\t每个解决方案占 n 行，每行输出一个长度为 n 的字符串，用来表示完整的棋盘状态。\n\t其中 . 表示某一个位置的方格状态为空，Q 表示某一个位置的方格上摆着皇后。\n\t每个方案输出完成后，输出一个空行。\n\t注意：行末不能有多余空格。\n\t输出方案的顺序任意，只要不重复且没有遗漏即可。\n\n数据范围\n\t1≤n≤9\n\t\n输入样例：\n\t4\n\t\n输出样例：\n\t.Q..\n\t...Q\n\tQ...\n\t..Q.\n\n\t..Q.\n\tQ...\n\t...Q\n\t.Q..\n```\n![图片](https://cdn.acwing.com/media/article/image/2019/06/08/19_860e00c489-1_597ec77c49-8-queens.png)\n\n## 代码演示\n\n```c++\n#include <iostream>\n\nusing namespace std;\n\nconst int N = 10;\n\nint n;\nbool row[N], col[N], dg[N * 2], udg[N * 2];\nchar g[N][N];\n\nvoid dfs(int x, int y, int s)\n{\n    if (s > n) return;\n    if (y == n) y = 0, x ++ ;\n\n    if (x == n)\n    {\n        if (s == n)\n        {\n            for (int i = 0; i < n; i ++ ) puts(g[i]);\n            puts(\"\");\n        }\n        return;\n    }\n\n    g[x][y] = '.';\n    dfs(x, y + 1, s);\n\n    if (!row[x] && !col[y] && !dg[x + y] && !udg[x - y + n])\n    {\n        row[x] = col[y] = dg[x + y] = udg[x - y + n] = true;\n        g[x][y] = 'Q';\n        dfs(x, y + 1, s + 1);\n        g[x][y] = '.';\n        row[x] = col[y] = dg[x + y] = udg[x - y + n] = false;\n    }\n}\n\nint main()\n{\n    cin >> n;\n\n    dfs(0, 0, 0);\n\n    return 0;\n\n作者：yxc\n链接：https://www.acwing.com/activity/content/code/content/47097/\n来源：AcWing\n著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。\n```","source":"_posts/AcWing/算法基础课/3、搜索与图论/AcWing843n-皇后问题.md","raw":"---\ntitle: AcWing 843. n-皇后问题       \ndate: \ntags: \n\t- Acwing \n\t- DFS\ncategories: \n\t- [AcWing,算法基础课,2、数据结构]\n---\n\n# AcWing 843. n-皇后问题     \n### 题目来源--[843. n-皇后问题](https://www.acwing.com/problem/content/844/ \"n-皇后问题\")\n\n``` c++\n题目描述\n\tn−皇后问题是指将 n 个皇后放在 n×n 的国际象棋棋盘上，使得皇后不能相互攻击到，即任意两个皇后都不能处于同一行、同一列或同一斜线上。\n\t现在给定整数 n，请你输出所有的满足条件的棋子摆法。\n\n输入格式\n\t共一行，包含整数 n。\n\n输出格式\n\t每个解决方案占 n 行，每行输出一个长度为 n 的字符串，用来表示完整的棋盘状态。\n\t其中 . 表示某一个位置的方格状态为空，Q 表示某一个位置的方格上摆着皇后。\n\t每个方案输出完成后，输出一个空行。\n\t注意：行末不能有多余空格。\n\t输出方案的顺序任意，只要不重复且没有遗漏即可。\n\n数据范围\n\t1≤n≤9\n\t\n输入样例：\n\t4\n\t\n输出样例：\n\t.Q..\n\t...Q\n\tQ...\n\t..Q.\n\n\t..Q.\n\tQ...\n\t...Q\n\t.Q..\n```\n![图片](https://cdn.acwing.com/media/article/image/2019/06/08/19_860e00c489-1_597ec77c49-8-queens.png)\n\n## 代码演示\n\n```c++\n#include <iostream>\n\nusing namespace std;\n\nconst int N = 10;\n\nint n;\nbool row[N], col[N], dg[N * 2], udg[N * 2];\nchar g[N][N];\n\nvoid dfs(int x, int y, int s)\n{\n    if (s > n) return;\n    if (y == n) y = 0, x ++ ;\n\n    if (x == n)\n    {\n        if (s == n)\n        {\n            for (int i = 0; i < n; i ++ ) puts(g[i]);\n            puts(\"\");\n        }\n        return;\n    }\n\n    g[x][y] = '.';\n    dfs(x, y + 1, s);\n\n    if (!row[x] && !col[y] && !dg[x + y] && !udg[x - y + n])\n    {\n        row[x] = col[y] = dg[x + y] = udg[x - y + n] = true;\n        g[x][y] = 'Q';\n        dfs(x, y + 1, s + 1);\n        g[x][y] = '.';\n        row[x] = col[y] = dg[x + y] = udg[x - y + n] = false;\n    }\n}\n\nint main()\n{\n    cin >> n;\n\n    dfs(0, 0, 0);\n\n    return 0;\n\n作者：yxc\n链接：https://www.acwing.com/activity/content/code/content/47097/\n来源：AcWing\n著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。\n```","slug":"AcWing/算法基础课/3、搜索与图论/AcWing843n-皇后问题","published":1,"updated":"2022-09-23T03:50:02.634Z","comments":1,"layout":"post","photos":[],"link":"","_id":"claryulcm001k5ojr0a2i7y3i","content":"<h1 id=\"AcWing-843-n-皇后问题\"><a href=\"#AcWing-843-n-皇后问题\" class=\"headerlink\" title=\"AcWing 843. n-皇后问题\"></a>AcWing 843. n-皇后问题</h1><h3 id=\"题目来源–843-n-皇后问题\"><a href=\"#题目来源–843-n-皇后问题\" class=\"headerlink\" title=\"题目来源–843. n-皇后问题\"></a>题目来源–<a href=\"https://www.acwing.com/problem/content/844/\" title=\"n-皇后问题\">843. n-皇后问题</a></h3><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">题目描述</span><br><span class=\"line\">\tn−皇后问题是指将 n 个皇后放在 n×n 的国际象棋棋盘上，使得皇后不能相互攻击到，即任意两个皇后都不能处于同一行、同一列或同一斜线上。</span><br><span class=\"line\">\t现在给定整数 n，请你输出所有的满足条件的棋子摆法。</span><br><span class=\"line\"></span><br><span class=\"line\">输入格式</span><br><span class=\"line\">\t共一行，包含整数 n。</span><br><span class=\"line\"></span><br><span class=\"line\">输出格式</span><br><span class=\"line\">\t每个解决方案占 n 行，每行输出一个长度为 n 的字符串，用来表示完整的棋盘状态。</span><br><span class=\"line\">\t其中 . 表示某一个位置的方格状态为空，Q 表示某一个位置的方格上摆着皇后。</span><br><span class=\"line\">\t每个方案输出完成后，输出一个空行。</span><br><span class=\"line\">\t注意：行末不能有多余空格。</span><br><span class=\"line\">\t输出方案的顺序任意，只要不重复且没有遗漏即可。</span><br><span class=\"line\"></span><br><span class=\"line\">数据范围</span><br><span class=\"line\">\t<span class=\"number\">1</span>≤n≤<span class=\"number\">9</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输入样例：</span><br><span class=\"line\">\t<span class=\"number\">4</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输出样例：</span><br><span class=\"line\">\t.Q..</span><br><span class=\"line\">\t...Q</span><br><span class=\"line\">\tQ...</span><br><span class=\"line\">\t..Q.</span><br><span class=\"line\"></span><br><span class=\"line\">\t..Q.</span><br><span class=\"line\">\tQ...</span><br><span class=\"line\">\t...Q</span><br><span class=\"line\">\t.Q..</span><br></pre></td></tr></table></figure>\n<p><img src=\"https://cdn.acwing.com/media/article/image/2019/06/08/19_860e00c489-1_597ec77c49-8-queens.png\" alt=\"图片\"></p>\n<h2 id=\"代码演示\"><a href=\"#代码演示\" class=\"headerlink\" title=\"代码演示\"></a>代码演示</h2><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> std;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">const</span> <span class=\"type\">int</span> N = <span class=\"number\">10</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">int</span> n;</span><br><span class=\"line\"><span class=\"type\">bool</span> row[N], col[N], dg[N * <span class=\"number\">2</span>], udg[N * <span class=\"number\">2</span>];</span><br><span class=\"line\"><span class=\"type\">char</span> g[N][N];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">dfs</span><span class=\"params\">(<span class=\"type\">int</span> x, <span class=\"type\">int</span> y, <span class=\"type\">int</span> s)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (s &gt; n) <span class=\"keyword\">return</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (y == n) y = <span class=\"number\">0</span>, x ++ ;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (x == n)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (s == n)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; n; i ++ ) <span class=\"built_in\">puts</span>(g[i]);</span><br><span class=\"line\">            <span class=\"built_in\">puts</span>(<span class=\"string\">&quot;&quot;</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    g[x][y] = <span class=\"string\">&#x27;.&#x27;</span>;</span><br><span class=\"line\">    <span class=\"built_in\">dfs</span>(x, y + <span class=\"number\">1</span>, s);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!row[x] &amp;&amp; !col[y] &amp;&amp; !dg[x + y] &amp;&amp; !udg[x - y + n])</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        row[x] = col[y] = dg[x + y] = udg[x - y + n] = <span class=\"literal\">true</span>;</span><br><span class=\"line\">        g[x][y] = <span class=\"string\">&#x27;Q&#x27;</span>;</span><br><span class=\"line\">        <span class=\"built_in\">dfs</span>(x, y + <span class=\"number\">1</span>, s + <span class=\"number\">1</span>);</span><br><span class=\"line\">        g[x][y] = <span class=\"string\">&#x27;.&#x27;</span>;</span><br><span class=\"line\">        row[x] = col[y] = dg[x + y] = udg[x - y + n] = <span class=\"literal\">false</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    cin &gt;&gt; n;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"built_in\">dfs</span>(<span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">作者：yxc</span><br><span class=\"line\">链接：https:<span class=\"comment\">//www.acwing.com/activity/content/code/content/47097/</span></span><br><span class=\"line\">来源：AcWing</span><br><span class=\"line\">著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</span><br></pre></td></tr></table></figure>","site":{"data":{"link":[{"class_name":"友情链接","class_desc":"那些人，那些事","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]},{"class_name":"网站","class_desc":"值得推荐的网站","link_list":[{"name":"Youtube","link":"https://www.youtube.com/","avatar":"https://i.loli.net/2020/05/14/9ZkGg8v3azHJfM1.png","descr":"视频网站"},{"name":"Weibo","link":"https://www.weibo.com/","avatar":"https://i.loli.net/2020/05/14/TLJBum386vcnI1P.png","descr":"中国最大社交分享平台"},{"name":"Twitter","link":"https://twitter.com/","avatar":"https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png","descr":"社交分享平台"}]}]}},"cover":"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7","excerpt":"","more":"<h1 id=\"AcWing-843-n-皇后问题\"><a href=\"#AcWing-843-n-皇后问题\" class=\"headerlink\" title=\"AcWing 843. n-皇后问题\"></a>AcWing 843. n-皇后问题</h1><h3 id=\"题目来源–843-n-皇后问题\"><a href=\"#题目来源–843-n-皇后问题\" class=\"headerlink\" title=\"题目来源–843. n-皇后问题\"></a>题目来源–<a href=\"https://www.acwing.com/problem/content/844/\" title=\"n-皇后问题\">843. n-皇后问题</a></h3><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">题目描述</span><br><span class=\"line\">\tn−皇后问题是指将 n 个皇后放在 n×n 的国际象棋棋盘上，使得皇后不能相互攻击到，即任意两个皇后都不能处于同一行、同一列或同一斜线上。</span><br><span class=\"line\">\t现在给定整数 n，请你输出所有的满足条件的棋子摆法。</span><br><span class=\"line\"></span><br><span class=\"line\">输入格式</span><br><span class=\"line\">\t共一行，包含整数 n。</span><br><span class=\"line\"></span><br><span class=\"line\">输出格式</span><br><span class=\"line\">\t每个解决方案占 n 行，每行输出一个长度为 n 的字符串，用来表示完整的棋盘状态。</span><br><span class=\"line\">\t其中 . 表示某一个位置的方格状态为空，Q 表示某一个位置的方格上摆着皇后。</span><br><span class=\"line\">\t每个方案输出完成后，输出一个空行。</span><br><span class=\"line\">\t注意：行末不能有多余空格。</span><br><span class=\"line\">\t输出方案的顺序任意，只要不重复且没有遗漏即可。</span><br><span class=\"line\"></span><br><span class=\"line\">数据范围</span><br><span class=\"line\">\t<span class=\"number\">1</span>≤n≤<span class=\"number\">9</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输入样例：</span><br><span class=\"line\">\t<span class=\"number\">4</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输出样例：</span><br><span class=\"line\">\t.Q..</span><br><span class=\"line\">\t...Q</span><br><span class=\"line\">\tQ...</span><br><span class=\"line\">\t..Q.</span><br><span class=\"line\"></span><br><span class=\"line\">\t..Q.</span><br><span class=\"line\">\tQ...</span><br><span class=\"line\">\t...Q</span><br><span class=\"line\">\t.Q..</span><br></pre></td></tr></table></figure>\n<p><img src=\"https://cdn.acwing.com/media/article/image/2019/06/08/19_860e00c489-1_597ec77c49-8-queens.png\" alt=\"图片\"></p>\n<h2 id=\"代码演示\"><a href=\"#代码演示\" class=\"headerlink\" title=\"代码演示\"></a>代码演示</h2><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> std;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">const</span> <span class=\"type\">int</span> N = <span class=\"number\">10</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">int</span> n;</span><br><span class=\"line\"><span class=\"type\">bool</span> row[N], col[N], dg[N * <span class=\"number\">2</span>], udg[N * <span class=\"number\">2</span>];</span><br><span class=\"line\"><span class=\"type\">char</span> g[N][N];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">dfs</span><span class=\"params\">(<span class=\"type\">int</span> x, <span class=\"type\">int</span> y, <span class=\"type\">int</span> s)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (s &gt; n) <span class=\"keyword\">return</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (y == n) y = <span class=\"number\">0</span>, x ++ ;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (x == n)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (s == n)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; n; i ++ ) <span class=\"built_in\">puts</span>(g[i]);</span><br><span class=\"line\">            <span class=\"built_in\">puts</span>(<span class=\"string\">&quot;&quot;</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    g[x][y] = <span class=\"string\">&#x27;.&#x27;</span>;</span><br><span class=\"line\">    <span class=\"built_in\">dfs</span>(x, y + <span class=\"number\">1</span>, s);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!row[x] &amp;&amp; !col[y] &amp;&amp; !dg[x + y] &amp;&amp; !udg[x - y + n])</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        row[x] = col[y] = dg[x + y] = udg[x - y + n] = <span class=\"literal\">true</span>;</span><br><span class=\"line\">        g[x][y] = <span class=\"string\">&#x27;Q&#x27;</span>;</span><br><span class=\"line\">        <span class=\"built_in\">dfs</span>(x, y + <span class=\"number\">1</span>, s + <span class=\"number\">1</span>);</span><br><span class=\"line\">        g[x][y] = <span class=\"string\">&#x27;.&#x27;</span>;</span><br><span class=\"line\">        row[x] = col[y] = dg[x + y] = udg[x - y + n] = <span class=\"literal\">false</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    cin &gt;&gt; n;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"built_in\">dfs</span>(<span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">作者：yxc</span><br><span class=\"line\">链接：https:<span class=\"comment\">//www.acwing.com/activity/content/code/content/47097/</span></span><br><span class=\"line\">来源：AcWing</span><br><span class=\"line\">著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</span><br></pre></td></tr></table></figure>"},{"title":"AcWing 841. 字符串哈希","date":"2022-09-23T03:50:02.632Z","_content":"\n# AcWing 841. 字符串哈希    \n### 题目来源--[841. 字符串哈希](https://www.acwing.com/problem/content/843/ \"字符串哈希\")\n\n``` c++\n题目描述\n\t给定一个长度为 n 的字符串，再给定 m 个询问，每个询问包含四个整数 l1,r1,l2,r2，请你判断 [l1,r1] 和 [l2,r2] 这两个区间所包含的字符串子串是否完全相同。\n\t字符串中只包含大小写英文字母和数字。\n\n输入格式\n\t第一行包含整数 n 和 m，表示字符串长度和询问次数。\n\t第二行包含一个长度为 n 的字符串，字符串中只包含大小写英文字母和数字。\n\t接下来 m 行，每行包含四个整数 l1,r1,l2,r2，表示一次询问所涉及的两个区间。\n\t注意，字符串的位置从 1 开始编号。\n\n输出格式\n\t对于每个询问输出一个结果，如果两个字符串子串完全相同则输出 Yes，否则输出 No。\n\t每个结果占一行。\n\n数据范围\n\t1≤n,m≤105\n\t\n输入样例：\n\t8 3\n\taabbaabb\n\t1 3 5 7\n\t1 3 6 8\n\t1 2 1 2\n\t\n输出样例：\n\tYes\n\tNo\n\tYes\n\t\n```\n\n## 代码演示\n\n```c++\n#include <iostream>\n#include <algorithm>\n\nusing namespace std;\n\ntypedef unsigned long long ULL;\n\nconst int N = 100010, P = 131;\n\nint n, m;\nchar str[N];\nULL h[N], p[N];\n\nULL get(int l, int r)\n{\n    return h[r] - h[l - 1] * p[r - l + 1];\n}\n\nint main()\n{\n    scanf(\"%d%d\", &n, &m);\n    scanf(\"%s\", str + 1);\n\n    p[0] = 1;\n    for (int i = 1; i <= n; i ++ )\n    {\n        h[i] = h[i - 1] * P + str[i];\n        p[i] = p[i - 1] * P;\n    }\n\n    while (m -- )\n    {\n        int l1, r1, l2, r2;\n        scanf(\"%d%d%d%d\", &l1, &r1, &l2, &r2);\n\n        if (get(l1, r1) == get(l2, r2)) puts(\"Yes\");\n        else puts(\"No\");\n    }\n\n    return 0;\n}\n\n作者：yxc\n链接：https://www.acwing.com/activity/content/code/content/45313/\n来源：AcWing\n著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。\n\n```","source":"_posts/AcWing/算法基础课/2、数据结构/AcWing841字符串哈希.md","raw":"---\ntitle: AcWing 841. 字符串哈希      \ndate: \ntags: \n\t- Acwing \n\t- 哈希表\ncategories: \n\t- [AcWing,算法基础课,2、数据结构]\n---\n\n# AcWing 841. 字符串哈希    \n### 题目来源--[841. 字符串哈希](https://www.acwing.com/problem/content/843/ \"字符串哈希\")\n\n``` c++\n题目描述\n\t给定一个长度为 n 的字符串，再给定 m 个询问，每个询问包含四个整数 l1,r1,l2,r2，请你判断 [l1,r1] 和 [l2,r2] 这两个区间所包含的字符串子串是否完全相同。\n\t字符串中只包含大小写英文字母和数字。\n\n输入格式\n\t第一行包含整数 n 和 m，表示字符串长度和询问次数。\n\t第二行包含一个长度为 n 的字符串，字符串中只包含大小写英文字母和数字。\n\t接下来 m 行，每行包含四个整数 l1,r1,l2,r2，表示一次询问所涉及的两个区间。\n\t注意，字符串的位置从 1 开始编号。\n\n输出格式\n\t对于每个询问输出一个结果，如果两个字符串子串完全相同则输出 Yes，否则输出 No。\n\t每个结果占一行。\n\n数据范围\n\t1≤n,m≤105\n\t\n输入样例：\n\t8 3\n\taabbaabb\n\t1 3 5 7\n\t1 3 6 8\n\t1 2 1 2\n\t\n输出样例：\n\tYes\n\tNo\n\tYes\n\t\n```\n\n## 代码演示\n\n```c++\n#include <iostream>\n#include <algorithm>\n\nusing namespace std;\n\ntypedef unsigned long long ULL;\n\nconst int N = 100010, P = 131;\n\nint n, m;\nchar str[N];\nULL h[N], p[N];\n\nULL get(int l, int r)\n{\n    return h[r] - h[l - 1] * p[r - l + 1];\n}\n\nint main()\n{\n    scanf(\"%d%d\", &n, &m);\n    scanf(\"%s\", str + 1);\n\n    p[0] = 1;\n    for (int i = 1; i <= n; i ++ )\n    {\n        h[i] = h[i - 1] * P + str[i];\n        p[i] = p[i - 1] * P;\n    }\n\n    while (m -- )\n    {\n        int l1, r1, l2, r2;\n        scanf(\"%d%d%d%d\", &l1, &r1, &l2, &r2);\n\n        if (get(l1, r1) == get(l2, r2)) puts(\"Yes\");\n        else puts(\"No\");\n    }\n\n    return 0;\n}\n\n作者：yxc\n链接：https://www.acwing.com/activity/content/code/content/45313/\n来源：AcWing\n著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。\n\n```","slug":"AcWing/算法基础课/2、数据结构/AcWing841字符串哈希","published":1,"updated":"2022-09-23T03:50:02.632Z","comments":1,"layout":"post","photos":[],"link":"","_id":"claryuld7005z5ojr2zwd72xk","content":"<h1 id=\"AcWing-841-字符串哈希\"><a href=\"#AcWing-841-字符串哈希\" class=\"headerlink\" title=\"AcWing 841. 字符串哈希\"></a>AcWing 841. 字符串哈希</h1><h3 id=\"题目来源–841-字符串哈希\"><a href=\"#题目来源–841-字符串哈希\" class=\"headerlink\" title=\"题目来源–841. 字符串哈希\"></a>题目来源–<a href=\"https://www.acwing.com/problem/content/843/\" title=\"字符串哈希\">841. 字符串哈希</a></h3><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">题目描述</span><br><span class=\"line\">\t给定一个长度为 n 的字符串，再给定 m 个询问，每个询问包含四个整数 l1,r1,l2,r2，请你判断 [l1,r1] 和 [l2,r2] 这两个区间所包含的字符串子串是否完全相同。</span><br><span class=\"line\">\t字符串中只包含大小写英文字母和数字。</span><br><span class=\"line\"></span><br><span class=\"line\">输入格式</span><br><span class=\"line\">\t第一行包含整数 n 和 m，表示字符串长度和询问次数。</span><br><span class=\"line\">\t第二行包含一个长度为 n 的字符串，字符串中只包含大小写英文字母和数字。</span><br><span class=\"line\">\t接下来 m 行，每行包含四个整数 l1,r1,l2,r2，表示一次询问所涉及的两个区间。</span><br><span class=\"line\">\t注意，字符串的位置从 <span class=\"number\">1</span> 开始编号。</span><br><span class=\"line\"></span><br><span class=\"line\">输出格式</span><br><span class=\"line\">\t对于每个询问输出一个结果，如果两个字符串子串完全相同则输出 Yes，否则输出 No。</span><br><span class=\"line\">\t每个结果占一行。</span><br><span class=\"line\"></span><br><span class=\"line\">数据范围</span><br><span class=\"line\">\t<span class=\"number\">1</span>≤n,m≤<span class=\"number\">105</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输入样例：</span><br><span class=\"line\">\t<span class=\"number\">8</span> <span class=\"number\">3</span></span><br><span class=\"line\">\taabbaabb</span><br><span class=\"line\">\t<span class=\"number\">1</span> <span class=\"number\">3</span> <span class=\"number\">5</span> <span class=\"number\">7</span></span><br><span class=\"line\">\t<span class=\"number\">1</span> <span class=\"number\">3</span> <span class=\"number\">6</span> <span class=\"number\">8</span></span><br><span class=\"line\">\t<span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">1</span> <span class=\"number\">2</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输出样例：</span><br><span class=\"line\">\tYes</span><br><span class=\"line\">\tNo</span><br><span class=\"line\">\tYes</span><br><span class=\"line\">\t</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"代码演示\"><a href=\"#代码演示\" class=\"headerlink\" title=\"代码演示\"></a>代码演示</h2><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;algorithm&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> std;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">typedef</span> <span class=\"type\">unsigned</span> <span class=\"type\">long</span> <span class=\"type\">long</span> ULL;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">const</span> <span class=\"type\">int</span> N = <span class=\"number\">100010</span>, P = <span class=\"number\">131</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">int</span> n, m;</span><br><span class=\"line\"><span class=\"type\">char</span> str[N];</span><br><span class=\"line\">ULL h[N], p[N];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\">ULL <span class=\"title\">get</span><span class=\"params\">(<span class=\"type\">int</span> l, <span class=\"type\">int</span> r)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> h[r] - h[l - <span class=\"number\">1</span>] * p[r - l + <span class=\"number\">1</span>];</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d%d&quot;</span>, &amp;n, &amp;m);</span><br><span class=\"line\">    <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%s&quot;</span>, str + <span class=\"number\">1</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    p[<span class=\"number\">0</span>] = <span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">1</span>; i &lt;= n; i ++ )</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        h[i] = h[i - <span class=\"number\">1</span>] * P + str[i];</span><br><span class=\"line\">        p[i] = p[i - <span class=\"number\">1</span>] * P;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">while</span> (m -- )</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"type\">int</span> l1, r1, l2, r2;</span><br><span class=\"line\">        <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d%d%d%d&quot;</span>, &amp;l1, &amp;r1, &amp;l2, &amp;r2);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"built_in\">get</span>(l1, r1) == <span class=\"built_in\">get</span>(l2, r2)) <span class=\"built_in\">puts</span>(<span class=\"string\">&quot;Yes&quot;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">else</span> <span class=\"built_in\">puts</span>(<span class=\"string\">&quot;No&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">作者：yxc</span><br><span class=\"line\">链接：https:<span class=\"comment\">//www.acwing.com/activity/content/code/content/45313/</span></span><br><span class=\"line\">来源：AcWing</span><br><span class=\"line\">著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>","site":{"data":{"link":[{"class_name":"友情链接","class_desc":"那些人，那些事","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]},{"class_name":"网站","class_desc":"值得推荐的网站","link_list":[{"name":"Youtube","link":"https://www.youtube.com/","avatar":"https://i.loli.net/2020/05/14/9ZkGg8v3azHJfM1.png","descr":"视频网站"},{"name":"Weibo","link":"https://www.weibo.com/","avatar":"https://i.loli.net/2020/05/14/TLJBum386vcnI1P.png","descr":"中国最大社交分享平台"},{"name":"Twitter","link":"https://twitter.com/","avatar":"https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png","descr":"社交分享平台"}]}]}},"cover":"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7","excerpt":"","more":"<h1 id=\"AcWing-841-字符串哈希\"><a href=\"#AcWing-841-字符串哈希\" class=\"headerlink\" title=\"AcWing 841. 字符串哈希\"></a>AcWing 841. 字符串哈希</h1><h3 id=\"题目来源–841-字符串哈希\"><a href=\"#题目来源–841-字符串哈希\" class=\"headerlink\" title=\"题目来源–841. 字符串哈希\"></a>题目来源–<a href=\"https://www.acwing.com/problem/content/843/\" title=\"字符串哈希\">841. 字符串哈希</a></h3><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">题目描述</span><br><span class=\"line\">\t给定一个长度为 n 的字符串，再给定 m 个询问，每个询问包含四个整数 l1,r1,l2,r2，请你判断 [l1,r1] 和 [l2,r2] 这两个区间所包含的字符串子串是否完全相同。</span><br><span class=\"line\">\t字符串中只包含大小写英文字母和数字。</span><br><span class=\"line\"></span><br><span class=\"line\">输入格式</span><br><span class=\"line\">\t第一行包含整数 n 和 m，表示字符串长度和询问次数。</span><br><span class=\"line\">\t第二行包含一个长度为 n 的字符串，字符串中只包含大小写英文字母和数字。</span><br><span class=\"line\">\t接下来 m 行，每行包含四个整数 l1,r1,l2,r2，表示一次询问所涉及的两个区间。</span><br><span class=\"line\">\t注意，字符串的位置从 <span class=\"number\">1</span> 开始编号。</span><br><span class=\"line\"></span><br><span class=\"line\">输出格式</span><br><span class=\"line\">\t对于每个询问输出一个结果，如果两个字符串子串完全相同则输出 Yes，否则输出 No。</span><br><span class=\"line\">\t每个结果占一行。</span><br><span class=\"line\"></span><br><span class=\"line\">数据范围</span><br><span class=\"line\">\t<span class=\"number\">1</span>≤n,m≤<span class=\"number\">105</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输入样例：</span><br><span class=\"line\">\t<span class=\"number\">8</span> <span class=\"number\">3</span></span><br><span class=\"line\">\taabbaabb</span><br><span class=\"line\">\t<span class=\"number\">1</span> <span class=\"number\">3</span> <span class=\"number\">5</span> <span class=\"number\">7</span></span><br><span class=\"line\">\t<span class=\"number\">1</span> <span class=\"number\">3</span> <span class=\"number\">6</span> <span class=\"number\">8</span></span><br><span class=\"line\">\t<span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">1</span> <span class=\"number\">2</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输出样例：</span><br><span class=\"line\">\tYes</span><br><span class=\"line\">\tNo</span><br><span class=\"line\">\tYes</span><br><span class=\"line\">\t</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"代码演示\"><a href=\"#代码演示\" class=\"headerlink\" title=\"代码演示\"></a>代码演示</h2><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;algorithm&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> std;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">typedef</span> <span class=\"type\">unsigned</span> <span class=\"type\">long</span> <span class=\"type\">long</span> ULL;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">const</span> <span class=\"type\">int</span> N = <span class=\"number\">100010</span>, P = <span class=\"number\">131</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">int</span> n, m;</span><br><span class=\"line\"><span class=\"type\">char</span> str[N];</span><br><span class=\"line\">ULL h[N], p[N];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\">ULL <span class=\"title\">get</span><span class=\"params\">(<span class=\"type\">int</span> l, <span class=\"type\">int</span> r)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> h[r] - h[l - <span class=\"number\">1</span>] * p[r - l + <span class=\"number\">1</span>];</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d%d&quot;</span>, &amp;n, &amp;m);</span><br><span class=\"line\">    <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%s&quot;</span>, str + <span class=\"number\">1</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    p[<span class=\"number\">0</span>] = <span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">1</span>; i &lt;= n; i ++ )</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        h[i] = h[i - <span class=\"number\">1</span>] * P + str[i];</span><br><span class=\"line\">        p[i] = p[i - <span class=\"number\">1</span>] * P;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">while</span> (m -- )</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"type\">int</span> l1, r1, l2, r2;</span><br><span class=\"line\">        <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d%d%d%d&quot;</span>, &amp;l1, &amp;r1, &amp;l2, &amp;r2);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"built_in\">get</span>(l1, r1) == <span class=\"built_in\">get</span>(l2, r2)) <span class=\"built_in\">puts</span>(<span class=\"string\">&quot;Yes&quot;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">else</span> <span class=\"built_in\">puts</span>(<span class=\"string\">&quot;No&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">作者：yxc</span><br><span class=\"line\">链接：https:<span class=\"comment\">//www.acwing.com/activity/content/code/content/45313/</span></span><br><span class=\"line\">来源：AcWing</span><br><span class=\"line\">著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>"},{"title":"AcWing 837. 连通块中点的数量","date":"2022-09-23T03:50:02.629Z","_content":"\n# AcWing 837. 连通块中点的数量    \n### 题目来源--[837. 连通块中点的数量](https://www.acwing.com/problem/content/839/ \"连通块中点的数量\")\n\n``` c++\n题目描述\n\t给定一个包含 n 个点（编号为 1∼n）的无向图，初始时图中没有边。\n\t现在要进行 m 个操作，操作共有三种：\n\t1.C a b，在点 a 和点 b 之间连一条边，a 和 b 可能相等；\n\t2.Q1 a b，询问点 a 和点 b 是否在同一个连通块中，a 和 b 可能相等；\n\t3.Q2 a，询问点 a 所在连通块中点的数量;\n\t\n输入格式\n\t第一行输入整数 n 和 m。\n\t接下来 m 行，每行包含一个操作指令，指令为 C a b，Q1 a b 或 Q2 a 中的一种。\n\n输出格式\n\t对于每个询问指令 Q1 a b，如果 a 和 b 在同一个连通块中，则输出 Yes，否则输出 No。\n\t对每个询问指令 Q2 a，输出一个整数表示点 a 所在连通块中点的数量\n\n\t每个结果占一行。\n\n数据范围\n\t1≤n,m≤10^5\n\t\n输入样例：\n\t5 5\n\tC 1 2\n\tQ1 1 2\n\tQ2 1\n\tC 2 5\n\tQ2 5\n\t\n输出样例：\n\tYes\n\t2\n\t3\n\t\n```\n\n## 代码演示\n```c++\n#include <iostream>\n\nusing namespace std;\n\nconst int N = 100010;\n\nint n, m;\nint p[N], cnt[N];\n\nint find(int x)\n{\n    if (p[x] != x) p[x] = find(p[x]);\n    return p[x];\n}\n\nint main()\n{\n    cin >> n >> m;\n\n    for (int i = 1; i <= n; i ++ )\n    {\n        p[i] = i;\n        cnt[i] = 1;\n    }\n\n    while (m -- )\n    {\n        string op;\n        int a, b;\n        cin >> op;\n\n        if (op == \"C\")\n        {\n            cin >> a >> b;\n            a = find(a), b = find(b);\n            if (a != b)\n            {\n                p[a] = b;\n                cnt[b] += cnt[a];\n            }\n        }\n        else if (op == \"Q1\")\n        {\n            cin >> a >> b;\n            if (find(a) == find(b)) puts(\"Yes\");\n            else puts(\"No\");\n        }\n        else\n        {\n            cin >> a;\n            cout << cnt[find(a)] << endl;\n        }\n    }\n\n    return 0;\n}\n\n作者：yxc\n链接：https://www.acwing.com/activity/content/code/content/45295/\n来源：AcWing\n著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。\n```","source":"_posts/AcWing/算法基础课/2、数据结构/AcWing837连通块中点的数量.md","raw":"---\ntitle: AcWing 837. 连通块中点的数量      \ndate: \ntags: \n\t- Acwing \n\t- 并查集\ncategories: \n\t- [AcWing,算法基础课,2、数据结构]\n---\n\n# AcWing 837. 连通块中点的数量    \n### 题目来源--[837. 连通块中点的数量](https://www.acwing.com/problem/content/839/ \"连通块中点的数量\")\n\n``` c++\n题目描述\n\t给定一个包含 n 个点（编号为 1∼n）的无向图，初始时图中没有边。\n\t现在要进行 m 个操作，操作共有三种：\n\t1.C a b，在点 a 和点 b 之间连一条边，a 和 b 可能相等；\n\t2.Q1 a b，询问点 a 和点 b 是否在同一个连通块中，a 和 b 可能相等；\n\t3.Q2 a，询问点 a 所在连通块中点的数量;\n\t\n输入格式\n\t第一行输入整数 n 和 m。\n\t接下来 m 行，每行包含一个操作指令，指令为 C a b，Q1 a b 或 Q2 a 中的一种。\n\n输出格式\n\t对于每个询问指令 Q1 a b，如果 a 和 b 在同一个连通块中，则输出 Yes，否则输出 No。\n\t对每个询问指令 Q2 a，输出一个整数表示点 a 所在连通块中点的数量\n\n\t每个结果占一行。\n\n数据范围\n\t1≤n,m≤10^5\n\t\n输入样例：\n\t5 5\n\tC 1 2\n\tQ1 1 2\n\tQ2 1\n\tC 2 5\n\tQ2 5\n\t\n输出样例：\n\tYes\n\t2\n\t3\n\t\n```\n\n## 代码演示\n```c++\n#include <iostream>\n\nusing namespace std;\n\nconst int N = 100010;\n\nint n, m;\nint p[N], cnt[N];\n\nint find(int x)\n{\n    if (p[x] != x) p[x] = find(p[x]);\n    return p[x];\n}\n\nint main()\n{\n    cin >> n >> m;\n\n    for (int i = 1; i <= n; i ++ )\n    {\n        p[i] = i;\n        cnt[i] = 1;\n    }\n\n    while (m -- )\n    {\n        string op;\n        int a, b;\n        cin >> op;\n\n        if (op == \"C\")\n        {\n            cin >> a >> b;\n            a = find(a), b = find(b);\n            if (a != b)\n            {\n                p[a] = b;\n                cnt[b] += cnt[a];\n            }\n        }\n        else if (op == \"Q1\")\n        {\n            cin >> a >> b;\n            if (find(a) == find(b)) puts(\"Yes\");\n            else puts(\"No\");\n        }\n        else\n        {\n            cin >> a;\n            cout << cnt[find(a)] << endl;\n        }\n    }\n\n    return 0;\n}\n\n作者：yxc\n链接：https://www.acwing.com/activity/content/code/content/45295/\n来源：AcWing\n著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。\n```","slug":"AcWing/算法基础课/2、数据结构/AcWing837连通块中点的数量","published":1,"updated":"2022-09-23T03:50:02.629Z","comments":1,"layout":"post","photos":[],"link":"","_id":"claryuld700605ojra6nf3vab","content":"<h1 id=\"AcWing-837-连通块中点的数量\"><a href=\"#AcWing-837-连通块中点的数量\" class=\"headerlink\" title=\"AcWing 837. 连通块中点的数量\"></a>AcWing 837. 连通块中点的数量</h1><h3 id=\"题目来源–837-连通块中点的数量\"><a href=\"#题目来源–837-连通块中点的数量\" class=\"headerlink\" title=\"题目来源–837. 连通块中点的数量\"></a>题目来源–<a href=\"https://www.acwing.com/problem/content/839/\" title=\"连通块中点的数量\">837. 连通块中点的数量</a></h3><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">题目描述</span><br><span class=\"line\">\t给定一个包含 n 个点（编号为 <span class=\"number\">1</span>∼n）的无向图，初始时图中没有边。</span><br><span class=\"line\">\t现在要进行 m 个操作，操作共有三种：</span><br><span class=\"line\">\t<span class=\"number\">1.</span>C a b，在点 a 和点 b 之间连一条边，a 和 b 可能相等；</span><br><span class=\"line\">\t<span class=\"number\">2.</span>Q1 a b，询问点 a 和点 b 是否在同一个连通块中，a 和 b 可能相等；</span><br><span class=\"line\">\t<span class=\"number\">3.</span>Q2 a，询问点 a 所在连通块中点的数量;</span><br><span class=\"line\">\t</span><br><span class=\"line\">输入格式</span><br><span class=\"line\">\t第一行输入整数 n 和 m。</span><br><span class=\"line\">\t接下来 m 行，每行包含一个操作指令，指令为 C a b，Q1 a b 或 Q2 a 中的一种。</span><br><span class=\"line\"></span><br><span class=\"line\">输出格式</span><br><span class=\"line\">\t对于每个询问指令 Q1 a b，如果 a 和 b 在同一个连通块中，则输出 Yes，否则输出 No。</span><br><span class=\"line\">\t对每个询问指令 Q2 a，输出一个整数表示点 a 所在连通块中点的数量</span><br><span class=\"line\"></span><br><span class=\"line\">\t每个结果占一行。</span><br><span class=\"line\"></span><br><span class=\"line\">数据范围</span><br><span class=\"line\">\t<span class=\"number\">1</span>≤n,m≤<span class=\"number\">10</span>^<span class=\"number\">5</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输入样例：</span><br><span class=\"line\">\t<span class=\"number\">5</span> <span class=\"number\">5</span></span><br><span class=\"line\">\tC <span class=\"number\">1</span> <span class=\"number\">2</span></span><br><span class=\"line\">\tQ1 <span class=\"number\">1</span> <span class=\"number\">2</span></span><br><span class=\"line\">\tQ2 <span class=\"number\">1</span></span><br><span class=\"line\">\tC <span class=\"number\">2</span> <span class=\"number\">5</span></span><br><span class=\"line\">\tQ2 <span class=\"number\">5</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输出样例：</span><br><span class=\"line\">\tYes</span><br><span class=\"line\">\t<span class=\"number\">2</span></span><br><span class=\"line\">\t<span class=\"number\">3</span></span><br><span class=\"line\">\t</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"代码演示\"><a href=\"#代码演示\" class=\"headerlink\" title=\"代码演示\"></a>代码演示</h2><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> std;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">const</span> <span class=\"type\">int</span> N = <span class=\"number\">100010</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">int</span> n, m;</span><br><span class=\"line\"><span class=\"type\">int</span> p[N], cnt[N];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">find</span><span class=\"params\">(<span class=\"type\">int</span> x)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (p[x] != x) p[x] = <span class=\"built_in\">find</span>(p[x]);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> p[x];</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    cin &gt;&gt; n &gt;&gt; m;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">1</span>; i &lt;= n; i ++ )</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        p[i] = i;</span><br><span class=\"line\">        cnt[i] = <span class=\"number\">1</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">while</span> (m -- )</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        string op;</span><br><span class=\"line\">        <span class=\"type\">int</span> a, b;</span><br><span class=\"line\">        cin &gt;&gt; op;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (op == <span class=\"string\">&quot;C&quot;</span>)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            cin &gt;&gt; a &gt;&gt; b;</span><br><span class=\"line\">            a = <span class=\"built_in\">find</span>(a), b = <span class=\"built_in\">find</span>(b);</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (a != b)</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                p[a] = b;</span><br><span class=\"line\">                cnt[b] += cnt[a];</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (op == <span class=\"string\">&quot;Q1&quot;</span>)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            cin &gt;&gt; a &gt;&gt; b;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (<span class=\"built_in\">find</span>(a) == <span class=\"built_in\">find</span>(b)) <span class=\"built_in\">puts</span>(<span class=\"string\">&quot;Yes&quot;</span>);</span><br><span class=\"line\">            <span class=\"keyword\">else</span> <span class=\"built_in\">puts</span>(<span class=\"string\">&quot;No&quot;</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">else</span></span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            cin &gt;&gt; a;</span><br><span class=\"line\">            cout &lt;&lt; cnt[<span class=\"built_in\">find</span>(a)] &lt;&lt; endl;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">作者：yxc</span><br><span class=\"line\">链接：https:<span class=\"comment\">//www.acwing.com/activity/content/code/content/45295/</span></span><br><span class=\"line\">来源：AcWing</span><br><span class=\"line\">著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</span><br></pre></td></tr></table></figure>","site":{"data":{"link":[{"class_name":"友情链接","class_desc":"那些人，那些事","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]},{"class_name":"网站","class_desc":"值得推荐的网站","link_list":[{"name":"Youtube","link":"https://www.youtube.com/","avatar":"https://i.loli.net/2020/05/14/9ZkGg8v3azHJfM1.png","descr":"视频网站"},{"name":"Weibo","link":"https://www.weibo.com/","avatar":"https://i.loli.net/2020/05/14/TLJBum386vcnI1P.png","descr":"中国最大社交分享平台"},{"name":"Twitter","link":"https://twitter.com/","avatar":"https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png","descr":"社交分享平台"}]}]}},"cover":"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7","excerpt":"","more":"<h1 id=\"AcWing-837-连通块中点的数量\"><a href=\"#AcWing-837-连通块中点的数量\" class=\"headerlink\" title=\"AcWing 837. 连通块中点的数量\"></a>AcWing 837. 连通块中点的数量</h1><h3 id=\"题目来源–837-连通块中点的数量\"><a href=\"#题目来源–837-连通块中点的数量\" class=\"headerlink\" title=\"题目来源–837. 连通块中点的数量\"></a>题目来源–<a href=\"https://www.acwing.com/problem/content/839/\" title=\"连通块中点的数量\">837. 连通块中点的数量</a></h3><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">题目描述</span><br><span class=\"line\">\t给定一个包含 n 个点（编号为 <span class=\"number\">1</span>∼n）的无向图，初始时图中没有边。</span><br><span class=\"line\">\t现在要进行 m 个操作，操作共有三种：</span><br><span class=\"line\">\t<span class=\"number\">1.</span>C a b，在点 a 和点 b 之间连一条边，a 和 b 可能相等；</span><br><span class=\"line\">\t<span class=\"number\">2.</span>Q1 a b，询问点 a 和点 b 是否在同一个连通块中，a 和 b 可能相等；</span><br><span class=\"line\">\t<span class=\"number\">3.</span>Q2 a，询问点 a 所在连通块中点的数量;</span><br><span class=\"line\">\t</span><br><span class=\"line\">输入格式</span><br><span class=\"line\">\t第一行输入整数 n 和 m。</span><br><span class=\"line\">\t接下来 m 行，每行包含一个操作指令，指令为 C a b，Q1 a b 或 Q2 a 中的一种。</span><br><span class=\"line\"></span><br><span class=\"line\">输出格式</span><br><span class=\"line\">\t对于每个询问指令 Q1 a b，如果 a 和 b 在同一个连通块中，则输出 Yes，否则输出 No。</span><br><span class=\"line\">\t对每个询问指令 Q2 a，输出一个整数表示点 a 所在连通块中点的数量</span><br><span class=\"line\"></span><br><span class=\"line\">\t每个结果占一行。</span><br><span class=\"line\"></span><br><span class=\"line\">数据范围</span><br><span class=\"line\">\t<span class=\"number\">1</span>≤n,m≤<span class=\"number\">10</span>^<span class=\"number\">5</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输入样例：</span><br><span class=\"line\">\t<span class=\"number\">5</span> <span class=\"number\">5</span></span><br><span class=\"line\">\tC <span class=\"number\">1</span> <span class=\"number\">2</span></span><br><span class=\"line\">\tQ1 <span class=\"number\">1</span> <span class=\"number\">2</span></span><br><span class=\"line\">\tQ2 <span class=\"number\">1</span></span><br><span class=\"line\">\tC <span class=\"number\">2</span> <span class=\"number\">5</span></span><br><span class=\"line\">\tQ2 <span class=\"number\">5</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输出样例：</span><br><span class=\"line\">\tYes</span><br><span class=\"line\">\t<span class=\"number\">2</span></span><br><span class=\"line\">\t<span class=\"number\">3</span></span><br><span class=\"line\">\t</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"代码演示\"><a href=\"#代码演示\" class=\"headerlink\" title=\"代码演示\"></a>代码演示</h2><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> std;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">const</span> <span class=\"type\">int</span> N = <span class=\"number\">100010</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">int</span> n, m;</span><br><span class=\"line\"><span class=\"type\">int</span> p[N], cnt[N];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">find</span><span class=\"params\">(<span class=\"type\">int</span> x)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (p[x] != x) p[x] = <span class=\"built_in\">find</span>(p[x]);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> p[x];</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    cin &gt;&gt; n &gt;&gt; m;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">1</span>; i &lt;= n; i ++ )</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        p[i] = i;</span><br><span class=\"line\">        cnt[i] = <span class=\"number\">1</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">while</span> (m -- )</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        string op;</span><br><span class=\"line\">        <span class=\"type\">int</span> a, b;</span><br><span class=\"line\">        cin &gt;&gt; op;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (op == <span class=\"string\">&quot;C&quot;</span>)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            cin &gt;&gt; a &gt;&gt; b;</span><br><span class=\"line\">            a = <span class=\"built_in\">find</span>(a), b = <span class=\"built_in\">find</span>(b);</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (a != b)</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                p[a] = b;</span><br><span class=\"line\">                cnt[b] += cnt[a];</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (op == <span class=\"string\">&quot;Q1&quot;</span>)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            cin &gt;&gt; a &gt;&gt; b;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (<span class=\"built_in\">find</span>(a) == <span class=\"built_in\">find</span>(b)) <span class=\"built_in\">puts</span>(<span class=\"string\">&quot;Yes&quot;</span>);</span><br><span class=\"line\">            <span class=\"keyword\">else</span> <span class=\"built_in\">puts</span>(<span class=\"string\">&quot;No&quot;</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">else</span></span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            cin &gt;&gt; a;</span><br><span class=\"line\">            cout &lt;&lt; cnt[<span class=\"built_in\">find</span>(a)] &lt;&lt; endl;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">作者：yxc</span><br><span class=\"line\">链接：https:<span class=\"comment\">//www.acwing.com/activity/content/code/content/45295/</span></span><br><span class=\"line\">来源：AcWing</span><br><span class=\"line\">著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</span><br></pre></td></tr></table></figure>"},{"title":"AcWing 844. 走迷宫","date":"2022-09-23T03:50:02.635Z","_content":"\n# AcWing 844. 走迷宫     \n### 题目来源--[844. 走迷宫](https://www.acwing.com/problem/content/846/ \"走迷宫\")\n\n``` c++\n题目描述\n\t给定一个 n×m 的二维整数数组，用来表示一个迷宫，数组中只包含 0 或 1，其中 0 表示可以走的路，1 表示不可通过的墙壁。\n\t最初，有一个人位于左上角 (1,1) 处，已知该人每次可以向上、下、左、右任意一个方向移动一个位置。\n\t请问，该人从左上角移动至右下角 (n,m) 处，至少需要移动多少次。\n\t数据保证 (1,1) 处和 (n,m) 处的数字为 0，且一定至少存在一条通路。\n\n输入格式\n\t第一行包含两个整数 n 和 m。\n\t接下来 n 行，每行包含 m 个整数（0 或 1），表示完整的二维数组迷宫。\n\n输出格式\n\t输出一个整数，表示从左上角移动至右下角的最少移动次数。\n\n数据范围\n\t1≤n,m≤100\n\t\n输入样例：\n\t5 5\n\t0 1 0 0 0\n\t0 1 0 1 0\n\t0 0 0 0 0\n\t0 1 1 1 0\n\t0 0 0 1 0\n\t\n输出样例：\n\t\n```\n\n## 代码演示\n\n```c++\n#include <cstring>\n#include <iostream>\n#include <algorithm>\n#include <queue>\n\nusing namespace std;\n\ntypedef pair<int, int> PII;\n\nconst int N = 110;\n\nint n, m;\nint g[N][N], d[N][N];\n\nint bfs()\n{\n    queue<PII> q;\n\n    memset(d, -1, sizeof d);\n    d[0][0] = 0;\n    q.push({0, 0});\n\n    int dx[4] = {-1, 0, 1, 0}, dy[4] = {0, 1, 0, -1};\n\n    while (q.size())\n    {\n        auto t = q.front();\n        q.pop();\n\n        for (int i = 0; i < 4; i ++ )\n        {\n            int x = t.first + dx[i], y = t.second + dy[i];\n\n            if (x >= 0 && x < n && y >= 0 && y < m && g[x][y] == 0 && d[x][y] == -1)\n            {\n                d[x][y] = d[t.first][t.second] + 1;\n                q.push({x, y});\n            }\n        }\n    }\n\n    return d[n - 1][m - 1];\n}\n\nint main()\n{\n    cin >> n >> m;\n    for (int i = 0; i < n; i ++ )\n        for (int j = 0; j < m; j ++ )\n            cin >> g[i][j];\n\n    cout << bfs() << endl;\n\n    return 0;\n}\n\n作者：yxc\n链接：https://www.acwing.com/activity/content/code/content/47098/\n来源：AcWing\n著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。\n```","source":"_posts/AcWing/算法基础课/3、搜索与图论/AcWing844走迷宫.md","raw":"---\ntitle: AcWing 844. 走迷宫       \ndate: \ntags: \n\t- Acwing \n\t- BFS\ncategories: \n\t- [AcWing,算法基础课,2、数据结构]\n---\n\n# AcWing 844. 走迷宫     \n### 题目来源--[844. 走迷宫](https://www.acwing.com/problem/content/846/ \"走迷宫\")\n\n``` c++\n题目描述\n\t给定一个 n×m 的二维整数数组，用来表示一个迷宫，数组中只包含 0 或 1，其中 0 表示可以走的路，1 表示不可通过的墙壁。\n\t最初，有一个人位于左上角 (1,1) 处，已知该人每次可以向上、下、左、右任意一个方向移动一个位置。\n\t请问，该人从左上角移动至右下角 (n,m) 处，至少需要移动多少次。\n\t数据保证 (1,1) 处和 (n,m) 处的数字为 0，且一定至少存在一条通路。\n\n输入格式\n\t第一行包含两个整数 n 和 m。\n\t接下来 n 行，每行包含 m 个整数（0 或 1），表示完整的二维数组迷宫。\n\n输出格式\n\t输出一个整数，表示从左上角移动至右下角的最少移动次数。\n\n数据范围\n\t1≤n,m≤100\n\t\n输入样例：\n\t5 5\n\t0 1 0 0 0\n\t0 1 0 1 0\n\t0 0 0 0 0\n\t0 1 1 1 0\n\t0 0 0 1 0\n\t\n输出样例：\n\t\n```\n\n## 代码演示\n\n```c++\n#include <cstring>\n#include <iostream>\n#include <algorithm>\n#include <queue>\n\nusing namespace std;\n\ntypedef pair<int, int> PII;\n\nconst int N = 110;\n\nint n, m;\nint g[N][N], d[N][N];\n\nint bfs()\n{\n    queue<PII> q;\n\n    memset(d, -1, sizeof d);\n    d[0][0] = 0;\n    q.push({0, 0});\n\n    int dx[4] = {-1, 0, 1, 0}, dy[4] = {0, 1, 0, -1};\n\n    while (q.size())\n    {\n        auto t = q.front();\n        q.pop();\n\n        for (int i = 0; i < 4; i ++ )\n        {\n            int x = t.first + dx[i], y = t.second + dy[i];\n\n            if (x >= 0 && x < n && y >= 0 && y < m && g[x][y] == 0 && d[x][y] == -1)\n            {\n                d[x][y] = d[t.first][t.second] + 1;\n                q.push({x, y});\n            }\n        }\n    }\n\n    return d[n - 1][m - 1];\n}\n\nint main()\n{\n    cin >> n >> m;\n    for (int i = 0; i < n; i ++ )\n        for (int j = 0; j < m; j ++ )\n            cin >> g[i][j];\n\n    cout << bfs() << endl;\n\n    return 0;\n}\n\n作者：yxc\n链接：https://www.acwing.com/activity/content/code/content/47098/\n来源：AcWing\n著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。\n```","slug":"AcWing/算法基础课/3、搜索与图论/AcWing844走迷宫","published":1,"updated":"2022-09-23T03:50:02.635Z","comments":1,"layout":"post","photos":[],"link":"","_id":"claryuld800625ojr9tsl0inv","content":"<h1 id=\"AcWing-844-走迷宫\"><a href=\"#AcWing-844-走迷宫\" class=\"headerlink\" title=\"AcWing 844. 走迷宫\"></a>AcWing 844. 走迷宫</h1><h3 id=\"题目来源–844-走迷宫\"><a href=\"#题目来源–844-走迷宫\" class=\"headerlink\" title=\"题目来源–844. 走迷宫\"></a>题目来源–<a href=\"https://www.acwing.com/problem/content/846/\" title=\"走迷宫\">844. 走迷宫</a></h3><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">题目描述</span><br><span class=\"line\">\t给定一个 n×m 的二维整数数组，用来表示一个迷宫，数组中只包含 <span class=\"number\">0</span> 或 <span class=\"number\">1</span>，其中 <span class=\"number\">0</span> 表示可以走的路，<span class=\"number\">1</span> 表示不可通过的墙壁。</span><br><span class=\"line\">\t最初，有一个人位于左上角 (<span class=\"number\">1</span>,<span class=\"number\">1</span>) 处，已知该人每次可以向上、下、左、右任意一个方向移动一个位置。</span><br><span class=\"line\">\t请问，该人从左上角移动至右下角 (n,m) 处，至少需要移动多少次。</span><br><span class=\"line\">\t数据保证 (<span class=\"number\">1</span>,<span class=\"number\">1</span>) 处和 (n,m) 处的数字为 <span class=\"number\">0</span>，且一定至少存在一条通路。</span><br><span class=\"line\"></span><br><span class=\"line\">输入格式</span><br><span class=\"line\">\t第一行包含两个整数 n 和 m。</span><br><span class=\"line\">\t接下来 n 行，每行包含 m 个整数（<span class=\"number\">0</span> 或 <span class=\"number\">1</span>），表示完整的二维数组迷宫。</span><br><span class=\"line\"></span><br><span class=\"line\">输出格式</span><br><span class=\"line\">\t输出一个整数，表示从左上角移动至右下角的最少移动次数。</span><br><span class=\"line\"></span><br><span class=\"line\">数据范围</span><br><span class=\"line\">\t<span class=\"number\">1</span>≤n,m≤<span class=\"number\">100</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输入样例：</span><br><span class=\"line\">\t<span class=\"number\">5</span> <span class=\"number\">5</span></span><br><span class=\"line\">\t<span class=\"number\">0</span> <span class=\"number\">1</span> <span class=\"number\">0</span> <span class=\"number\">0</span> <span class=\"number\">0</span></span><br><span class=\"line\">\t<span class=\"number\">0</span> <span class=\"number\">1</span> <span class=\"number\">0</span> <span class=\"number\">1</span> <span class=\"number\">0</span></span><br><span class=\"line\">\t<span class=\"number\">0</span> <span class=\"number\">0</span> <span class=\"number\">0</span> <span class=\"number\">0</span> <span class=\"number\">0</span></span><br><span class=\"line\">\t<span class=\"number\">0</span> <span class=\"number\">1</span> <span class=\"number\">1</span> <span class=\"number\">1</span> <span class=\"number\">0</span></span><br><span class=\"line\">\t<span class=\"number\">0</span> <span class=\"number\">0</span> <span class=\"number\">0</span> <span class=\"number\">1</span> <span class=\"number\">0</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输出样例：</span><br><span class=\"line\">\t</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"代码演示\"><a href=\"#代码演示\" class=\"headerlink\" title=\"代码演示\"></a>代码演示</h2><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;cstring&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;algorithm&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;queue&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> std;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">typedef</span> pair&lt;<span class=\"type\">int</span>, <span class=\"type\">int</span>&gt; PII;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">const</span> <span class=\"type\">int</span> N = <span class=\"number\">110</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">int</span> n, m;</span><br><span class=\"line\"><span class=\"type\">int</span> g[N][N], d[N][N];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">bfs</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    queue&lt;PII&gt; q;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"built_in\">memset</span>(d, <span class=\"number\">-1</span>, <span class=\"keyword\">sizeof</span> d);</span><br><span class=\"line\">    d[<span class=\"number\">0</span>][<span class=\"number\">0</span>] = <span class=\"number\">0</span>;</span><br><span class=\"line\">    q.<span class=\"built_in\">push</span>(&#123;<span class=\"number\">0</span>, <span class=\"number\">0</span>&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"type\">int</span> dx[<span class=\"number\">4</span>] = &#123;<span class=\"number\">-1</span>, <span class=\"number\">0</span>, <span class=\"number\">1</span>, <span class=\"number\">0</span>&#125;, dy[<span class=\"number\">4</span>] = &#123;<span class=\"number\">0</span>, <span class=\"number\">1</span>, <span class=\"number\">0</span>, <span class=\"number\">-1</span>&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">while</span> (q.<span class=\"built_in\">size</span>())</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">auto</span> t = q.<span class=\"built_in\">front</span>();</span><br><span class=\"line\">        q.<span class=\"built_in\">pop</span>();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">4</span>; i ++ )</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"type\">int</span> x = t.first + dx[i], y = t.second + dy[i];</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (x &gt;= <span class=\"number\">0</span> &amp;&amp; x &lt; n &amp;&amp; y &gt;= <span class=\"number\">0</span> &amp;&amp; y &lt; m &amp;&amp; g[x][y] == <span class=\"number\">0</span> &amp;&amp; d[x][y] == <span class=\"number\">-1</span>)</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                d[x][y] = d[t.first][t.second] + <span class=\"number\">1</span>;</span><br><span class=\"line\">                q.<span class=\"built_in\">push</span>(&#123;x, y&#125;);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> d[n - <span class=\"number\">1</span>][m - <span class=\"number\">1</span>];</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    cin &gt;&gt; n &gt;&gt; m;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; n; i ++ )</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> j = <span class=\"number\">0</span>; j &lt; m; j ++ )</span><br><span class=\"line\">            cin &gt;&gt; g[i][j];</span><br><span class=\"line\"></span><br><span class=\"line\">    cout &lt;&lt; <span class=\"built_in\">bfs</span>() &lt;&lt; endl;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">作者：yxc</span><br><span class=\"line\">链接：https:<span class=\"comment\">//www.acwing.com/activity/content/code/content/47098/</span></span><br><span class=\"line\">来源：AcWing</span><br><span class=\"line\">著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</span><br></pre></td></tr></table></figure>","site":{"data":{"link":[{"class_name":"友情链接","class_desc":"那些人，那些事","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]},{"class_name":"网站","class_desc":"值得推荐的网站","link_list":[{"name":"Youtube","link":"https://www.youtube.com/","avatar":"https://i.loli.net/2020/05/14/9ZkGg8v3azHJfM1.png","descr":"视频网站"},{"name":"Weibo","link":"https://www.weibo.com/","avatar":"https://i.loli.net/2020/05/14/TLJBum386vcnI1P.png","descr":"中国最大社交分享平台"},{"name":"Twitter","link":"https://twitter.com/","avatar":"https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png","descr":"社交分享平台"}]}]}},"cover":"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7","excerpt":"","more":"<h1 id=\"AcWing-844-走迷宫\"><a href=\"#AcWing-844-走迷宫\" class=\"headerlink\" title=\"AcWing 844. 走迷宫\"></a>AcWing 844. 走迷宫</h1><h3 id=\"题目来源–844-走迷宫\"><a href=\"#题目来源–844-走迷宫\" class=\"headerlink\" title=\"题目来源–844. 走迷宫\"></a>题目来源–<a href=\"https://www.acwing.com/problem/content/846/\" title=\"走迷宫\">844. 走迷宫</a></h3><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">题目描述</span><br><span class=\"line\">\t给定一个 n×m 的二维整数数组，用来表示一个迷宫，数组中只包含 <span class=\"number\">0</span> 或 <span class=\"number\">1</span>，其中 <span class=\"number\">0</span> 表示可以走的路，<span class=\"number\">1</span> 表示不可通过的墙壁。</span><br><span class=\"line\">\t最初，有一个人位于左上角 (<span class=\"number\">1</span>,<span class=\"number\">1</span>) 处，已知该人每次可以向上、下、左、右任意一个方向移动一个位置。</span><br><span class=\"line\">\t请问，该人从左上角移动至右下角 (n,m) 处，至少需要移动多少次。</span><br><span class=\"line\">\t数据保证 (<span class=\"number\">1</span>,<span class=\"number\">1</span>) 处和 (n,m) 处的数字为 <span class=\"number\">0</span>，且一定至少存在一条通路。</span><br><span class=\"line\"></span><br><span class=\"line\">输入格式</span><br><span class=\"line\">\t第一行包含两个整数 n 和 m。</span><br><span class=\"line\">\t接下来 n 行，每行包含 m 个整数（<span class=\"number\">0</span> 或 <span class=\"number\">1</span>），表示完整的二维数组迷宫。</span><br><span class=\"line\"></span><br><span class=\"line\">输出格式</span><br><span class=\"line\">\t输出一个整数，表示从左上角移动至右下角的最少移动次数。</span><br><span class=\"line\"></span><br><span class=\"line\">数据范围</span><br><span class=\"line\">\t<span class=\"number\">1</span>≤n,m≤<span class=\"number\">100</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输入样例：</span><br><span class=\"line\">\t<span class=\"number\">5</span> <span class=\"number\">5</span></span><br><span class=\"line\">\t<span class=\"number\">0</span> <span class=\"number\">1</span> <span class=\"number\">0</span> <span class=\"number\">0</span> <span class=\"number\">0</span></span><br><span class=\"line\">\t<span class=\"number\">0</span> <span class=\"number\">1</span> <span class=\"number\">0</span> <span class=\"number\">1</span> <span class=\"number\">0</span></span><br><span class=\"line\">\t<span class=\"number\">0</span> <span class=\"number\">0</span> <span class=\"number\">0</span> <span class=\"number\">0</span> <span class=\"number\">0</span></span><br><span class=\"line\">\t<span class=\"number\">0</span> <span class=\"number\">1</span> <span class=\"number\">1</span> <span class=\"number\">1</span> <span class=\"number\">0</span></span><br><span class=\"line\">\t<span class=\"number\">0</span> <span class=\"number\">0</span> <span class=\"number\">0</span> <span class=\"number\">1</span> <span class=\"number\">0</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输出样例：</span><br><span class=\"line\">\t</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"代码演示\"><a href=\"#代码演示\" class=\"headerlink\" title=\"代码演示\"></a>代码演示</h2><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;cstring&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;algorithm&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;queue&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> std;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">typedef</span> pair&lt;<span class=\"type\">int</span>, <span class=\"type\">int</span>&gt; PII;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">const</span> <span class=\"type\">int</span> N = <span class=\"number\">110</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">int</span> n, m;</span><br><span class=\"line\"><span class=\"type\">int</span> g[N][N], d[N][N];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">bfs</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    queue&lt;PII&gt; q;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"built_in\">memset</span>(d, <span class=\"number\">-1</span>, <span class=\"keyword\">sizeof</span> d);</span><br><span class=\"line\">    d[<span class=\"number\">0</span>][<span class=\"number\">0</span>] = <span class=\"number\">0</span>;</span><br><span class=\"line\">    q.<span class=\"built_in\">push</span>(&#123;<span class=\"number\">0</span>, <span class=\"number\">0</span>&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"type\">int</span> dx[<span class=\"number\">4</span>] = &#123;<span class=\"number\">-1</span>, <span class=\"number\">0</span>, <span class=\"number\">1</span>, <span class=\"number\">0</span>&#125;, dy[<span class=\"number\">4</span>] = &#123;<span class=\"number\">0</span>, <span class=\"number\">1</span>, <span class=\"number\">0</span>, <span class=\"number\">-1</span>&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">while</span> (q.<span class=\"built_in\">size</span>())</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">auto</span> t = q.<span class=\"built_in\">front</span>();</span><br><span class=\"line\">        q.<span class=\"built_in\">pop</span>();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">4</span>; i ++ )</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"type\">int</span> x = t.first + dx[i], y = t.second + dy[i];</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (x &gt;= <span class=\"number\">0</span> &amp;&amp; x &lt; n &amp;&amp; y &gt;= <span class=\"number\">0</span> &amp;&amp; y &lt; m &amp;&amp; g[x][y] == <span class=\"number\">0</span> &amp;&amp; d[x][y] == <span class=\"number\">-1</span>)</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                d[x][y] = d[t.first][t.second] + <span class=\"number\">1</span>;</span><br><span class=\"line\">                q.<span class=\"built_in\">push</span>(&#123;x, y&#125;);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> d[n - <span class=\"number\">1</span>][m - <span class=\"number\">1</span>];</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    cin &gt;&gt; n &gt;&gt; m;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; n; i ++ )</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> j = <span class=\"number\">0</span>; j &lt; m; j ++ )</span><br><span class=\"line\">            cin &gt;&gt; g[i][j];</span><br><span class=\"line\"></span><br><span class=\"line\">    cout &lt;&lt; <span class=\"built_in\">bfs</span>() &lt;&lt; endl;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">作者：yxc</span><br><span class=\"line\">链接：https:<span class=\"comment\">//www.acwing.com/activity/content/code/content/47098/</span></span><br><span class=\"line\">来源：AcWing</span><br><span class=\"line\">著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</span><br></pre></td></tr></table></figure>"},{"title":"AcWing 838. 堆排序","date":"2022-09-23T03:50:02.630Z","_content":"\n# AcWing 838. 堆排序    \n### 题目来源--[838. 堆排序](https://www.acwing.com/problem/content/840/ \"堆排序\")\n\n``` c++\n题目描述\n\t输入一个长度为 n 的整数数列，从小到大输出前 m 小的数。\n\n输入格式\n\t第一行包含整数 n 和 m。\n\t第二行包含 n 个整数，表示整数数列。\n\n输出格式\n\t共一行，包含 m 个整数，表示整数数列中前 m 小的数。\n\n数据范围\n\t1≤m≤n≤105，\n\t1≤数列中元素≤109\n\t\n输入样例：\n\t5 3\n\t4 5 1 3 2\n\t\n输出样例：\n\t1 2 3\n\t\n```\n\n## 代码演示\n```c++\n#include <iostream>\n#include <algorithm>\n\nusing namespace std;\n\nconst int N = 100010;\n\nint n, m;\nint h[N], cnt;\n\nvoid down(int u)\n{\n    int t = u;\n    if (u * 2 <= cnt && h[u * 2] < h[t]) t = u * 2;\n    if (u * 2 + 1 <= cnt && h[u * 2 + 1] < h[t]) t = u * 2 + 1;\n    if (u != t)\n    {\n        swap(h[u], h[t]);\n        down(t);\n    }\n}\n\nint main()\n{\n    scanf(\"%d%d\", &n, &m);\n    for (int i = 1; i <= n; i ++ ) scanf(\"%d\", &h[i]);\n    cnt = n;\n\n    for (int i = n / 2; i; i -- ) down(i);\n\n    while (m -- )\n    {\n        printf(\"%d \", h[1]);\n        h[1] = h[cnt -- ];\n        down(1);\n    }\n\n    puts(\"\");\n\n    return 0;\n}\n\n作者：yxc\n链接：https://www.acwing.com/activity/content/code/content/45296/\n来源：AcWing\n著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。\n```","source":"_posts/AcWing/算法基础课/2、数据结构/AcWing838堆排序.md","raw":"---\ntitle: AcWing 838. 堆排序      \ndate: \ntags: \n\t- Acwing \n\t- 堆\ncategories: \n\t- [AcWing,算法基础课,2、数据结构]\n---\n\n# AcWing 838. 堆排序    \n### 题目来源--[838. 堆排序](https://www.acwing.com/problem/content/840/ \"堆排序\")\n\n``` c++\n题目描述\n\t输入一个长度为 n 的整数数列，从小到大输出前 m 小的数。\n\n输入格式\n\t第一行包含整数 n 和 m。\n\t第二行包含 n 个整数，表示整数数列。\n\n输出格式\n\t共一行，包含 m 个整数，表示整数数列中前 m 小的数。\n\n数据范围\n\t1≤m≤n≤105，\n\t1≤数列中元素≤109\n\t\n输入样例：\n\t5 3\n\t4 5 1 3 2\n\t\n输出样例：\n\t1 2 3\n\t\n```\n\n## 代码演示\n```c++\n#include <iostream>\n#include <algorithm>\n\nusing namespace std;\n\nconst int N = 100010;\n\nint n, m;\nint h[N], cnt;\n\nvoid down(int u)\n{\n    int t = u;\n    if (u * 2 <= cnt && h[u * 2] < h[t]) t = u * 2;\n    if (u * 2 + 1 <= cnt && h[u * 2 + 1] < h[t]) t = u * 2 + 1;\n    if (u != t)\n    {\n        swap(h[u], h[t]);\n        down(t);\n    }\n}\n\nint main()\n{\n    scanf(\"%d%d\", &n, &m);\n    for (int i = 1; i <= n; i ++ ) scanf(\"%d\", &h[i]);\n    cnt = n;\n\n    for (int i = n / 2; i; i -- ) down(i);\n\n    while (m -- )\n    {\n        printf(\"%d \", h[1]);\n        h[1] = h[cnt -- ];\n        down(1);\n    }\n\n    puts(\"\");\n\n    return 0;\n}\n\n作者：yxc\n链接：https://www.acwing.com/activity/content/code/content/45296/\n来源：AcWing\n著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。\n```","slug":"AcWing/算法基础课/2、数据结构/AcWing838堆排序","published":1,"updated":"2022-09-23T03:50:02.630Z","comments":1,"layout":"post","photos":[],"link":"","_id":"claryuld800645ojr12fudama","content":"<h1 id=\"AcWing-838-堆排序\"><a href=\"#AcWing-838-堆排序\" class=\"headerlink\" title=\"AcWing 838. 堆排序\"></a>AcWing 838. 堆排序</h1><h3 id=\"题目来源–838-堆排序\"><a href=\"#题目来源–838-堆排序\" class=\"headerlink\" title=\"题目来源–838. 堆排序\"></a>题目来源–<a href=\"https://www.acwing.com/problem/content/840/\" title=\"堆排序\">838. 堆排序</a></h3><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">题目描述</span><br><span class=\"line\">\t输入一个长度为 n 的整数数列，从小到大输出前 m 小的数。</span><br><span class=\"line\"></span><br><span class=\"line\">输入格式</span><br><span class=\"line\">\t第一行包含整数 n 和 m。</span><br><span class=\"line\">\t第二行包含 n 个整数，表示整数数列。</span><br><span class=\"line\"></span><br><span class=\"line\">输出格式</span><br><span class=\"line\">\t共一行，包含 m 个整数，表示整数数列中前 m 小的数。</span><br><span class=\"line\"></span><br><span class=\"line\">数据范围</span><br><span class=\"line\">\t<span class=\"number\">1</span>≤m≤n≤<span class=\"number\">105</span>，</span><br><span class=\"line\">\t<span class=\"number\">1</span>≤数列中元素≤<span class=\"number\">109</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输入样例：</span><br><span class=\"line\">\t<span class=\"number\">5</span> <span class=\"number\">3</span></span><br><span class=\"line\">\t<span class=\"number\">4</span> <span class=\"number\">5</span> <span class=\"number\">1</span> <span class=\"number\">3</span> <span class=\"number\">2</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输出样例：</span><br><span class=\"line\">\t<span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span></span><br><span class=\"line\">\t</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"代码演示\"><a href=\"#代码演示\" class=\"headerlink\" title=\"代码演示\"></a>代码演示</h2><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;algorithm&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> std;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">const</span> <span class=\"type\">int</span> N = <span class=\"number\">100010</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">int</span> n, m;</span><br><span class=\"line\"><span class=\"type\">int</span> h[N], cnt;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">down</span><span class=\"params\">(<span class=\"type\">int</span> u)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> t = u;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (u * <span class=\"number\">2</span> &lt;= cnt &amp;&amp; h[u * <span class=\"number\">2</span>] &lt; h[t]) t = u * <span class=\"number\">2</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (u * <span class=\"number\">2</span> + <span class=\"number\">1</span> &lt;= cnt &amp;&amp; h[u * <span class=\"number\">2</span> + <span class=\"number\">1</span>] &lt; h[t]) t = u * <span class=\"number\">2</span> + <span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (u != t)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"built_in\">swap</span>(h[u], h[t]);</span><br><span class=\"line\">        <span class=\"built_in\">down</span>(t);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d%d&quot;</span>, &amp;n, &amp;m);</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">1</span>; i &lt;= n; i ++ ) <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>, &amp;h[i]);</span><br><span class=\"line\">    cnt = n;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = n / <span class=\"number\">2</span>; i; i -- ) <span class=\"built_in\">down</span>(i);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">while</span> (m -- )</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d &quot;</span>, h[<span class=\"number\">1</span>]);</span><br><span class=\"line\">        h[<span class=\"number\">1</span>] = h[cnt -- ];</span><br><span class=\"line\">        <span class=\"built_in\">down</span>(<span class=\"number\">1</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"built_in\">puts</span>(<span class=\"string\">&quot;&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">作者：yxc</span><br><span class=\"line\">链接：https:<span class=\"comment\">//www.acwing.com/activity/content/code/content/45296/</span></span><br><span class=\"line\">来源：AcWing</span><br><span class=\"line\">著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</span><br></pre></td></tr></table></figure>","site":{"data":{"link":[{"class_name":"友情链接","class_desc":"那些人，那些事","link_list":[{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]},{"class_name":"网站","class_desc":"值得推荐的网站","link_list":[{"name":"Youtube","link":"https://www.youtube.com/","avatar":"https://i.loli.net/2020/05/14/9ZkGg8v3azHJfM1.png","descr":"视频网站"},{"name":"Weibo","link":"https://www.weibo.com/","avatar":"https://i.loli.net/2020/05/14/TLJBum386vcnI1P.png","descr":"中国最大社交分享平台"},{"name":"Twitter","link":"https://twitter.com/","avatar":"https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png","descr":"社交分享平台"}]}]}},"cover":"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7","excerpt":"","more":"<h1 id=\"AcWing-838-堆排序\"><a href=\"#AcWing-838-堆排序\" class=\"headerlink\" title=\"AcWing 838. 堆排序\"></a>AcWing 838. 堆排序</h1><h3 id=\"题目来源–838-堆排序\"><a href=\"#题目来源–838-堆排序\" class=\"headerlink\" title=\"题目来源–838. 堆排序\"></a>题目来源–<a href=\"https://www.acwing.com/problem/content/840/\" title=\"堆排序\">838. 堆排序</a></h3><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">题目描述</span><br><span class=\"line\">\t输入一个长度为 n 的整数数列，从小到大输出前 m 小的数。</span><br><span class=\"line\"></span><br><span class=\"line\">输入格式</span><br><span class=\"line\">\t第一行包含整数 n 和 m。</span><br><span class=\"line\">\t第二行包含 n 个整数，表示整数数列。</span><br><span class=\"line\"></span><br><span class=\"line\">输出格式</span><br><span class=\"line\">\t共一行，包含 m 个整数，表示整数数列中前 m 小的数。</span><br><span class=\"line\"></span><br><span class=\"line\">数据范围</span><br><span class=\"line\">\t<span class=\"number\">1</span>≤m≤n≤<span class=\"number\">105</span>，</span><br><span class=\"line\">\t<span class=\"number\">1</span>≤数列中元素≤<span class=\"number\">109</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输入样例：</span><br><span class=\"line\">\t<span class=\"number\">5</span> <span class=\"number\">3</span></span><br><span class=\"line\">\t<span class=\"number\">4</span> <span class=\"number\">5</span> <span class=\"number\">1</span> <span class=\"number\">3</span> <span class=\"number\">2</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">输出样例：</span><br><span class=\"line\">\t<span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span></span><br><span class=\"line\">\t</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"代码演示\"><a href=\"#代码演示\" class=\"headerlink\" title=\"代码演示\"></a>代码演示</h2><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;algorithm&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> std;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">const</span> <span class=\"type\">int</span> N = <span class=\"number\">100010</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">int</span> n, m;</span><br><span class=\"line\"><span class=\"type\">int</span> h[N], cnt;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">down</span><span class=\"params\">(<span class=\"type\">int</span> u)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> t = u;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (u * <span class=\"number\">2</span> &lt;= cnt &amp;&amp; h[u * <span class=\"number\">2</span>] &lt; h[t]) t = u * <span class=\"number\">2</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (u * <span class=\"number\">2</span> + <span class=\"number\">1</span> &lt;= cnt &amp;&amp; h[u * <span class=\"number\">2</span> + <span class=\"number\">1</span>] &lt; h[t]) t = u * <span class=\"number\">2</span> + <span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (u != t)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"built_in\">swap</span>(h[u], h[t]);</span><br><span class=\"line\">        <span class=\"built_in\">down</span>(t);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d%d&quot;</span>, &amp;n, &amp;m);</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">1</span>; i &lt;= n; i ++ ) <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>, &amp;h[i]);</span><br><span class=\"line\">    cnt = n;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = n / <span class=\"number\">2</span>; i; i -- ) <span class=\"built_in\">down</span>(i);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">while</span> (m -- )</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d &quot;</span>, h[<span class=\"number\">1</span>]);</span><br><span class=\"line\">        h[<span class=\"number\">1</span>] = h[cnt -- ];</span><br><span class=\"line\">        <span class=\"built_in\">down</span>(<span class=\"number\">1</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"built_in\">puts</span>(<span class=\"string\">&quot;&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">作者：yxc</span><br><span class=\"line\">链接：https:<span class=\"comment\">//www.acwing.com/activity/content/code/content/45296/</span></span><br><span class=\"line\">来源：AcWing</span><br><span class=\"line\">著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</span><br></pre></td></tr></table></figure>"}],"PostAsset":[],"PostCategory":[{"post_id":"claryulc000015ojrfff0anmx","category_id":"claryulc600075ojrfzv037xc","_id":"claryulca000i5ojr0xds5qvf"},{"post_id":"claryulc300035ojrcjvbd62t","category_id":"claryulc8000b5ojr8ky3f8u8","_id":"claryulcc000o5ojrepgpbgwz"},{"post_id":"claryulc500065ojr52yx6xnv","category_id":"claryulc9000g5ojr1x5q1ke1","_id":"claryulcd000u5ojrgfmb59va"},{"post_id":"claryulc8000d5ojrhcmgdg5x","category_id":"claryulcb000m5ojre7w2hzzw","_id":"claryulcg000z5ojr8lxih7j6"},{"post_id":"claryulc8000e5ojr9vsvbcof","category_id":"claryulcd000t5ojr05nn7pin","_id":"claryulci00175ojr2y0p4qxl"},{"post_id":"claryulc9000h5ojrb3ee9uvb","category_id":"claryulcg000y5ojr9hqhdwgo","_id":"claryulck001d5ojr6hxy9c3s"},{"post_id":"claryulch00165ojr9ozh6x4j","category_id":"claryulch00155ojr45k865sh","_id":"claryulcv00325ojr45pt7ggm"},{"post_id":"claryulch00165ojr9ozh6x4j","category_id":"claryulco001v5ojr1bzjcmck","_id":"claryulcv00345ojrahwnbfm5"},{"post_id":"claryulch00165ojr9ozh6x4j","category_id":"claryulct002r5ojrc7h42vfp","_id":"claryulcv00385ojrb413cf3l"},{"post_id":"claryulca000k5ojrgrv058g5","category_id":"claryulch00155ojr45k865sh","_id":"claryulcv003a5ojr9xcjdlmt"},{"post_id":"claryulca000k5ojrgrv058g5","category_id":"claryulco001v5ojr1bzjcmck","_id":"claryulcw003e5ojr7bb07sld"},{"post_id":"claryulca000k5ojrgrv058g5","category_id":"claryulcu002w5ojr84ukci00","_id":"claryulcw003g5ojr4uz256vl"},{"post_id":"claryulci00195ojr999n8hy6","category_id":"claryulch00155ojr45k865sh","_id":"claryulcx003k5ojrhu645gy9"},{"post_id":"claryulci00195ojr999n8hy6","category_id":"claryulco001v5ojr1bzjcmck","_id":"claryulcx003m5ojr4z0k3tqz"},{"post_id":"claryulci00195ojr999n8hy6","category_id":"claryulct002r5ojrc7h42vfp","_id":"claryulcx003q5ojr3c5b1n9k"},{"post_id":"claryulcj001c5ojr1l2ib1jq","category_id":"claryulch00155ojr45k865sh","_id":"claryulcx003s5ojr522cf8g2"},{"post_id":"claryulcj001c5ojr1l2ib1jq","category_id":"claryulco001v5ojr1bzjcmck","_id":"claryulcy003w5ojre6bm2v9c"},{"post_id":"claryulcj001c5ojr1l2ib1jq","category_id":"claryulct002r5ojrc7h42vfp","_id":"claryulcy003y5ojrefvg60s6"},{"post_id":"claryulcb000n5ojr5fmq5bti","category_id":"claryulch00155ojr45k865sh","_id":"claryulcy00415ojr2y55cfp5"},{"post_id":"claryulcb000n5ojr5fmq5bti","category_id":"claryulco001v5ojr1bzjcmck","_id":"claryulcy00445ojrh91d9ymr"},{"post_id":"claryulcb000n5ojr5fmq5bti","category_id":"claryulct002r5ojrc7h42vfp","_id":"claryulcz00475ojr6tn4ctle"},{"post_id":"claryulck001f5ojrcm15brd5","category_id":"claryulch00155ojr45k865sh","_id":"claryulcz004a5ojrepkbfcid"},{"post_id":"claryulck001f5ojrcm15brd5","category_id":"claryulco001v5ojr1bzjcmck","_id":"claryulcz004c5ojr2aa55ep5"},{"post_id":"claryulck001f5ojrcm15brd5","category_id":"claryulct002r5ojrc7h42vfp","_id":"claryuld0004e5ojr1kymcwrb"},{"post_id":"claryulcl001i5ojr8imm86fz","category_id":"claryulch00155ojr45k865sh","_id":"claryuld0004h5ojrdyva4eut"},{"post_id":"claryulcl001i5ojr8imm86fz","category_id":"claryulco001v5ojr1bzjcmck","_id":"claryuld0004k5ojr05azg1w7"},{"post_id":"claryulcl001i5ojr8imm86fz","category_id":"claryulct002r5ojrc7h42vfp","_id":"claryuld0004m5ojr9foyhm35"},{"post_id":"claryulcc000q5ojr25yuhw07","category_id":"claryulch00155ojr45k865sh","_id":"claryuld1004o5ojrbrdxgn5h"},{"post_id":"claryulcc000q5ojr25yuhw07","category_id":"claryulco001v5ojr1bzjcmck","_id":"claryuld1004r5ojrb8b89xn6"},{"post_id":"claryulcc000q5ojr25yuhw07","category_id":"claryulct002r5ojrc7h42vfp","_id":"claryuld1004u5ojr7icz6uzt"},{"post_id":"claryulcm001k5ojr0a2i7y3i","category_id":"claryulch00155ojr45k865sh","_id":"claryuld2004v5ojrfhdc9yl1"},{"post_id":"claryulcm001k5ojr0a2i7y3i","category_id":"claryulco001v5ojr1bzjcmck","_id":"claryuld2004x5ojr4bmgd4b8"},{"post_id":"claryulcm001k5ojr0a2i7y3i","category_id":"claryulct002r5ojrc7h42vfp","_id":"claryuld2004z5ojrbxym34y4"},{"post_id":"claryulcd000s5ojr3hls3eds","category_id":"claryulch00155ojr45k865sh","_id":"claryuld200525ojr1q012sf5"},{"post_id":"claryulcd000s5ojr3hls3eds","category_id":"claryulco001v5ojr1bzjcmck","_id":"claryuld200535ojrfrlsf490"},{"post_id":"claryulcd000s5ojr3hls3eds","category_id":"claryulct002r5ojrc7h42vfp","_id":"claryuld200545ojr4hg122wn"},{"post_id":"claryulcd000v5ojrc5r6fitw","category_id":"claryulch00155ojr45k865sh","_id":"claryuld200575ojr5ocberwl"},{"post_id":"claryulcd000v5ojrc5r6fitw","category_id":"claryulco001v5ojr1bzjcmck","_id":"claryuld200595ojr7lwdaw86"},{"post_id":"claryulcd000v5ojrc5r6fitw","category_id":"claryulct002r5ojrc7h42vfp","_id":"claryuld3005b5ojr3q3h8qpr"},{"post_id":"claryulce000w5ojr19wb2rg1","category_id":"claryulch00155ojr45k865sh","_id":"claryuld3005c5ojrgyva95td"},{"post_id":"claryulce000w5ojr19wb2rg1","category_id":"claryulco001v5ojr1bzjcmck","_id":"claryuld3005e5ojr23044tsp"},{"post_id":"claryulce000w5ojr19wb2rg1","category_id":"claryulct002r5ojrc7h42vfp","_id":"claryuld3005g5ojrdj214i64"},{"post_id":"claryulcg00115ojr6b4ua7is","category_id":"claryulch00155ojr45k865sh","_id":"claryuld3005j5ojrcr5v5nwt"},{"post_id":"claryulcg00115ojr6b4ua7is","category_id":"claryulco001v5ojr1bzjcmck","_id":"claryuld3005k5ojrg5f13pd9"},{"post_id":"claryulcg00115ojr6b4ua7is","category_id":"claryulct002r5ojrc7h42vfp","_id":"claryuld3005m5ojr4tyy265q"},{"post_id":"claryulch00135ojrgo2ncfv2","category_id":"claryulch00155ojr45k865sh","_id":"claryuld3005o5ojr2omtf3rp"},{"post_id":"claryulch00135ojrgo2ncfv2","category_id":"claryulco001v5ojr1bzjcmck","_id":"claryuld4005r5ojr7ltsayxz"},{"post_id":"claryulch00135ojrgo2ncfv2","category_id":"claryulct002r5ojrc7h42vfp","_id":"claryuld4005s5ojr5iqdbaur"},{"post_id":"claryuld7005z5ojr2zwd72xk","category_id":"claryulch00155ojr45k865sh","_id":"claryuld900675ojrelb15sgb"},{"post_id":"claryuld7005z5ojr2zwd72xk","category_id":"claryulco001v5ojr1bzjcmck","_id":"claryuld900695ojr8ff37pvj"},{"post_id":"claryuld7005z5ojr2zwd72xk","category_id":"claryulct002r5ojrc7h42vfp","_id":"claryuld9006b5ojr9xd6h62h"},{"post_id":"claryuld700605ojra6nf3vab","category_id":"claryulch00155ojr45k865sh","_id":"claryuld9006d5ojrelm256cr"},{"post_id":"claryuld700605ojra6nf3vab","category_id":"claryulco001v5ojr1bzjcmck","_id":"claryuld9006f5ojrgpmg56xa"},{"post_id":"claryuld700605ojra6nf3vab","category_id":"claryulct002r5ojrc7h42vfp","_id":"claryuld9006h5ojr7cm0cc1n"},{"post_id":"claryuld800625ojr9tsl0inv","category_id":"claryulch00155ojr45k865sh","_id":"claryuld9006i5ojrg9am9qio"},{"post_id":"claryuld800625ojr9tsl0inv","category_id":"claryulco001v5ojr1bzjcmck","_id":"claryuld9006j5ojren368shf"},{"post_id":"claryuld800625ojr9tsl0inv","category_id":"claryulct002r5ojrc7h42vfp","_id":"claryuld9006k5ojr24th28in"},{"post_id":"claryuld800645ojr12fudama","category_id":"claryulch00155ojr45k865sh","_id":"claryuld9006l5ojr0r5r677x"},{"post_id":"claryuld800645ojr12fudama","category_id":"claryulco001v5ojr1bzjcmck","_id":"claryuld9006m5ojr56r46b57"},{"post_id":"claryuld800645ojr12fudama","category_id":"claryulct002r5ojrc7h42vfp","_id":"claryuld9006n5ojr8lgmc8es"}],"PostTag":[{"post_id":"claryulc000015ojrfff0anmx","tag_id":"claryulc400045ojrhi383e8p","_id":"claryulc8000c5ojr2t0l11iy"},{"post_id":"claryulc300035ojrcjvbd62t","tag_id":"claryulc7000a5ojrgxot2n6g","_id":"claryulca000j5ojr825i6cr4"},{"post_id":"claryulc500065ojr52yx6xnv","tag_id":"claryulc9000f5ojr11rq730u","_id":"claryulcc000p5ojr8gfpejsn"},{"post_id":"claryulc600085ojra53v3ifg","tag_id":"claryulcb000l5ojr0sjm3vmg","_id":"claryulcg00105ojr4n092c8c"},{"post_id":"claryulc600085ojra53v3ifg","tag_id":"claryulcd000r5ojr1ar3em2m","_id":"claryulch00125ojr9afqh4xc"},{"post_id":"claryulc700095ojrcra48ofj","tag_id":"claryulce000x5ojr5z0483fi","_id":"claryulci00185ojrcov6f5zc"},{"post_id":"claryulc8000d5ojrhcmgdg5x","tag_id":"claryulch00145ojr4cl7g9ca","_id":"claryulck001e5ojrd01rdlii"},{"post_id":"claryulc8000e5ojr9vsvbcof","tag_id":"claryulci001a5ojr80p8gcl4","_id":"claryulcm001j5ojrc7kg6aol"},{"post_id":"claryulc9000h5ojrb3ee9uvb","tag_id":"claryulcl001h5ojrhnl3dtxt","_id":"claryulcs002h5ojrbgtycpgy"},{"post_id":"claryulc9000h5ojrb3ee9uvb","tag_id":"claryulcm001m5ojr91fdg2nc","_id":"claryulcs002i5ojr4c2mahaa"},{"post_id":"claryulc9000h5ojrb3ee9uvb","tag_id":"claryulcn001o5ojr7mq9aywr","_id":"claryulct002l5ojr47qk39ar"},{"post_id":"claryulc9000h5ojrb3ee9uvb","tag_id":"claryulcn001q5ojr8ve18cz5","_id":"claryulct002m5ojrgxxlabil"},{"post_id":"claryulc9000h5ojrb3ee9uvb","tag_id":"claryulco001s5ojrblaq4aus","_id":"claryulct002p5ojr7s8g8z3i"},{"post_id":"claryulc9000h5ojrb3ee9uvb","tag_id":"claryulco001u5ojr29x4c906","_id":"claryulct002q5ojr6owsgebf"},{"post_id":"claryulc9000h5ojrb3ee9uvb","tag_id":"claryulco001w5ojrd62k9ohs","_id":"claryulcu002t5ojrbsky2asc"},{"post_id":"claryulc9000h5ojrb3ee9uvb","tag_id":"claryulcp001y5ojr6jvpebox","_id":"claryulcu002u5ojrhypycv1f"},{"post_id":"claryulc9000h5ojrb3ee9uvb","tag_id":"claryulcp00205ojr43r09y89","_id":"claryulcu002x5ojrgzvt4mhl"},{"post_id":"claryulc9000h5ojrb3ee9uvb","tag_id":"claryulcp00235ojrfmtj1evx","_id":"claryulcu002y5ojr8p9zhdgl"},{"post_id":"claryulc9000h5ojrb3ee9uvb","tag_id":"claryulcq00255ojr3ktgahb0","_id":"claryulcu00305ojrg2106ah2"},{"post_id":"claryulc9000h5ojrb3ee9uvb","tag_id":"claryulcq00275ojr72ep65ek","_id":"claryulcv00335ojr4f1a5isd"},{"post_id":"claryulc9000h5ojrb3ee9uvb","tag_id":"claryulcr00295ojrdzs5eir2","_id":"claryulcv00365ojr6w82eklj"},{"post_id":"claryulc9000h5ojrb3ee9uvb","tag_id":"claryulcr002b5ojr5zol8lad","_id":"claryulcv00395ojr3iy5gduj"},{"post_id":"claryulc9000h5ojrb3ee9uvb","tag_id":"claryulcr002d5ojr6a1qb08d","_id":"claryulcw003b5ojr3iszff7l"},{"post_id":"claryulca000k5ojrgrv058g5","tag_id":"claryulcs002f5ojr2c1n1s4l","_id":"claryulcw003f5ojr2g16gfdi"},{"post_id":"claryulcb000n5ojr5fmq5bti","tag_id":"claryulcs002f5ojr2c1n1s4l","_id":"claryulcw003h5ojr3zko47wz"},{"post_id":"claryulcb000n5ojr5fmq5bti","tag_id":"claryulct002n5ojrhja807kf","_id":"claryulcx003l5ojrgxcd1ydo"},{"post_id":"claryulcc000q5ojr25yuhw07","tag_id":"claryulcs002f5ojr2c1n1s4l","_id":"claryulcx003n5ojrf2i89ptr"},{"post_id":"claryulcc000q5ojr25yuhw07","tag_id":"claryulcu002v5ojr7sjt7ysp","_id":"claryulcx003r5ojrdzqlgghz"},{"post_id":"claryulcd000s5ojr3hls3eds","tag_id":"claryulcs002f5ojr2c1n1s4l","_id":"claryulcx003t5ojr7kmvecyb"},{"post_id":"claryulcd000s5ojr3hls3eds","tag_id":"claryulcv00355ojr8u4i4noq","_id":"claryulcy003x5ojr9ajg81mt"},{"post_id":"claryulcd000v5ojrc5r6fitw","tag_id":"claryulcs002f5ojr2c1n1s4l","_id":"claryulcy003z5ojr21kzd3nc"},{"post_id":"claryulcd000v5ojrc5r6fitw","tag_id":"claryulcw003j5ojrgqv9a5fx","_id":"claryulcy00435ojr9gaqahj7"},{"post_id":"claryulce000w5ojr19wb2rg1","tag_id":"claryulcs002f5ojr2c1n1s4l","_id":"claryulcz00455ojrd425bwg3"},{"post_id":"claryulce000w5ojr19wb2rg1","tag_id":"claryulcx003v5ojr8ubyh5l1","_id":"claryulcz00495ojrcvxe0ux6"},{"post_id":"claryulcg00115ojr6b4ua7is","tag_id":"claryulcs002f5ojr2c1n1s4l","_id":"claryuld0004f5ojr8ujnghxf"},{"post_id":"claryulcg00115ojr6b4ua7is","tag_id":"claryulcz00485ojrh29ig51m","_id":"claryuld0004i5ojr59mp9ds4"},{"post_id":"claryulch00135ojrgo2ncfv2","tag_id":"claryulcs002f5ojr2c1n1s4l","_id":"claryuld1004p5ojr8m70a0wl"},{"post_id":"claryulch00135ojrgo2ncfv2","tag_id":"claryuld0004j5ojrdwjd0uk2","_id":"claryuld1004s5ojr2s7jg1he"},{"post_id":"claryulch00165ojr9ozh6x4j","tag_id":"claryulcs002f5ojr2c1n1s4l","_id":"claryuld2004y5ojr2slhavu8"},{"post_id":"claryulch00165ojr9ozh6x4j","tag_id":"claryuld1004t5ojreqfo99oj","_id":"claryuld200505ojret9i345y"},{"post_id":"claryulci00195ojr999n8hy6","tag_id":"claryulcs002f5ojr2c1n1s4l","_id":"claryuld200565ojr81wo5xzo"},{"post_id":"claryulci00195ojr999n8hy6","tag_id":"claryuld200515ojr3j6g57j6","_id":"claryuld200585ojrbh3u0qm1"},{"post_id":"claryulcj001c5ojr1l2ib1jq","tag_id":"claryulcs002f5ojr2c1n1s4l","_id":"claryuld3005f5ojr70p83208"},{"post_id":"claryulcj001c5ojr1l2ib1jq","tag_id":"claryuld2005a5ojrfle88dcp","_id":"claryuld3005h5ojr9ofvbrsu"},{"post_id":"claryulck001f5ojrcm15brd5","tag_id":"claryulcs002f5ojr2c1n1s4l","_id":"claryuld3005n5ojr7904fcfe"},{"post_id":"claryulck001f5ojrcm15brd5","tag_id":"claryuld3005i5ojrgzte0n5z","_id":"claryuld4005p5ojr474770qq"},{"post_id":"claryulcl001i5ojr8imm86fz","tag_id":"claryulcs002f5ojr2c1n1s4l","_id":"claryuld4005u5ojrguou3aqh"},{"post_id":"claryulcl001i5ojr8imm86fz","tag_id":"claryuld4005q5ojr16opdp2h","_id":"claryuld4005v5ojr5g0c4xf0"},{"post_id":"claryulcm001k5ojr0a2i7y3i","tag_id":"claryulcs002f5ojr2c1n1s4l","_id":"claryuld4005x5ojreqa10uq3"},{"post_id":"claryulcm001k5ojr0a2i7y3i","tag_id":"claryuld4005q5ojr16opdp2h","_id":"claryuld4005y5ojrekoo11lh"},{"post_id":"claryuld7005z5ojr2zwd72xk","tag_id":"claryulcs002f5ojr2c1n1s4l","_id":"claryuld700615ojrd4q0dand"},{"post_id":"claryuld7005z5ojr2zwd72xk","tag_id":"claryuld3005i5ojrgzte0n5z","_id":"claryuld800635ojr6hku2fou"},{"post_id":"claryuld700605ojra6nf3vab","tag_id":"claryulcs002f5ojr2c1n1s4l","_id":"claryuld800665ojr40b0avsc"},{"post_id":"claryuld700605ojra6nf3vab","tag_id":"claryuld200515ojr3j6g57j6","_id":"claryuld900685ojrhqm6a7cw"},{"post_id":"claryuld800645ojr12fudama","tag_id":"claryulcs002f5ojr2c1n1s4l","_id":"claryuld9006a5ojr1yl98bxy"},{"post_id":"claryuld800645ojr12fudama","tag_id":"claryuld2005a5ojrfle88dcp","_id":"claryuld9006c5ojrbqya97od"},{"post_id":"claryuld800625ojr9tsl0inv","tag_id":"claryulcs002f5ojr2c1n1s4l","_id":"claryuld9006e5ojr8p7ghw33"},{"post_id":"claryuld800625ojr9tsl0inv","tag_id":"claryuld800655ojrdjzcbkcf","_id":"claryuld9006g5ojrbuq620nt"}],"Tag":[{"name":"Linux","_id":"claryulc400045ojrhi383e8p"},{"name":"Git","_id":"claryulc7000a5ojrgxot2n6g"},{"name":"Maven","_id":"claryulc9000f5ojr11rq730u"},{"name":"Mybatis","_id":"claryulcb000l5ojr0sjm3vmg"},{"name":"Mybatis-Plus","_id":"claryulcd000r5ojr1ar3em2m"},{"name":"SSM","_id":"claryulce000x5ojr5z0483fi"},{"name":"Mysql","_id":"claryulch00145ojr4cl7g9ca"},{"name":"数据结构","_id":"claryulci001a5ojr80p8gcl4"},{"name":"SpringCloud","_id":"claryulcl001h5ojrhnl3dtxt"},{"name":"Eureka","_id":"claryulcm001m5ojr91fdg2nc"},{"name":"Nacos","_id":"claryulcn001o5ojr7mq9aywr"},{"name":"Feign","_id":"claryulcn001q5ojr8ve18cz5"},{"name":"Gateway","_id":"claryulco001s5ojrblaq4aus"},{"name":"Docker","_id":"claryulco001u5ojr29x4c906"},{"name":"MQ","_id":"claryulco001w5ojrd62k9ohs"},{"name":"RabbitMQ","_id":"claryulcp001y5ojr6jvpebox"},{"name":"SpringAMQP","_id":"claryulcp00205ojr43r09y89"},{"name":"ES","_id":"claryulcp00235ojrfmtj1evx"},{"name":"RestClient","_id":"claryulcq00255ojr3ktgahb0"},{"name":"DSL","_id":"claryulcq00275ojr72ep65ek"},{"name":"Seata","_id":"claryulcr00295ojrdzs5eir2"},{"name":"Redis","_id":"claryulcr002b5ojr5zol8lad"},{"name":"Sentinel","_id":"claryulcr002d5ojr6a1qb08d"},{"name":"Acwing","_id":"claryulcs002f5ojr2c1n1s4l"},{"name":"双链表","_id":"claryulct002n5ojrhja807kf"},{"name":"栈","_id":"claryulcu002v5ojr7sjt7ysp"},{"name":"单链表","_id":"claryulcv00355ojr8u4i4noq"},{"name":"单调队列","_id":"claryulcw003j5ojrgqv9a5fx"},{"name":"队列","_id":"claryulcx003v5ojr8ubyh5l1"},{"name":"单调栈","_id":"claryulcz00485ojrh29ig51m"},{"name":"KMP","_id":"claryuld0004j5ojrdwjd0uk2"},{"name":"Trie","_id":"claryuld1004t5ojreqfo99oj"},{"name":"并查集","_id":"claryuld200515ojr3j6g57j6"},{"name":"堆","_id":"claryuld2005a5ojrfle88dcp"},{"name":"哈希表","_id":"claryuld3005i5ojrgzte0n5z"},{"name":"DFS","_id":"claryuld4005q5ojr16opdp2h"},{"name":"BFS","_id":"claryuld800655ojrdjzcbkcf"}]}}